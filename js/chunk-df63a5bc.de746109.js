(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-df63a5bc"],{"0010":function(t,e,n){"use strict";n.d(e,"a",(function(){return R})),n.d(e,"b",(function(){return E})),n.d(e,"c",(function(){return g})),n.d(e,"d",(function(){return d})),n.d(e,"e",(function(){return O})),n.d(e,"f",(function(){return M})),n.d(e,"g",(function(){return C}));var r=n("0ac0"),o=n("304a"),i=n("5313");function s(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function a(t,e,n){var o=t.selection,s=o.$cursor;if(!s||(n?!n.endOfTextblock("backward",t):s.parentOffset>0))return!1;var a=u(s);if(!a){var l=s.blockRange(),p=l&&Object(r["j"])(l);return null!=p&&(e&&e(t.tr.lift(l,p).scrollIntoView()),!0)}var f=a.nodeBefore;if(!f.type.spec.isolating&&k(t,a,e))return!0;if(0==s.parent.content.size&&(c(f,"end")||i["NodeSelection"].isSelectable(f))){if(e){var h=t.tr.deleteRange(s.before(),s.after());h.setSelection(c(f,"end")?i["Selection"].findFrom(h.doc.resolve(h.mapping.map(a.pos,-1)),-1):i["NodeSelection"].create(h.doc,a.pos-f.nodeSize)),e(h.scrollIntoView())}return!0}return!(!f.isAtom||a.depth!=s.depth-1)&&(e&&e(t.tr.delete(a.pos-f.nodeSize,a.pos).scrollIntoView()),!0)}function c(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function l(t,e,n){var r=t.selection,o=r.$head,s=r.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;a=u(o)}var c=a&&a.nodeBefore;return!(!c||!i["NodeSelection"].isSelectable(c))&&(e&&e(t.tr.setSelection(i["NodeSelection"].create(t.doc,a.pos-c.nodeSize)).scrollIntoView()),!0)}function u(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function p(t,e,n){var r=t.selection,o=r.$cursor;if(!o||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;var s=h(o);if(!s)return!1;var a=s.nodeAfter;if(k(t,s,e))return!0;if(0==o.parent.content.size&&(c(a,"start")||i["NodeSelection"].isSelectable(a))){if(e){var l=t.tr.deleteRange(o.before(),o.after());l.setSelection(c(a,"start")?i["Selection"].findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):i["NodeSelection"].create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}return!(!a.isAtom||s.depth!=o.depth-1)&&(e&&e(t.tr.delete(s.pos,s.pos+a.nodeSize).scrollIntoView()),!0)}function f(t,e,n){var r=t.selection,o=r.$head,s=r.empty,a=o;if(!s)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;a=h(o)}var c=a&&a.nodeAfter;return!(!c||!i["NodeSelection"].isSelectable(c))&&(e&&e(t.tr.setSelection(i["NodeSelection"].create(t.doc,a.pos)).scrollIntoView()),!0)}function h(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function d(t,e){var n=t.selection,o=n.$from,i=n.$to,s=o.blockRange(i),a=s&&Object(r["j"])(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function m(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function v(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e),r=n.type;if(r.isTextblock&&!r.hasRequiredAttrs())return r}return null}function g(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var s=r.node(-1),a=r.indexAfter(-1),c=v(s.contentMatchAt(a));if(!s.canReplaceWith(a,a,c))return!1;if(e){var l=r.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(i["Selection"].near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0}function y(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var s=v(r.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){var a=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(i["TextSelection"].create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function b(t,e){var n=t.selection,o=n.$cursor;if(!o||o.parent.content.size)return!1;if(o.depth>1&&o.after()!=o.end(-1)){var i=o.before();if(Object(r["f"])(t.doc,i))return e&&e(t.tr.split(i).scrollIntoView()),!0}var s=o.blockRange(),a=s&&Object(r["j"])(s);return null!=a&&(e&&e(t.tr.lift(s,a).scrollIntoView()),!0)}function w(t,e){var n=t.selection,s=n.$from,a=n.$to;if(t.selection instanceof i["NodeSelection"]&&t.selection.node.isBlock)return!(!s.parentOffset||!Object(r["f"])(t.doc,s.pos))&&(e&&e(t.tr.split(s.pos).scrollIntoView()),!0);if(!s.parent.isBlock)return!1;if(e){var c=a.parentOffset==a.parent.content.size,l=t.tr;t.selection instanceof i["TextSelection"]&&l.deleteSelection();var u=0==s.depth?null:v(s.node(-1).contentMatchAt(s.indexAfter(-1))),p=c&&u?[{type:u}]:null,f=Object(r["f"])(l.doc,l.mapping.map(s.pos),1,p);p||f||!Object(r["f"])(l.doc,l.mapping.map(s.pos),1,u&&[{type:u}])||(p=[{type:u}],f=!0),f&&(l.split(l.mapping.map(s.pos),1,p),c||s.parentOffset||s.parent.type==u||!s.node(-1).canReplace(s.index(-1),s.indexAfter(-1),o["Fragment"].from(u.create(),s.parent))||l.setNodeMarkup(l.mapping.map(s.before()),u)),e(l.scrollIntoView())}return!0}function x(t,e){return e&&e(t.tr.setSelection(new i["AllSelection"](t.doc))),!0}function S(t,e,n){var o=e.nodeBefore,i=e.nodeAfter,s=e.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-o.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(s,s+1)||!i.isTextblock&&!Object(r["e"])(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,o.type,o.contentMatchAt(o.childCount)).join(e.pos).scrollIntoView()),!0))}function k(t,e,n){var s,a,c=e.nodeBefore,l=e.nodeAfter;if(c.type.spec.isolating||l.type.spec.isolating)return!1;if(S(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(s=(a=c.contentMatchAt(c.childCount)).findWrapping(l.type))&&a.matchType(s[0]||l.type).validEnd){if(n){for(var u=e.pos+l.nodeSize,p=o["Fragment"].empty,f=s.length-1;f>=0;f--)p=o["Fragment"].from(s[f].create(null,p));p=o["Fragment"].from(c.copy(p));var h=t.tr.step(new r["b"](e.pos-1,u,e.pos,u,new o["Slice"](p,1,0),s.length,!0)),d=u+2*s.length;Object(r["e"])(h.doc,d)&&h.join(d),n(h.scrollIntoView())}return!0}var m=i["Selection"].findFrom(e,1),v=m&&m.$from.blockRange(m.$to),g=v&&Object(r["j"])(v);return null!=g&&g>=e.depth&&(n&&n(t.tr.lift(v,g).scrollIntoView()),!0)}function C(t,e){return function(n,o){var i=n.selection,s=i.$from,a=i.$to,c=s.blockRange(a),l=c&&Object(r["h"])(c,t,e);return!!l&&(o&&o(n.tr.wrap(c,l).scrollIntoView()),!0)}}function O(t,e){return function(n,r){var o=n.selection,i=o.from,s=o.to,a=!1;return n.doc.nodesBetween(i,s,(function(r,o){if(a)return!1;if(r.isTextblock&&!r.hasMarkup(t,e))if(r.type==t)a=!0;else{var i=n.doc.resolve(o),s=i.index();a=i.parent.canReplaceWith(s,s+1,t)}})),!!a&&(r&&r(n.tr.setBlockType(i,s,t,e).scrollIntoView()),!0)}}function _(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0==i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){if(a)return!1;a=t.inlineContent&&t.type.allowsMarkType(n)})),a)return{v:!0}},o=0;o<e.length;o++){var i=r(o);if(i)return i.v}return!1}function M(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.$cursor,a=o.ranges;if(i&&!s||!_(n.doc,a,t))return!1;if(r)if(s)t.isInSet(n.storedMarks||s.marks())?r(n.tr.removeStoredMark(t)):r(n.tr.addStoredMark(t.create(e)));else{for(var c=!1,l=n.tr,u=0;!c&&u<a.length;u++){var p=a[u],f=p.$from,h=p.$to;c=n.doc.rangeHasMark(f.pos,h.pos,t)}for(var d=0;d<a.length;d++){var m=a[d],v=m.$from,g=m.$to;c?l.removeMark(v.pos,g.pos,t):l.addMark(v.pos,g.pos,t.create(e))}r(l.scrollIntoView())}return!0}}function E(){var t=[],e=arguments.length;while(e--)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var T=E(s,a,l),N=E(s,p,f),A={Enter:E(m,y,b,w),"Mod-Enter":g,Backspace:T,"Mod-Backspace":T,Delete:N,"Mod-Delete":N,"Mod-a":x},D={"Ctrl-h":A["Backspace"],"Alt-Backspace":A["Mod-Backspace"],"Ctrl-d":A["Delete"],"Ctrl-Alt-Backspace":A["Mod-Delete"],"Alt-Delete":A["Mod-Delete"],"Alt-d":A["Mod-Delete"]};for(var P in A)D[P]=A[P];var z="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),R=z?D:A},"073e":function(t,e,n){"use strict";var r=n("5dbe"),o=i(Error);function i(t){return e.displayName=t.displayName||t.name,e;function e(e){return e&&(e=r.apply(null,arguments)),new t(e)}}t.exports=o,o.eval=i(EvalError),o.range=i(RangeError),o.reference=i(ReferenceError),o.syntax=i(SyntaxError),o.type=i(TypeError),o.uri=i(URIError),o.create=i},"0ac0":function(t,e,n){"use strict";n.d(e,"a",(function(){return p})),n.d(e,"b",(function(){return w})),n.d(e,"c",(function(){return b})),n.d(e,"d",(function(){return h})),n.d(e,"e",(function(){return N})),n.d(e,"f",(function(){return T})),n.d(e,"g",(function(){return z})),n.d(e,"h",(function(){return C})),n.d(e,"i",(function(){return D})),n.d(e,"j",(function(){return k}));var r=n("304a"),o=65535,i=Math.pow(2,16);function s(t,e){return t+e*i}function a(t){return t&o}function c(t){return(t-(t&o))/i}var l=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},u=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};u.prototype.recover=function(t){var e=0,n=a(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+c(t)},u.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},u.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},u.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var c=this.ranges[a]-(this.inverted?r:0);if(c>t)break;var u=this.ranges[a+o],p=this.ranges[a+i],f=c+u;if(t<=f){var h=u?t==c?-1:t==f?1:e:e,d=c+r+(h<0?0:p);if(n)return d;var m=t==(e<0?c:f)?null:s(a/3,t-c);return new l(d,e<0?t!=c:t!=f,m)}r+=p-u}return n?t+r:new l(t+r)},u.prototype.touches=function(t,e){for(var n=0,r=a(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?n:0);if(c>t)break;var l=this.ranges[s+o],u=c+l;if(t<=u&&s==3*r)return!0;n+=this.ranges[s+i]-l}return!1},u.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},u.prototype.invert=function(){return new u(this.ranges,!this.inverted)},u.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},u.offset=function(t){return 0==t?u.empty:new u(t<0?[0,-t,0]:[0,0,t])},u.empty=new u([]);var p=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function f(t){var e=Error.call(this,t);return e.__proto__=f.prototype,e}p.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new p(this.maps,this.mirror,t,e)},p.prototype.copy=function(){return new p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},p.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},p.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},p.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},p.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},p.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},p.prototype.invert=function(){var t=new p;return t.appendMappingInverted(this),t},p.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},p.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},p.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o],s=i.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new l(t,r)},f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="TransformError";var h=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new p},d={before:{configurable:!0},docChanged:{configurable:!0}};function m(){throw new Error("Override me")}d.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new f(e.failed);return this},h.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},d.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(h.prototype,d);var v=Object.create(null),g=function(){};g.prototype.apply=function(t){return m()},g.prototype.getMap=function(){return u.empty},g.prototype.invert=function(t){return m()},g.prototype.map=function(t){return m()},g.prototype.merge=function(t){return null},g.prototype.toJSON=function(){return m()},g.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=v[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},g.jsonID=function(t,e){if(t in v)throw new RangeError("Duplicate use of step JSON ID "+t);return v[t]=e,e.prototype.jsonID=t,e};var y=function(t,e){this.doc=t,this.failed=e};y.ok=function(t){return new y(t,null)},y.fail=function(t){return new y(null,t)},y.fromReplace=function(t,e,n,o){try{return y.ok(t.replace(e,n,o))}catch(i){if(i instanceof r["ReplaceError"])return y.fail(i.message);throw i}};var b=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&x(t,this.from,this.to)?y.fail("Structure replace would overwrite content"):y.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new u([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?r["Slice"].empty:new r["Slice"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var o=this.slice.size+t.slice.size==0?r["Slice"].empty:new r["Slice"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),o,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,r["Slice"].fromJSON(t,n.slice),!!n.structure)},e}(g);g.jsonID("replace",b);var w=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(x(t,this.from,this.gapFrom)||x(t,this.gapTo,this.to)))return y.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return y.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?y.fromReplace(t,this.from,this.to,n):y.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new u([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,r["Slice"].fromJSON(t,n.slice),n.insert,!!n.structure)},e}(g);function x(t,e,n){var r=t.resolve(e),o=n-e,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var s=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function S(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function k(t){for(var e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var o=t.$from.node(r),i=t.$from.index(r),s=t.$to.indexAfter(r);if(r<t.depth&&o.canReplace(i,s,n))return r;if(0==r||o.type.spec.isolating||!S(o,i,s))break}}function C(t,e,n,r){void 0===r&&(r=t);var o=_(t,e),i=o&&M(r,e);return i?o.map(O).concat({type:e,attrs:n}).concat(i.map(O)):null}function O(t){return{type:t,attrs:null}}function _(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s)?i:null}function M(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;for(var a=s.length?s[s.length-1]:e,c=a.contentMatch,l=r;c&&l<o;l++)c=c.matchType(n.child(l).type);return c&&c.validEnd?s:null}function E(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function T(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(u,l.childCount),f=r&&r[c]||l;if(f!=l&&(p=p.replaceChild(0,f.type.create(f.attrs))),!l.canReplace(u+1,l.childCount)||!f.type.validContent(p))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}function N(t,e){var n=t.resolve(e),r=n.index();return A(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function A(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function D(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&A(i,s)&&r.node(o).canReplace(a,a+1))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function P(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function z(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,o):r.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function R(t,e,n){for(var o=[],i=0;i<t.childCount;i++){var s=t.child(i);s.content.size&&(s=s.copy(R(s.content,e,s))),s.isInline&&(s=e(s,n,i)),o.push(s)}return r["Fragment"].fromArray(o)}g.jsonID("replaceAround",w),h.prototype.lift=function(t,e){for(var n=t.$from,o=t.$to,i=t.depth,s=n.before(i+1),a=o.after(i+1),c=s,l=a,u=r["Fragment"].empty,p=0,f=i,h=!1;f>e;f--)h||n.index(f)>0?(h=!0,u=r["Fragment"].from(n.node(f).copy(u)),p++):c--;for(var d=r["Fragment"].empty,m=0,v=i,g=!1;v>e;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=r["Fragment"].from(o.node(v).copy(d)),m++):l++;return this.step(new w(c,l,s,a,new r["Slice"](u.append(d),p,m),u.size-p,!0))},h.prototype.wrap=function(t,e){for(var n=r["Fragment"].empty,o=e.length-1;o>=0;o--)n=r["Fragment"].from(e[o].type.create(e[o].attrs,n));var i=t.start,s=t.end;return this.step(new w(i,s,i,s,new r["Slice"](n,0,0),e.length,!0))},h.prototype.setBlockType=function(t,e,n,o){var i=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var s=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,o)&&E(i.doc,i.mapping.slice(s).map(e),n)){i.clearIncompatible(i.mapping.slice(s).map(e,1),n);var a=i.mapping.slice(s),c=a.map(e,1),l=a.map(e+t.nodeSize,1);return i.step(new w(c,l,c+1,l-1,new r["Slice"](r["Fragment"].from(n.create(o,null,t.marks)),0,0),1,!0)),!1}})),this},h.prototype.setNodeMarkup=function(t,e,n,o){var i=this.doc.nodeAt(t);if(!i)throw new RangeError("No node at given position");e||(e=i.type);var s=e.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(t,t+i.nodeSize,s);if(!e.validContent(i.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new w(t,t+i.nodeSize,t+1,t+i.nodeSize-1,new r["Slice"](r["Fragment"].from(s),0,0),1,!0))},h.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var o=this.doc.resolve(t),i=r["Fragment"].empty,s=r["Fragment"].empty,a=o.depth,c=o.depth-e,l=e-1;a>c;a--,l--){i=r["Fragment"].from(o.node(a).copy(i));var u=n&&n[l];s=r["Fragment"].from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}return this.step(new b(t,t,new r["Slice"](i.append(s),e,e),!0))},h.prototype.join=function(t,e){void 0===e&&(e=1);var n=new b(t-e,t+e,r["Slice"].empty,!0);return this.step(n)};var I=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),s=new r["Slice"](R(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),i),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,s)},e.prototype.invert=function(){return new j(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(g);g.jsonID("addMark",I);var j=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new r["Slice"](R(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return y.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new I(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(g);function F(t,e,n,o){if(void 0===n&&(n=e),void 0===o&&(o=r["Slice"].empty),e==n&&!o.size)return null;var i=t.resolve(e),s=t.resolve(n);return B(i,s,o)?new b(e,n,o):new $(i,s,o).fit()}function B(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}g.jsonID("removeMark",j),h.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,t),f=Math.min(c+r.nodeSize,e),h=n.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(h)||(s&&s.to==p&&s.mark.eq(u[d])?s.to=f:o.push(s=new j(p,f,u[d])));a&&a.to==p?a.to=f:i.push(a=new I(p,f,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},h.prototype.removeMark=function(t,e,n){var o=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,(function(o,a){if(o.isInline){s++;var c=null;if(n instanceof r["MarkType"]){var l=n.isInSet(o.marks);l&&(c=[l])}else n?n.isInSet(o.marks)&&(c=[n]):c=o.marks;if(c&&c.length)for(var u=Math.min(a+o.nodeSize,e),p=0;p<c.length;p++){for(var f=c[p],h=void 0,d=0;d<i.length;d++){var m=i[d];m.step==s-1&&f.eq(i[d].style)&&(h=m)}h?(h.to=u,h.step=s):i.push({style:f,from:Math.max(a,t),to:u,step:s})}}})),i.forEach((function(t){return o.step(new j(t.from,t.to,t.style))})),this},h.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var o=this.doc.nodeAt(t),i=[],s=t+1,a=0;a<o.childCount;a++){var c=o.child(a),l=s+c.nodeSize,u=n.matchType(c.type,c.attrs);if(u){n=u;for(var p=0;p<c.marks.length;p++)e.allowsMarkType(c.marks[p].type)||this.step(new j(s,l,c.marks[p]))}else i.push(new b(s,l,r["Slice"].empty));s=l}if(!n.validEnd){var f=n.fillBefore(r["Fragment"].empty,!0);this.replace(s,s,new r["Slice"](f,0,0))}for(var h=i.length-1;h>=0;h--)this.step(i[h]);return this},h.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=r["Slice"].empty);var o=F(this.doc,t,e,n);return o&&this.step(o),this},h.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new r["Slice"](r["Fragment"].from(n),0,0))},h.prototype.delete=function(t,e){return this.replace(t,e,r["Slice"].empty)},h.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var $=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var o=0;o<=t.depth;o++){var i=t.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(t.indexAfter(o))})}this.placed=r["Fragment"].empty;for(var s=t.depth;s>0;s--)this.placed=r["Fragment"].from(t.node(s).copy(this.placed))},L={depth:{configurable:!0}};function V(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(V(t.firstChild.content,e-1,n)))}function q(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(q(t.lastChild.content,e-1,n)))}function W(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function J(t,e,n){if(e<=0)return t;var o=t.content;return e>1&&(o=o.replaceChild(0,J(o.firstChild,e-1,1==o.childCount?n-1:0))),e>0&&(o=t.type.contentMatch.fillBefore(o).append(o),n<=0&&(o=o.append(t.type.contentMatch.matchFragment(o).fillBefore(r["Fragment"].empty,!0)))),t.copy(o)}function H(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!U(n,i.content,s)?a:null}function U(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function K(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(K(s.content,e+1,n,o,s)))}if(e>o){var a=i.contentMatchAt(0),c=a.fillBefore(t).append(t);t=c.append(a.matchFragment(c).fillBefore(r["Fragment"].empty,!0))}return t}function G(t,e){for(var n=[],r=Math.min(t.depth,e.depth),o=r;o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&n.push(o)}return n}L.depth.get=function(){return this.frontier.length-1},$.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,o=this.$from,i=this.close(e<0?this.$to:o.doc.resolve(e));if(!i)return null;var s=this.placed,a=o.depth,c=i.depth;while(a&&c&&1==s.childCount)s=s.firstChild.content,a--,c--;var l=new r["Slice"](s,a,c);return e>-1?new w(o.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||o.pos!=this.$to.pos?new b(o.pos,i.pos,l):void 0},$.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,o=void 0;e?(o=W(this.unplaced.content,e-1).firstChild,n=o.content):n=this.unplaced.content;for(var i=n.firstChild,s=this.depth;s>=0;s--){var a=this.frontier[s],c=a.type,l=a.match,u=void 0,p=void 0;if(1==t&&(i?l.matchType(i.type)||(p=l.fillBefore(r["Fragment"].from(i),!1)):c.compatibleContent(o.type)))return{sliceDepth:e,frontierDepth:s,parent:o,inject:p};if(2==t&&i&&(u=l.findWrapping(i.type)))return{sliceDepth:e,frontierDepth:s,parent:o,wrap:u};if(o&&l.matchType(o.type))break}}},$.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=W(e,n);return!(!i.childCount||i.firstChild.isLeaf)&&(this.unplaced=new r["Slice"](e,n+1,Math.max(o,i.size+n>=e.size-o?n+1:0)),!0)},$.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,o=t.openEnd,i=W(e,n);if(i.childCount<=1&&n>0){var s=e.size-n<=n+i.size;this.unplaced=new r["Slice"](V(e,n-1,1),n-1,s?n-1:o)}else this.unplaced=new r["Slice"](V(e,n,1),n,o)},$.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,o=t.parent,i=t.inject,s=t.wrap;while(this.depth>n)this.closeFrontierNode();if(s)for(var a=0;a<s.length;a++)this.openFrontierNode(s[a]);var c=this.unplaced,l=o?o.content:c.content,u=c.openStart-e,p=0,f=[],h=this.frontier[n],d=h.match,m=h.type;if(i){for(var v=0;v<i.childCount;v++)f.push(i.child(v));d=d.matchFragment(i)}var g=l.size+e-(c.content.size-c.openEnd);while(p<l.childCount){var y=l.child(p),b=d.matchType(y.type);if(!b)break;p++,(p>1||0==u||y.content.size)&&(d=b,f.push(J(y.mark(m.allowedMarks(y.marks)),1==p?u:0,p==l.childCount?g:-1)))}var w=p==l.childCount;w||(g=-1),w&&g<0&&o&&o.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=d;for(var x=0,S=l;x<g;x++){var k=S.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),S=k.content}this.unplaced=w?0==e?r["Slice"].empty:new r["Slice"](V(c.content,e-1,1),e-1,g<0?c.openEnd:e-1):new r["Slice"](V(c.content,e,p),c.openStart,c.openEnd),this.placed=q(this.placed,n,r["Fragment"].from(f))},$.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!H(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},$.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=H(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=c.type,p=H(t,a,u,l,!0);if(!p||p.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},$.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=q(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},$.prototype.openFrontierNode=function(t,e,n){var o=this.frontier[this.depth];o.match=o.match.matchType(t),this.placed=q(this.placed,this.depth,r["Fragment"].from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},$.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(r["Fragment"].empty,!0);e.childCount&&(this.placed=q(this.placed,this.frontier.length,e))},Object.defineProperties($.prototype,L),h.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var o=this.doc.resolve(t),i=this.doc.resolve(e);if(B(o,i,n))return this.step(new b(t,e,n));var s=G(o,this.doc.resolve(e));0==s[s.length-1]&&s.pop();var a=-(o.depth+1);s.unshift(a);for(var c=o.depth,l=o.pos-1;c>0;c--,l--){var u=o.node(c).type.spec;if(u.defining||u.isolating)break;s.indexOf(c)>-1?a=c:o.before(c)==l&&s.splice(1,0,-c)}for(var p=s.indexOf(a),f=[],h=n.openStart,d=n.content,m=0;;m++){var v=d.firstChild;if(f.push(v),m==n.openStart)break;d=v.content}h>0&&f[h-1].type.spec.defining&&o.node(p).type!=f[h-1].type?h-=1:h>=2&&f[h-1].isTextblock&&f[h-2].type.spec.defining&&o.node(p).type!=f[h-2].type&&(h-=2);for(var g=n.openStart;g>=0;g--){var y=(g+h+1)%(n.openStart+1),w=f[y];if(w)for(var x=0;x<s.length;x++){var S=s[(x+p)%s.length],k=!0;S<0&&(k=!1,S=-S);var C=o.node(S-1),O=o.index(S-1);if(C.canReplaceWith(O,O,w.type,w.marks))return this.replace(o.before(S),k?i.after(S):e,new r["Slice"](K(n.content,0,n.openStart,y),y,n.openEnd))}}for(var _=this.steps.length,M=s.length-1;M>=0;M--){if(this.replace(t,e,n),this.steps.length>_)break;var E=s[M];M<0||(t=o.before(E),e=i.after(E))}return this},h.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var o=P(this.doc,t,n.type);null!=o&&(t=e=o)}return this.replaceRange(t,e,new r["Slice"](r["Fragment"].from(n),0,0))},h.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=G(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)}},"0e15":function(t,e,n){var r=n("597f");t.exports=function(t,e,n){return void 0===n?r(t,e,!1):r(t,n,!1!==e)}},"18ff":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=87)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},4:function(t,e){t.exports=n("d010")},87:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":t.disabled,"el-dropdown-menu__item--divided":t.divided},attrs:{"aria-disabled":t.disabled,tabindex:t.disabled?null:-1},on:{click:t.handleClick}},[t.icon?n("i",{class:t.icon}):t._e(),t._t("default")],2)},o=[];r._withStripped=!0;var i=n(4),s=n.n(i),a={name:"ElDropdownItem",mixins:[s.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(t){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},c=a,l=n(0),u=Object(l["a"])(c,r,o,!1,null,null,null);u.options.__file="packages/dropdown/src/dropdown-item.vue";var p=u.exports;p.install=function(t){t.component(p.name,p)};e["default"]=p}})},"1e63":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"publish-container"},[n("el-card",{staticClass:"box-card"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),n("el-breadcrumb-item",[t._v("发布文章")])],1)],1),n("div",[n("el-form",{ref:"publish-form",attrs:{model:t.articles,rules:t.rules,"label-width":"80px",size:"small"}},[n("el-form-item",{attrs:{label:"标题",prop:"title"}},[n("el-input",{model:{value:t.articles.title,callback:function(e){t.$set(t.articles,"title",e)},expression:"articles.title"}})],1),n("el-form-item",{attrs:{label:"内容",prop:"content"}},[n("el-tiptap",{attrs:{extensions:t.extensions,placeholder:"内容区",width:700,height:400},model:{value:t.articles.content,callback:function(e){t.$set(t.articles,"content",e)},expression:"articles.content"}})],1),n("el-form-item",{attrs:{label:"封面 :"}},[n("el-radio-group",{model:{value:t.articles.cover.type,callback:function(e){t.$set(t.articles.cover,"type",e)},expression:"articles.cover.type"}},[n("el-radio",{attrs:{label:1}},[t._v("单图")]),n("el-radio",{attrs:{label:3}},[t._v("三图")]),n("el-radio",{attrs:{label:0}},[t._v("无图")]),n("el-radio",{attrs:{label:-1}},[t._v("自动")])],1),t.articles.cover.type>0?t._l(t.articles.cover.type,(function(t){return n("upload-cover",{key:t})})):t._e()],2),n("el-form-item",{attrs:{label:"频道 :",prop:"channel_id"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.articles.channel_id,callback:function(e){t.$set(t.articles,"channel_id",e)},expression:"articles.channel_id"}},t._l(t.channels,(function(t,e){return n("el-option",{key:e,attrs:{label:t.name,value:t.id}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"info"},on:{click:function(e){return t.onSubmit(!1)}}},[t._v("发表 ")]),n("el-button",{attrs:{type:"info"},on:{click:function(e){return t.onSubmit(!0)}}},[t._v("存为草稿 ")])],1)],1)],1)])],1)},o=[],i=n("2423"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"upload-Cover"},[n("div",{staticClass:"upload-avatar",on:{click:function(e){t.dialogVisible=!0}}},[n("i",{staticClass:"el-icon-plus iconPlus"})]),n("el-dialog",{attrs:{title:"封面显示",visible:t.dialogVisible,width:"30%","before-close":t.handleClose,"append-to-body":""},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"素材库",name:"first"}},[t._v("用户管理")]),n("el-tab-pane",{attrs:{label:"上传图片",name:"second"}},[n("input",{ref:"uploadAction",attrs:{type:"file"},on:{change:t.onFileChange}}),n("img",{ref:"preview-img",attrs:{src:"",width:"100"}})])],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.uploadConfirm}},[t._v("确 定")])],1)],1)],1)},a=[],c=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("685c")),l={name:"uploadCover",props:{},components:{},data:function(){return{dialogVisible:!1,activeName:"second"}},computed:{},watch:{},created:function(){},methods:{showUploadAvatar:function(){},handleClose:function(t){this.$confirm("确认关闭？").then((function(e){t()})).catch((function(t){}))},handleClick:function(t,e){console.log(t,e)},onFileChange:function(){var t=this.$refs.uploadAction.files[0],e=window.URL.createObjectURL(t);this.$refs["preview-img"].src=e},uploadConfirm:function(){var t=this,e=this.$refs.uploadAction.files[0];if("second"===this.activeName){if(!e)return this.$message("请选择文件");var n=new FormData;n.append("image",e),Object(c["d"])(n).then((function(e){t.dialogVisible=!1}))}}},mounted:function(){},beforeDestroy:function(){}},u=l,p=(n("5b82"),n("2877")),f=Object(p["a"])(u,s,a,!1,null,"2f16a022",null),h=f.exports,d=n("4ccc"),m=(n("7eef"),{name:"publishIndex",props:{},components:{"el-tiptap":d["f"],uploadCover:h},data:function(){return{articles:{title:"表单验证1",content:"",cover:{type:1,images:[]},channel_id:""},channels:[],extensions:[new d["e"],new d["p"],new d["n"],new d["i"]({level:5}),new d["b"]({bubble:!0}),new d["j"]({uploadRequest:function(t){console.log(t);var e=new FormData;return e.append("image",t),Object(c["d"])(e).then((function(t){return console.log(t),t.data.data.url}))}}),new d["s"],new d["k"],new d["o"],new d["l"],new d["c"],new d["m"],new d["d"],new d["a"],new d["q"],new d["r"],new d["h"],new d["g"]],rules:{title:[{required:!0,message:"请输入标题名称",trigger:"blur"},{min:5,message:"最少输入5个字符",trigger:"blur"}],content:[{validator:function(t,e,n){"<p></p>"===e?n(new Error("内容不能为空")):n()}},{required:!0,message:"请输入文章内容",trigger:"blur"}],channel_id:[{required:!0,message:"请选择文章频道"}]}}},computed:{},watch:{},created:function(){this.loadChannel(),this.$route.query.id&&this.loadArticle()},methods:{onSubmit:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs["publish-form"].validate((function(n){if(n){var r=t.$route.query.id;r?Object(i["h"])(r,t.articles,e).then((function(e){t.$router.push("/article"),t.$message({type:"succeess",message:"操作成功"})})):Object(i["a"])(t.articles,e).then((function(e){t.$router.push("/article"),t.$message({type:"succeess",message:"操作成功"})}))}}))},loadChannel:function(){var t=this;Object(i["e"])().then((function(e){t.channels=e.data.data.channels}))},loadArticle:function(){var t=this,e=this.$route.query.id;Object(i["d"])(e).then((function(e){t.articles=e.data.data}))}},mounted:function(){},beforeDestroy:function(){}}),v=m,g=Object(p["a"])(v,r,o,!1,null,"5b9a773d",null);e["default"]=g.exports},2423:function(t,e,n){"use strict";n.d(e,"f",(function(){return o})),n.d(e,"e",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return a})),n.d(e,"d",(function(){return c})),n.d(e,"h",(function(){return l})),n.d(e,"g",(function(){return u})),n.d(e,"b",(function(){return p}));var r=n("b775"),o=function(t){return Object(r["a"])({method:"GET",url:"/mp/v1_0/articles",params:t})},i=function(){return Object(r["a"])({method:"GET",url:"/mp/v1_0/channels"})},s=function(t){return Object(r["a"])({method:"DELETE",url:"/mp/v1_0/articles/".concat(t)})},a=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Object(r["a"])({method:"POST",url:"/mp/v1_0/articles",params:{draft:e},data:t})},c=function(t){return Object(r["a"])({method:"GET",url:"/mp/v1_0/articles/".concat(t)})},l=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(r["a"])({method:"PUT",url:"/mp/v1_0/articles/".concat(t),params:{draft:n},data:e})},u=function(t){return Object(r["a"])({method:"GET",url:"/mp/v1_0/articles",params:t})},p=function(t,e){return Object(r["a"])({method:"PUT",url:"/mp/v1_0/comments/status",params:{article_id:t},data:{allow_comment:e}})}},"299c":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=131)}({131:function(t,e,n){"use strict";n.r(e);var r=n(5),o=n.n(r),i=n(17),s=n.n(i),a=n(2),c=n(3),l=n(7),u=n.n(l),p={name:"ElTooltip",mixins:[o.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(c["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var t=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(t){return this.node}}).$mount(),this.debounceClose=s()(200,(function(){return t.handleClosePopper()})))},render:function(t){var e=this;this.popperVM&&(this.popperVM.node=t("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[t("div",{on:{mouseleave:function(){e.setExpectedState(!1),e.debounceClose()},mouseenter:function(){e.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var r=n.data=n.data||{};return r.staticClass=this.addTooltipClass(r.staticClass),n},mounted:function(){var t=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(a["on"])(this.referenceElm,"mouseenter",this.show),Object(a["on"])(this.referenceElm,"mouseleave",this.hide),Object(a["on"])(this.referenceElm,"focus",(function(){if(t.$slots.default&&t.$slots.default.length){var e=t.$slots.default[0].componentInstance;e&&e.focus?e.focus():t.handleFocus()}else t.handleFocus()})),Object(a["on"])(this.referenceElm,"blur",this.handleBlur),Object(a["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick((function(){t.value&&t.updatePopper()}))},watch:{focusing:function(t){t?Object(a["addClass"])(this.referenceElm,"focusing"):Object(a["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(t){return t?"el-tooltip "+t.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var t=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.showPopper=!0}),this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout((function(){t.showPopper=!1}),this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(t){!1===t&&clearTimeout(this.timeoutPending),this.expectedState=t},getFirstElement:function(){var t=this.$slots.default;if(!Array.isArray(t))return null;for(var e=null,n=0;n<t.length;n++)t[n]&&t[n].tag&&(e=t[n]);return e}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var t=this.referenceElm;1===t.nodeType&&(Object(a["off"])(t,"mouseenter",this.show),Object(a["off"])(t,"mouseleave",this.hide),Object(a["off"])(t,"focus",this.handleFocus),Object(a["off"])(t,"blur",this.handleBlur),Object(a["off"])(t,"click",this.removeFocusing))},install:function(t){t.component(p.name,p)}};e["default"]=p},17:function(t,e){t.exports=n("0e15")},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},5:function(t,e){t.exports=n("e974")},7:function(t,e){t.exports=n("8bbf")}})},"2bb5":function(t,e,n){"use strict";e.__esModule=!0;n("8122");e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"304a":function(t,e,n){"use strict";n.r(e),n.d(e,"ContentMatch",(function(){return B})),n.d(e,"DOMParser",(function(){return pt})),n.d(e,"DOMSerializer",(function(){return Mt})),n.d(e,"Fragment",(function(){return s})),n.d(e,"Mark",(function(){return p})),n.d(e,"MarkType",(function(){return ct})),n.d(e,"Node",(function(){return R})),n.d(e,"NodeRange",(function(){return D})),n.d(e,"NodeType",(function(){return ot})),n.d(e,"ReplaceError",(function(){return f})),n.d(e,"ResolvedPos",(function(){return M})),n.d(e,"Schema",(function(){return lt})),n.d(e,"Slice",(function(){return h}));var r=n("884c");function o(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(r),s=e.child(r);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){var c=o(i.content,s.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function i(t,e,n,r){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:r};var a=t.child(--o),c=e.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){var u=0,p=Math.min(a.text.length,c.text.length);while(u<p&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var f=i(a.content,c.content,n-1,r-1);if(f)return f}n-=l,r-=l}else n-=l,r-=l}}var s=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},a={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};s.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},s.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},s.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},s.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new s(r,this.size+t.size)},s.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var a=this.content[o],c=i+a.nodeSize;c>t&&((i<t||c>e)&&(a=a.isText?a.cut(Math.max(0,t-i),Math.min(a.text.length,e-i)):a.cut(Math.max(0,t-i-1),Math.min(a.content.size,e-i-1))),n.push(a),r+=a.nodeSize),i=c}return new s(n,r)},s.prototype.cutByIndex=function(t,e){return t==e?s.empty:0==t&&e==this.content.length?this:new s(this.content.slice(t,e))},s.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new s(r,o)},s.prototype.addToStart=function(t){return new s([t].concat(this.content),this.size+t.nodeSize)},s.prototype.addToEnd=function(t){return new s(this.content.concat(t),this.size+t.nodeSize)},s.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},a.firstChild.get=function(){return this.content.length?this.content[0]:null},a.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},a.childCount.get=function(){return this.content.length},s.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},s.prototype.maybeChild=function(t){return this.content[t]},s.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},s.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),o(this,t,e)},s.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),i(this,t,e,n)},s.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return l(0,t);if(t==this.size)return l(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?l(n+1,i):l(n,r);r=i}},s.prototype.toString=function(){return"<"+this.toStringInner()+">"},s.prototype.toStringInner=function(){return this.content.join(", ")},s.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},s.fromJSON=function(t,e){if(!e)return s.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new s(e.map(t.nodeFromJSON))},s.fromArray=function(t){if(!t.length)return s.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new s(e||t,n)},s.from=function(t){if(!t)return s.empty;if(t instanceof s)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new s([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(s.prototype,a);var c={index:0,offset:0};function l(t,e){return c.index=t,c.offset=e,c}function u(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!u(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!u(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}s.empty=new s([],0);var p=function(t,e){this.type=t,this.attrs=e};function f(t){var e=Error.call(this,t);return e.__proto__=f.prototype,e}p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&u(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},p.none=[],f.prototype=Object.create(Error.prototype),f.prototype.constructor=f,f.prototype.name="ReplaceError";var h=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},d={size:{configurable:!0}};function m(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(m(s.content,e-i-1,n-i-1)))}function v(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=v(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function g(t,e,n){if(n.openStart>t.depth)throw new f("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new f("Inconsistent open depths");return y(t,e,n,0)}function y(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=y(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=_(n,t),c=a.start,l=a.end;return k(i,C(t,c,l,e,r))}var u=t.parent,p=u.content;return k(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return k(i,O(t,e,r))}function b(t,e){if(!e.type.compatibleContent(t.type))throw new f("Cannot join "+e.type.name+" onto "+t.type.name)}function w(t,e,n){var r=t.node(n);return b(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function S(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(x(t.nodeAfter,r),i++));for(var a=i;a<s;a++)x(o.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function k(t,e){if(!t.type.validContent(e))throw new f("Invalid content for node "+t.type.name);return t.copy(e)}function C(t,e,n,r,o){var i=t.depth>o&&w(t,e,o+1),a=r.depth>o&&w(n,r,o+1),c=[];return S(null,t,o,c),i&&a&&e.index(o)==n.index(o)?(b(i,a),x(k(i,C(t,e,n,r,o+1)),c)):(i&&x(k(i,O(t,e,o+1)),c),S(e,n,o,c),a&&x(k(a,O(n,r,o+1)),c)),S(r,null,o,c),new s(c)}function O(t,e,n){var r=[];if(S(null,t,n,r),t.depth>n){var o=w(t,e,n+1);x(k(o,O(t,e,n+1)),r)}return S(e,null,n,r),new s(r)}function _(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(s.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}d.size.get=function(){return this.content.size-this.openStart-this.openEnd},h.prototype.insertAt=function(t,e){var n=v(this.content,t+this.openStart,e,null);return n&&new h(n,this.openStart,this.openEnd)},h.prototype.removeBetween=function(t,e){return new h(m(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},h.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},h.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},h.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},h.fromJSON=function(t,e){if(!e)return h.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new h(s.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},h.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new h(t,n,r)},Object.defineProperties(h.prototype,d),h.empty=new h(s.empty,0,0);var M=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},E={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};M.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},E.parent.get=function(){return this.node(this.depth)},E.doc.get=function(){return this.node(0)},M.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},M.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},M.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},M.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},M.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},M.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},M.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},E.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},E.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},E.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},M.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},M.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},M.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},M.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new D(this,t,n)},M.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},M.prototype.max=function(t){return t.pos>this.pos?t:this},M.prototype.min=function(t){return t.pos<this.pos?t:this},M.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},M.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new M(e,n,o)},M.resolveCached=function(t,e){for(var n=0;n<T.length;n++){var r=T[n];if(r.pos==e&&r.doc==t)return r}var o=T[N]=M.resolve(t,e);return N=(N+1)%A,o},Object.defineProperties(M.prototype,E);var T=[],N=0,A=12,D=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},P={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};P.start.get=function(){return this.$from.before(this.depth+1)},P.end.get=function(){return this.$to.after(this.depth+1)},P.parent.get=function(){return this.$from.node(this.depth)},P.startIndex.get=function(){return this.$from.index(this.depth)},P.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(D.prototype,P);var z=Object.create(null),R=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||s.empty,this.marks=r||p.none},I={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};I.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},I.childCount.get=function(){return this.content.childCount},R.prototype.child=function(t){return this.content.child(t)},R.prototype.maybeChild=function(t){return this.content.maybeChild(t)},R.prototype.forEach=function(t){this.content.forEach(t)},R.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},R.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},I.textContent.get=function(){return this.textBetween(0,this.content.size,"")},R.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},I.firstChild.get=function(){return this.content.firstChild},I.lastChild.get=function(){return this.content.lastChild},R.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},R.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},R.prototype.hasMarkup=function(t,e,n){return this.type==t&&u(this.attrs,e||t.defaultAttrs||z)&&p.sameSet(this.marks,n||p.none)},R.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},R.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},R.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},R.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return h.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new h(c,r.depth-i,o.depth-i)},R.prototype.replace=function(t,e,n){return g(this.resolve(t),this.resolve(e),n)},R.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},R.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},R.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},R.prototype.resolve=function(t){return M.resolveCached(this,t)},R.prototype.resolveNoCache=function(t){return M.resolve(this,t)},R.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},I.isBlock.get=function(){return this.type.isBlock},I.isTextblock.get=function(){return this.type.isTextblock},I.inlineContent.get=function(){return this.type.inlineContent},I.isInline.get=function(){return this.type.isInline},I.isText.get=function(){return this.type.isText},I.isLeaf.get=function(){return this.type.isLeaf},I.isAtom.get=function(){return this.type.isAtom},R.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),F(this.marks,t)},R.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},R.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=s.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),a=i&&i.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},R.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},R.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},R.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},R.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},R.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=s.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(R.prototype,I);var j=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):F(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(R);function F(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var B=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},$={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};B.parse=function(t,e){var n=new L(t,e);if(null==n.next)return B.empty;var r=q(n);n.next&&n.err("Unexpected trailing text");var o=Q(X(r));return tt(o,n),o},B.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},B.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},$.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},$.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},B.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},B.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,a){var c=i.matchFragment(t,n);if(c&&(!e||c.validEnd))return s.from(a.map((function(t){return t.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var u=i.next[l],p=i.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var f=o(p,a.concat(u));if(f)return f}}}return o(this,[])},B.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},B.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},$.edgeCount.get=function(){return this.next.length>>1},B.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},B.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(B.prototype,$),B.empty=new B(!0);var L=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},V={next:{configurable:!0}};function q(t){var e=[];do{e.push(W(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function W(t){var e=[];do{e.push(J(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function J(t){for(var e=G(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=U(t,e)}return e}function H(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function U(t,e){var n=H(t),r=n;return t.eat(",")&&(r="}"!=t.next?H(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function K(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function G(t){if(t.eat("(")){var e=q(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=K(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function X(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Z(t,e){return e-t}function Y(t,e){var n=[];return r(e),n.sort(Z);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function Q(t){var e=Object.create(null);return n(Y(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Y(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new B(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Z);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function tt(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function et(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function nt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function rt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new st(t[n]);return e}V.next.get=function(){return this.tokens[this.pos]},L.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},L.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(L.prototype,V);var ot=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=rt(n.attrs),this.defaultAttrs=et(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},it={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};it.isInline.get=function(){return!this.isBlock},it.isTextblock.get=function(){return this.isBlock&&this.inlineContent},it.isLeaf.get=function(){return this.contentMatch==B.empty},it.isAtom.get=function(){return this.isLeaf||this.spec.atom},ot.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},ot.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},ot.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:nt(this.attrs,t)},ot.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new R(this,this.computeAttrs(t),s.from(e),p.setFrom(n))},ot.prototype.createChecked=function(t,e,n){if(e=s.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new R(this,this.computeAttrs(t),e,p.setFrom(n))},ot.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=s.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(s.empty,!0);return o?new R(this,t,e.append(o),p.setFrom(n)):null},ot.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},ot.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},ot.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},ot.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},ot.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new ot(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(ot.prototype,it);var st=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},at={isRequired:{configurable:!0}};at.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(st.prototype,at);var ct=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=rt(r.attrs),this.rank=e,this.excluded=null;var o=et(this.attrs);this.instance=o&&new p(this,o)};ct.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,nt(this.attrs,t))},ct.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ct(t,r++,e,o)})),n},ct.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},ct.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ct.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var lt=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=r["a"].from(t.nodes),this.spec.marks=r["a"].from(t.marks),this.nodes=ot.compile(this.spec.nodes,this),this.marks=ct.compile(this.spec.marks,this);var n=Object.create(null);for(var o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");var i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=B.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?ut(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:ut(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ut(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}lt.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof ot))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},lt.prototype.text=function(t,e){var n=this.nodes.text;return new j(n,n.defaultAttrs,t,p.setFrom(e))},lt.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},lt.prototype.nodeFromJSON=function(t){return R.fromJSON(this,t)},lt.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},lt.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var pt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};pt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new wt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},pt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new wt(this,e,!0);return n.addAll(t,null,e.from,e.to),h.maxOpen(n.finish())},pt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(kt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},pt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},pt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Ot(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=Ot(t)),t.node=s}))};for(var s in t.nodes)i();return e},pt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new pt(t,pt.schemaRules(t)))};var ft={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ht={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},dt={ol:!0,ul:!0},mt=1,vt=2,gt=4;function yt(t){return(t?mt:0)|("full"===t?vt:0)}var bt=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&gt?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=p.none,this.pendingMarks=r};bt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(s.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},bt.prototype.finish=function(t){if(!(this.options&mt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=s.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(s.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},bt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):_t(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var wt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=yt(e.preserveWhitespace)|(n?gt:0);r=o?new bt(o.type,o.attrs,p.none,p.none,!0,e.topMatch||o.type.contentMatch,i):new bt(n?null:t.schema.topNodeType,null,p.none,p.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},xt={top:{configurable:!0},currentPos:{configurable:!0}};function St(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&dt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function kt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ct(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Ot(t){var e={};for(var n in t)e[n]=t[n];return e}function _t(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}xt.top.get=function(){return this.nodes[this.open]},wt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Ct(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},wt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&mt)n.options&vt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},wt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();dt.hasOwnProperty(e)&&this.normalizeLists&&St(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ht.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(ft.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},wt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},wt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},wt.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},wt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&ft.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},wt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},wt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},wt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},wt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~gt:yt(r);o.options&gt&&0==o.content.length&&(i|=gt),this.nodes.push(new bt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},wt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},wt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},wt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},wt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},wt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},wt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},wt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},wt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},wt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},wt.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},wt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(wt.prototype,xt);var Mt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Et(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Tt(t){return t.document||window.document}Mt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Tt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Mt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Mt.renderSpec(Tt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Mt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Mt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Mt.renderSpec(Tt(n),r(t,e))},Mt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=Mt.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Mt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Mt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Mt.nodesFromSchema=function(t){var e=Et(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Mt.marksFromSchema=function(t){return Et(t.marks)}},"3c4e":function(t,e,n){"use strict";var r=function(t){return o(t)&&!i(t)};function o(t){return!!t&&"object"===typeof t}function i(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||c(t)}var s="function"===typeof Symbol&&Symbol.for,a=s?Symbol.for("react.element"):60103;function c(t){return t.$$typeof===a}function l(t){return Array.isArray(t)?[]:{}}function u(t,e){var n=e&&!0===e.clone;return n&&r(t)?h(l(t),t,e):t}function p(t,e,n){var o=t.slice();return e.forEach((function(e,i){"undefined"===typeof o[i]?o[i]=u(e,n):r(e)?o[i]=h(t[i],e,n):-1===t.indexOf(e)&&o.push(u(e,n))})),o}function f(t,e,n){var o={};return r(t)&&Object.keys(t).forEach((function(e){o[e]=u(t[e],n)})),Object.keys(e).forEach((function(i){r(e[i])&&t[i]?o[i]=h(t[i],e[i],n):o[i]=u(e[i],n)})),o}function h(t,e,n){var r=Array.isArray(e),o=Array.isArray(t),i=n||{arrayMerge:p},s=r===o;if(s){if(r){var a=i.arrayMerge||p;return a(t,e,n)}return f(t,e,n)}return u(e,n)}h.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce((function(t,n){return h(t,n,e)}))};var d=h;t.exports=d},"3ce4":function(t,e,n){"use strict";var r=n("d2a2"),o=n("073e");function i(){}i.prototype=r;var s=new i;t.exports=s,s.highlight=k,s.highlightAuto=S,s.registerLanguage=C,s.listLanguages=O,s.registerAlias=_,s.getLanguage=R;var a=r.inherit,c={}.hasOwnProperty,l="hljs-",u="case_insensitive",p="cached_variants",f="terminator_end",h=" ",d="|",m="(",v=")",g="\\",y=["of","and","for","in","not","or","if","then"],b=[],w={},x={};function S(t,e){var n,r,i,s,a=e||{},c=a.subset||b,u=a.prefix,p=c.length,f=-1;if(null!==u&&void 0!==u||(u=l),"string"!==typeof t)throw o("Expected `string` for value, got `%s`",t);r=P({}),n=P({});while(++f<p)s=c[f],R(s)&&(i=P(M(s,t,!1,u)),i.language=s,i.relevance>r.relevance&&(r=i),i.relevance>n.relevance&&(r=n,n=i));return r.language&&(n.secondBest=r),n}function k(t,e,n){var r=n||{},o=r.prefix;return null!==o&&void 0!==o||(o=l),P(M(t,e,!0,o))}function C(t,e){var n=e(s);n.rawDefinition=e.bind(null,s),w[t]=n,b.push(t),n.aliases&&_(t,n.aliases)}function O(){return b.concat()}function _(t,e){var n,r,o,i,s=t;for(n in e&&(s={},s[t]=e),s){r=s[n],r="string"===typeof r?[r]:r,o=r.length,i=-1;while(++i<o)x[r[i]]=n}}function M(t,e,n,r,i){var s,a,l,p,f,h,d,m,v={},g={},y=[],b="",x=0;if("string"!==typeof t)throw o("Expected `string` for name, got `%s`",t);if("string"!==typeof e)throw o("Expected `string` for value, got `%s`",e);if(s=R(t),a=i||s,m=[],l=a,p=m,!s)throw o("Unknown language: `%s` is not registered",t);E(s);try{a.terminators.lastIndex=0,f=0,d=a.terminators.exec(e);while(d)h=_(e.slice(f,d.index),d),f=d.index+h,a.terminators.lastIndex=f,d=a.terminators.exec(e);_(e.slice(f)),l=a;while(l.parent)l.className&&L(),l=l.parent;return{relevance:x,value:p,illegal:!1,language:t,top:a}}catch(V){if(-1===V.message.indexOf("Illegal"))throw V;return{relevance:0,illegal:!0,value:I(e,[])}}function k(t){return new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function C(t){var e=t[0],n=t.rule;return n&&n.endSameAsBegin&&(n.endRe=k(e)),n.skip?b+=e:(n.excludeBegin&&(b+=e),P(N(),p),n.returnBegin||n.excludeBegin||(b=e)),T(n),n.returnBegin?0:e.length}function O(t){var n=t[0],r=e.slice(t.index),o=$(a,r);if(o){var i=a;i.skip?b+=n:(i.returnEnd||i.excludeEnd||(b+=n),P(N(),p),i.excludeEnd&&(b=n));do{a.className&&L(),a.skip||a.subLanguage||(x+=a.relevance),a=a.parent}while(a!==o.parent);return o.starts&&(o.endSameAsBegin&&(o.starts.endRe=o.endRe),T(o.starts)),i.returnEnd?0:n.length}}function _(t,r){var i,s=r&&r[0];if(b+=t,void 0===s)return P(N(),p),0;if("begin"===v.type&&"end"===r.type&&v.index===r.index&&""===s)return b+=e.slice(r.index,r.index+1),1;if(v=r,"begin"===r.type)return C(r);if("end"===r.type&&(i=O(r),void 0!==i))return i;if("illegal"===r.type&&!n)throw o('Illegal lexeme "%s" for mode "%s"',s,a.className||"<unnamed>");return b+=s,s.length}function T(t){var e;t.className&&(e=F(t.className,[])),e&&(p.push(e),y.push(p),p=e.children),a=Object.create(t,{parent:{value:a}})}function N(){var t=a.subLanguage?A():D();return b="",t}function A(){var t,e="string"===typeof a.subLanguage;return e&&!w[a.subLanguage]?I(b,[]):(t=e?M(a.subLanguage,b,!0,r,g[a.subLanguage]):S(b,{subset:0===a.subLanguage.length?void 0:a.subLanguage,prefix:r}),t.language?(a.relevance>0&&(x+=t.relevance),e&&(g[a.subLanguage]=t.top),[F(t.language,t.value,!0)]):[j(b)])}function D(){var t,e,n,r,o=[];if(!a.keywords)return I(b,o);t=0,a.lexemesRe.lastIndex=0,e=a.lexemesRe.exec(b);while(e)I(b.slice(t,e.index),o),r=B(a,e),r?(x+=r[1],n=F(r[0],[]),o.push(n),I(e[0],n.children)):I(e[0],o),t=a.lexemesRe.lastIndex,e=a.lexemesRe.exec(b);return I(b.slice(t),o),o}function P(t,e){var n,r=t.length,o=-1;while(++o<r)n=t[o],"text"===n.type?I(n.value,e):e.push(n)}function I(t,e){var n;return t&&(n=e[e.length-1],n&&"text"===n.type?n.value+=t:e.push(j(t))),e}function j(t){return{type:"text",value:t}}function F(t,e,n){return{type:"element",tagName:"span",properties:{className:[(n?"":r)+t]},children:e}}function B(t,e){var n=e[0];return s[u]&&(n=n.toLowerCase()),c.call(t.keywords,n)&&t.keywords[n]}function $(t,e){if(z(t.endRe,e)){while(t.endsParent&&t.parent)t=t.parent;return t}if(t.endsWithParent)return $(t.parent,e)}function L(){p=y.pop()||m}}function E(t){function e(o,a){o.compiled||(o.compiled=!0,o.keywords=o.keywords||o.beginKeywords,o.keywords&&(o.keywords=T(o.keywords,t[u])),o.lexemesRe=i(o.lexemes||/\w+/,!0),a&&(o.beginKeywords&&(o.begin="\\b("+o.beginKeywords.split(h).join(d)+")\\b"),o.begin||(o.begin=/\B|\b/),o.beginRe=i(o.begin),o.endSameAsBegin&&(o.end=o.begin),o.end||o.endsWithParent||(o.end=/\B|\b/),o.end&&(o.endRe=i(o.end)),o[f]=s(o.end)||"",o.endsWithParent&&a[f]&&(o[f]+=(o.end?d:"")+a[f])),o.illegal&&(o.illegalRe=i(o.illegal)),void 0===o.relevance&&(o.relevance=1),o.contains=n(o.contains||[],o),o.starts&&e(o.starts,a),o.terminators=r(o))}function n(t,n){var r,o=[],i=t.length,s=-1;while(++s<i)r=t[s],o=o.concat(A("self"===r?n:r));i=o.length,s=-1;while(++s<i)e(o[s],n);return o}function r(t){var e,n,r={},s=[],a={},c=1,l=t.contains,u=l.length,p=-1,h=[];while(++p<u)n=l[p],v(n,n.beginKeywords?"\\.?(?:"+n.begin+")\\.?":n.begin);t[f]&&v("end",t[f]),t.illegal&&v("illegal",t.illegal),u=s.length,p=-1;while(++p<u)h[p]=s[p][1];return e=i(o(h,d),!0),a={lastIndex:0,exec:m},a;function m(n){var o,i,c,l,u;if(0===s.length)return null;if(e.lastIndex=a.lastIndex,l=e.exec(n),!l)return null;o=l.length,i=-1;while(++i<o)if(u=l[i],void 0!==u&&void 0!==r[i]){c=r[i];break}return"string"===typeof c?(l.type=c,l.extra=[t.illegal,t.terminator_end]):(l.type="begin",l.rule=c),l}function v(t,e){r[c]=t,s.push([t,e]),c+=new RegExp(e.toString()+d).exec("").length}}function o(t,e){var n,r,o,i,a=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9]\d*)|\\./,c=0,l="",u=t.length,p=-1;while(++p<u){n=t[p],o=s(n),c+=1,r=c,0!==p&&(l+=e),l+=m;while(o.length>0){if(i=a.exec(o),null===i){l+=o;break}l+=o.slice(0,i.index),o=o.slice(i.index+i[0].length),i[0][0]===g&&i[1]?l+=g+String(Number(i[1])+r):(l+=i[0],i[0]===m&&c++)}l+=v}return l}function i(e,n){return new RegExp(s(e),"m"+(t[u]?"i":"")+(n?"g":""))}function s(t){return t&&t.source||t}e(t)}function T(t,e){var n,r={};if("string"===typeof t)o("keyword",t);else for(n in t)o(n,t[n]);return r;function o(t,n){var r=e?n.toLowerCase():n;i(t,r.split(h))}function i(t,e){var n,o=e.length,i=-1;while(++i<o)n=e[i].split(d),r[n[0]]=[t,Number(n[1])||N(n[0])?0:1]}}function N(t){return-1!==y.indexOf(t.toLowerCase())}function A(t){var e,n,r,o;if(t.variants&&!t[p]){r=t.variants,e=r.length,n=-1,o=[];while(++n<e)o[n]=a(t,{variants:null},r[n]);t[p]=o}return t.cached_variants?t.cached_variants:D(t)?[a(t,{starts:t.starts?a(t.starts):null})]:[t]}function D(t){return!!t&&(t.endsWithParent||D(t.starts))}function P(t){return{relevance:t.relevance||0,language:t.language||null,value:t.value||[]}}function z(t,e){var n=t&&t.exec(e);return n&&0===n.index}function R(t){return t=t.toLowerCase(),w[t]||w[x[t]]}},"417f":function(t,e,n){"use strict";e.__esModule=!0;var r=n("8bbf"),o=s(r),i=n("5924");function s(t){return t&&t.__esModule?t:{default:t}}var a=[],c="@@clickoutsideContext",l=void 0,u=0;function p(t,e,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&r.target&&o.target)||t.contains(r.target)||t.contains(o.target)||t===r.target||n.context.popperElm&&(n.context.popperElm.contains(r.target)||n.context.popperElm.contains(o.target))||(e.expression&&t[c].methodName&&n.context[t[c].methodName]?n.context[t[c].methodName]():t[c].bindingFn&&t[c].bindingFn())}}!o.default.prototype.$isServer&&(0,i.on)(document,"mousedown",(function(t){return l=t})),!o.default.prototype.$isServer&&(0,i.on)(document,"mouseup",(function(t){a.forEach((function(e){return e[c].documentHandler(t,l)}))})),e.default={bind:function(t,e,n){a.push(t);var r=u++;t[c]={id:r,documentHandler:p(t,e,n),methodName:e.expression,bindingFn:e.value}},update:function(t,e,n){t[c].documentHandler=p(t,e,n),t[c].methodName=e.expression,t[c].bindingFn=e.value},unbind:function(t){for(var e=a.length,n=0;n<e;n++)if(a[n][c].id===t[c].id){a.splice(n,1);break}delete t[c]}}},"41f8":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isVNode=i;var o=n("8122");function i(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":r(t))&&(0,o.hasOwn)(t,"componentOptions")}},4897:function(t,e,n){"use strict";e.__esModule=!0,e.i18n=e.use=e.t=void 0;var r=n("f0d9"),o=p(r),i=n("8bbf"),s=p(i),a=n("3c4e"),c=p(a),l=n("9d7e"),u=p(l);function p(t){return t&&t.__esModule?t:{default:t}}var f=(0,u.default)(s.default),h=o.default,d=!1,m=function(){var t=Object.getPrototypeOf(this||s.default).$t;if("function"===typeof t&&s.default.locale)return d||(d=!0,s.default.locale(s.default.config.lang,(0,c.default)(h,s.default.locale(s.default.config.lang)||{},{clone:!0}))),t.apply(this,arguments)},v=e.t=function(t,e){var n=m.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var r=t.split("."),o=h,i=0,s=r.length;i<s;i++){var a=r[i];if(n=o[a],i===s-1)return f(n,e);if(!n)return"";o=n}return""},g=e.use=function(t){h=t||h},y=e.i18n=function(t){m=t||m};e.default={use:g,t:v,i18n:y}},"4b26":function(t,e,n){"use strict";e.__esModule=!0;var r=n("8bbf"),o=s(r),i=n("5924");function s(t){return t&&t.__esModule?t:{default:t}}var a=!1,c=!1,l=void 0,u=function(){if(!o.default.prototype.$isServer){var t=f.modalDom;return t?a=!0:(a=!1,t=document.createElement("div"),f.modalDom=t,t.addEventListener("touchmove",(function(t){t.preventDefault(),t.stopPropagation()})),t.addEventListener("click",(function(){f.doOnModalClick&&f.doOnModalClick()}))),t}},p={},f={modalFade:!0,getInstance:function(t){return p[t]},register:function(t,e){t&&e&&(p[t]=e)},deregister:function(t){t&&(p[t]=null,delete p[t])},nextZIndex:function(){return f.zIndex++},modalStack:[],doOnModalClick:function(){var t=f.modalStack[f.modalStack.length-1];if(t){var e=f.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,n,r,s){if(!o.default.prototype.$isServer&&t&&void 0!==e){this.modalFade=s;for(var c=this.modalStack,l=0,p=c.length;l<p;l++){var f=c[l];if(f.id===t)return}var h=u();if((0,i.addClass)(h,"v-modal"),this.modalFade&&!a&&(0,i.addClass)(h,"v-modal-enter"),r){var d=r.trim().split(/\s+/);d.forEach((function(t){return(0,i.addClass)(h,t)}))}setTimeout((function(){(0,i.removeClass)(h,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(h):document.body.appendChild(h),e&&(h.style.zIndex=e),h.tabIndex=0,h.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:r})}},closeModal:function(t){var e=this.modalStack,n=u();if(e.length>0){var r=e[e.length-1];if(r.id===t){if(r.modalClass){var o=r.modalClass.trim().split(/\s+/);o.forEach((function(t){return(0,i.removeClass)(n,t)}))}e.pop(),e.length>0&&(n.style.zIndex=e[e.length-1].zIndex)}else for(var s=e.length-1;s>=0;s--)if(e[s].id===t){e.splice(s,1);break}}0===e.length&&(this.modalFade&&(0,i.addClass)(n,"v-modal-leave"),setTimeout((function(){0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",f.modalDom=void 0),(0,i.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(f,"zIndex",{configurable:!0,get:function(){return c||(l=l||(o.default.prototype.$ELEMENT||{}).zIndex||2e3,c=!0),l},set:function(t){l=t}});var h=function(){if(!o.default.prototype.$isServer&&f.modalStack.length>0){var t=f.modalStack[f.modalStack.length-1];if(!t)return;var e=f.getInstance(t.id);return e}};o.default.prototype.$isServer||window.addEventListener("keydown",(function(t){if(27===t.keyCode){var e=h();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}})),e.default=f},"4ccc":function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return ua})),n.d(e,"b",(function(){return wf})),n.d(e,"c",(function(){return da})),n.d(e,"d",(function(){return pa})),n.d(e,"e",(function(){return Bs})),n.d(e,"f",(function(){return Fs})),n.d(e,"g",(function(){return Bh})),n.d(e,"i",(function(){return ca})),n.d(e,"j",(function(){return cf})),n.d(e,"k",(function(){return Sf})),n.d(e,"l",(function(){return ha})),n.d(e,"m",(function(){return ma})),n.d(e,"n",(function(){return Ys})),n.d(e,"o",(function(){return kf})),n.d(e,"q",(function(){return hf})),n.d(e,"r",(function(){return df})),n.d(e,"s",(function(){return xf}));var r=n("8bbf"),o=n.n(r),i=n("cd42");n.d(e,"p",(function(){return i["l"]}));var s=n("f23d");n.d(e,"h",(function(){return s["e"]}));var a=n("5313"),c=n("986d"),l=n("299c"),u=n.n(l),p=n("6ed5"),f=n.n(p),h=n("18ff"),d=n.n(h),m=n("defb"),v=n.n(m),g=n("b370"),y=n.n(g),b=n("6ac9"),w=n.n(b),x=n("89a9"),S=n.n(x),k=n("df33"),C=n.n(k),O=n("304a"),_=n("dcdc"),M=n.n(_),E=n("55be"),T=n("eedf"),N=n.n(T),A="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function D(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function P(t,e){return t(e={exports:{}},e.exports),e.exports}function z(t){return t&&t.default||t}var R=function(t){return t&&t.Math==Math&&t},I=R("object"==typeof globalThis&&globalThis)||R("object"==typeof window&&window)||R("object"==typeof self&&self)||R("object"==typeof A&&A)||Function("return this")(),j=function(t){try{return!!t()}catch(t){return!0}},F=!j((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),B={}.propertyIsEnumerable,$=Object.getOwnPropertyDescriptor,L={f:$&&!B.call({1:2},1)?function(t){var e=$(this,t);return!!e&&e.enumerable}:B},V=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},q={}.toString,W=function(t){return q.call(t).slice(8,-1)},J="".split,H=j((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==W(t)?J.call(t,""):Object(t)}:Object,U=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},K=function(t){return H(U(t))},G=function(t){return"object"==typeof t?null!==t:"function"==typeof t},X=function(t,e){if(!G(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!G(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!G(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!G(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Z={}.hasOwnProperty,Y=function(t,e){return Z.call(t,e)},Q=I.document,tt=G(Q)&&G(Q.createElement),et=function(t){return tt?Q.createElement(t):{}},nt=!F&&!j((function(){return 7!=Object.defineProperty(et("div"),"a",{get:function(){return 7}}).a})),rt=Object.getOwnPropertyDescriptor,ot={f:F?rt:function(t,e){if(t=K(t),e=X(e,!0),nt)try{return rt(t,e)}catch(t){}if(Y(t,e))return V(!L.f.call(t,e),t[e])}},it=function(t){if(!G(t))throw TypeError(String(t)+" is not an object");return t},st=Object.defineProperty,at={f:F?st:function(t,e,n){if(it(t),e=X(e,!0),it(n),nt)try{return st(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},ct=F?function(t,e,n){return at.f(t,e,V(1,n))}:function(t,e,n){return t[e]=n,t},lt=function(t,e){try{ct(I,t,e)}catch(n){I[t]=e}return e},ut=I["__core-js_shared__"]||lt("__core-js_shared__",{}),pt=Function.toString;"function"!=typeof ut.inspectSource&&(ut.inspectSource=function(t){return pt.call(t)});var ft,ht,dt,mt=ut.inspectSource,vt=I.WeakMap,gt="function"==typeof vt&&/native code/.test(mt(vt)),yt=P((function(t){(t.exports=function(t,e){return ut[t]||(ut[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),bt=0,wt=Math.random(),xt=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++bt+wt).toString(36)},St=yt("keys"),kt=function(t){return St[t]||(St[t]=xt(t))},Ct={},Ot=I.WeakMap;if(gt){var _t=new Ot,Mt=_t.get,Et=_t.has,Tt=_t.set;ft=function(t,e){return Tt.call(_t,t,e),e},ht=function(t){return Mt.call(_t,t)||{}},dt=function(t){return Et.call(_t,t)}}else{var Nt=kt("state");Ct[Nt]=!0,ft=function(t,e){return ct(t,Nt,e),e},ht=function(t){return Y(t,Nt)?t[Nt]:{}},dt=function(t){return Y(t,Nt)}}var At={set:ft,get:ht,has:dt,enforce:function(t){return dt(t)?ht(t):ft(t,{})},getterFor:function(t){return function(e){var n;if(!G(e)||(n=ht(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},Dt=P((function(t){var e=At.get,n=At.enforce,r=String(String).split("String");(t.exports=function(t,e,o,i){var s=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,c=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||Y(o,"name")||ct(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==I?(s?!c&&t[e]&&(a=!0):delete t[e],a?t[e]=o:ct(t,e,o)):a?t[e]=o:lt(e,o)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||mt(this)}))})),Pt=I,zt=function(t){return"function"==typeof t?t:void 0},Rt=function(t,e){return arguments.length<2?zt(Pt[t])||zt(I[t]):Pt[t]&&Pt[t][e]||I[t]&&I[t][e]},It=Math.ceil,jt=Math.floor,Ft=function(t){return isNaN(t=+t)?0:(t>0?jt:It)(t)},Bt=Math.min,$t=function(t){return t>0?Bt(Ft(t),9007199254740991):0},Lt=Math.max,Vt=Math.min,qt=function(t,e){var n=Ft(t);return n<0?Lt(n+e,0):Vt(n,e)},Wt=function(t){return function(e,n,r){var o,i=K(e),s=$t(i.length),a=qt(r,s);if(t&&n!=n){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},Jt={includes:Wt(!0),indexOf:Wt(!1)},Ht=Jt.indexOf,Ut=function(t,e){var n,r=K(t),o=0,i=[];for(n in r)!Y(Ct,n)&&Y(r,n)&&i.push(n);for(;e.length>o;)Y(r,n=e[o++])&&(~Ht(i,n)||i.push(n));return i},Kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Gt=Kt.concat("length","prototype"),Xt={f:Object.getOwnPropertyNames||function(t){return Ut(t,Gt)}},Zt={f:Object.getOwnPropertySymbols},Yt=Rt("Reflect","ownKeys")||function(t){var e=Xt.f(it(t)),n=Zt.f;return n?e.concat(n(t)):e},Qt=function(t,e){for(var n=Yt(e),r=at.f,o=ot.f,i=0;i<n.length;i++){var s=n[i];Y(t,s)||r(t,s,o(e,s))}},te=/#|\.prototype\./,ee=function(t,e){var n=re[ne(t)];return n==ie||n!=oe&&("function"==typeof e?j(e):!!e)},ne=ee.normalize=function(t){return String(t).replace(te,".").toLowerCase()},re=ee.data={},oe=ee.NATIVE="N",ie=ee.POLYFILL="P",se=ee,ae=ot.f,ce=function(t,e){var n,r,o,i,s,a=t.target,c=t.global,l=t.stat;if(n=c?I:l?I[a]||lt(a,{}):(I[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(s=ae(n,r))&&s.value:n[r],!se(c?r:a+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Qt(i,o)}(t.sham||o&&o.sham)&&ct(i,"sham",!0),Dt(n,r,i,t)}},le=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},ue=function(t){return Object(U(t))},pe=function(t){return function(e,n,r,o){le(n);var i=ue(e),s=H(i),a=$t(i.length),c=t?a-1:0,l=t?-1:1;if(r<2)for(;;){if(c in s){o=s[c],c+=l;break}if(c+=l,t?c<0:a<=c)throw TypeError("Reduce of empty array with no initial value")}for(;t?c>=0:a>c;c+=l)c in s&&(o=n(o,s[c],c,i));return o}},fe={left:pe(!1),right:pe(!0)},he=function(t,e){var n=[][t];return!!n&&j((function(){n.call(null,e||function(){throw 1},1)}))},de=Object.defineProperty,me={},ve=function(t){throw t},ge=function(t,e){if(Y(me,t))return me[t];e||(e={});var n=[][t],r=!!Y(e,"ACCESSORS")&&e.ACCESSORS,o=Y(e,0)?e[0]:ve,i=Y(e,1)?e[1]:void 0;return me[t]=!!n&&!j((function(){if(r&&!F)return!0;var t={length:-1};r?de(t,1,{enumerable:!0,get:ve}):t[1]=1,n.call(t,o,i)}))},ye=fe.left,be=he("reduce"),we=ge("reduce",{1:0});ce({target:"Array",proto:!0,forced:!be||!we},{reduce:function(t){return ye(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var xe=function(){var t=it(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function Se(t,e){return RegExp(t,e)}var ke={UNSUPPORTED_Y:j((function(){var t=Se("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:j((function(){var t=Se("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},Ce=RegExp.prototype.exec,Oe=String.prototype.replace,_e=Ce,Me=function(){var t=/a/,e=/b*/g;return Ce.call(t,"a"),Ce.call(e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Ee=ke.UNSUPPORTED_Y||ke.BROKEN_CARET,Te=void 0!==/()??/.exec("")[1];(Me||Te||Ee)&&(_e=function(t){var e,n,r,o,i=this,s=Ee&&i.sticky,a=xe.call(i),c=i.source,l=0,u=t;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),u=String(t).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==t[i.lastIndex-1])&&(c="(?: "+c+")",u=" "+u,l++),n=new RegExp("^(?:"+c+")",a)),Te&&(n=new RegExp("^"+c+"$(?!\\s)",a)),Me&&(e=i.lastIndex),r=Ce.call(s?n:i,u),s?r?(r.input=r.input.slice(l),r[0]=r[0].slice(l),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:Me&&r&&(i.lastIndex=i.global?r.index+r[0].length:e),Te&&r&&r.length>1&&Oe.call(r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r});var Ne=_e;ce({target:"RegExp",proto:!0,forced:/./.exec!==Ne},{exec:Ne});var Ae=!!Object.getOwnPropertySymbols&&!j((function(){return!String(Symbol())})),De=Ae&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Pe=yt("wks"),ze=I.Symbol,Re=De?ze:ze&&ze.withoutSetter||xt,Ie=function(t){return Y(Pe,t)||(Ae&&Y(ze,t)?Pe[t]=ze[t]:Pe[t]=Re("Symbol."+t)),Pe[t]},je=Ie("species"),Fe=!j((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),Be="$0"==="a".replace(/./,"$0"),$e=Ie("replace"),Le=!!/./[$e]&&""===/./[$e]("a","$0"),Ve=!j((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),qe=function(t,e,n,r){var o=Ie(t),i=!j((function(){var e={};return e[o]=function(){return 7},7!=""[t](e)})),s=i&&!j((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[je]=function(){return n},n.flags="",n[o]=/./[o]),n.exec=function(){return e=!0,null},n[o](""),!e}));if(!i||!s||"replace"===t&&(!Fe||!Be||Le)||"split"===t&&!Ve){var a=/./[o],c=n(o,""[t],(function(t,e,n,r,o){return e.exec===Ne?i&&!o?{done:!0,value:a.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}}),{REPLACE_KEEPS_$0:Be,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:Le}),l=c[0],u=c[1];Dt(String.prototype,t,l),Dt(RegExp.prototype,o,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}r&&ct(RegExp.prototype[o],"sham",!0)},We=Ie("match"),Je=function(t){var e;return G(t)&&(void 0!==(e=t[We])?!!e:"RegExp"==W(t))},He=Ie("species"),Ue=function(t,e){var n,r=it(t).constructor;return void 0===r||null==(n=it(r)[He])?e:le(n)},Ke=function(t){return function(e,n){var r,o,i=String(U(e)),s=Ft(n),a=i.length;return s<0||s>=a?t?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):r:t?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}},Ge={codeAt:Ke(!1),charAt:Ke(!0)},Xe=Ge.charAt,Ze=function(t,e,n){return e+(n?Xe(t,e).length:1)},Ye=function(t,e){var n=t.exec;if("function"==typeof n){var r=n.call(t,e);if("object"!=typeof r)throw TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==W(t))throw TypeError("RegExp#exec called on incompatible receiver");return Ne.call(t,e)},Qe=[].push,tn=Math.min,en=!j((function(){return!RegExp(4294967295,"y")}));qe("split",2,(function(t,e,n){var r;return r="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var r=String(U(this)),o=void 0===n?4294967295:n>>>0;if(0===o)return[];if(void 0===t)return[r];if(!Je(t))return e.call(r,t,o);for(var i,s,a,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,p=new RegExp(t.source,l+"g");(i=Ne.call(p,r))&&!((s=p.lastIndex)>u&&(c.push(r.slice(u,i.index)),i.length>1&&i.index<r.length&&Qe.apply(c,i.slice(1)),a=i[0].length,u=s,c.length>=o));)p.lastIndex===i.index&&p.lastIndex++;return u===r.length?!a&&p.test("")||c.push(""):c.push(r.slice(u)),c.length>o?c.slice(0,o):c}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:e.call(this,t,n)}:e,[function(e,n){var o=U(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,o,n):r.call(String(o),e,n)},function(t,o){var i=n(r,t,this,o,r!==e);if(i.done)return i.value;var s=it(t),a=String(this),c=Ue(s,RegExp),l=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(en?"y":"g"),p=new c(en?s:"^(?:"+s.source+")",u),f=void 0===o?4294967295:o>>>0;if(0===f)return[];if(0===a.length)return null===Ye(p,a)?[a]:[];for(var h=0,d=0,m=[];d<a.length;){p.lastIndex=en?d:0;var v,g=Ye(p,en?a:a.slice(d));if(null===g||(v=tn($t(p.lastIndex+(en?0:d)),a.length))===h)d=Ze(a,d,l);else{if(m.push(a.slice(h,d)),m.length===f)return m;for(var y=1;y<=g.length-1;y++)if(m.push(g[y]),m.length===f)return m;d=h=v}}return m.push(a.slice(h)),m}]}),!en);var nn=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return it(n),function(t){if(!G(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),rn=function(t,e,n){var r,o;return nn&&"function"==typeof(r=e.constructor)&&r!==n&&G(o=r.prototype)&&o!==n.prototype&&nn(t,o),t},on=Ie("species"),sn=function(t){var e=Rt(t),n=at.f;F&&e&&!e[on]&&n(e,on,{configurable:!0,get:function(){return this}})},an=at.f,cn=Xt.f,ln=At.set,un=Ie("match"),pn=I.RegExp,fn=pn.prototype,hn=/a/g,dn=/a/g,mn=new pn(hn)!==hn,vn=ke.UNSUPPORTED_Y;if(F&&se("RegExp",!mn||vn||j((function(){return dn[un]=!1,pn(hn)!=hn||pn(dn)==dn||"/a/i"!=pn(hn,"i")})))){for(var gn=function(t,e){var n,r=this instanceof gn,o=Je(t),i=void 0===e;if(!r&&o&&t.constructor===gn&&i)return t;mn?o&&!i&&(t=t.source):t instanceof gn&&(i&&(e=xe.call(t)),t=t.source),vn&&(n=!!e&&e.indexOf("y")>-1)&&(e=e.replace(/y/g,""));var s=rn(mn?new pn(t,e):pn(t,e),r?this:fn,gn);return vn&&n&&ln(s,{sticky:n}),s},yn=function(t){t in gn||an(gn,t,{configurable:!0,get:function(){return pn[t]},set:function(e){pn[t]=e}})},bn=cn(pn),wn=0;bn.length>wn;)yn(bn[wn++]);fn.constructor=gn,gn.prototype=fn,Dt(I,"RegExp",gn)}sn("RegExp");var xn=RegExp.prototype,Sn=xn.toString,kn=j((function(){return"/a/b"!=Sn.call({source:"a",flags:"b"})})),Cn="toString"!=Sn.name;(kn||Cn)&&Dt(RegExp.prototype,"toString",(function(){var t=it(this),e=String(t.source),n=t.flags;return"/"+e+"/"+String(void 0===n&&t instanceof RegExp&&!("flags"in xn)?xe.call(t):n)}),{unsafe:!0});var On=new RegExp("(left|center|right|justify)"),_n=function(){function t(){}return t.warn=function(t){console.warn("[Element-Tiptap Tip] "+t)},t.error=function(t){console.error("[Element-Tiptap Tip] "+t)},t}(),Mn={en:{editor:{extensions:{Bold:{tooltip:"Bold"},Underline:{tooltip:"Underline"},Italic:{tooltip:"Italic"},Strike:{tooltip:"Strike through"},Heading:{tooltip:"Heading",buttons:{paragraph:"Paragraph",heading:"Heading"}},Blockquote:{tooltip:"Block quote"},CodeBlock:{tooltip:"Code block"},Link:{add:{tooltip:"Apply link",control:{title:"Apply Link",placeholder:"Href",confirm:"Apply",cancel:"Cancel"}},edit:{tooltip:"Edit link",control:{title:"Edit Link",placeholder:"Href",confirm:"Update",cancel:"Cancel"}},unlink:{tooltip:"Unlink"},open:{tooltip:"Open link"}},Image:{buttons:{insert_image:{tooltip:"Insert image",external:"Insert Image By Url",upload:"Upload Image"},remove_image:{tooltip:"Remove"},image_options:{tooltip:"Image options"},display:{tooltip:"Display",inline:"Inline",block:"Break Text",left:"Float Left",right:"Float Right"}},control:{insert_by_url:{title:"Insert image",placeholder:"Url of image",confirm:"Insert",cancel:"Cancel",invalid_url:"Please enter the correct url"},upload_image:{title:"Upload image",button:"Choose an image file or drag it here"},edit_image:{title:"Edit image",confirm:"Update",cancel:"Cancel",form:{src:"Image Url",alt:"Alternative Text",width:"Width",height:"Height"}}}},Iframe:{tooltip:"Insert video",control:{title:"Insert video",placeholder:"Href",confirm:"Insert",cancel:"Cancel"}},BulletList:{tooltip:"Bullet list"},OrderedList:{tooltip:"Ordered list"},TodoList:{tooltip:"Todo list"},TextAlign:{buttons:{align_left:{tooltip:"Align left"},align_center:{tooltip:"Align center"},align_right:{tooltip:"Align right"},align_justify:{tooltip:"Align justify"}}},FontType:{tooltip:"Font family"},FontSize:{tooltip:"Font size",default:"default"},TextColor:{tooltip:"Text color"},TextHighlight:{tooltip:"Text highlight"},LineHeight:{tooltip:"Line height"},Table:{tooltip:"Table",buttons:{insert_table:"Insert Table",add_column_before:"Add Column Before",add_column_after:"Add Column After",delete_column:"Delete Column",add_row_before:"Add Row Before",add_row_after:"Add Row After",delete_row:"Delete Row",merge_cells:"Merge Cells",split_cell:"Split Cell",delete_table:"Delete Table"}},Indent:{buttons:{indent:{tooltip:"Indent"},outdent:{tooltip:"Outdent"}}},FormatClear:{tooltip:"Clear format"},HorizontalRule:{tooltip:"Horizontal rule"},History:{tooltip:{undo:"Undo",redo:"Redo"}},Fullscreen:{tooltip:{fullscreen:"Full screen",exit_fullscreen:"Exit full screen"}},Print:{tooltip:"Print"},Preview:{tooltip:"Preview",dialog:{title:"Preview"}},SelectAll:{tooltip:"Select all"},CodeView:{tooltip:"Code view"}},characters:"Characters"}},zh:{editor:{extensions:{Bold:{tooltip:"粗体"},Underline:{tooltip:"下划线"},Italic:{tooltip:"斜体"},Strike:{tooltip:"中划线"},Heading:{tooltip:"标题",buttons:{paragraph:"正文",heading:"标题"}},Blockquote:{tooltip:"引用"},CodeBlock:{tooltip:"代码块"},Link:{add:{tooltip:"添加链接",control:{title:"添加链接",placeholder:"输入链接",confirm:"添加",cancel:"取消"}},edit:{tooltip:"编辑链接",control:{title:"编辑链接",placeholder:"输入链接",confirm:"更新",cancel:"取消"}},unlink:{tooltip:"取消链接"},open:{tooltip:"打开链接"}},Image:{buttons:{insert_image:{tooltip:"插入图片",external:"插入网络图片",upload:"上传本地图片"},remove_image:{tooltip:"删除"},image_options:{tooltip:"图片属性"},display:{tooltip:"布局",inline:"内联",block:"断行",left:"左浮动",right:"右浮动"}},control:{insert_by_url:{title:"插入网络图片",placeholder:"输入链接",confirm:"插入",cancel:"取消",invalid_url:"请输入正确的图片链接"},upload_image:{title:"上传本地图片",button:"将图片文件拖到此处或者点击上传"},edit_image:{title:"编辑图片",confirm:"更新",cancel:"取消",form:{src:"图片链接",alt:"备用文本描述",width:"宽度",height:"高度"}}}},Iframe:{tooltip:"插入视频",control:{title:"插入视频",placeholder:"输入链接",confirm:"插入",cancel:"取消"}},BulletList:{tooltip:"无序列表"},OrderedList:{tooltip:"有序列表"},TodoList:{tooltip:"任务列表"},TextAlign:{buttons:{align_left:{tooltip:"左对齐"},align_center:{tooltip:"居中对齐"},align_right:{tooltip:"右对齐"},align_justify:{tooltip:"两端对齐"}}},FontType:{tooltip:"字体"},FontSize:{tooltip:"字号",default:"默认"},TextColor:{tooltip:"文本颜色"},TextHighlight:{tooltip:"文本高亮"},LineHeight:{tooltip:"行距"},Table:{tooltip:"表格",buttons:{insert_table:"插入表格",add_column_before:"向左插入一列",add_column_after:"向右插入一列",delete_column:"删除列",add_row_before:"向上插入一行",add_row_after:"向下插入一行",delete_row:"删除行",merge_cells:"合并单元格",split_cell:"拆分单元格",delete_table:"删除表格"}},Indent:{buttons:{indent:{tooltip:"增加缩进"},outdent:{tooltip:"减少缩进"}}},FormatClear:{tooltip:"清除格式"},HorizontalRule:{tooltip:"分隔线"},History:{tooltip:{undo:"撤销",redo:"重做"}},Fullscreen:{tooltip:{fullscreen:"全屏",exit_fullscreen:"退出全屏"}},Print:{tooltip:"打印"},Preview:{tooltip:"预览",dialog:{title:"预览"}},SelectAll:{tooltip:"全选"},CodeView:{tooltip:"查看源代码"}},characters:"字数"}},pl:{editor:{extensions:{Bold:{tooltip:"Pogrubienie"},Underline:{tooltip:"Podkreślenie"},Italic:{tooltip:"Kursywa"},Strike:{tooltip:"Przekreślenie"},Heading:{tooltip:"Nagłówek",buttons:{paragraph:"Paragraf",heading:"Nagłówek"}},Blockquote:{tooltip:"Cytat"},CodeBlock:{tooltip:"Kod"},Link:{add:{tooltip:"Dodaj link",control:{title:"Dodaj Link",placeholder:"Źródło",confirm:"Dodaj",cancel:"Anuluj"}},edit:{tooltip:"Edytuj link",control:{title:"Edytuj link",placeholder:"Źródło",confirm:"aktualizacja",cancel:"Anuluj"}},unlink:{tooltip:"Odczepić"},open:{tooltip:"Otwórz link"}},Image:{buttons:{insert_image:{tooltip:"Dodaj obraz",external:"Dodaj obraz online",upload:"Dodaj obraz z dysku"},remove_image:{tooltip:"Usuń"},image_options:{tooltip:"Opcje obrazu"},display:{tooltip:"Pokaz",inline:"Inline",block:"Podziel tekst",left:"Przesuń w lewo",right:"Płyń w prawo"}},control:{insert_by_url:{title:"Dodawanie obrazu online",placeholder:"URL obrazu",confirm:"Dodaj",cancel:"Zamknij",invalid_url:"Proszę podać prawidłowy link prowadzący do obrazu"},upload_image:{title:"Dodawanie obrazu z dysku",button:"Wskaż obraz lub przeciągnij go tutaj"},edit_image:{title:"Edytuj obraz",confirm:"Aktualizacja",cancel:"Zamknij",form:{src:"URL obrazu",alt:"Alternatywny Tekst",width:"Szerokość",height:"Wysokość"}}}},Iframe:{tooltip:"Dodaj film",control:{title:"Dodaj film",placeholder:"URL filmu",confirm:"Dodaj",cancel:"Zamknij"}},BulletList:{tooltip:"Lista wypunktowana"},OrderedList:{tooltip:"Lista uporządkowana"},TodoList:{tooltip:"Lista rzeczy do zrobienia"},TextAlign:{buttons:{align_left:{tooltip:"Wyrównaj do lewej"},align_center:{tooltip:"Wyśrodkuj"},align_right:{tooltip:"Wyrównaj do prawej"},align_justify:{tooltip:"Wyjustuj"}}},FontType:{tooltip:"Rodzina czcionek"},FontSize:{tooltip:"Rozmiar czcionki",default:"domyślna"},TextColor:{tooltip:"Kolor tekstu"},TextHighlight:{tooltip:"Podświetlenie tekstu"},LineHeight:{tooltip:"Wysokość linii"},Table:{tooltip:"Tabela",buttons:{insert_table:"Dodaj tabelę",add_column_before:"Dodaj kolumnę przed",add_column_afer:"Dodaj kolumnę za",delete_column:"Usuń kolumnę",add_row_before:"Dodaj wiersz przed",add_row_after:"Dodaj wiersz za",delete_row:"Usuń wiersz",merge_cells:"Połącz komórki",split_cell:"Rozdziel komórki",delete_table:"Usuń tabelę"}},Indent:{buttons:{indent:{tooltip:"Zwiększ wcięcie"},outdent:{tooltip:"Zmniejsz wcięcie"}}},FormatClear:{tooltip:"Wyczyść formatowanie"},HorizontalRule:{tooltip:"Linia pozioma"},History:{tooltip:{undo:"Cofnij",redo:"Powtórz"}},Fullscreen:{tooltip:{fullscreen:"Pełny ekran",exit_fullscreen:"Zamknij pełny ekran"}},Print:{tooltip:"Drukuj"},Preview:{tooltip:"Podgląd",dialog:{title:"Podgląd"}},SelectAll:{tooltip:"Zaznacz wszystko"},CodeView:{tooltip:"Widok kodu"}},characters:"Znaki"}},ru:{editor:{extensions:{Bold:{tooltip:"Полужирный"},Underline:{tooltip:"Подчеркнутый"},Italic:{tooltip:"Курсив"},Strike:{tooltip:"Зачеркнутый"},Heading:{tooltip:"Заголовок",buttons:{paragraph:"Параграф",heading:"Заголовок"}},Blockquote:{tooltip:"Цитата"},CodeBlock:{tooltip:"Блок кода"},Link:{add:{tooltip:"Добавить ссылку",control:{title:"Добавить ссылку",placeholder:"Адрес",confirm:"Применить",cancel:"Отменить"}},edit:{tooltip:"Редактировать ссылку",control:{title:"Редактировать ссылку",placeholder:"Адрес",confirm:"Обновить",cancel:"Отменить"}},unlink:{tooltip:"Удалить ссылку"},open:{tooltip:"Открыть ссылку"}},Image:{buttons:{insert_image:{tooltip:"Вставить картинку",external:"Вставить картинку по адресу",upload:"Загрузить картинку"},remove_image:{tooltip:"Удалить"},image_options:{tooltip:"Варианты изображения"},display:{tooltip:"дисплей",inline:"Инлайн",block:"Разрыв текста",left:"Поплавок влево",right:"Поплавок справа"}},control:{insert_by_url:{title:"Вставить картинку",placeholder:"Адрес картинки",confirm:"Вставить",cancel:"Отменить",invalid_url:"Пожалуйста введите правильный адрес"},upload_image:{title:"Загрузить картинку",button:"Выберите файл изображения или перетащите сюда"},edit_image:{title:"Редактировать изображение",confirm:"Обновить",cancel:"Отменить",form:{src:"Адрес картинки",alt:"Альтернативный текст",width:"ширина",height:"Высота"}}}},Iframe:{tooltip:"Вставить видео",control:{title:"Вставить видео",placeholder:"Адрес",confirm:"Вставить",cancel:"Отменить"}},BulletList:{tooltip:"Маркированный список"},OrderedList:{tooltip:"Нумерованный список"},TodoList:{tooltip:"Список задач"},TextAlign:{buttons:{align_left:{tooltip:"Выровнять по левому краю"},align_center:{tooltip:"Выровнять по центру"},align_right:{tooltip:"Выровнять по правому краю"},align_justify:{tooltip:"Выровнять по ширине"}}},FontType:{tooltip:"Семейство шрифтов"},FontSize:{tooltip:"Размер шрифта",default:"дефолт"},TextColor:{tooltip:"Цвет текста"},TextHighlight:{tooltip:"Цвет выделения текста"},LineHeight:{tooltip:"Интервал"},Table:{tooltip:"Таблица",buttons:{insert_table:"Вставить таблицу",add_column_before:"Добавить столбец слева",add_column_after:"Добавить столбец справа",delete_column:"Удалить столбец",add_row_before:"Добавить строку сверху",add_row_after:"Добавить строку снизу",delete_row:"Удалить строку",merge_cells:"Объединить ячейки",split_cell:"Разделить ячейки",delete_table:"Удалить таблицу"}},Indent:{buttons:{indent:{tooltip:"Увеличить отступ"},outdent:{tooltip:"Уменьшить отступ"}}},FormatClear:{tooltip:"Очистить форматирование"},HorizontalRule:{tooltip:"Горизонтальная линия"},History:{tooltip:{undo:"Отменить",redo:"Повторить"}},Fullscreen:{tooltip:{fullscreen:"Полноэкранный режим",exit_fullscreen:"Выйти из полноэкранного режима"}},Print:{tooltip:"Печать"},Preview:{tooltip:"Предварительный просмотр",dialog:{title:"Предварительный просмотр"}},SelectAll:{tooltip:"Выделить все"},CodeView:{tooltip:"Просмотр кода"}},characters:"Количество символов"}},de:{editor:{extensions:{Bold:{tooltip:"Fett"},Underline:{tooltip:"Unterstrichen"},Italic:{tooltip:"Kursiv"},Strike:{tooltip:"Durchgestrichen"},Heading:{tooltip:"Überschrift",buttons:{paragraph:"Absatz",heading:"Überschrift"}},Blockquote:{tooltip:"Zitat"},CodeBlock:{tooltip:"Codeblock"},Link:{add:{tooltip:"Link hinzufügen",control:{title:"Link hinzufügen",placeholder:"Link",confirm:"Hinzufügen",cancel:"Abbrechen"}},edit:{tooltip:"Link bearbeiten",control:{title:"Link bearbeiten",placeholder:"Link",confirm:"Speichern",cancel:"Abbrechen"}},unlink:{tooltip:"Link entfernen"},open:{tooltip:"Link öffnen"}},Image:{buttons:{insert_image:{tooltip:"Bild einfügen",external:"Bild von URL einfügen",upload:"Bild hochladen"},remove_image:{tooltip:"Entfernen"},image_options:{tooltip:"Bildoptionen"},display:{tooltip:"Textumbruch",inline:"In der Zeile",block:"Text teilen",left:"Links",right:"Rechts"}},control:{insert_by_url:{title:"Bild einfügen",placeholder:"Bild URL",confirm:"Einfügen",cancel:"Abbrechen",invalid_url:"Diese URL hat ein ungültiges Format"},upload_image:{title:"Bild hochladen",button:"Wählen Sie ein Bild aus, oder ziehen Sie ein Bild auf dieses Feld"},edit_image:{title:"Bild Bearbeiten",confirm:"Speichern",cancel:"Abbrechen",form:{src:"Bild URL",alt:"Alternativer Text (angezeigt beim Überfahren mit Maus)",width:"Breite",height:"Höhe"}}}},Iframe:{tooltip:"Video einfügen",control:{title:"Video einfügen",placeholder:"Link",confirm:"Einfügen",cancel:"Abbrechen"}},BulletList:{tooltip:"Aufzählungsliste"},OrderedList:{tooltip:"Nummerierte Liste"},TodoList:{tooltip:"Erledigungsliste"},TextAlign:{buttons:{align_left:{tooltip:"Linksbündig"},align_center:{tooltip:"Zentriert"},align_right:{tooltip:"Rechtsbündig"},align_justify:{tooltip:"Blocksatz"}}},FontType:{tooltip:"Schriftfamilie"},FontSize:{tooltip:"Schriftgröße",default:"standard"},TextColor:{tooltip:"Textfarbe"},TextHighlight:{tooltip:"Hervorhebungsfarbe"},LineHeight:{tooltip:"Zeilenabstand"},Table:{tooltip:"Tabelle",buttons:{insert_table:"Tabelle einfügen",add_column_before:"Spalte vorher einfügen",add_column_after:"Spalte nachher einfügen",delete_column:"Spalte löschen",add_row_before:"Zeile vorher einfügen",add_row_after:"Zeile nachher einfügen",delete_row:"Zeile löschen",merge_cells:"Zellen verbinden",split_cell:"Zellen aufteilen",delete_table:"Tabelle löschen"}},Indent:{buttons:{indent:{tooltip:"Einzug vergrößern"},outdent:{tooltip:"Einzug verringern"}}},FormatClear:{tooltip:"Formattierung entfernen"},HorizontalRule:{tooltip:"Horizontale Linie"},History:{tooltip:{undo:"Rückgängig",redo:"Wiederholen"}},Fullscreen:{tooltip:{fullscreen:"Vollbild",exit_fullscreen:"Vollbild verlassen"}},Print:{tooltip:"Drucken"},Preview:{tooltip:"Vorschau",dialog:{title:"Vorschau"}},SelectAll:{tooltip:"Alles auswählen"},CodeView:{tooltip:"Codeansicht"}},characters:"Zeichen"}},ko:{editor:{extensions:{Bold:{tooltip:"굵게"},Underline:{tooltip:"밑줄"},Italic:{tooltip:"기울임"},Strike:{tooltip:"취소선"},Heading:{tooltip:"문단 형식",buttons:{paragraph:"문단",heading:"제목"}},Blockquote:{tooltip:"인용"},CodeBlock:{tooltip:"코드"},Link:{add:{tooltip:"링크 추가",control:{title:"링크 추가",placeholder:"URL주소",confirm:"적용",cancel:"취소"}},edit:{tooltip:"링크 편집",control:{title:"링크 편집",placeholder:"URL주소",confirm:"적용",cancel:"취소"}},unlink:{tooltip:"링크 제거"},open:{tooltip:"링크 열기"}},Image:{buttons:{insert_image:{tooltip:"이미지 추가",external:"이미지 URL을 입력하세요.",upload:"이미지 업로드"},remove_image:{tooltip:"제거"},image_options:{tooltip:"이미지 옵션"},display:{tooltip:"표시",inline:"인라인",block:"새줄",left:"좌측 정렬",right:"우측 정렬"}},control:{insert_by_url:{title:"이미지 추가",placeholder:"이미지 URL",confirm:"추가",cancel:"취소",invalid_url:"정확한 URL을 입력하세요"},upload_image:{title:"이미지 업로드",button:"이미지 파일을 선택하거나 끌어넣기 하세요"},edit_image:{title:"이미지 편집",confirm:"적용",cancel:"취소",form:{src:"이미지 URL",alt:"대체 텍스트",width:"너비",height:"높이"}}}},Iframe:{tooltip:"비디오 추가",control:{title:"비디오 추가",placeholder:"비디오 URL",confirm:"추가",cancel:"취소"}},BulletList:{tooltip:"비번호 목록"},OrderedList:{tooltip:"번호 목록"},TodoList:{tooltip:"할일 목록"},TextAlign:{buttons:{align_left:{tooltip:"좌측 정렬"},align_center:{tooltip:"중앙 정렬"},align_right:{tooltip:"우측 정렬"},align_justify:{tooltip:"좌우 정렬"}}},FontType:{tooltip:"폰트"},FontSize:{tooltip:"글자 크기",default:"기본"},TextColor:{tooltip:"글자 색"},TextHighlight:{tooltip:"글자 강조"},LineHeight:{tooltip:"줄 높이"},Table:{tooltip:"테이블",buttons:{insert_table:"테이블 추가",add_column_before:"이전에 열 추가",add_column_after:"이후에 열 추가",delete_column:"열 삭제",add_row_before:"이전에 줄 추가",add_row_after:"이후에 줄 추가",delete_row:"줄 삭제",merge_cells:"셀 병합",split_cell:"셀 분할",delete_table:"테이블 삭제"}},Indent:{buttons:{indent:{tooltip:"들여 쓰기"},outdent:{tooltip:"내어 쓰기"}}},FormatClear:{tooltip:"형식 지우기"},HorizontalRule:{tooltip:"가로 줄"},History:{tooltip:{undo:"되돌리기",redo:"다시 실행"}},Fullscreen:{tooltip:{fullscreen:"전체화면",exit_fullscreen:"전체화면 나가기"}},Print:{tooltip:"인쇄"},Preview:{tooltip:"미리보기",dialog:{title:"미리보기"}},SelectAll:{tooltip:"전체선택"},CodeView:{tooltip:"코드 뷰"}},characters:"문자수"}},es:{editor:{extensions:{Bold:{tooltip:"Negrita"},Underline:{tooltip:"Subrayado"},Italic:{tooltip:"Cursiva"},Strike:{tooltip:"Texto tachado"},Heading:{tooltip:"Encabezado",buttons:{paragraph:"Párrafo",heading:"Encabezado"}},Blockquote:{tooltip:"Bloque de cita"},CodeBlock:{tooltip:"Bloque de código"},Link:{add:{tooltip:"Crear enlace",control:{title:"Crear enlace",placeholder:"Href",confirm:"Crear",cancel:"Cancelar"}},edit:{tooltip:"Editar enlace",control:{title:"Editar enlace",placeholder:"Href",confirm:"Actualizar",cancel:"Cancelar"}},unlink:{tooltip:"Desenlazar"},open:{tooltip:"Abrir enlace"}},Image:{buttons:{insert_image:{tooltip:"Insertar imagen",external:"Insertar imagen desde Url",upload:"Cargar imagen"},remove_image:{tooltip:"Eliminar"},image_options:{tooltip:"Opciones de imagen"},display:{tooltip:"Visualización",inline:"En línea",block:"Bloque",left:"Flotar a la izquierda",right:"Flotar a la derecha"}},control:{insert_by_url:{title:"Insertar imagen",placeholder:"Url de la imagen",confirm:"Insertar",cancel:"Cancelar",invalid_url:"Por favor introduce una Url válida"},upload_image:{title:"Cargar imagen",button:"Selecciona una imagen o arrástrala aquí"},edit_image:{title:"Editar imagen",confirm:"Actualizar",cancel:"Cancelar",form:{src:"Url de la imagen",alt:"Texto alternativo",width:"Ancho",height:"Alto"}}}},Iframe:{tooltip:"Insertar vídeo",control:{title:"Insertar vídeo",placeholder:"Href",confirm:"Insertar",cancel:"Cancelar"}},BulletList:{tooltip:"Lista desordenada"},OrderedList:{tooltip:"Lista ordenada"},TodoList:{tooltip:"Lista de tareas"},TextAlign:{buttons:{align_left:{tooltip:"Alinear a la izquierda"},align_center:{tooltip:"Centrar texto"},align_right:{tooltip:"Alinear a la derecha"},align_justify:{tooltip:"Texto justificado"}}},FontType:{tooltip:"Fuente"},FontSize:{tooltip:"Tamaño de fuente",default:"por defecto"},TextColor:{tooltip:"Color de texto"},TextHighlight:{tooltip:"Resaltar texto"},LineHeight:{tooltip:"Altura de línea"},Table:{tooltip:"Tabla",buttons:{insert_table:"Insertar tabla",add_column_before:"Añadir columna antes",add_column_after:"Añadir columna después",delete_column:"Eliminar columna",add_row_before:"Añadir fila antes",add_row_after:"Añadir fila después",delete_row:"Eliminar fila",merge_cells:"Fusionar celdas",split_cell:"Separar celda",delete_table:"Eliminar la tabla"}},Indent:{buttons:{indent:{tooltip:"Indentar"},outdent:{tooltip:"Desindentar"}}},FormatClear:{tooltip:"Borrar formato"},HorizontalRule:{tooltip:"Separador horizontal"},History:{tooltip:{undo:"Deshacer",redo:"Rehacer"}},Fullscreen:{tooltip:{fullscreen:"Pantalla completa",exit_fullscreen:"Salir de pantalla completa"}},Print:{tooltip:"Imprimir"},Preview:{tooltip:"Vista previa",dialog:{title:"Vista previa"}},SelectAll:{tooltip:"Seleccionar todo"},CodeView:{tooltip:"Vista de código"}},characters:"Caracteres"}}},En=Mn.en;function Tn(t){return t.split(".").reduce((function(t,e){return t[e]}),En)}var Nn,An=function(t,e,n){if(le(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Dn=Array.isArray||function(t){return"Array"==W(t)},Pn=Ie("species"),zn=function(t,e){var n;return Dn(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Dn(n.prototype)?G(n)&&null===(n=n[Pn])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Rn=[].push,In=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,s=5==t||i;return function(a,c,l,u){for(var p,f,h=ue(a),d=H(h),m=An(c,l,3),v=$t(d.length),g=0,y=u||zn,b=e?y(a,v):n?y(a,0):void 0;v>g;g++)if((s||g in d)&&(f=m(p=d[g],g,h),t))if(e)b[g]=f;else if(f)switch(t){case 3:return!0;case 5:return p;case 6:return g;case 2:Rn.call(b,p)}else if(o)return!1;return i?-1:r||o?o:b}},jn={forEach:In(0),map:In(1),filter:In(2),some:In(3),every:In(4),find:In(5),findIndex:In(6)},Fn=Object.keys||function(t){return Ut(t,Kt)},Bn=F?Object.defineProperties:function(t,e){it(t);for(var n,r=Fn(e),o=r.length,i=0;o>i;)at.f(t,n=r[i++],e[n]);return t},$n=Rt("document","documentElement"),Ln=kt("IE_PROTO"),Vn=function(){},qn=function(t){return"<script>"+t+"<\/script>"},Wn=function(){try{Nn=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;Wn=Nn?function(t){t.write(qn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Nn):((e=et("iframe")).style.display="none",$n.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(qn("document.F=Object")),t.close(),t.F);for(var n=Kt.length;n--;)delete Wn.prototype[Kt[n]];return Wn()};Ct[Ln]=!0;var Jn=Object.create||function(t,e){var n;return null!==t?(Vn.prototype=it(t),n=new Vn,Vn.prototype=null,n[Ln]=t):n=Wn(),void 0===e?n:Bn(n,e)},Hn=Ie("unscopables"),Un=Array.prototype;null==Un[Hn]&&at.f(Un,Hn,{configurable:!0,value:Jn(null)});var Kn=function(t){Un[Hn][t]=!0},Gn=jn.find,Xn=!0,Zn=ge("find");"find"in[]&&Array(1).find((function(){Xn=!1})),ce({target:"Array",proto:!0,forced:Xn||!Zn},{find:function(t){return Gn(this,t,arguments.length>1?arguments[1]:void 0)}}),Kn("find");var Yn=Jt.includes,Qn=ge("indexOf",{ACCESSORS:!0,1:0});ce({target:"Array",proto:!0,forced:!Qn},{includes:function(t){return Yn(this,t,arguments.length>1?arguments[1]:void 0)}}),Kn("includes");var tr=at.f,er=Function.prototype,nr=er.toString,rr=/^\s*function ([^ (]*)/;F&&!("name"in er)&&tr(er,"name",{configurable:!0,get:function(){try{return nr.call(this).match(rr)[1]}catch(t){return""}}})
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */;var or=function(t,e){return(or=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function ir(t,e){function n(){this.constructor=t}or(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var sr=function(){return(sr=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function ar(t,e,n,r){var o,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(i<3?o(s):i>3?o(e,n,s):o(e,n))||s);return i>3&&s&&Object.defineProperty(e,n,s),s}function cr(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{c(r.next(t))}catch(t){i(t)}}function a(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function lr(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(o=s.trys,!((o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function ur(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],s=0,a=i.length;s<a;s++,o++)r[o]=i[s];return r}
/**
  * vue-class-component v7.2.3
  * (c) 2015-present Evan You
  * @license MIT
  */function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hr(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function dr(){return"undefined"!=typeof Reflect&&Reflect.defineMetadata&&Reflect.getOwnMetadataKeys}function mr(t,e){vr(t,e),Object.getOwnPropertyNames(e.prototype).forEach((function(n){vr(t.prototype,e.prototype,n)})),Object.getOwnPropertyNames(e).forEach((function(n){vr(t,e,n)}))}function vr(t,e,n){(n?Reflect.getOwnMetadataKeys(e,n):Reflect.getOwnMetadataKeys(e)).forEach((function(r){var o=n?Reflect.getOwnMetadata(r,e,n):Reflect.getOwnMetadata(r,e);n?Reflect.defineMetadata(r,o,t,n):Reflect.defineMetadata(r,o,t)}))}var gr={__proto__:[]}instanceof Array;function yr(t){return function(e,n,r){var o="function"==typeof e?e:e.constructor;o.__decorators__||(o.__decorators__=[]),"number"!=typeof r&&(r=void 0),o.__decorators__.push((function(e){return t(e,n,r)}))}}function br(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return o.a.extend({mixins:e})}function wr(t,e){var n=e.prototype._init;e.prototype._init=function(){var e=this,n=Object.getOwnPropertyNames(t);if(t.$options.props)for(var r in t.$options.props)t.hasOwnProperty(r)||n.push(r);n.forEach((function(n){"_"!==n.charAt(0)&&Object.defineProperty(e,n,{get:function(){return t[n]},set:function(e){t[n]=e},configurable:!0})}))};var r=new e;e.prototype._init=n;var o={};return Object.keys(r).forEach((function(t){void 0!==r[t]&&(o[t]=r[t])})),o}var xr=["data","beforeCreate","created","beforeMount","mounted","beforeDestroy","destroyed","beforeUpdate","updated","activated","deactivated","render","errorCaptured","serverPrefetch"];function Sr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.name=e.name||t._componentTag||t.name;var n=t.prototype;Object.getOwnPropertyNames(n).forEach((function(t){if("constructor"!==t)if(xr.indexOf(t)>-1)e[t]=n[t];else{var r=Object.getOwnPropertyDescriptor(n,t);void 0!==r.value?"function"==typeof r.value?(e.methods||(e.methods={}))[t]=r.value:(e.mixins||(e.mixins=[])).push({data:function(){return fr({},t,r.value)}}):(r.get||r.set)&&((e.computed||(e.computed={}))[t]={get:r.get,set:r.set})}})),(e.mixins||(e.mixins=[])).push({data:function(){return wr(this,t)}});var r=t.__decorators__;r&&(r.forEach((function(t){return t(e)})),delete t.__decorators__);var i=Object.getPrototypeOf(t.prototype),s=i instanceof o.a?i.constructor:o.a,a=s.extend(e);return Cr(a,t,s),dr()&&mr(a,t),a}var kr={prototype:!0,arguments:!0,callee:!0,caller:!0};function Cr(t,e,n){Object.getOwnPropertyNames(e).forEach((function(r){if(!kr[r]){var o=Object.getOwnPropertyDescriptor(t,r);if(!o||o.configurable){var i=Object.getOwnPropertyDescriptor(e,r);if(!gr){if("cid"===r)return;var s=Object.getOwnPropertyDescriptor(n,r);if(!function(t){var e=pr(t);return null==t||"object"!==e&&"function"!==e}(i.value)&&s&&s.value===i.value)return}Object.defineProperty(t,r,i)}}}))}function Or(t){return"function"==typeof t?Sr(t):function(e){return Sr(e,t)}}function _r(t){return yr((function(e,n){void 0===e.inject&&(e.inject={}),Array.isArray(e.inject)||(e.inject[n]=t||n)}))}function Mr(t){return yr((function(e,n){var r,o=e.provide;("function"!=typeof(r=o)||!r.managed&&!r.managedReactive)&&(o=e.provide=function(t){var e=function(){var n=this,r="function"==typeof t?t.call(this):t;for(var o in(r=Object.create(r||null)).__reactiveInject__=this.__reactiveInject__||{},e.managed)r[e.managed[o]]=this[o];var i=function(t){r[e.managedReactive[t]]=s[t],r.__reactiveInject__.hasOwnProperty(e.managedReactive[t])||Object.defineProperty(r.__reactiveInject__,e.managedReactive[t],{enumerable:!0,get:function(){return n[t]}})},s=this;for(var o in e.managedReactive)i(o);return r};return e.managed={},e.managedReactive={},e}(o)),o.managed[n]=t||n}))}Or.registerHooks=function(t){xr.push.apply(xr,hr(t))};var Er="undefined"!=typeof Reflect&&void 0!==Reflect.getMetadata;function Tr(t,e,n){if(Er&&!Array.isArray(t)&&"function"!=typeof t&&void 0===t.type){var r=Reflect.getMetadata("design:type",e,n);r!==Object&&(t.type=r)}}function Nr(t){return void 0===t&&(t={}),function(e,n){Tr(t,e,n),yr((function(e,n){(e.props||(e.props={}))[n]=t}))(e,n)}}function Ar(t,e){void 0===e&&(e={});var n=e.deep,r=void 0!==n&&n,o=e.immediate,i=void 0!==o&&o;return yr((function(e,n){"object"!=typeof e.watch&&(e.watch=Object.create(null));var o=e.watch;"object"!=typeof o[t]||Array.isArray(o[t])?void 0===o[t]&&(o[t]=[]):o[t]=[o[t]],o[t].push({handler:n,deep:r,immediate:i})}))}var Dr=/\B([A-Z])/g;function Pr(t){return function(e,n,r){var o=n.replace(Dr,"-$1").toLowerCase(),i=r.value;r.value=function(){for(var e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=function(r){var i=t||o;void 0===r?0===n.length?e.$emit(i):1===n.length?e.$emit(i,n[0]):e.$emit.apply(e,[i].concat(n)):0===n.length?e.$emit(i,r):1===n.length?e.$emit(i,r,n[0]):e.$emit.apply(e,[i,r].concat(n))},a=i.apply(this,n);return zr(a)?a.then((function(t){s(t)})):s(a),a}}}function zr(t){return t instanceof Promise||t&&"function"==typeof t.then}var Rr,Ir,jr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"content_attributes"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{spellcheck:!0}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"plugins",{get:function(){return[new a["Plugin"]({props:{attributes:sr({},this.options)}})]},enumerable:!1,configurable:!0}),e}(i["f"]),Fr=function(t,e,n){var r=X(e);r in t?at.f(t,r,V(0,n)):t[r]=n},Br=Rt("navigator","userAgent")||"",$r=I.process,Lr=$r&&$r.versions,Vr=Lr&&Lr.v8;Vr?Ir=(Rr=Vr.split("."))[0]+Rr[1]:Br&&(!(Rr=Br.match(/Edge\/(\d+)/))||Rr[1]>=74)&&(Rr=Br.match(/Chrome\/(\d+)/))&&(Ir=Rr[1]);var qr=Ir&&+Ir,Wr=Ie("species"),Jr=function(t){return qr>=51||!j((function(){var e=[];return(e.constructor={})[Wr]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Hr=Jr("slice"),Ur=ge("slice",{ACCESSORS:!0,0:0,1:2}),Kr=Ie("species"),Gr=[].slice,Xr=Math.max;ce({target:"Array",proto:!0,forced:!Hr||!Ur},{slice:function(t,e){var n,r,o,i=K(this),s=$t(i.length),a=qt(t,s),c=qt(void 0===e?s:e,s);if(Dn(i)&&("function"!=typeof(n=i.constructor)||n!==Array&&!Dn(n.prototype)?G(n)&&null===(n=n[Kr])&&(n=void 0):n=void 0,n===Array||void 0===n))return Gr.call(i,a,c);for(r=new(void 0===n?Array:n)(Xr(c-a,0)),o=0;a<c;a++,o++)a in i&&Fr(r,o,i[a]);return r.length=o,r}});var Zr="[\t\n\v\f\r                　\u2028\u2029\ufeff]",Yr=RegExp("^"+Zr+Zr+"*"),Qr=RegExp(Zr+Zr+"*$"),to=function(t){return function(e){var n=String(U(e));return 1&t&&(n=n.replace(Yr,"")),2&t&&(n=n.replace(Qr,"")),n}},eo={start:to(1),end:to(2),trim:to(3)},no=Xt.f,ro=ot.f,oo=at.f,io=eo.trim,so=I.Number,ao=so.prototype,co="Number"==W(Jn(ao)),lo=function(t){var e,n,r,o,i,s,a,c,l=X(t,!1);if("string"==typeof l&&l.length>2)if(43===(e=(l=io(l)).charCodeAt(0))||45===e){if(88===(n=l.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+l}for(s=(i=l.slice(2)).length,a=0;a<s;a++)if((c=i.charCodeAt(a))<48||c>o)return NaN;return parseInt(i,r)}return+l};if(se("Number",!so(" 0o1")||!so("0b1")||so("+0x1"))){for(var uo,po=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof po&&(co?j((function(){ao.valueOf.call(n)})):"Number"!=W(n))?rn(new so(lo(e)),n,po):lo(e)},fo=F?no(so):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),ho=0;fo.length>ho;ho++)Y(so,uo=fo[ho])&&!Y(po,uo)&&oo(po,uo,ro(so,uo));po.prototype=ao,ao.constructor=po,Dt(I,"Number",po)}ce({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var mo={};mo[Ie("toStringTag")]="z";var vo="[object z]"===String(mo),go=Ie("toStringTag"),yo="Arguments"==W(function(){return arguments}()),bo=vo?W:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),go))?n:yo?W(e):"Object"==(r=W(e))&&"function"==typeof e.callee?"Arguments":r},wo=vo?{}.toString:function(){return"[object "+bo(this)+"]"};vo||Dt(Object.prototype,"toString",wo,{unsafe:!0});var xo=I.Promise,So=function(t,e,n){for(var r in e)Dt(t,r,e[r],n);return t},ko=at.f,Co=Ie("toStringTag"),Oo=function(t,e,n){t&&!Y(t=n?t:t.prototype,Co)&&ko(t,Co,{configurable:!0,value:e})},_o=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},Mo={},Eo=Ie("iterator"),To=Array.prototype,No=function(t){return void 0!==t&&(Mo.Array===t||To[Eo]===t)},Ao=Ie("iterator"),Do=function(t){if(null!=t)return t[Ao]||t["@@iterator"]||Mo[bo(t)]},Po=function(t,e,n,r){try{return r?e(it(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&it(o.call(t)),e}},zo=P((function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var s,a,c,l,u,p,f,h=An(n,r,o?2:1);if(i)s=t;else{if("function"!=typeof(a=Do(t)))throw TypeError("Target is not iterable");if(No(a)){for(c=0,l=$t(t.length);l>c;c++)if((u=o?h(it(f=t[c])[0],f[1]):h(t[c]))&&u instanceof e)return u;return new e(!1)}s=a.call(t)}for(p=s.next;!(f=p.call(s)).done;)if("object"==typeof(u=Po(s,h,f.value,o))&&u&&u instanceof e)return u;return new e(!1)}).stop=function(t){return new e(!0,t)}})),Ro=Ie("iterator"),Io=!1;try{var jo=0,Fo={next:function(){return{done:!!jo++}},return:function(){Io=!0}};Fo[Ro]=function(){return this},Array.from(Fo,(function(){throw 2}))}catch(Kh){}var Bo,$o,Lo,Vo=function(t,e){if(!e&&!Io)return!1;var n=!1;try{var r={};r[Ro]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},qo=/(iphone|ipod|ipad).*applewebkit/i.test(Br),Wo=I.location,Jo=I.setImmediate,Ho=I.clearImmediate,Uo=I.process,Ko=I.MessageChannel,Go=I.Dispatch,Xo=0,Zo={},Yo=function(t){if(Zo.hasOwnProperty(t)){var e=Zo[t];delete Zo[t],e()}},Qo=function(t){return function(){Yo(t)}},ti=function(t){Yo(t.data)},ei=function(t){I.postMessage(t+"",Wo.protocol+"//"+Wo.host)};Jo&&Ho||(Jo=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Zo[++Xo]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Bo(Xo),Xo},Ho=function(t){delete Zo[t]},"process"==W(Uo)?Bo=function(t){Uo.nextTick(Qo(t))}:Go&&Go.now?Bo=function(t){Go.now(Qo(t))}:Ko&&!qo?(Lo=($o=new Ko).port2,$o.port1.onmessage=ti,Bo=An(Lo.postMessage,Lo,1)):!I.addEventListener||"function"!=typeof postMessage||I.importScripts||j(ei)||"file:"===Wo.protocol?Bo="onreadystatechange"in et("script")?function(t){$n.appendChild(et("script")).onreadystatechange=function(){$n.removeChild(this),Yo(t)}}:function(t){setTimeout(Qo(t),0)}:(Bo=ei,I.addEventListener("message",ti,!1)));var ni,ri,oi,ii,si,ai,ci,li,ui={set:Jo,clear:Ho},pi=ot.f,fi=ui.set,hi=I.MutationObserver||I.WebKitMutationObserver,di=I.process,mi=I.Promise,vi="process"==W(di),gi=pi(I,"queueMicrotask"),yi=gi&&gi.value;yi||(ni=function(){var t,e;for(vi&&(t=di.domain)&&t.exit();ri;){e=ri.fn,ri=ri.next;try{e()}catch(t){throw ri?ii():oi=void 0,t}}oi=void 0,t&&t.enter()},vi?ii=function(){di.nextTick(ni)}:hi&&!qo?(si=!0,ai=document.createTextNode(""),new hi(ni).observe(ai,{characterData:!0}),ii=function(){ai.data=si=!si}):mi&&mi.resolve?(ci=mi.resolve(void 0),li=ci.then,ii=function(){li.call(ci,ni)}):ii=function(){fi.call(I,ni)});var bi,wi,xi,Si,ki=yi||function(t){var e={fn:t,next:void 0};oi&&(oi.next=e),ri||(ri=e,ii()),oi=e},Ci=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=le(e),this.reject=le(n)},Oi={f:function(t){return new Ci(t)}},_i=function(t,e){if(it(t),G(e)&&e.constructor===t)return e;var n=Oi.f(t);return(0,n.resolve)(e),n.promise},Mi=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Ei=ui.set,Ti=Ie("species"),Ni="Promise",Ai=At.get,Di=At.set,Pi=At.getterFor(Ni),zi=xo,Ri=I.TypeError,Ii=I.document,ji=I.process,Fi=Rt("fetch"),Bi=Oi.f,$i=Bi,Li="process"==W(ji),Vi=!!(Ii&&Ii.createEvent&&I.dispatchEvent),qi=se(Ni,(function(){if(mt(zi)===String(zi)){if(66===qr)return!0;if(!Li&&"function"!=typeof PromiseRejectionEvent)return!0}if(qr>=51&&/native code/.test(zi))return!1;var t=zi.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Ti]=e,!(t.then((function(){}))instanceof e)})),Wi=qi||!Vo((function(t){zi.all(t).catch((function(){}))})),Ji=function(t){var e;return!(!G(t)||"function"!=typeof(e=t.then))&&e},Hi=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;ki((function(){for(var o=e.value,i=1==e.state,s=0;r.length>s;){var a,c,l,u=r[s++],p=i?u.ok:u.fail,f=u.resolve,h=u.reject,d=u.domain;try{p?(i||(2===e.rejection&&Xi(t,e),e.rejection=1),!0===p?a=o:(d&&d.enter(),a=p(o),d&&(d.exit(),l=!0)),a===u.promise?h(Ri("Promise-chain cycle")):(c=Ji(a))?c.call(a,f,h):f(a)):h(o)}catch(t){d&&!l&&d.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&Ki(t,e)}))}},Ui=function(t,e,n){var r,o;Vi?((r=Ii.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),I.dispatchEvent(r)):r={promise:e,reason:n},(o=I["on"+t])?o(r):"unhandledrejection"===t&&function(t,e){var n=I.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Ki=function(t,e){Ei.call(I,(function(){var n,r=e.value;if(Gi(e)&&(n=Mi((function(){Li?ji.emit("unhandledRejection",r,t):Ui("unhandledrejection",t,r)})),e.rejection=Li||Gi(e)?2:1,n.error))throw n.value}))},Gi=function(t){return 1!==t.rejection&&!t.parent},Xi=function(t,e){Ei.call(I,(function(){Li?ji.emit("rejectionHandled",t):Ui("rejectionhandled",t,e.value)}))},Zi=function(t,e,n,r){return function(o){t(e,n,o,r)}},Yi=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Hi(t,e,!0))},Qi=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw Ri("Promise can't be resolved itself");var o=Ji(n);o?ki((function(){var r={done:!1};try{o.call(n,Zi(Qi,t,r,e),Zi(Yi,t,r,e))}catch(n){Yi(t,r,n,e)}})):(e.value=n,e.state=1,Hi(t,e,!1))}catch(n){Yi(t,{done:!1},n,e)}}};function ts(){}function es(t){return Number.isNaN(t)}function ns(t,e,n){return t<e?e:t>n?n:t}function rs(t){var e=new FileReader;return new Promise((function(n,r){e.onload=function(t){return n(t.target.result)},e.onerror=r,e.readAsDataURL(t)}))}qi&&(zi=function(t){_o(this,zi,Ni),le(t),bi.call(this);var e=Ai(this);try{t(Zi(Qi,this,e),Zi(Yi,this,e))}catch(t){Yi(this,e,t)}},(bi=function(t){Di(this,{type:Ni,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=So(zi.prototype,{then:function(t,e){var n=Pi(this),r=Bi(Ue(this,zi));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=Li?ji.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Hi(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),wi=function(){var t=new bi,e=Ai(t);this.promise=t,this.resolve=Zi(Qi,t,e),this.reject=Zi(Yi,t,e)},Oi.f=Bi=function(t){return t===zi||t===xi?new wi(t):$i(t)},"function"==typeof xo&&(Si=xo.prototype.then,Dt(xo.prototype,"then",(function(t,e){var n=this;return new zi((function(t,e){Si.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Fi&&ce({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return _i(zi,Fi.apply(I,arguments))}}))),ce({global:!0,wrap:!0,forced:qi},{Promise:zi}),Oo(zi,Ni,!1),sn(Ni),xi=Rt(Ni),ce({target:Ni,stat:!0,forced:qi},{reject:function(t){var e=Bi(this);return e.reject.call(void 0,t),e.promise}}),ce({target:Ni,stat:!0,forced:qi},{resolve:function(t){return _i(this,t)}}),ce({target:Ni,stat:!0,forced:Wi},{all:function(t){var e=this,n=Bi(e),r=n.resolve,o=n.reject,i=Mi((function(){var n=le(e.resolve),i=[],s=0,a=1;zo(t,(function(t){var c=s++,l=!1;i.push(void 0),a++,n.call(e,t).then((function(t){l||(l=!0,i[c]=t,--a||r(i))}),o)})),--a||r(i)}));return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=Bi(e),r=n.reject,o=Mi((function(){var o=le(e.resolve);zo(t,(function(t){o.call(e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var is=function(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})),ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"elTiptapEditorStyle",{get:function(){return[this.editorSizeStyle]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"editorSizeStyle",{get:function(){var t=this.width,e=this.height;return{width:t=es(Number(t))?t:t+"px",height:e=es(Number(e))?e:e+"px"}},enumerable:!1,configurable:!0}),ar([Nr({type:[String,Number],default:void 0})],e.prototype,"width",void 0),ar([Nr({type:[String,Number],default:void 0})],e.prototype,"height",void 0),ar([Nr({type:Boolean,default:!0})],e.prototype,"showMenubar",void 0),ar([Nr({type:Boolean,default:!0})],e.prototype,"charCounterCount",void 0),ar([Or],e)}(o.a),as=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.cmInstance=null,e}return ir(e,t),Object.defineProperty(e.prototype,"isCodeViewMode",{get:function(){return this.editorStateOptions.isCodeViewMode},enumerable:!1,configurable:!0}),e.prototype.onCodeViewModeChange=function(t){var e=this;if(t)this.$nextTick((function(){return!e.cmInstance&&e.initCodemirror()}));else if(this.cmInstance){var n=this.cmInstance.getValue();this.editor.setContent(n,!0),this.destroyCodemirror()}},e.prototype.initCodemirror=function(){var t=this.extensions.find((function(t){return"code_view"===t.name}));if(t){var e=t.options,n=e.codemirror,r=e.codemirrorOptions;if(n){var o=sr(sr({},r),{readOnly:this.readonly,spellcheck:this.spellcheckEnabled});this.cmInstance=n.fromTextArea(this.$refs.cmTextArea,o),this.cmInstance.setValue(this.editor.getHTML()),this.formatCode()}}},e.prototype.destroyCodemirror=function(){var t=this.cmInstance.doc.cm.getWrapperElement();t&&t.remove&&t.remove(),this.cmInstance=null},e.prototype.formatCode=function(){var t=this.cmInstance;t.execCommand("selectAll");var e={from:t.getCursor(!0),to:t.getCursor(!1)};t.autoFormatRange(e.from,e.to),t.setCursor(0)},ar([Ar("isCodeViewMode")],e.prototype,"onCodeViewModeChange",null),ar([Or],e)}(o.a),cs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.t=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Tn.apply(this,t)},ar([Or],e)}(o.a);function ls(t,e,n,r,o,i,s,a,c,l){"boolean"!=typeof s&&(c=a,a=s,s=!1);const u="function"==typeof n?n.options:n;let p;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),r&&(u._scopeId=r),i?(p=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,c(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=p):e&&(p=s?function(t){e.call(this,l(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),p)if(u.functional){const t=u.render;u.render=function(e,n){return p.call(n),t(e,n)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,p):[p]}return n}const us=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("editor-menu-bar",{attrs:{editor:t.editor},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",[n("div",{staticClass:"el-tiptap-editor__menu-bar"},t._l(t.generateCommandButtonComponentSpecs(e),(function(e,r){return n(e.component,t._g(t._b({key:"command-button"+r,tag:"component",attrs:{readonly:t.editorStateOptions.isCodeViewMode}},"component",e.componentProps,!1),e.componentEvents))})),1)],null,e)]}}],null,!0)})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.generateCommandButtonComponentSpecs=function(t){var e=this;return this.editor.extensions.extensions.reduce((function(n,r){if(!1===r.options.menubar)return n;if("function"!=typeof r.menuBtnView)return n;var o=r.menuBtnView(sr(sr({},t),{editor:e.editor}));return Array.isArray(o)?ur(n,o):ur(n,[o])}),[])},ar([Nr({type:i["b"],required:!0})],e.prototype,"editor",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:{EditorMenuBar:i["d"]}})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);var ps=jn.some,fs=he("some"),hs=ge("some");ce({target:"Array",proto:!0,forced:!fs||!hs},{some:function(t){return ps(this,t,arguments.length>1?arguments[1]:void 0)}});var ds=/"/g,ms=function(t,e,n,r){var o=String(U(t)),i="<"+e;return""!==n&&(i+=" "+n+'="'+String(r).replace(ds,"&quot;")+'"'),i+">"+o+"</"+e+">"},vs=function(t){return j((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))};function gs(t){return function(t){if(Array.isArray(t))return ys(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ys(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ys(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ys(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function bs(t,e){var n=t.selection,r=n.from,o=n.to,i=[];t.doc.nodesBetween(r,o,(function(t){i=[].concat(gs(i),gs(t.marks))}));var s=i.find((function(t){return t.type.name===e.name}));return s?s.attrs:{}}function ws(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t||!e)return!1;var n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;var r=n.node.marks.find((function(t){return t.type===e}));if(!r)return!1;for(var o=t.index(),i=t.start()+n.offset,s=o+1,a=i+n.node.nodeSize;o>0&&r.isInSet(t.parent.child(o-1).marks);)o-=1,i-=t.parent.child(o).nodeSize;for(;s<t.parent.childCount&&r.isInSet(t.parent.child(s).marks);)a+=t.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}ce({target:"String",proto:!0,forced:vs("link")},{link:function(t){return ms(this,"a","href",t)}});for(var xs="-_",Ss=36;Ss--;)xs+=Ss.toString(36);for(Ss=36;Ss---10;)xs+=Ss.toString(36).toUpperCase();let ks={};function Cs(t,e){e?e.constructor.super.util.warn(t,e):console.error(t)}var Os={name:"fa-icon",props:{name:{type:String,validator(t){return!t||t in ks||(Cs(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".\nPlease make sure you have imported this icon before using it.`,this),!1)}},title:String,scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:t=>"horizontal"===t||"vertical"===t||"both"===t},label:String,tabindex:[Number,String]},data:()=>({id:Ms("va-"),x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}),computed:{normalizedScale(){let t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(Cs('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass(){let t={"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-flip-both":"both"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse};return this.classes&&Object.keys(this.classes).forEach(e=>{this.classes[e]&&(t[e]=!0)}),t},icon(){return this.name?ks[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:t,height:e}=this.icon;return Math.max(t,e)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(t,n,r)=>{let o=Ms("vat-");return e[r]=o,` id="${o}"`}),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(t,n,r,o)=>{let i=n||o;return i&&e[i]?"#"+e[i]:t}),t},focusable(){let{tabindex:t}=this;return null==t?"false":("string"==typeof t?parseInt(t,10):t)>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void Cs('Invalid prop: prop "name" is required.',this);if(this.icon)return;let t=0,e=0;this.$children.forEach(n=>{n.outerScale=this.normalizedScale,t=Math.max(t,n.width),e=Math.max(e,n.height)}),this.childrenWidth=t,this.childrenHeight=e,this.$children.forEach(n=>{n.x=(t-n.width)/2,n.y=(e-n.height)/2})}},render(t){if(null===this.name)return t();let e={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable},on:this.$listeners},n=this.id;if(this.title&&(e.attrs["aria-labelledby"]=n),this.raw){let t=`<g>${this.raw}</g>`;this.title&&(t=`<title id="${n}">${function(t){return t.replace(/[<>"&]/g,t=>Es[t]||t)}(this.title)}</title>${t}`),e.domProps={innerHTML:t}}let r=this.title?[t("title",{attrs:{id:n}},this.title)]:[];return t("svg",e,this.raw?null:r.concat([t("g",this.$slots.default||(this.icon?[...this.icon.paths.map((e,n)=>t("path",{attrs:e,key:"path-"+n})),...this.icon.polygons.map((e,n)=>t("polygon",{attrs:e,key:"polygon-"+n}))]:[]))]))},register(t){for(let e in t){let n=t[e],{paths:r=[],d:o,polygons:i=[],points:s}=n;o&&r.push({d:o}),s&&i.push({points:s}),ks[e]=_s({},n,{paths:r,polygons:i})}},icons:ks};function _s(t,...e){return e.forEach(e=>{for(let n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function Ms(t=""){return t+function(t){var e="";for(Ss=t||21;Ss--;)e+=xs[64*Math.random()|0];return e}(7)}const Es={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"},Ts=ls({},void 0,Os,void 0,void 0,void 0,!1,void 0,void 0,void 0);var Ns;Ts.register({heading:{width:512,height:512,paths:[{d:"M448 96v320h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32v-128h-192v128h32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32v-320h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v128h192v-128h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32z"}]}}),Ts.register({font:{width:448,height:512,paths:[{d:"M432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h19.6l-23.3-64h-152.6l-23.3 64h19.6c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h23.4l130.7-362.3c4.1-12 17.6-21.7 30.3-21.7h0 47.2 0c12.6 0 26.2 9.7 30.3 21.7l130.7 362.3h23.4zM176.8 272h94.3l-47.2-129.5z"}]}}),Ts.register({tint:{width:352,height:512,paths:[{d:"M205.2 22.1c47 158.5 146.8 200.1 146.8 311.8 0 98.4-78.7 178.1-176 178.1s-176-79.7-176-178.1c0-111.2 100-154.1 146.8-311.8 9-30.1 50.5-28.8 58.4 0zM176 448c8.8 0 16-7.2 16-16s-7.2-16-16-16c-44.1 0-80-35.9-80-80 0-8.8-7.2-16-16-16s-16 7.2-16 16c0 61.8 50.3 112 112 112z"}]}}),Ts.register({highlighter:{width:544,height:512,paths:[{d:"M0 480l68.3-70.5 67 67-35.5 35.5zM124.6 240l41.5-35.4 173.3 173.3-35.5 41.6c-9.5 10.8-24.4 15-38.2 10.8l-42.7-13.1-50.9 50.9-96.2-96.2 50.9-50.9-13-42.8c-0.9-2.9-1.6-7.7-1.6-10.7 0-9.1 5.5-21.4 12.4-27.4zM527.9 79.3c20.5 20.5 21.5 53.4 2.3 75.1l-169.9 199.1-169.8-169.8 199.1-170c21.7-19.2 54.6-18.1 75.1 2.4z"}]}}),Ts.register({bold:{width:384,height:512,paths:[{d:"M333.5 238c34.4 27.5 55.6 71.2 50.8 119.6-6.9 70.7-70.2 122.4-141 122.4h-209.3c-8.8 0-16-7.2-16-16v-48c0-8.8 7.2-16 16-16h31.9v-288h-31.9c-8.8 0-16-7.2-16-16v-48c0-8.8 7.2-16 16-16h199.4c74.6 0 134.4 64.5 127.1 140.8-2 20.3-14.1 49.5-27 65.2zM145.7 112v96h87.8c26.5 0 48-21.5 48-48s-21.5-48-48-48h-87.8zM233.4 400c30.9 0 56-25.1 56-56s-25.1-56-56-56h-87.8v112h87.8z"}]}}),Ts.register({underline:{width:448,height:512,paths:[{d:"M32 64c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h144c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v160c0 44.2 35.8 80 80 80s80-35.8 80-80v-160h-32c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h144c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-32v160c0 88.2-71.8 160-160 160s-160-71.8-160-160v-160h-32zM432 448c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Ts.register({italic:{width:320,height:512,paths:[{d:"M320 48v32c0 8.8-7.2 16-16 16h-62.8l-80 320h46.8c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-192c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h62.8l80-320h-46.8c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h192c8.8 0 16 7.2 16 16z"}]}}),Ts.register({strikethrough:{width:512,height:512,paths:[{d:"M496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-480c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h102.3c-11.7-16.5-19.8-35.5-21.8-56.4-0.3-3.3-0.6-8.7-0.6-12 0-68.2 55.4-123.6 123.6-123.7h68 0c43.7 0 95 31.7 114.5 70.8l0.5 1c0.9 1.9 1.7 5.1 1.7 7.1 0 5.5-4 11.9-8.8 14.3l-42.9 21.5c-1.9 0.9-5.1 1.7-7.2 1.7-5.5 0-11.9-4-14.3-8.8-7.6-15.2-27.6-27.6-44.6-27.6h0-66.8c-24 0-43.5 19.5-43.5 43.5 0 17.7 13.8 36.4 30.7 41.6l87.2 26.8h202.1zM315.8 320h94.4c2.2 6.6 4.6 17.5 5.3 24.4 0.3 3.3 0.6 8.7 0.6 12 0 68.2-55.4 123.6-123.6 123.7h-68 0c-43.7 0-95-31.7-114.5-70.8l-0.5-1c-0.9-1.9-1.7-5.1-1.7-7.1 0-5.5 4-11.9 8.8-14.3l42.9-21.5c1.9-0.9 5.1-1.7 7.2-1.7 5.5 0 11.9 4 14.3 8.8 7.6 15.2 27.6 27.6 44.6 27.6h0 66.8c24 0 43.5-19.5 43.5-43.5 0-13.2-9.1-29.5-20.2-36.5z"}]}}),Ts.register({link:{width:512,height:512,paths:[{d:"M326.6 185.4c59.7 59.8 58.9 155.7 0.4 214.6-0.1 0.1-0.2 0.3-0.4 0.4l-67.2 67.2c-59.3 59.3-155.7 59.3-215 0-59.3-59.3-59.3-155.7 0-215l37.1-37.1c9.8-9.8 26.8-3.3 27.3 10.6 0.6 17.7 3.8 35.5 9.7 52.7 2 5.8 0.6 12.3-3.8 16.6l-13.1 13.1c-28 28-28.9 73.7-1.2 102 28 28.6 74.1 28.7 102.3 0.5l67.2-67.2c28.2-28.2 28.1-73.8 0-101.8-3.7-3.7-7.4-6.6-10.3-8.6-3.7-2.5-6.8-8.2-6.9-12.6-0.4-10.6 3.3-21.5 11.7-29.8l21.1-21.1c5.5-5.5 14.2-6.2 20.6-1.7 6.1 4.2 15.3 12 20.5 17.2zM467.5 44.4c59.3 59.3 59.3 155.7 0 215l-37.1 37.1c-9.8 9.8-26.8 3.3-27.3-10.6-0.6-17.7-3.8-35.5-9.7-52.7-2-5.8-0.6-12.3 3.8-16.6l13.1-13.1c28-28 28.9-73.7 1.2-102-28-28.6-74.1-28.7-102.3-0.5l-67.2 67.2c-28.2 28.2-28.1 73.8 0 101.8 3.7 3.7 7.4 6.6 10.3 8.6 3.7 2.5 6.8 8.2 6.9 12.6 0.4 10.6-3.3 21.5-11.7 29.8l-21.1 21.1c-5.5 5.5-14.2 6.2-20.6 1.7-6.1-4.2-15.3-12-20.5-17.2-59.7-59.8-58.9-155.7-0.4-214.6 0.1-0.1 0.2-0.3 0.4-0.4l67.2-67.2c59.3-59.3 155.7-59.3 215 0z"}]}}),Ts.register({edit:{width:576,height:512,paths:[{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8l-218.4 218.4-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8 218.4-218.4c3.8-3.8 10-3.8 13.8 0zM564.6 60.3c15.2 15.2 15.2 39.9 0 55.2l-35.4 35.4c-3.8 3.8-10 3.8-13.8 0l-90.2-90.2c-3.8-3.8-3.8-10 0-13.8l35.4-35.4c15.3-15.2 40-15.2 55.2 0zM384 346.2c0-3.2 1.3-6.2 3.5-8.5l40-40c7.6-7.5 20.5-2.2 20.5 8.5v157.8c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h285.8c10.7 0 16.1 12.9 8.5 20.5l-40 40c-2.3 2.2-5.3 3.5-8.5 3.5h-229.8v320h320v-101.8z"}]}}),Ts.register({unlink:{width:512,height:512,paths:[{d:"M304.1 405.9c4.7 4.7 4.7 12.3 0 17l-44.7 44.7c-59.3 59.3-155.7 59.3-215 0-59.3-59.3-59.3-155.7 0-215l44.7-44.7c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17l-44.7 44.7c-28.1 28.1-28.1 73.8 0 101.8 28.1 28.1 73.8 28.1 101.8 0l44.7-44.7c4.7-4.7 12.3-4.7 17 0zM247.5 145.7l-39.6-39.6c-4.7-4.7-4.7-12.3 0-17l44.7-44.7c59.3-59.3 155.7-59.3 215 0s59.3 155.7 0 215l-44.7 44.7c-4.7 4.7-12.3 4.7-17 0l-39.6-39.6c-4.7-4.7-4.7-12.3 0-17l44.7-44.7c28.1-28.1 28.1-73.8 0-101.8-28.1-28.1-73.8-28.1-101.8 0l-44.7 44.7c-4.7 4.7-12.3 4.7-17 0zM482.3 505c-9.4 9.4-24.6 9.4-33.9 0l-441.4-441.4c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l441.4 441.4c9.4 9.4 9.4 24.6 0 33.9z"}]}}),Ts.register({"external-link-alt":{width:512,height:512,paths:[{d:"M432 320c8.8 0 16 7.2 16 16v128c0 26.5-21.5 48-48 48h-352c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-144v320h320v-112c0-8.8 7.2-16 16-16h32zM488 0c13.2 0 24 10.8 24 24v128c0 21.5-26 32-41 17l-35.7-35.7-243.6 243.7c-3.9 3.9-11.5 7.1-17 7.1s-13.1-3.2-17-7.1l-22.7-22.6c-3.9-3.9-7.1-11.5-7.1-17s3.2-13.1 7.1-17l243.7-243.6-35.7-35.7c-15-15.1-4.4-41 17-41h128z"}]}}),Ts.register({image:{width:512,height:512,paths:[{d:"M464 448h-416c-26.5 0-48-21.5-48-48v-288c0-26.5 21.5-48 48-48h416c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48zM112 120c-30.9 0-56 25.1-56 56s25.1 56 56 56 56-25.1 56-56-25.1-56-56-56zM64 384h384v-112l-87.5-87.5c-4.7-4.7-12.3-4.7-17 0l-135.5 135.5-55.5-55.5c-4.7-4.7-12.3-4.7-17 0l-71.5 71.5v48z"}]}}),Ts.register({"regular/image":{width:512,height:512,paths:[{d:"M464 64c26.5 0 48 21.5 48 48v288c0 26.5-21.5 48-48 48h-416c-26.5 0-48-21.5-48-48v-288c0-26.5 21.5-48 48-48h416zM458 400c3.3 0 6-2.7 6-6v-276c0-3.3-2.7-6-6-6h-404c-3.3 0-6 2.7-6 6v276c0 3.3 2.7 6 6 6h404zM128 152c22.1 0 40 17.9 40 40s-17.9 40-40 40-40-17.9-40-40 17.9-40 40-40zM96 352v-48l39.5-39.5c4.7-4.7 12.3-4.7 17 0l39.5 39.5 119.5-119.5c4.7-4.7 12.3-4.7 17 0l87.5 87.5v80h-320z"}]}}),Ts.register({"ellipsis-h":{width:512,height:512,paths:[{d:"M328 256c0 39.8-32.2 72-72 72s-72-32.2-72-72 32.2-72 72-72 72 32.2 72 72zM432 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM80 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72z"}]}}),Ts.register({"regular/trash-alt":{width:448,height:512,paths:[{d:"M268 416c-6.6 0-12-5.4-12-12v-216c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v216c0 6.6-5.4 12-12 12h-24zM432 80c8.8 0 16 7.2 16 16v16c0 8.8-7.2 16-16 16h-16v336c0 26.5-21.5 48-48 48h-288c-26.5 0-48-21.5-48-48v-336h-16c-8.8 0-16-7.2-16-16v-16c0-8.8 7.2-16 16-16h82.4l34-56.7c7.7-12.9 26.2-23.3 41.2-23.3h0 100.8 0c15 0 33.4 10.4 41.2 23.3l34 56.7h82.4zM171.8 50.9l-17.5 29.1h139.2l-17.5-29.1c-1-1.6-3.3-2.9-5.1-2.9h0-94 0c-1.9 0-4.2 1.3-5.1 2.9zM368 464v-336h-288v336h288zM156 416c-6.6 0-12-5.4-12-12v-216c0-6.6 5.4-12 12-12h24c6.6 0 12 5.4 12 12v216c0 6.6-5.4 12-12 12h-24z"}]}}),Ts.register({video:{width:576,height:512,paths:[{d:"M336.2 64c26.4 0 47.8 21.4 47.8 47.8v288.4c0 26.4-21.4 47.8-47.8 47.8h-288.4c-26.4 0-47.8-21.4-47.8-47.8v-288.4c0-26.4 21.4-47.8 47.8-47.8h288.4zM525.6 101.7c21.3-14.6 50.4 0.4 50.4 25.8v256.9c0 25.5-29.2 40.4-50.4 25.8l-109.6-75.5v-157.4z"}]}}),Ts.register({code:{width:640,height:512,paths:[{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9l136.5-470.2c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9l-136.5 470.2c-1.9 6.4-8.5 10.1-14.9 8.2zM164.9 399.3c-4.5 4.9-12.1 5.1-17 0.5l-144.1-135.1c-5.1-4.7-5.1-12.8 0-17.5l144.1-135c4.9-4.6 12.5-4.3 17 0.5l43.5 46.4c4.7 4.9 4.3 12.7-0.8 17.2l-90.6 79.7 90.6 79.7c5.1 4.5 5.4 12.3 0.8 17.2zM492.1 399.9c-4.9 4.5-12.5 4.3-17-0.6l-43.5-46.4c-4.7-4.9-4.3-12.7 0.8-17.2l90.6-79.7-90.6-79.8c-5.1-4.5-5.4-12.3-0.8-17.2l43.5-46.4c4.6-4.8 12.2-5 17-0.5l144.1 135.2c5.1 4.7 5.1 12.8 0 17.5z"}]}}),Ts.register({"quote-right":{width:512,height:512,paths:[{d:"M464 32c26.5 0 48 21.5 48 48v240c0 88.4-71.6 160-160 160h-8c-13.3 0-24-10.7-24-24v-48c0-13.3 10.7-24 24-24h8c35.3 0 64-28.7 64-64v-64h-80c-26.5 0-48-21.5-48-48v-128c0-26.5 21.5-48 48-48h128zM176 32c26.5 0 48 21.5 48 48v240c0 88.4-71.6 160-160 160h-8c-13.3 0-24-10.7-24-24v-48c0-13.3 10.7-24 24-24h8c35.3 0 64-28.7 64-64v-64h-80c-26.5 0-48-21.5-48-48v-128c0-26.5 21.5-48 48-48h128z"}]}}),Ts.register({"align-left":{width:448,height:512,paths:[{d:"M12.8 352c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3 0c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3zM12.8 96c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3 0c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3zM432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Ts.register({"align-center":{width:448,height:512,paths:[{d:"M432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM108.1 96c-6.7 0-12.1-5.4-12.1-12.1v-39.8c0-6.7 5.4-12.1 12.1-12.1h0 231.8c6.7 0 12.1 5.4 12.1 12.1v39.8 0c0 6.7-5.4 12.1-12.1 12.1v0h-231.8zM339.9 352h-231.8c-6.7 0-12.1-5.4-12.1-12.1v-39.8c0-6.7 5.4-12.1 12.1-12.1h0 231.8c6.7 0 12.1 5.4 12.1 12.1v39.8 0c0 6.7-5.4 12.1-12.1 12.1v0z"}]}}),Ts.register({"align-right":{width:448,height:512,paths:[{d:"M16 224c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 32c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-262.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 262.3z"}]}}),Ts.register({"align-justify":{width:448,height:512,paths:[{d:"M432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 288c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 160c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Ts.register({"text-width":{width:448,height:512,paths:[{d:"M432 32c8.8 0 16 7.2 16 16v80c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-16h-120v112h24c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h24v-112h-120v16c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-80c0-8.8 7.2-16 16-16h416zM363.3 292.7l80 80c2.6 2.6 4.7 7.7 4.7 11.3s-2.1 8.7-4.7 11.3l-80 80c-10 10-27.3 3-27.3-11.3v-48h-224v48c0 15.6-18 20.6-27.3 11.3l-80-80c-2.6-2.6-4.7-7.7-4.7-11.3s2.1-8.7 4.7-11.3l80-80c10-10 27.3-3 27.3 11.3v48h224v-48c0-15.6 18-20.6 27.3-11.3z"}]}}),Ts.register({"text-height":{width:576,height:512,paths:[{d:"M304 32c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32h-56v304h40c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-160c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h40v-304h-56v32c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-96c0-8.8 7.2-16 16-16h288zM560 368c15.6 0 20.6 18 11.3 27.3l-80 80c-2.6 2.6-7.7 4.7-11.3 4.7s-8.7-2.1-11.3-4.7l-80-80c-10-10-3-27.3 11.3-27.3h48v-224h-48c-15.6 0-20.6-18-11.3-27.3l80-80c2.6-2.6 7.7-4.7 11.3-4.7s8.7 2.1 11.3 4.7l80 80c10 10 3 27.3-11.3 27.3h-48v224h48z"}]}}),Ts.register({"list-ul":{width:512,height:512,paths:[{d:"M48 48c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM48 208c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM48 368c26.5 0 48 21.5 48 48s-21.5 48-48 48-48-21.5-48-48 21.5-48 48-48zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320z"}]}}),Ts.register({"list-ol":{width:512,height:512,paths:[{d:"M61.8 401c19.6 5.1 28.7 20.5 28.7 34.9 0 21.4-14.3 44.1-48.5 44.1-16.6 0-29.3-4.8-37-9.4-5.8-4.2-6.3-9.8-2.6-15.9l5.6-9.3c3.9-6.6 9.1-7 15.6-3.1 4.1 1.7 11 3.1 15.5 3.1 10.2 0 14.4-3.5 14.4-8.2 0-6.6-5.6-9.1-15.9-9.1h-4.7c-6 0-9.3-2.1-12.3-7.9l-1-1.9c-2.5-4.8-1.2-9.8 2.8-14.9l5.6-7c2.9-3.6 7.8-9.1 11-12.3h-22.8c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h57c7.5 0 11.3 4 11.3 11.3v3.3c0 0.2 0 0.6 0 0.9 0 4.2-2.3 10.2-5.1 13.3zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-320c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h320zM16 160c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h16v-64h-8c-4.4 0-8-3.6-8-8 0-1 0.4-2.6 0.8-3.6l8-16c1.2-2.4 4.4-4.4 7.1-4.4h24c4.4 0 8 3.6 8 8v88h16c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-64zM12.1 320c-7 0-12.1-4-12.1-11.4v-4c0-47.3 51-56.4 51-69.1 0-7.2-6-8.8-9.3-8.8h-0.1c-3 0-7.2 1.7-9.4 3.8-5.1 4.9-10.5 7-16.1 2.4l-8.6-6.9c-5.8-4.5-7.2-9.8-2.8-15.4 6.7-8.8 19.1-18.8 40.5-18.8 19.5 0 44.5 10.5 44.5 39.6 0 37.8-45 46.2-48.3 56.4h38.7c4.4 0 8 3.6 8 8v16c0 4.4-3.6 8-8 8h-67.9z"}]}}),Ts.register({tasks:{width:512,height:512,paths:[{d:"M139.6 35.5l17 16.5c1.9 1.9 3.4 5.7 3.4 8.5 0 2.8-1.6 6.6-3.5 8.5l-72.2 72.2-15.6 15.6c-2 1.9-6 3.5-8.8 3.5-2.8 0-6.8-1.6-8.8-3.5l-47.6-47.4c-1.9-1.9-3.5-5.8-3.5-8.5 0-2.8 1.6-6.6 3.5-8.5l15.7-15.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5l22.7 22.1 63.7-63.3c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5zM139.6 194.7l17 17c1.9 1.9 3.4 5.7 3.4 8.4 0 2.7-1.6 6.6-3.5 8.5l-72.2 72.2-15.7 15.7c-2 1.9-6 3.5-8.8 3.5s-6.8-1.6-8.8-3.5l-47.5-47.5c-1.9-1.9-3.5-5.7-3.5-8.5s1.6-6.6 3.5-8.5l15.7-15.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5l22.7 22.1 63.7-63.7c1.9-1.9 5.7-3.5 8.5-3.5 2.8 0 6.6 1.6 8.5 3.5zM64 368c26.5 0 48 21.5 48 48s-21.5 48-48 48c-26.5 0-48.6-21.5-48.6-48s22.1-48 48.6-48zM496 384c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288zM496 64c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288zM496 224c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-288c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h288z"}]}}),Ts.register({indent:{width:448,height:512,paths:[{d:"M27.3 363.3c-10 10-27.3 3-27.3-11.3v-192c0-14.2 17.3-21.3 27.3-11.3l96 96c2.6 2.6 4.7 7.7 4.7 11.3 0 3.7-2.1 8.7-4.7 11.3zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM435.2 160c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Ts.register({outdent:{width:448,height:512,paths:[{d:"M100.7 363.3l-96-96c-2.6-2.6-4.7-7.7-4.7-11.3s2.1-8.7 4.7-11.3l96-96c10-10 27.3-3 27.3 11.3v192c0 14.2-17.3 21.3-27.3 11.3zM432 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416zM435.2 288c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM435.2 160c7.1 0 12.8 5.7 12.8 12.8v0 38.3 0c0 7.1-5.7 12.8-12.8 12.8h0-230.3 0c-7.1 0-12.8-5.7-12.8-12.8v0-38.3 0c0-7.1 5.7-12.8 12.8-12.8h0 230.3zM432 32c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-416c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h416z"}]}}),Ts.register({minus:{width:448,height:512,paths:[{d:"M416 208c17.7 0 32 14.3 32 32v32c0 17.7-14.3 32-32 32h-384c-17.7 0-32-14.3-32-32v-32c0-17.7 14.3-32 32-32h384z"}]}}),Ts.register({table:{width:512,height:512,paths:[{d:"M464 32c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48h-416c-26.5 0-48-21.5-48-48v-352c0-26.5 21.5-48 48-48h416zM224 416v-96h-160v96h160zM224 256v-96h-160v96h160zM448 416v-96h-160v96h160zM448 256v-96h-160v96h160z"}]}}),Ts.register({"remove-format":{width:640,height:512,paths:[{d:"M336 416c8.8 0 16 7.2 16 16v32c0 8.8-7.2 16-16 16h-128c-8.8 0-16-7.2-16-16v-32c0-8.8 7.2-16 16-16h32.5l26.5-79.6 67.1 51.8-9.3 27.8h11.2zM633.8 458.1c3.4 2.7 6.2 8.3 6.2 12.6 0 3-1.5 7.4-3.4 9.8l-19.6 25.3c-2.7 3.4-8.3 6.2-12.6 6.2-3 0-7.4-1.5-9.8-3.4l-588.4-454.7c-3.4-2.7-6.2-8.3-6.2-12.6 0-3 1.5-7.4 3.4-9.8l19.6-25.3c2.7-3.4 8.3-6.2 12.6-6.2 3 0 7.4 1.5 9.8 3.4l114.5 88.5v-43.9c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v96c0 8.8-7.2 16-16 16h-32c-8.8 0-16-7.2-16-16v-32h-117.8l-49.2 147.6zM309.9 207.8l31.9-95.8h-117.8v29.4z"}]}}),Ts.register({undo:{width:512,height:512,paths:[{d:"M212.3 224.3h-200.3c-6.6 0-12-5.4-12-12v-200.3c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v78.1c45.8-50.8 112.3-82.6 186.2-82.1 136.9 1 246.4 111.6 246.2 248.5-0.3 136.7-111.2 247.5-248 247.5-64.1 0-122.5-24.3-166.5-64.2-5.1-4.6-5.3-12.6-0.5-17.4l34-34c4.5-4.5 11.7-4.7 16.4-0.5 31 27.5 71.9 44.1 116.6 44.1 97.3 0 176-78.7 176-176 0-97.3-78.7-176-176-176-58.5 0-110.3 28.5-142.3 72.3h98.3c6.6 0 12 5.4 12 12v48c0 6.6-5.4 12-12 12z"}]}}),Ts.register({redo:{width:512,height:512,paths:[{d:"M500.3 0c6.6 0 12 5.4 12 12v200.3c0 6.6-5.4 12-12 12h-200.3c-6.6 0-12-5.4-12-12v-47.4 0c0-6.6 5.4-12 12-12 0.2 0 0.4 0 0.6 0l101.5 4.9c-28.9-43-94.3-77.8-146.1-77.8-97.2 0-176 78.8-176 176 0 97.2 78.8 176 176 176 36.7 0 88.7-19.7 116.3-43.9 1.9-1.6 5.4-3 7.9-3 2.7 0 6.5 1.6 8.5 3.5l34 34c1.9 1.9 3.5 5.7 3.5 8.5 0 3-1.8 7-4 8.9-39 35.3-113.3 63.9-165.8 63.9h-0.3c-136.9 0-247.9-110.9-248-247.8-0.1-136.7 111.3-248.2 248-248.2h0.3c63.2 0 147.7 39.1 188.6 87.3l-4-82.8c0-0.2 0-0.4 0-0.6 0-6.6 5.4-12 12-12h0 47.4z"}]}}),Ts.register({expand:{width:448,height:512,paths:[{d:"M0 180v-124c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-84v84c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12zM288 44c0-6.6 5.4-12 12-12h124c13.3 0 24 10.7 24 24v124c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-84h-84c-6.6 0-12-5.4-12-12v-40zM436 320c6.6 0 12 5.4 12 12v124c0 13.3-10.7 24-24 24h-124c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84v-84c0-6.6 5.4-12 12-12h40zM160 468c0 6.6-5.4 12-12 12h-124c-13.3 0-24-10.7-24-24v-124c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40z"}]}}),Ts.register({compress:{width:448,height:512,paths:[{d:"M436 192h-124c-13.3 0-24-10.7-24-24v-124c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zM160 168c0 13.3-10.7 24-24 24h-124c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h84v-84c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v124zM160 468c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-84h-84c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h124c13.3 0 24 10.7 24 24v124zM352 468c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-124c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-84v84z"}]}}),Ts.register({print:{width:512,height:512,paths:[{d:"M448 192c35.3 0 64 28.7 64 64v112c0 8.8-7.2 16-16 16h-48v96c0 17.7-14.3 32-32 32h-320c-17.7 0-32-14.3-32-32v-96h-48c-8.8 0-16-7.2-16-16v-112c0-35.3 28.7-64 64-64v-160c0-17.7 14.3-32 32-32h274.7c8.5 0 16.6 3.4 22.6 9.4l45.3 45.3c6 6 9.4 14.1 9.4 22.6v114.8zM384 448v-96h-256v96h256zM384 224v-96h-48c-8.8 0-16-7.2-16-16v-48h-192v160h256zM432 296c13.3 0 24-10.8 24-24 0-13.3-10.8-24-24-24s-24 10.7-24 24c0 13.3 10.8 24 24 24z"}]}}),Ts.register({eye:{width:576,height:512,paths:[{d:"M572.5 241.4c1.9 3.8 3.5 10.3 3.5 14.6s-1.6 10.8-3.5 14.6c-54.2 105.8-161.6 177.4-284.5 177.4s-230.3-71.6-284.5-177.4c-1.9-3.8-3.5-10.3-3.5-14.6s1.6-10.8 3.5-14.6c54.2-105.8 161.6-177.4 284.5-177.4s230.3 71.6 284.5 177.4zM288 400h0.1c79.4 0 143.9-64.5 143.9-143.9v-0.1c0-79.5-64.5-144-144-144s-144 64.5-144 144 64.5 144 144 144zM288 160h0.2c52.9 0 95.8 42.9 95.8 95.8 0 52.9-42.9 95.8-95.8 95.8-52.9 0-95.8-42.9-95.8-95.8 0-7 1.5-18.3 3.3-25.1 7 5.1 19.7 9.3 28.4 9.3 26.4 0 47.8-21.4 47.8-47.8 0-8.7-4.2-21.4-9.3-28.4 6.8-2 18.2-3.7 25.3-3.8z"}]}}),Ts.register({"regular/object-group":{width:512,height:512,paths:[{d:"M500 128h-12v256h12c6.6 0 12 5.4 12 12v72c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-12h-320v12c0 6.6-5.4 12-12 12h-72c-6.6 0-12-5.4-12-12v-72c0-6.6 5.4-12 12-12h12v-256h-12c-6.6 0-12-5.4-12-12v-72c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v12h320v-12c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v72c0 6.6-5.4 12-12 12zM448 64v32h32v-32h-32zM32 64v32h32v-32h-32zM64 448v-32h-32v32h32zM480 448v-32h-32v32h32zM440 384v-256h-12c-6.6 0-12-5.4-12-12v-12h-320v12c0 6.6-5.4 12-12 12h-12v256h12c6.6 0 12 5.4 12 12v12h320v-12c0-6.6 5.4-12 12-12h12zM404 192c6.6 0 12 5.4 12 12v168c0 6.6-5.4 12-12 12h-200c-6.6 0-12-5.4-12-12v-52h-84c-6.6 0-12-5.4-12-12v-168c0-6.6 5.4-12 12-12h200c6.6 0 12 5.4 12 12v52h84zM136 168v112h144v-112h-144zM376 344v-112h-56v76c0 6.6-5.4 12-12 12h-76v24h144z"}]}}),Ts.register({"regular/file-code":{width:384,height:512,paths:[{d:"M149.9 349.1c3.5 3.3 3.7 8.9 0.4 12.4l-17.4 18.6c-1.6 1.8-4 2.8-6.4 2.8-2.2 0-4.4-0.9-6-2.4l-57.7-54.1c-3.7-3.4-3.7-9.3 0-12.8l57.7-54.1c3.4-3.3 9-3.2 12.4 0.4l17.4 18.6 0.2 0.2c3.2 3.6 2.8 9.2-0.8 12.4l-32.8 28.9 32.8 28.9zM369.9 97.9c9 9 14.1 21.3 14.1 34v332.1c0 26.5-21.5 48-48 48h-288c-26.5 0-48-21.5-48-48v-416c0-26.5 21.5-48 48-48.1h204.1c12.7 0 24.9 5.1 33.9 14.1zM256 51.9v76.1h76.1zM336 464v-288h-104c-13.3 0-24-10.7-24-24v-104h-160v416h288zM209.6 214l24.4 7c4.7 1.3 7.4 6.2 6 10.9l-54.7 188.2c-1.3 4.6-6.2 7.4-10.9 6l-24.4-7.1c-4.7-1.3-7.4-6.2-6-10.9l54.7-188.1c1.4-4.7 6.2-7.4 10.9-6zM234.1 290.9c-3.5-3.3-3.7-8.9-0.4-12.4l17.4-18.6c3.3-3.6 8.9-3.7 12.4-0.4l57.7 54.1c3.7 3.4 3.7 9.3 0 12.8l-57.7 54.1c-3.5 3.3-9.1 3.1-12.4-0.4l-17.4-18.6-0.2-0.2c-3.2-3.6-2.8-9.2 0.8-12.4l32.8-28.9-32.8-28.9z"}]}});const As=ls({render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-tooltip",{attrs:{content:this.tooltip,"open-delay":350,disabled:this.readonly,transition:"el-zoom-in-bottom",effect:"dark",placement:"top"}},[e("div",{class:this.commandButtonClass,on:{mousedown:function(t){t.preventDefault()},click:this.onClick}},[e("v-icon",{attrs:{name:this.icon}})],1)])},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"commandButtonClass",{get:function(){return{"el-tiptap-editor__command-button":!0,"el-tiptap-editor__command-button--active":this.isActive,"el-tiptap-editor__command-button--readonly":this.readonly}},enumerable:!1,configurable:!0}),e.prototype.onClick=function(){this.readonly||this.command()},ar([Nr({type:String,required:!0})],e.prototype,"icon",void 0),ar([Nr({type:Boolean,default:!1})],e.prototype,"isActive",void 0),ar([Nr({type:String,required:!0})],e.prototype,"tooltip",void 0),ar([Nr({type:Function,default:ts})],e.prototype,"command",void 0),ar([Nr({type:Boolean,default:!1})],e.prototype,"readonly",void 0),ar([Or({components:(Ns={"v-icon":Ts},Ns[u.a.name]=u.a,Ns)})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0),Ds=ls({render:function(){var t=this.$createElement;return(this._self._c||t)("command-button",{attrs:{command:this.openLink,tooltip:this.t("editor.extensions.Link.open.tooltip"),icon:"external-link-alt"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.openLink=function(){this.url&&window.open(this.url)},ar([Nr({type:String,required:!0})],e.prototype,"url",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0),Ps=ls({render:function(){var t=this.$createElement;return(this._self._c||t)("command-button",{attrs:{command:this.openEditLinkControl,tooltip:this.t("editor.extensions.Link.edit.tooltip"),icon:"edit"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.openEditLinkControl=function(){var t=this,e=this.editorContext.editor,n=e.state,r=e.view,o=n.tr;f.a.prompt("",this.t("editor.extensions.Link.edit.control.title"),{confirmButtonText:this.t("editor.extensions.Link.edit.control.confirm"),cancelButtonText:this.t("editor.extensions.Link.edit.control.cancel"),inputPlaceholder:this.t("editor.extensions.Link.edit.control.placeholder"),inputValue:this.initUrl,roundButton:!0}).then((function(e){var n=e.value;r.dispatch(o),t.editorContext.commands.link({href:n})})).catch((function(){}))},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([Nr({type:String,required:!0})],e.prototype,"initUrl",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0),zs=ls({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("command-button",{attrs:{command:function(){return t.editorContext.commands.link({href:""})},tooltip:t.t("editor.extensions.Link.unlink.tooltip"),icon:"unlink"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0),Rs=ls({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"link-bubble-menu"},[e("open-link-command-button",{attrs:{url:this.url}}),this._v(" "),e("edit-link-command-button",{attrs:{"editor-context":this.editorContext,"init-url":this.url}}),this._v(" "),e("unlink-command-button",{attrs:{"editor-context":this.editorContext}})],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"url",{get:function(){return(0,this.editorContext.getMarkAttrs)("link").href},enumerable:!1,configurable:!0}),ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([Or({components:{OpenLinkCommandButton:Ds,EditLinkCommandButton:Ps,UnlinkCommandButton:zs}})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0),Is=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("editor-menu-bubble",{attrs:{editor:t.editor,"keep-in-bounds":!1},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"el-tiptap-editor__menu-bubble",class:{"el-tiptap-editor__menu-bubble--active":e.menu.isActive&&(t.showLinkMenu||t.showTextMenu)},style:"\n      left: "+e.menu.left+"px;\n      bottom: "+(e.menu.bottom+10)+"px;\n    "},[t.showLinkMenu?n("link-bubble-menu",{attrs:{editorContext:e}}):t.showTextMenu?t._l(t.generateCommandButtonComponentSpecs(e),(function(e,r){return n(e.component,t._g(t._b({key:"command-button"+r,tag:"component"},"component",e.componentProps,!1),e.componentEvents))})):t._e()],2)]}}])})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"showLinkMenu",{get:function(){var t=this.editor,e=t.state,n=t.schema;if(n.marks.link){var r=e.tr.selection;if(!r)return!1;var o=r.$from,i=r.$to,s=ws(o,n.marks.link);return!!s&&s.to===i.pos}return!1},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showTextMenu",{get:function(){return this.editor.state.selection instanceof a["TextSelection"]&&this.editor.extensions.extensions.some((function(t){return t.options.bubble}))},enumerable:!1,configurable:!0}),e.prototype.generateCommandButtonComponentSpecs=function(t){var e=this;return this.editor.extensions.extensions.reduce((function(n,r){if(!r.options.bubble)return n;if("function"!=typeof r.menuBtnView)return n;var o=r.menuBtnView(sr(sr({},t),{editor:e.editor}));return Array.isArray(o)?ur(n,o):ur(n,[o])}),[])},ar([Nr({type:i["b"],required:!0})],e.prototype,"editor",void 0),ar([Or({components:{EditorMenuBubble:i["e"],LinkBubbleMenu:Rs}})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);var js=["transaction","focus","blur","paste","drop"];const Fs=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.editor?n("div",{staticClass:"el-tiptap-editor",class:{"el-tiptap-editor--fullscreen":t.editorStateOptions.isFullscreen},style:t.elTiptapEditorStyle},[n("menu-bubble",{attrs:{editor:t.editor}}),t._v(" "),t.showMenubar?n("menu-bar",{class:{"border-top-radius":t.showMenubar},attrs:{editor:t.editor},scopedSlots:t._u([t.$scopedSlots.menubar?{key:"default",fn:function(e){return[t._t("menubar",null,null,e)]}}:null],null,!0)}):t._e(),t._v(" "),t.isCodeViewMode?n("div",{class:{"el-tiptap-editor__codemirror":!0,"border-bottom-radius":t.isCodeViewMode}},[n("textarea",{ref:"cmTextArea"})]):t._e(),t._v(" "),n("editor-content",{directives:[{name:"show",rawName:"v-show",value:!t.isCodeViewMode,expression:"!isCodeViewMode"}],class:{"el-tiptap-editor__content":!0,"border-top-radius":!t.showMenubar,"border-bottom-radius":!t.showFooter},attrs:{editor:t.editor}}),t._v(" "),t._t("footer",[t.showFooter?n("div",{class:{"el-tiptap-editor__footer":!0,"border-bottom-radius":t.showFooter}},[n("span",{staticClass:"el-tiptap-editor__characters"},[t._v("\n        "+t._s(t.t("editor.characters"))+": "+t._s(t.characters)+"\n      ")])]):t._e()],{editor:t.editor})],2):t._e()},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editor=null,e.emitAfterOnUpdate=!1,e}var n,r;return ir(e,t),Object.defineProperty(e.prototype,"characters",{get:function(){return this.editor?this.editor.state.doc.textContent.length:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"showFooter",{get:function(){return this.charCounterCount&&!this.isCodeViewMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"spellcheckEnabled",{get:function(){return null==this.spellcheck?!this.$elementTiptapPlugin||this.$elementTiptapPlugin.spellcheck:this.spellcheck},enumerable:!1,configurable:!0}),e.prototype.onContentChange=function(t){this.emitAfterOnUpdate?this.emitAfterOnUpdate=!1:this.editor&&this.editor.setContent(t)},e.prototype.onReadonlyChange=function(){this.editor&&this.editor.setOptions({editable:!this.readonly})},e.prototype.mounted=function(){var t=this,e=this.generateExtensions(),n=js.reduce((function(e,n){var r;return sr(sr({},e),((r={})["on"+is(n)]=function(){return t.emitEvent.bind(t)(n)},r))}),{});this.editor=new i["b"](sr(sr(sr(sr({},this.editorProperties),{editable:!this.readonly,useBuiltInExtensions:!1,extensions:e}),n),{content:this.content,onUpdate:this.onUpdate.bind(this)})),this.$emit(this.genEvent("init"),{editor:this.editor})},e.prototype.beforeDestroy=function(){this.editor&&this.editor.destroy()},e.prototype.generateExtensions=function(){var t=ur(this.extensions);return t.push(new jr({spellcheck:this.spellcheckEnabled})),t.push(this.initPlaceholderExtension()),t},e.prototype.emitEvent=function(t){this.$emit(this.genEvent(t),{editor:this.editor})},e.prototype.onUpdate=function(t){var e;this.emitAfterOnUpdate=!0,e="html"===this.output?t.getHTML():JSON.stringify(t.getJSON()),this.$emit(this.genEvent("update"),e,t)},Object.defineProperty(e.prototype,"editorStateOptions",{get:function(){return o.a.observable({isFullscreen:!1,isCodeViewMode:!1})},enumerable:!1,configurable:!0}),e.prototype.genEvent=function(t){return"on"+is(t)},e.prototype.getTitleExtension=function(){if(this.extensions.find((function(t){return"doc"===t.name})).options.title){var t=this.extensions.find((function(t){return"title"===t.name}));if(t)return t}return null},e.prototype.initPlaceholderExtension=function(){var t=this,e=this.getTitleExtension();return new s["n"](e?{emptyEditorClass:"el-tiptap-editor--empty",emptyNodeClass:"el-tiptap-editor__with-title-placeholder",showOnlyCurrent:!1,emptyNodeText:function(n){return"title"===n.type.name?e.options.placeholder:t.placeholder}}:{emptyEditorClass:"el-tiptap-editor--empty",emptyNodeClass:"el-tiptap-editor__placeholder",emptyNodeText:this.placeholder})},ar([Nr({type:Array,default:function(){return[]}})],e.prototype,"extensions",void 0),ar([(n="onUpdate",r={type:String,default:""},void 0===r&&(r={}),function(t,e){Tr(r,t,e),yr((function(t,e){(t.props||(t.props={}))[e]=r,t.model={prop:e,event:n||e}}))(t,e)})],e.prototype,"content",void 0),ar([Nr({type:String,default:""})],e.prototype,"placeholder",void 0),ar([Nr({type:Object,default:function(){return{}}})],e.prototype,"editorProperties",void 0),ar([Nr({type:String,default:"html",validator:function(t){return["html","json"].includes(t)}})],e.prototype,"output",void 0),ar([Nr({type:Boolean,default:!1})],e.prototype,"readonly",void 0),ar([Nr({type:Boolean,default:void 0})],e.prototype,"spellcheck",void 0),ar([Ar("content")],e.prototype,"onContentChange",null),ar([Ar("readonly")],e.prototype,"onReadonlyChange",null),ar([Mr()],e.prototype,"editorStateOptions",null),ar([Or({components:{MenuBar:us,MenuBubble:Is,EditorContent:i["c"]},inject:[]})],e)}(br(ss,as,cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var Bs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{title:!1}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{content:this.options.title?"title block+":"block+"}},enumerable:!1,configurable:!0}),e}(i["a"]),$s=jn.forEach,Ls=he("forEach"),Vs=ge("forEach"),qs=Ls&&Vs?[].forEach:function(t){return $s(this,t,arguments.length>1?arguments[1]:void 0)};ce({target:"Array",proto:!0,forced:[].forEach!=qs},{forEach:qs});var Ws=["paragraph","heading","list_item","todo_item"],Js=/^\d+(.\d+)?$/;function Hs(t){if(!t)return"";var e=String(t);if(Js.test(e)){var n=parseFloat(e);e=String(Math.round(100*n))+"%"}return 1.7*parseFloat(e)+"%"}function Us(t,e){var n=t.selection,r=t.doc;if(!n||!r)return t;if(!(n instanceof a["TextSelection"]||n instanceof a["AllSelection"]))return t;var o=n.from,i=n.to,s=[],c=e&&"100%"!==e?e:null;return r.nodesBetween(o,i,(function(t,e){var n=t.type;return!Ws.includes(n.name)||((t.attrs.lineHeight||null)!==c&&s.push({node:t,pos:e,nodeType:n}),"list_item"!==n.name&&"todo_item"!==n.name)})),s.length?(s.forEach((function(e){var n=e.node,r=e.pos,o=e.nodeType,i=n.attrs;i=sr(sr({},i),{lineHeight:c}),t=t.setNodeMarkup(r,o,i,n.marks)})),t):t}var Ks={attrs:{textAlign:{default:null},indent:{default:null},lineHeight:{default:null}},content:"inline*",group:"block",parseDOM:[{tag:"p",getAttrs:Gs}],toDOM:Xs};function Gs(t){var e=t.style,n=e.textAlign,r=e.lineHeight,o=t.getAttribute("data-text-align")||n||"";return{textAlign:o=On.test(o)?o:null,indent:parseInt(t.getAttribute("data-indent"),10)||0,lineHeight:r=r&&r!==Hs(1.7)?r:null}}function Xs(t){var e=t.attrs,n=e.textAlign,r=e.indent,o=e.lineHeight,i="",s={};return n&&"left"!==n&&(i+="text-align: "+n+";"),r&&(s["data-indent"]=r),o&&(i+="line-height: "+Hs(o)+";"),i&&(s.style=i),["p",s,0]}var Zs,Ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){return Ks},enumerable:!1,configurable:!0}),e}(i["i"]),Qs=Xs,ta=Gs,ea=(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"title"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{placeholder:"",class:""}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{attrs:{textAlign:{default:null}},content:"inline*",parseDOM:[{tag:"h1",getAttrs:ta}],toDOM:function(e){var n=Qs(e);return["h1",sr(sr({},n[1]),{class:t.options.class}),0]}}},enumerable:!1,configurable:!0})}(i["h"]),jn.map),na=Jr("map"),ra=ge("map");function oa(t,e){var n=function(t){var e=t.schema.nodes.heading;return Object(c["findParentNodeOfType"])(e)(t.selection)}(t);return null==e?!!n:!!(n&&n.node&&n.node.attrs&&n.node.attrs.level===e)}ce({target:"Array",proto:!0,forced:!na||!ra},{map:function(t){return ea(this,t,arguments.length>1?arguments[1]:void 0)}}),qe("match",1,(function(t,e,n){return[function(e){var n=U(this),r=null==e?void 0:e[t];return void 0!==r?r.call(e,n):new RegExp(e)[t](String(n))},function(t){var r=n(e,t,this);if(r.done)return r.value;var o=it(t),i=String(this);if(!o.global)return Ye(o,i);var s=o.unicode;o.lastIndex=0;for(var a,c=[],l=0;null!==(a=Ye(o,i));){var u=String(a[0]);c[l]=u,""===u&&(o.lastIndex=Ze(i,$t(o.lastIndex),s)),l++}return 0===l?null:c}]}));const ia=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:function(e){return e>0?t.editorContext.commands.heading({level:e}):t.editorContext.commands.paragraph()}}},[n("command-button",{attrs:{"is-active":t.isHeadingActive(),tooltip:t.t("editor.extensions.Heading.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"heading"}}),t._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t.editorContext.isActive.paragraph()},attrs:{command:0}},[n("span",[t._v(t._s(t.t("editor.extensions.Heading.buttons.paragraph")))])]),t._v(" "),t._l(t.level,(function(e){return n("el-dropdown-item",{key:e,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t.isHeadingActive(e)},attrs:{command:e}},[n("h"+e,{tag:"component",attrs:{"data-item-type":"heading"}},[t._v("\n        "+t._s(t.t("editor.extensions.Heading.buttons.heading"))+" "+t._s(e)+"\n      ")])],1)}))],2)],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this.editorContext.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.editor.extensions.options.heading.level},enumerable:!1,configurable:!0}),e.prototype.isHeadingActive=function(t){return oa(this.editor.state,t)},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(Zs={},Zs[y.a.name]=y.a,Zs[v.a.name]=v.a,Zs[d.a.name]=d.a,Zs.CommandButton=As,Zs)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);function sa(t){var e=ta(t),n=t.nodeName.match(/[H|h](\d)/)[1];return e.level=Number(n),e}function aa(t){var e=Qs(t),n=t.attrs.level||1;return e[0]="h"+n,e}var ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){return sr(sr({},Ks),{attrs:sr(sr({},Ks.attrs),{level:{default:1}}),defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(t){return{tag:"h"+t,getAttrs:sa}})),toDOM:aa})},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){return{component:ia,componentProps:{editorContext:t}}},e}(s["f"]),la=sr(sr({},Ks),{attrs:{textAlign:{default:null},indent:{default:null}},content:"block*",defining:!0,parseDOM:[{tag:"blockquote",getAttrs:function(t){return ta(t)}}],toDOM:function(t){var e=Qs(t);return e[0]="blockquote",e}}),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){return la},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.blockquote,isActive:e.blockquote(),icon:"quote-right",tooltip:Tn("editor.extensions.Blockquote.tooltip")}}},e}(s["a"]),pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.code_block,isActive:e.code_block(),icon:"code",tooltip:Tn("editor.extensions.CodeBlock.tooltip")}}},e}(s["d"]),fa={attrs:{textAlign:{default:null},lineHeight:{default:null}},content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li",getAttrs:function(t){var e=t.style,n=e.textAlign,r=e.lineHeight,o=t.getAttribute("data-text-align")||n||"";return o=On.test(o)?o:null,r=r&&r!==Hs(1.7)?r:null,{textAlign:o,lineHeight:r}}}],toDOM:function(t){var e=t.attrs,n=e.textAlign,r=e.lineHeight,o="",i={};if(n&&"left"!==n&&(o+="text-align: "+n),r){var s=Hs(r);o+="line-height: "+s+";"}return o&&(i.style=o),["li",i,0]}},ha=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){return fa},enumerable:!1,configurable:!0}),e}(s["l"]),da=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{isActive:e.bullet_list(),command:n.bullet_list,icon:"list-ul",tooltip:Tn("editor.extensions.BulletList.tooltip")}}},e}(s["c"]),ma=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{isActive:e.ordered_list(),command:n.ordered_list,icon:"list-ol",tooltip:Tn("editor.extensions.OrderedList.tooltip")}}},e}(s["m"]),va=P((function(t,e){e.__esModule=!0,e.default=function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];void 0!==i&&(t[o]=i)}}return t}}));D(va);var ga=P((function(t,e){e.__esModule=!0,e.isInContainer=e.getScrollContainer=e.isScroll=e.getStyle=e.once=e.off=e.on=void 0;var n,r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=f,e.addClass=function(t,e){if(t){for(var n=t.className,r=(e||"").split(" "),o=0,i=r.length;o<i;o++){var s=r[o];s&&(t.classList?t.classList.add(s):f(t,s)||(n+=" "+s))}t.classList||(t.className=n)}},e.removeClass=function(t,e){if(t&&e){for(var n=e.split(" "),r=" "+t.className+" ",o=0,i=n.length;o<i;o++){var s=n[o];s&&(t.classList?t.classList.remove(s):f(t,s)&&(r=r.replace(" "+s+" "," ")))}t.classList||(t.className=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")}(r))}},e.setStyle=function t(e,n,o){if(e&&n)if("object"===(void 0===n?"undefined":r(n)))for(var i in n)n.hasOwnProperty(i)&&t(e,i,n[i]);else"opacity"===(n=l(n))&&c<9?e.style.filter=isNaN(o)?"":"alpha(opacity="+100*o+")":e.style[n]=o};var i=((n=o.a)&&n.__esModule?n:{default:n}).default.prototype.$isServer,s=/([\:\-\_]+(.))/g,a=/^moz([A-Z])/,c=i?0:Number(document.documentMode),l=function(t){return t.replace(s,(function(t,e,n,r){return r?n.toUpperCase():n})).replace(a,"Moz$1")},u=e.on=!i&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)},p=e.off=!i&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)};function f(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}e.once=function(t,e,n){u(t,e,(function r(){n&&n.apply(this,arguments),p(t,e,r)}))};var h=e.getStyle=c<9?function(t,n){if(!i){if(!t||!n)return null;"float"===(n=l(n))&&(n="styleFloat");try{switch(n){case"opacity":try{return t.filters.item("alpha").opacity/100}catch(t){return 1}default:return t.style[n]||t.currentStyle?t.currentStyle[n]:null}}catch(e){return t.style[n]}}}:function(t,e){if(!i){if(!t||!e)return null;"float"===(e=l(e))&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(n){return t.style[e]}}},d=e.isScroll=function(t,e){if(!i)return h(t,null!==e||void 0!==e?e?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)};e.getScrollContainer=function(t,e){if(!i){for(var n=t;n;){if([window,document,document.documentElement].includes(n))return window;if(d(n,e))return n;n=n.parentNode}return n}},e.isInContainer=function(t,e){if(i||!t||!e)return!1;var n=t.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}}));D(ga),ga.isInContainer,ga.getScrollContainer,ga.isScroll,ga.getStyle,ga.once,ga.off,ga.on,ga.hasClass,ga.addClass,ga.removeClass,ga.setStyle;var ya=P((function(t,e){e.__esModule=!0;var n,r=(n=o.a)&&n.__esModule?n:{default:n},i=!1,s=!1,a=void 0,c=function(){if(!r.default.prototype.$isServer){var t=u.modalDom;return t?i=!0:(i=!1,t=document.createElement("div"),u.modalDom=t,t.addEventListener("touchmove",(function(t){t.preventDefault(),t.stopPropagation()})),t.addEventListener("click",(function(){u.doOnModalClick&&u.doOnModalClick()}))),t}},l={},u={modalFade:!0,getInstance:function(t){return l[t]},register:function(t,e){t&&e&&(l[t]=e)},deregister:function(t){t&&(l[t]=null,delete l[t])},nextZIndex:function(){return u.zIndex++},modalStack:[],doOnModalClick:function(){var t=u.modalStack[u.modalStack.length-1];if(t){var e=u.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,n,o,s){if(!r.default.prototype.$isServer&&t&&void 0!==e){this.modalFade=s;for(var a=this.modalStack,l=0,u=a.length;l<u;l++)if(a[l].id===t)return;var p=c();(0,ga.addClass)(p,"v-modal"),this.modalFade&&!i&&(0,ga.addClass)(p,"v-modal-enter"),o&&o.trim().split(/\s+/).forEach((function(t){return(0,ga.addClass)(p,t)})),setTimeout((function(){(0,ga.removeClass)(p,"v-modal-enter")}),200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),e&&(p.style.zIndex=e),p.tabIndex=0,p.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:o})}},closeModal:function(t){var e=this.modalStack,n=c();if(e.length>0){var r=e[e.length-1];if(r.id===t)r.modalClass&&r.modalClass.trim().split(/\s+/).forEach((function(t){return(0,ga.removeClass)(n,t)})),e.pop(),e.length>0&&(n.style.zIndex=e[e.length-1].zIndex);else for(var o=e.length-1;o>=0;o--)if(e[o].id===t){e.splice(o,1);break}}0===e.length&&(this.modalFade&&(0,ga.addClass)(n,"v-modal-leave"),setTimeout((function(){0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",u.modalDom=void 0),(0,ga.removeClass)(n,"v-modal-leave")}),200))}};Object.defineProperty(u,"zIndex",{configurable:!0,get:function(){return s||(a=a||(r.default.prototype.$ELEMENT||{}).zIndex||2e3,s=!0),a},set:function(t){a=t}}),r.default.prototype.$isServer||window.addEventListener("keydown",(function(t){if(27===t.keyCode){var e=function(){if(!r.default.prototype.$isServer&&u.modalStack.length>0){var t=u.modalStack[u.modalStack.length-1];if(!t)return;return u.getInstance(t.id)}}();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}})),e.default=u}));D(ya);var ba=P((function(t,e){e.__esModule=!0,e.default=function(){if(r.default.prototype.$isServer)return 0;if(void 0!==i)return i;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;return t.parentNode.removeChild(t),i=e-o};var n,r=(n=o.a)&&n.__esModule?n:{default:n},i=void 0}));D(ba);var wa=P((function(t,e){e.__esModule=!0,e.PopupManager=void 0;var n=a(o.a),r=a(va),i=a(ya),s=a(ba);function a(t){return t&&t.__esModule?t:{default:t}}var c=1,l=void 0;e.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+c++,i.default.register(this._popupId,this)},beforeDestroy:function(){i.default.deregister(this._popupId),i.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(t){var e=this;if(t){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,n.default.nextTick((function(){e.open()})))}else this.close()}},methods:{open:function(t){var e=this;this.rendered||(this.rendered=!0);var n=(0,r.default)({},this.$props||this,t);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var o=Number(n.openDelay);o>0?this._openTimer=setTimeout((function(){e._openTimer=null,e.doOpen(n)}),o):this.doOpen(n)},doOpen:function(t){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var e=this.$el,n=t.modal,r=t.zIndex;if(r&&(i.default.zIndex=r),n&&(this._closing&&(i.default.closeModal(this._popupId),this._closing=!1),i.default.openModal(this._popupId,i.default.nextZIndex(),this.modalAppendToBody?void 0:e,t.modalClass,t.modalFade),t.lockScroll)){this.withoutHiddenClass=!(0,ga.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,ga.getStyle)(document.body,"paddingRight"),10)),l=(0,s.default)();var o=document.documentElement.clientHeight<document.body.scrollHeight,a=(0,ga.getStyle)(document.body,"overflowY");l>0&&(o||"scroll"===a)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+l+"px"),(0,ga.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(e).position&&(e.style.position="absolute"),e.style.zIndex=i.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var t=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var e=Number(this.closeDelay);e>0?this._closeTimer=setTimeout((function(){t._closeTimer=null,t.doClose()}),e):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){i.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,ga.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},e.PopupManager=i.default}));D(wa),wa.PopupManager;var xa=P((function(t,e){e.__esModule=!0,e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e)throw new Error("instance & callback is required");var o=!1,i=function(){o||(o=!0,e&&e.apply(null,arguments))};r?t.$once("after-leave",i):t.$on("after-leave",i),setTimeout((function(){i()}),n+100)}}));D(xa);var Sa,ka=D(P((function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=68)}({0:function(t,e,n){function r(t,e,n,r,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},15:function(t,e){t.exports=wa},2:function(t,e){t.exports=ga},41:function(t,e){t.exports=xa},68:function(t,e,n){n.r(e);var r=n(7),o=n.n(r),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[t.customClass,{"is-fullscreen":t.fullscreen}],style:{backgroundColor:t.background||""}},[n("div",{staticClass:"el-loading-spinner"},[t.spinner?n("i",{class:t.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),t.text?n("p",{staticClass:"el-loading-text"},[t._v(t._s(t.text))]):t._e()])])])};i._withStripped=!0;var s={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(t){this.text=t}}},a=n(0),c=Object(a.a)(s,i,[],!1,null,null,null);c.options.__file="packages/loading/src/loading.vue";var l=c.exports,u=n(2),p=n(15),f=n(41),h=n.n(f),d=o.a.extend(l),m={install:function(t){if(!t.prototype.$isServer){var e=function(e,r){r.value?t.nextTick((function(){r.modifiers.fullscreen?(e.originalPosition=Object(u.getStyle)(document.body,"position"),e.originalOverflow=Object(u.getStyle)(document.body,"overflow"),e.maskStyle.zIndex=p.PopupManager.nextZIndex(),Object(u.addClass)(e.mask,"is-fullscreen"),n(document.body,e,r)):(Object(u.removeClass)(e.mask,"is-fullscreen"),r.modifiers.body?(e.originalPosition=Object(u.getStyle)(document.body,"position"),["top","left"].forEach((function(t){var n="top"===t?"scrollTop":"scrollLeft";e.maskStyle[t]=e.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-parseInt(Object(u.getStyle)(document.body,"margin-"+t),10)+"px"})),["height","width"].forEach((function(t){e.maskStyle[t]=e.getBoundingClientRect()[t]+"px"})),n(document.body,e,r)):(e.originalPosition=Object(u.getStyle)(e,"position"),n(e,e,r)))})):(h()(e.instance,(function(t){if(e.instance.hiding){e.domVisible=!1;var n=r.modifiers.fullscreen||r.modifiers.body?document.body:e;Object(u.removeClass)(n,"el-loading-parent--relative"),Object(u.removeClass)(n,"el-loading-parent--hidden"),e.instance.hiding=!1}}),300,!0),e.instance.visible=!1,e.instance.hiding=!0)},n=function(e,n,r){n.domVisible||"none"===Object(u.getStyle)(n,"display")||"hidden"===Object(u.getStyle)(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach((function(t){n.mask.style[t]=n.maskStyle[t]})),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(u.addClass)(e,"el-loading-parent--relative"),r.modifiers.fullscreen&&r.modifiers.lock&&Object(u.addClass)(e,"el-loading-parent--hidden"),n.domVisible=!0,e.appendChild(n.mask),t.nextTick((function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0})),n.domInserted=!0)};t.directive("loading",{bind:function(t,n,r){var o=t.getAttribute("element-loading-text"),i=t.getAttribute("element-loading-spinner"),s=t.getAttribute("element-loading-background"),a=t.getAttribute("element-loading-custom-class"),c=r.context,l=new d({el:document.createElement("div"),data:{text:c&&c[o]||o,spinner:c&&c[i]||i,background:c&&c[s]||s,customClass:c&&c[a]||a,fullscreen:!!n.modifiers.fullscreen}});t.instance=l,t.mask=l.$el,t.maskStyle={},n.value&&e(t,n)},update:function(t,n){t.instance.setText(t.getAttribute("element-loading-text")),n.oldValue!==n.value&&e(t,n)},unbind:function(t,n){t.domInserted&&(t.mask&&t.mask.parentNode&&t.mask.parentNode.removeChild(t.mask),e(t,{value:!1,modifiers:n.modifiers})),t.instance&&t.instance.$destroy()}})}}},v=m,g=n(9),y=n.n(g),b=o.a.extend(l),w={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},x=void 0;b.prototype.originalPosition="",b.prototype.originalOverflow="",b.prototype.close=function(){var t=this;this.fullscreen&&(x=void 0),h()(this,(function(e){var n=t.fullscreen||t.body?document.body:t.target;Object(u.removeClass)(n,"el-loading-parent--relative"),Object(u.removeClass)(n,"el-loading-parent--hidden"),t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()}),300),this.visible=!1};var S=function(t,e,n){var r={};t.fullscreen?(n.originalPosition=Object(u.getStyle)(document.body,"position"),n.originalOverflow=Object(u.getStyle)(document.body,"overflow"),r.zIndex=p.PopupManager.nextZIndex()):t.body?(n.originalPosition=Object(u.getStyle)(document.body,"position"),["top","left"].forEach((function(e){var n="top"===e?"scrollTop":"scrollLeft";r[e]=t.target.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]+"px"})),["height","width"].forEach((function(e){r[e]=t.target.getBoundingClientRect()[e]+"px"}))):n.originalPosition=Object(u.getStyle)(e,"position"),Object.keys(r).forEach((function(t){n.$el.style[t]=r[t]}))},k=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!o.a.prototype.$isServer){if("string"==typeof(t=y()({},w,t)).target&&(t.target=document.querySelector(t.target)),t.target=t.target||document.body,t.target!==document.body?t.fullscreen=!1:t.body=!0,t.fullscreen&&x)return x;var e=t.body?document.body:t.target,n=new b({el:document.createElement("div"),data:t});return S(t,e,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(u.addClass)(e,"el-loading-parent--relative"),t.fullscreen&&t.lock&&Object(u.addClass)(e,"el-loading-parent--hidden"),e.appendChild(n.$el),o.a.nextTick((function(){n.visible=!0})),t.fullscreen&&(x=n),n}};e.default={install:function(t){t.use(v),t.prototype.$loading=k},directive:v,service:k}},7:function(t,e){t.exports=o.a},9:function(t,e){t.exports=va}})})));const Ca=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{attrs:{disabled:t.editorStateOptions.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"}},[n("div",{staticClass:"el-tiptap-popper__menu"},[n("div",{staticClass:"el-tiptap-popper__menu__item",on:{click:t.openUrlPrompt}},[n("span",[t._v(t._s(t.t("editor.extensions.Image.buttons.insert_image.external")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",on:{click:function(e){t.imageUploadDialogVisible=!0}}},[n("span",[t._v(t._s(t.t("editor.extensions.Image.buttons.insert_image.upload")))])])]),t._v(" "),n("command-button",{attrs:{slot:"reference",tooltip:t.t("editor.extensions.Image.buttons.insert_image.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"image"},slot:"reference"})],1),t._v(" "),n("el-dialog",{attrs:{title:t.t("editor.extensions.Image.control.upload_image.title"),visible:t.imageUploadDialogVisible,"append-to-body":!0},on:{"update:visible":function(e){t.imageUploadDialogVisible=e}}},[n("el-upload",{staticClass:"el-tiptap-upload",attrs:{"http-request":t.uploadImage,"show-file-list":!1,action:"#",drag:"",accept:"image/*"}},[n("div",{staticClass:"el-tiptap-upload__icon"},[n("i",{staticClass:"fa fa-upload"})]),t._v(" "),n("div",{staticClass:"el-tiptap-upload__text"},[t._v("\n        "+t._s(t.t("editor.extensions.Image.control.upload_image.button"))+"\n      ")])])],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.imageUploadDialogVisible=!1,e.uploading=!1,e}return ir(e,t),Object.defineProperty(e.prototype,"imageNodeOptions",{get:function(){return this.editorContext.editor.extensions.options.image},enumerable:!1,configurable:!0}),e.prototype.openUrlPrompt=function(){var t=this;f.a.prompt("",this.t("editor.extensions.Image.control.insert_by_url.title"),{confirmButtonText:this.t("editor.extensions.Image.control.insert_by_url.confirm"),cancelButtonText:this.t("editor.extensions.Image.control.insert_by_url.cancel"),inputPlaceholder:this.t("editor.extensions.Image.control.insert_by_url.placeholder"),inputPattern:this.imageNodeOptions.urlPattern,inputErrorMessage:this.t("editor.extensions.Image.control.insert_by_url.invalid_url"),roundButton:!0}).then((function(e){var n=e.value;t.editorContext.commands.image({src:n})})).catch((function(){}))},e.prototype.uploadImage=function(t){return cr(this,void 0,void 0,(function(){var e,n,r,o,i;return lr(this,(function(s){switch(s.label){case 0:e=t.file,n=this.imageNodeOptions.uploadRequest,r=ka.service({target:".el-tiptap-upload"}),s.label=1;case 1:return s.trys.push([1,3,4,5]),[4,n?n(e):rs(e)];case 2:return o=s.sent(),this.editorContext.commands.image({src:o}),this.imageUploadDialogVisible=!1,[3,5];case 3:return i=s.sent(),_n.error(i),[3,5];case 4:return this.$nextTick((function(){r.close()})),[7];case 5:return[2]}}))}))},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(Sa={},Sa[C.a.name]=C.a,Sa[S.a.name]=S.a,Sa[w.a.name]=w.a,Sa.CommandButton=As,Sa)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var Oa,_a=[],Ma="ResizeObserver loop completed with undelivered notifications.";!function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"}(Oa||(Oa={}));var Ea,Ta,Na=function(){function t(t,e,n,r){return this.x=t,this.y=e,this.width=n,this.height=r,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Aa=function(t){return t instanceof SVGElement&&"getBBox"in t},Da=function(t){if(Aa(t)){var e=t.getBBox(),n=e.width,r=e.height;return!n&&!r}var o=t,i=o.offsetWidth,s=o.offsetHeight;return!(i||s||t.getClientRects().length)},Pa=function(t){var e,n,r=null===(n=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===n?void 0:n.defaultView;return!!(r&&t instanceof r.Element)},za="undefined"!=typeof window?window:{},Ra=new WeakMap,Ia=/auto|scroll/,ja=/^tb|vertical/,Fa=/msie|trident/i.test(za.navigator&&za.navigator.userAgent),Ba=function(t){return parseFloat(t||"0")},$a=function(t,e,n){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=!1),Object.freeze({inlineSize:(n?e:t)||0,blockSize:(n?t:e)||0})},La=Object.freeze({devicePixelContentBoxSize:$a(),borderBoxSize:$a(),contentBoxSize:$a(),contentRect:new Na(0,0,0,0)}),Va=function(t,e){if(void 0===e&&(e=!1),Ra.has(t)&&!e)return Ra.get(t);if(Da(t))return Ra.set(t,La),La;var n=getComputedStyle(t),r=Aa(t)&&t.ownerSVGElement&&t.getBBox(),o=!Fa&&"border-box"===n.boxSizing,i=ja.test(n.writingMode||""),s=!r&&Ia.test(n.overflowY||""),a=!r&&Ia.test(n.overflowX||""),c=r?0:Ba(n.paddingTop),l=r?0:Ba(n.paddingRight),u=r?0:Ba(n.paddingBottom),p=r?0:Ba(n.paddingLeft),f=r?0:Ba(n.borderTopWidth),h=r?0:Ba(n.borderRightWidth),d=r?0:Ba(n.borderBottomWidth),m=p+l,v=c+u,g=(r?0:Ba(n.borderLeftWidth))+h,y=f+d,b=a?t.offsetHeight-y-t.clientHeight:0,w=s?t.offsetWidth-g-t.clientWidth:0,x=o?m+g:0,S=o?v+y:0,k=r?r.width:Ba(n.width)-x-w,C=r?r.height:Ba(n.height)-S-b,O=k+m+w+g,_=C+v+b+y,M=Object.freeze({devicePixelContentBoxSize:$a(Math.round(k*devicePixelRatio),Math.round(C*devicePixelRatio),i),borderBoxSize:$a(O,_,i),contentBoxSize:$a(k,C,i),contentRect:new Na(p,c,k,C)});return Ra.set(t,M),M},qa=function(t,e,n){var r=Va(t,n),o=r.borderBoxSize,i=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(e){case Oa.DEVICE_PIXEL_CONTENT_BOX:return s;case Oa.BORDER_BOX:return o;default:return i}},Wa=function(t){var e=Va(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},Ja=function(t){if(Da(t))return 1/0;for(var e=0,n=t.parentNode;n;)e+=1,n=n.parentNode;return e},Ha=function(){var t=1/0,e=[];_a.forEach((function(n){if(0!==n.activeTargets.length){var r=[];n.activeTargets.forEach((function(e){var n=new Wa(e.target),o=Ja(e.target);r.push(n),e.lastReportedSize=qa(e.target,e.observedBox),o<t&&(t=o)})),e.push((function(){n.callback.call(n.observer,r,n.observer)})),n.activeTargets.splice(0,n.activeTargets.length)}}));for(var n=0,r=e;n<r.length;n++)(0,r[n])();return t},Ua=function(t){_a.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(n){n.isActive()&&(Ja(n.target)>t?e.activeTargets.push(n):e.skippedTargets.push(n))}))}))},Ka=function(){var t,e=0;for(Ua(e);_a.some((function(t){return t.activeTargets.length>0}));)e=Ha(),Ua(e);return _a.some((function(t){return t.skippedTargets.length>0}))&&("function"==typeof ErrorEvent?t=new ErrorEvent("error",{message:Ma}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Ma),window.dispatchEvent(t)),e>0},Ga=[],Xa=function(t){if(!Ea){var e=0,n=document.createTextNode("");new MutationObserver((function(){return Ga.splice(0).forEach((function(t){return t()}))})).observe(n,{characterData:!0}),Ea=function(){n.textContent=""+(e?e--:e++)}}Ga.push(t),Ea()},Za=0,Ya={attributes:!0,characterData:!0,childList:!0,subtree:!0},Qa=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],tc=function(t){return void 0===t&&(t=0),Date.now()+t},ec=!1,nc=new(function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!ec){ec=!0;var n,r=tc(t);n=function(){var n=!1;try{n=Ka()}finally{if(ec=!1,t=r-tc(),!Za)return;n?e.run(1e3):t>0?e.run(t):e.start()}},Xa((function(){requestAnimationFrame(n)}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,Ya)};document.body?e():za.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Qa.forEach((function(e){return za.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Qa.forEach((function(e){return za.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}()),rc=function(t){!Za&&t>0&&nc.start(),!(Za+=t)&&nc.stop()},oc=function(){function t(t,e){this.target=t,this.observedBox=e||Oa.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t,e=qa(this.target,this.observedBox,!0);return t=this.target,Aa(t)||function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)||"inline"!==getComputedStyle(t).display||(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}(),ic=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},sc=new WeakMap,ac=function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].target===e)return n;return-1},cc=function(){function t(){}return t.connect=function(t,e){var n=new ic(t,e);sc.set(t,n)},t.observe=function(t,e,n){var r=sc.get(t),o=0===r.observationTargets.length;ac(r.observationTargets,e)<0&&(o&&_a.push(r),r.observationTargets.push(new oc(e,n&&n.box)),rc(1),nc.schedule())},t.unobserve=function(t,e){var n=sc.get(t),r=ac(n.observationTargets,e),o=1===n.observationTargets.length;r>=0&&(o&&_a.splice(_a.indexOf(n),1),n.observationTargets.splice(r,1),rc(-1))},t.disconnect=function(t){var e=this,n=sc.get(t);n.observationTargets.slice().forEach((function(n){return e.unobserve(t,n.target)})),n.activeTargets.splice(0,n.activeTargets.length)},t}(),lc=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!=typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");cc.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Pa(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");cc.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Pa(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");cc.unobserve(this,t)},t.prototype.disconnect=function(){cc.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),uc={};const pc=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"top",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[n("div",{staticClass:"el-tiptap-popper__menu"},t._l(t.displayCollection,(function(e){return n("div",{key:e,staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--active":e===t.currDisplay},on:{mousedown:t.hidePopover,click:function(n){return t.updateAttrs({display:e})}}},[n("span",[t._v(t._s(t.t("editor.extensions.Image.buttons.display."+e)))])])})),0),t._v(" "),n("command-button",{attrs:{slot:"reference",tooltip:t.t("editor.extensions.Image.buttons.display.tooltip"),icon:"regular/image"},slot:"reference"})],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverVisible=!1,e.displayCollection=["inline","block","left","right"],e}return ir(e,t),Object.defineProperty(e.prototype,"currDisplay",{get:function(){return this.node.attrs.display},enumerable:!1,configurable:!0}),e.prototype.hidePopover=function(){this.popoverVisible=!1},ar([Nr({type:O["Node"],required:!0})],e.prototype,"node",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"updateAttrs",void 0),ar([Or({components:(Ta={},Ta[w.a.name]=w.a,Ta.CommandButton=As,Ta)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var fc=D(P((function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=134)}({134:function(t,e,n){n.r(e);var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){for(var t=this.$parent;t&&"ElRow"!==t.$options.componentName;)t=t.$parent;return t?t.gutter:0}},render:function(t){var e=this,n=[],o={};return this.gutter&&(o.paddingLeft=this.gutter/2+"px",o.paddingRight=o.paddingLeft),["span","offset","pull","push"].forEach((function(t){(e[t]||0===e[t])&&n.push("span"!==t?"el-col-"+t+"-"+e[t]:"el-col-"+e[t])})),["xs","sm","md","lg","xl"].forEach((function(t){if("number"==typeof e[t])n.push("el-col-"+t+"-"+e[t]);else if("object"===r(e[t])){var o=e[t];Object.keys(o).forEach((function(e){n.push("span"!==e?"el-col-"+t+"-"+e+"-"+o[e]:"el-col-"+t+"-"+o[e])}))}})),t(this.tag,{class:["el-col",n],style:o},this.$slots.default)},install:function(t){t.component(o.name,o)}};e.default=o}})}))),hc=P((function(t,e){e.__esModule=!0,e.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},e.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},e.isHtmlElement=function(t){return t&&t.nodeType===Node.ELEMENT_NODE},e.isFunction=function(t){return t&&"[object Function]"==={}.toString.call(t)},e.isUndefined=function(t){return void 0===t},e.isDefined=function(t){return null!=t}}));D(hc),hc.isString,hc.isObject,hc.isHtmlElement,hc.isFunction,hc.isUndefined,hc.isDefined;var dc=P((function(t,e){e.__esModule=!0,e.isEmpty=e.isEqual=e.arrayEquals=e.looseEqual=e.capitalize=e.kebabCase=e.autoprefixer=e.isFirefox=e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0;var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.noop=function(){},e.hasOwn=function(t,e){return s.call(t,e)},e.toObject=function(t){for(var e={},n=0;n<t.length;n++)t[n]&&a(e,t[n]);return e},e.getPropByPath=function(t,e,n){for(var r=t,o=(e=(e=e.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),i=0,s=o.length;i<s-1&&(r||n);++i){var a=o[i];if(!(a in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[a]}return{o:r,k:o[i],v:r?r[o[i]]:null}},e.rafThrottle=function(t){var e=!1;return function(){for(var n=this,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];e||(e=!0,window.requestAnimationFrame((function(r){t.apply(n,o),e=!1})))}},e.objToArray=function(t){return Array.isArray(t)?t:p(t)?[]:[t]};var r,i=(r=o.a)&&r.__esModule?r:{default:r},s=Object.prototype.hasOwnProperty;function a(t,e){for(var n in e)t[n]=e[n];return t}e.getValueByPath=function(t,e){for(var n=(e=e||"").split("."),r=t,o=null,i=0,s=n.length;i<s;i++){var a=n[i];if(!r)break;if(i===s-1){o=r[a];break}r=r[a]}return o},e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var n=0;n!==t.length;++n)if(t[n]!==e[n])return!1;return!0},e.escapeRegexpString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var c=e.arrayFindIndex=function(t,e){for(var n=0;n!==t.length;++n)if(e(t[n]))return n;return-1},l=(e.arrayFind=function(t,e){var n=c(t,e);return-1!==n?t[n]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!i.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!i.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},e.isFirefox=function(){return!i.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},e.autoprefixer=function(t){if("object"!==(void 0===t?"undefined":n(t)))return t;var e=["ms-","webkit-"];return["transform","transition","animation"].forEach((function(n){var r=t[n];n&&r&&e.forEach((function(e){t[e+n]=r}))})),t},e.kebabCase=function(t){var e=/([^-])([A-Z])/g;return t.replace(e,"$1-$2").replace(e,"$1-$2").toLowerCase()},e.capitalize=function(t){return(0,hc.isString)(t)?t.charAt(0).toUpperCase()+t.slice(1):t},e.looseEqual=function(t,e){var n=(0,hc.isObject)(t),r=(0,hc.isObject)(e);return n&&r?JSON.stringify(t)===JSON.stringify(e):!n&&!r&&String(t)===String(e)}),u=e.arrayEquals=function(t,e){if(e=e||[],(t=t||[]).length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!l(t[n],e[n]))return!1;return!0},p=(e.isEqual=function(t,e){return Array.isArray(t)&&Array.isArray(e)?u(t,e):l(t,e)},e.isEmpty=function(t){if(null==t)return!0;if("boolean"==typeof t)return!1;if("number"==typeof t)return!t;if(t instanceof Error)return""===t.message;switch(Object.prototype.toString.call(t)){case"[object String]":case"[object Array]":return!t.length;case"[object File]":case"[object Map]":case"[object Set]":return!t.size;case"[object Object]":return!Object.keys(t).length}return!1})}));D(dc),dc.isEmpty,dc.isEqual,dc.arrayEquals,dc.looseEqual,dc.capitalize,dc.kebabCase,dc.autoprefixer,dc.isFirefox,dc.isEdge,dc.isIE,dc.coerceTruthyValueToArray,dc.arrayFind,dc.arrayFindIndex,dc.escapeRegexpString,dc.valueEquals,dc.generateId,dc.getValueByPath,dc.noop,dc.hasOwn,dc.toObject,dc.getPropByPath,dc.rafThrottle,dc.objToArray;var mc=P((function(t,e){e.__esModule=!0,e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}}));D(mc);var vc=P((function(t,e){e.__esModule=!0,e.isDef=function(t){return null!=t},e.isKorean=function(t){return/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t)}}));D(vc),vc.isDef,vc.isKorean;var gc=P((function(t,e){function n(t,e,r){this.$children.forEach((function(o){o.$options.componentName===t?o.$emit.apply(o,[e].concat(r)):n.apply(o,[t,e].concat([r]))}))}e.__esModule=!0,e.default={methods:{dispatch:function(t,e,n){for(var r=this.$parent||this.$root,o=r.$options.componentName;r&&(!o||o!==t);)(r=r.$parent)&&(o=r.$options.componentName);r&&r.$emit.apply(r,[e].concat(n))},broadcast:function(t,e,r){n.call(this,t,e,r)}}}}));D(gc);var yc=D(P((function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=76)}({0:function(t,e,n){function r(t,e,n,r,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=mc},21:function(t,e){t.exports=vc},4:function(t,e){t.exports=gc},76:function(t,e,n){n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.inputSize?"el-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"is-exceed":t.inputExceed,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend,"el-input--prefix":t.$slots.prefix||t.prefixIcon,"el-input--suffix":t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),"textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:t.tabindex,type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$attrs,!1)):t._e(),t.$slots.prefix||t.prefixIcon?n("span",{staticClass:"el-input__prefix"},[t._t("prefix"),t.prefixIcon?n("i",{staticClass:"el-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[t.showClear&&t.showPwdVisible&&t.isWordLimitVisible?t._e():[t._t("suffix"),t.suffixIcon?n("i",{staticClass:"el-input__icon",class:t.suffixIcon}):t._e()],t.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(t){t.preventDefault()},click:t.clear}}):t._e(),t.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:t.handlePasswordVisible}}):t._e(),t.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[t._v("\n            "+t._s(t.textLength)+"/"+t._s(t.upperLimit)+"\n          ")])]):t._e()],2),t.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t.$slots.append?n("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:n("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"textarea",t.$attrs,!1)),t.isWordLimitVisible&&"textarea"===t.type?n("span",{staticClass:"el-input__count"},[t._v(t._s(t.textLength)+"/"+t._s(t.upperLimit))]):t._e()],2)};r._withStripped=!0;var o=n(4),i=n.n(o),s=n(11),a=n.n(s),c=void 0,l="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",u=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function p(t){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),o=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width"));return{contextStyle:u.map((function(t){return t+":"+e.getPropertyValue(t)})).join(";"),paddingSize:r,borderSize:o,boxSizing:n}}function f(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c||(c=document.createElement("textarea"),document.body.appendChild(c));var r=p(t),o=r.paddingSize,i=r.borderSize,s=r.boxSizing,a=r.contextStyle;c.setAttribute("style",a+";"+l),c.value=t.value||t.placeholder||"";var u=c.scrollHeight,f={};"border-box"===s?u+=i:"content-box"===s&&(u-=o),c.value="";var h=c.scrollHeight-o;if(null!==e){var d=h*e;"border-box"===s&&(d=d+o+i),u=Math.max(d,u),f.minHeight=d+"px"}if(null!==n){var m=h*n;"border-box"===s&&(m=m+o+i),u=Math.min(m,u)}return f.height=u+"px",c.parentNode&&c.parentNode.removeChild(c),c=null,f}var h=n(9),d=n.n(h),m=n(21),v={name:"ElInput",componentName:"ElInput",mixins:[i.a,a.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return d()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"==typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var t=this;this.$nextTick((function(){t.setNativeInputValue(),t.resizeTextarea(),t.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize;if("textarea"===this.type)if(t){var e=t.minRows,n=t.maxRows;this.textareaCalcStyle=f(this.$refs.textarea,e,n)}else this.textareaCalcStyle={minHeight:f(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var t=this.getInput();t&&t.value!==this.nativeInputValue&&(t.value=this.nativeInputValue)},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(t){var e=t.target.value,n=e[e.length-1]||"";this.isComposing=!Object(m.isKorean)(n)},handleCompositionEnd:function(t){this.isComposing&&(this.isComposing=!1,this.handleInput(t))},handleInput:function(t){this.isComposing||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var n=null,r=0;r<e.length;r++)if(e[r].parentNode===this.$el){n=e[r];break}if(n){var o={suffix:"append",prefix:"prepend"}[t];this.$slots[o]?n.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},g=n(0),y=Object(g.a)(v,r,[],!1,null,null,null);y.options.__file="packages/input/src/input.vue";var b=y.exports;b.install=function(t){t.component(b.name,b)},e.default=b},9:function(t,e){t.exports=va}})}))),bc=P((function(t){var e=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=e)})),wc=P((function(t){var e=t.exports={version:"2.6.11"};"number"==typeof __e&&(__e=e)})),xc=(wc.version,function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!")}(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}),Sc=function(t){return"object"==typeof t?null!==t:"function"==typeof t},kc=function(t){if(!Sc(t))throw TypeError(t+" is not an object!");return t},Cc=function(t){try{return!!t()}catch(t){return!0}},Oc=!Cc((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),_c=bc.document,Mc=Sc(_c)&&Sc(_c.createElement),Ec=function(t){return Mc?_c.createElement(t):{}},Tc=!Oc&&!Cc((function(){return 7!=Object.defineProperty(Ec("div"),"a",{get:function(){return 7}}).a})),Nc=function(t,e){if(!Sc(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!Sc(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!Sc(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!Sc(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},Ac=Object.defineProperty,Dc={f:Oc?Object.defineProperty:function(t,e,n){if(kc(t),e=Nc(e,!0),kc(n),Tc)try{return Ac(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},Pc=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},zc=Oc?function(t,e,n){return Dc.f(t,e,Pc(1,n))}:function(t,e,n){return t[e]=n,t},Rc={}.hasOwnProperty,Ic=function(t,e){return Rc.call(t,e)},jc=function(t,e,n){var r,o,i,s=t&jc.F,a=t&jc.G,c=t&jc.S,l=t&jc.P,u=t&jc.B,p=t&jc.W,f=a?wc:wc[e]||(wc[e]={}),h=f.prototype,d=a?bc:c?bc[e]:(bc[e]||{}).prototype;for(r in a&&(n=e),n)(o=!s&&d&&void 0!==d[r])&&Ic(f,r)||(i=o?d[r]:n[r],f[r]=a&&"function"!=typeof d[r]?n[r]:u&&o?xc(i,bc):p&&d[r]==i?function(t){var e=function(e,n,r){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,r)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(i):l&&"function"==typeof i?xc(Function.call,i):i,l&&((f.virtual||(f.virtual={}))[r]=i,t&jc.R&&h&&!h[r]&&zc(h,r,i)))};jc.F=1,jc.G=2,jc.S=4,jc.P=8,jc.B=16,jc.W=32,jc.U=64,jc.R=128;var Fc,Bc=jc,$c={}.toString,Lc=function(t){return $c.call(t).slice(8,-1)},Vc=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==Lc(t)?t.split(""):Object(t)},qc=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t},Wc=function(t){return Vc(qc(t))},Jc=Math.ceil,Hc=Math.floor,Uc=function(t){return isNaN(t=+t)?0:(t>0?Hc:Jc)(t)},Kc=Math.min,Gc=Math.max,Xc=Math.min,Zc=P((function(t){var e=bc["__core-js_shared__"]||(bc["__core-js_shared__"]={});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:wc.version,mode:"pure",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})),Yc=0,Qc=Math.random(),tl=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++Yc+Qc).toString(36))},el=Zc("keys"),nl=function(t){return el[t]||(el[t]=tl(t))},rl=(Fc=!1,function(t,e,n){var r,o,i=Wc(t),s=(r=i.length)>0?Kc(Uc(r),9007199254740991):0,a=function(t,e){return(t=Uc(t))<0?Gc(t+e,0):Xc(t,e)}(n,s);if(Fc&&e!=e){for(;s>a;)if((o=i[a++])!=o)return!0}else for(;s>a;a++)if((Fc||a in i)&&i[a]===e)return Fc||a||0;return!Fc&&-1}),ol=nl("IE_PROTO"),il=function(t,e){var n,r=Wc(t),o=0,i=[];for(n in r)n!=ol&&Ic(r,n)&&i.push(n);for(;e.length>o;)Ic(r,n=e[o++])&&(~rl(i,n)||i.push(n));return i},sl="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),al=Object.keys||function(t){return il(t,sl)},cl={f:Object.getOwnPropertySymbols},ll={f:{}.propertyIsEnumerable},ul=function(t){return Object(qc(t))},pl=Object.assign,fl=!pl||Cc((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=pl({},t)[n]||Object.keys(pl({},e)).join("")!=r}))?function(t,e){for(var n=ul(t),r=arguments.length,o=1,i=cl.f,s=ll.f;r>o;)for(var a,c=Vc(arguments[o++]),l=i?al(c).concat(i(c)):al(c),u=l.length,p=0;u>p;)a=l[p++],Oc&&!s.call(c,a)||(n[a]=c[a]);return n}:pl;Bc(Bc.S+Bc.F,"Object",{assign:fl});var hl=wc.Object.assign,dl=P((function(t){t.exports={default:hl,__esModule:!0}}));D(dl);var ml=D(P((function(t,e){e.__esModule=!0;var n,r=(n=dl)&&n.__esModule?n:{default:n};e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}}))),vl=zc,gl=Oc?Object.defineProperties:function(t,e){kc(t);for(var n,r=al(e),o=r.length,i=0;o>i;)Dc.f(t,n=r[i++],e[n]);return t},yl=bc.document,bl=yl&&yl.documentElement,wl=nl("IE_PROTO"),xl=function(){},Sl=function(){var t,e=Ec("iframe"),n=sl.length;for(e.style.display="none",bl.appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),Sl=t.F;n--;)delete Sl.prototype[sl[n]];return Sl()},kl=Object.create||function(t,e){var n;return null!==t?(xl.prototype=kc(t),n=new xl,xl.prototype=null,n[wl]=t):n=Sl(),void 0===e?n:gl(n,e)},Cl=P((function(t){var e=Zc("wks"),n=bc.Symbol,r="function"==typeof n;(t.exports=function(t){return e[t]||(e[t]=r&&n[t]||(r?n:tl)("Symbol."+t))}).store=e})),Ol=Dc.f,_l=Cl("toStringTag"),Ml=function(t,e,n){t&&!Ic(t=n?t:t.prototype,_l)&&Ol(t,_l,{configurable:!0,value:e})},El={};zc(El,Cl("iterator"),(function(){return this}));var Tl=function(t,e,n){t.prototype=kl(El,{next:Pc(1,n)}),Ml(t,e+" Iterator")},Nl=nl("IE_PROTO"),Al=Object.prototype,Dl=Object.getPrototypeOf||function(t){return t=ul(t),Ic(t,Nl)?t[Nl]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Al:null},Pl=Cl("iterator"),zl=!([].keys&&"next"in[].keys()),Rl=function(t,e,n,r,o,i,s){Tl(n,e,r);var a,c,l,u=function(t){if(!zl&&t in d)return d[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},p=e+" Iterator",f="values"==o,h=!1,d=t.prototype,m=d[Pl]||d["@@iterator"]||o&&d[o],v=m||u(o),g=o?f?u("entries"):v:void 0,y="Array"==e&&d.entries||m;if(y&&(l=Dl(y.call(new t)))!==Object.prototype&&l.next&&Ml(l,p,!0),f&&m&&"values"!==m.name&&(h=!0,v=function(){return m.call(this)}),s&&(zl||h||!d[Pl])&&zc(d,Pl,v),o)if(a={values:f?v:u("values"),keys:i?v:u("keys"),entries:g},s)for(c in a)c in d||vl(d,c,a[c]);else Bc(Bc.P+Bc.F*(zl||h),e,a);return a},Il=function(t){return function(e,n){var r,o,i=String(qc(e)),s=Uc(n),a=i.length;return s<0||s>=a?t?"":void 0:(r=i.charCodeAt(s))<55296||r>56319||s+1===a||(o=i.charCodeAt(s+1))<56320||o>57343?t?i.charAt(s):r:t?i.slice(s,s+2):o-56320+(r-55296<<10)+65536}}(!0);Rl(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=Il(e,n),this._i+=t.length,{value:t,done:!1})}));for(var jl=function(t,e){return{value:e,done:!!t}},Fl=(Rl(Array,"Array",(function(t,e){this._t=Wc(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,jl(1)):jl(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),Cl("toStringTag")),Bl="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),$l=0;$l<Bl.length;$l++){var Ll=Bl[$l],Vl=bc[Ll],ql=Vl&&Vl.prototype;ql&&!ql[Fl]&&zc(ql,Fl,Ll)}var Wl={f:Cl},Jl=Wl.f("iterator"),Hl=P((function(t){t.exports={default:Jl,__esModule:!0}}));D(Hl);var Ul=P((function(t){var e=tl("meta"),n=Dc.f,r=0,o=Object.isExtensible||function(){return!0},i=!Cc((function(){return o(Object.preventExtensions({}))})),s=function(t){n(t,e,{value:{i:"O"+ ++r,w:{}}})},a=t.exports={KEY:e,NEED:!1,fastKey:function(t,n){if(!Sc(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Ic(t,e)){if(!o(t))return"F";if(!n)return"E";s(t)}return t[e].i},getWeak:function(t,n){if(!Ic(t,e)){if(!o(t))return!0;if(!n)return!1;s(t)}return t[e].w},onFreeze:function(t){return i&&a.NEED&&o(t)&&!Ic(t,e)&&s(t),t}}})),Kl=(Ul.KEY,Ul.NEED,Ul.fastKey,Ul.getWeak,Ul.onFreeze,Dc.f),Gl=function(t){var e=wc.Symbol||(wc.Symbol={});"_"==t.charAt(0)||t in e||Kl(e,t,{value:Wl.f(t)})},Xl=Array.isArray||function(t){return"Array"==Lc(t)},Zl=sl.concat("length","prototype"),Yl={f:Object.getOwnPropertyNames||function(t){return il(t,Zl)}},Ql=Yl.f,tu={}.toString,eu="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],nu={f:function(t){return eu&&"[object Window]"==tu.call(t)?function(t){try{return Ql(t)}catch(t){return eu.slice()}}(t):Ql(Wc(t))}},ru=Object.getOwnPropertyDescriptor,ou={f:Oc?ru:function(t,e){if(t=Wc(t),e=Nc(e,!0),Tc)try{return ru(t,e)}catch(t){}if(Ic(t,e))return Pc(!ll.f.call(t,e),t[e])}},iu=Ul.KEY,su=ou.f,au=Dc.f,cu=nu.f,lu=bc.Symbol,uu=bc.JSON,pu=uu&&uu.stringify,fu=Cl("_hidden"),hu=Cl("toPrimitive"),du={}.propertyIsEnumerable,mu=Zc("symbol-registry"),vu=Zc("symbols"),gu=Zc("op-symbols"),yu=Object.prototype,bu="function"==typeof lu&&!!cl.f,wu=bc.QObject,xu=!wu||!wu.prototype||!wu.prototype.findChild,Su=Oc&&Cc((function(){return 7!=kl(au({},"a",{get:function(){return au(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=su(yu,e);r&&delete yu[e],au(t,e,n),r&&t!==yu&&au(yu,e,r)}:au,ku=function(t){var e=vu[t]=kl(lu.prototype);return e._k=t,e},Cu=bu&&"symbol"==typeof lu.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof lu},Ou=function(t,e,n){return t===yu&&Ou(gu,e,n),kc(t),e=Nc(e,!0),kc(n),Ic(vu,e)?(n.enumerable?(Ic(t,fu)&&t[fu][e]&&(t[fu][e]=!1),n=kl(n,{enumerable:Pc(0,!1)})):(Ic(t,fu)||au(t,fu,Pc(1,{})),t[fu][e]=!0),Su(t,e,n)):au(t,e,n)},_u=function(t,e){kc(t);for(var n,r=function(t){var e=al(t),n=cl.f;if(n)for(var r,o=n(t),i=ll.f,s=0;o.length>s;)i.call(t,r=o[s++])&&e.push(r);return e}(e=Wc(e)),o=0,i=r.length;i>o;)Ou(t,n=r[o++],e[n]);return t},Mu=function(t){var e=du.call(this,t=Nc(t,!0));return!(this===yu&&Ic(vu,t)&&!Ic(gu,t))&&(!(e||!Ic(this,t)||!Ic(vu,t)||Ic(this,fu)&&this[fu][t])||e)},Eu=function(t,e){if(t=Wc(t),e=Nc(e,!0),t!==yu||!Ic(vu,e)||Ic(gu,e)){var n=su(t,e);return!n||!Ic(vu,e)||Ic(t,fu)&&t[fu][e]||(n.enumerable=!0),n}},Tu=function(t){for(var e,n=cu(Wc(t)),r=[],o=0;n.length>o;)Ic(vu,e=n[o++])||e==fu||e==iu||r.push(e);return r},Nu=function(t){for(var e,n=t===yu,r=cu(n?gu:Wc(t)),o=[],i=0;r.length>i;)!Ic(vu,e=r[i++])||n&&!Ic(yu,e)||o.push(vu[e]);return o};bu||(vl((lu=function(){if(this instanceof lu)throw TypeError("Symbol is not a constructor!");var t=tl(arguments.length>0?arguments[0]:void 0),e=function(n){this===yu&&e.call(gu,n),Ic(this,fu)&&Ic(this[fu],t)&&(this[fu][t]=!1),Su(this,t,Pc(1,n))};return Oc&&xu&&Su(yu,t,{configurable:!0,set:e}),ku(t)}).prototype,"toString",(function(){return this._k})),ou.f=Eu,Dc.f=Ou,Yl.f=nu.f=Tu,ll.f=Mu,cl.f=Nu,Wl.f=function(t){return ku(Cl(t))}),Bc(Bc.G+Bc.W+Bc.F*!bu,{Symbol:lu});for(var Au="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),Du=0;Au.length>Du;)Cl(Au[Du++]);for(var Pu=al(Cl.store),zu=0;Pu.length>zu;)Gl(Pu[zu++]);Bc(Bc.S+Bc.F*!bu,"Symbol",{for:function(t){return Ic(mu,t+="")?mu[t]:mu[t]=lu(t)},keyFor:function(t){if(!Cu(t))throw TypeError(t+" is not a symbol!");for(var e in mu)if(mu[e]===t)return e},useSetter:function(){xu=!0},useSimple:function(){xu=!1}}),Bc(Bc.S+Bc.F*!bu,"Object",{create:function(t,e){return void 0===e?kl(t):_u(kl(t),e)},defineProperty:Ou,defineProperties:_u,getOwnPropertyDescriptor:Eu,getOwnPropertyNames:Tu,getOwnPropertySymbols:Nu});var Ru=Cc((function(){cl.f(1)}));Bc(Bc.S+Bc.F*Ru,"Object",{getOwnPropertySymbols:function(t){return cl.f(ul(t))}}),uu&&Bc(Bc.S+Bc.F*(!bu||Cc((function(){var t=lu();return"[null]"!=pu([t])||"{}"!=pu({a:t})||"{}"!=pu(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(n=e=r[1],(Sc(e)||void 0!==t)&&!Cu(t))return Xl(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Cu(e))return e}),r[1]=e,pu.apply(uu,r)}}),lu.prototype[hu]||zc(lu.prototype,hu,lu.prototype.valueOf),Ml(lu,"Symbol"),Ml(Math,"Math",!0),Ml(bc.JSON,"JSON",!0);var Iu=Object.freeze({__proto__:null});Gl("asyncIterator"),Gl("observable"),z(Iu);var ju=wc.Symbol,Fu=P((function(t){t.exports={default:ju,__esModule:!0}}));D(Fu);var Bu=D(P((function(t,e){e.__esModule=!0;var n=i(Hl),r=i(Fu),o="function"==typeof r.default&&"symbol"==typeof n.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function i(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===o(n.default)?function(t){return void 0===t?"undefined":o(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":o(t)}}))),$u=/%[sdj%]/g;function Lu(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=1,o=e[0],i=e.length;if("function"==typeof o)return o.apply(null,e.slice(1));if("string"==typeof o){for(var s=String(o).replace($u,(function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(e[r++]);case"%d":return Number(e[r++]);case"%j":try{return JSON.stringify(e[r++])}catch(t){return"[Circular]"}break;default:return t}})),a=e[r];r<i;a=e[++r])s+=" "+a;return s}return o}function Vu(t,e){return null==t||!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"pattern"===t}(e)||"string"!=typeof t||t)}function qu(t,e,n){var r=0,o=t.length;!function i(s){if(s&&s.length)n(s);else{var a=r;r+=1,a<o?e(t[a],i):n([])}}([])}function Wu(t,e,n,r){if(e.first)return qu(function(t){var e=[];return Object.keys(t).forEach((function(n){e.push.apply(e,t[n])})),e}(t),n,r);var o=e.firstFields||[];!0===o&&(o=Object.keys(t));var i=Object.keys(t),s=i.length,a=0,c=[],l=function(t){c.push.apply(c,t),++a===s&&r(c)};i.forEach((function(e){var r=t[e];-1!==o.indexOf(e)?qu(r,n,l):function(t,e,n){var r=[],o=0,i=t.length;function s(t){r.push.apply(r,t),++o===i&&n(r)}t.forEach((function(t){e(t,s)}))}(r,n,l)}))}function Ju(t){return function(e){return e&&e.message?(e.field=e.field||t.fullField,e):{message:e,field:e.field||t.fullField}}}function Hu(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];"object"===(void 0===r?"undefined":Bu(r))&&"object"===Bu(t[n])?t[n]=ml({},t[n],r):t[n]=r}return t}function Uu(t,e,n,r,o,i){!t.required||n.hasOwnProperty(t.field)&&!Vu(e,i||t.type)||r.push(Lu(o.messages.required,t.fullField))}var Ku={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},Gu={integer:function(t){return Gu.number(t)&&parseInt(t,10)===t},float:function(t){return Gu.number(t)&&!Gu.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"===(void 0===t?"undefined":Bu(t))&&!Gu.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&!!t.match(Ku.email)&&t.length<255},url:function(t){return"string"==typeof t&&!!t.match(Ku.url)},hex:function(t){return"string"==typeof t&&!!t.match(Ku.hex)}},Xu={required:Uu,whitespace:function(t,e,n,r,o){(/^\s+$/.test(e)||""===e)&&r.push(Lu(o.messages.whitespace,t.fullField))},type:function(t,e,n,r,o){if(t.required&&void 0===e)Uu(t,e,n,r,o);else{var i=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(i)>-1?Gu[i](e)||r.push(Lu(o.messages.types[i],t.fullField,t.type)):i&&(void 0===e?"undefined":Bu(e))!==t.type&&r.push(Lu(o.messages.types[i],t.fullField,t.type))}},range:function(t,e,n,r,o){var i="number"==typeof t.len,s="number"==typeof t.min,a="number"==typeof t.max,c=e,l=null,u="number"==typeof e,p="string"==typeof e,f=Array.isArray(e);if(u?l="number":p?l="string":f&&(l="array"),!l)return!1;f&&(c=e.length),p&&(c=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),i?c!==t.len&&r.push(Lu(o.messages[l].len,t.fullField,t.len)):s&&!a&&c<t.min?r.push(Lu(o.messages[l].min,t.fullField,t.min)):a&&!s&&c>t.max?r.push(Lu(o.messages[l].max,t.fullField,t.max)):s&&a&&(c<t.min||c>t.max)&&r.push(Lu(o.messages[l].range,t.fullField,t.min,t.max))},enum:function(t,e,n,r,o){t.enum=Array.isArray(t.enum)?t.enum:[],-1===t.enum.indexOf(e)&&r.push(Lu(o.messages.enum,t.fullField,t.enum.join(", ")))},pattern:function(t,e,n,r,o){t.pattern&&(t.pattern instanceof RegExp?(t.pattern.lastIndex=0,t.pattern.test(e)||r.push(Lu(o.messages.pattern.mismatch,t.fullField,e,t.pattern))):"string"==typeof t.pattern&&(new RegExp(t.pattern).test(e)||r.push(Lu(o.messages.pattern.mismatch,t.fullField,e,t.pattern))))}};function Zu(t,e,n,r,o){var i=t.type,s=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e,i)&&!t.required)return n();Xu.required(t,e,r,s,o,i),Vu(e,i)||Xu.type(t,e,r,s,o)}n(s)}var Yu={string:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e,"string")&&!t.required)return n();Xu.required(t,e,r,i,o,"string"),Vu(e,"string")||(Xu.type(t,e,r,i,o),Xu.range(t,e,r,i,o),Xu.pattern(t,e,r,i,o),!0===t.whitespace&&Xu.whitespace(t,e,r,i,o))}n(i)},method:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&Xu.type(t,e,r,i,o)}n(i)},number:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&(Xu.type(t,e,r,i,o),Xu.range(t,e,r,i,o))}n(i)},boolean:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&Xu.type(t,e,r,i,o)}n(i)},regexp:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),Vu(e)||Xu.type(t,e,r,i,o)}n(i)},integer:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&(Xu.type(t,e,r,i,o),Xu.range(t,e,r,i,o))}n(i)},float:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&(Xu.type(t,e,r,i,o),Xu.range(t,e,r,i,o))}n(i)},array:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e,"array")&&!t.required)return n();Xu.required(t,e,r,i,o,"array"),Vu(e,"array")||(Xu.type(t,e,r,i,o),Xu.range(t,e,r,i,o))}n(i)},object:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),void 0!==e&&Xu.type(t,e,r,i,o)}n(i)},enum:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();Xu.required(t,e,r,i,o),e&&Xu.enum(t,e,r,i,o)}n(i)},pattern:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e,"string")&&!t.required)return n();Xu.required(t,e,r,i,o),Vu(e,"string")||Xu.pattern(t,e,r,i,o)}n(i)},date:function(t,e,n,r,o){var i=[];if(t.required||!t.required&&r.hasOwnProperty(t.field)){if(Vu(e)&&!t.required)return n();if(Xu.required(t,e,r,i,o),!Vu(e)){var s=void 0;s="number"==typeof e?new Date(e):e,Xu.type(t,s,r,i,o),s&&Xu.range(t,s.getTime(),r,i,o)}}n(i)},url:Zu,hex:Zu,email:Zu,required:function(t,e,n,r,o){var i=[],s=Array.isArray(e)?"array":void 0===e?"undefined":Bu(e);Xu.required(t,e,r,i,o,s),n(i)}};function Qu(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var tp=Qu();function ep(t){this.rules=null,this._messages=tp,this.define(t)}ep.prototype={messages:function(t){return t&&(this._messages=Hu(Qu(),t)),this._messages},define:function(t){if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===t?"undefined":Bu(t))||Array.isArray(t))throw new Error("Rules must be an object");this.rules={};var e=void 0,n=void 0;for(e in t)t.hasOwnProperty(e)&&(n=t[e],this.rules[e]=Array.isArray(n)?n:[n])},validate:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments[2],o=t,i=n,s=r;if("function"==typeof i&&(s=i,i={}),this.rules&&0!==Object.keys(this.rules).length){if(i.messages){var a=this.messages();a===tp&&(a=Qu()),Hu(a,i.messages),i.messages=a}else i.messages=this.messages();var c=void 0,l=void 0,u={},p=i.keys||Object.keys(this.rules);p.forEach((function(n){c=e.rules[n],l=o[n],c.forEach((function(r){var i=r;"function"==typeof i.transform&&(o===t&&(o=ml({},o)),l=o[n]=i.transform(l)),(i="function"==typeof i?{validator:i}:ml({},i)).validator=e.getValidationMethod(i),i.field=n,i.fullField=i.fullField||n,i.type=e.getType(i),i.validator&&(u[n]=u[n]||[],u[n].push({rule:i,value:l,source:o,field:n}))}))}));var f={};Wu(u,i,(function(t,e){var n=t.rule,r=!("object"!==n.type&&"array"!==n.type||"object"!==Bu(n.fields)&&"object"!==Bu(n.defaultField));function o(t,e){return ml({},e,{fullField:n.fullField+"."+t})}function s(){var s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=s;if(Array.isArray(a)||(a=[a]),a.length,a.length&&n.message&&(a=[].concat(n.message)),a=a.map(Ju(n)),i.first&&a.length)return f[n.field]=1,e(a);if(r){if(n.required&&!t.value)return a=n.message?[].concat(n.message).map(Ju(n)):i.error?[i.error(n,Lu(i.messages.required,n.field))]:[],e(a);var c={};if(n.defaultField)for(var l in t.value)t.value.hasOwnProperty(l)&&(c[l]=n.defaultField);for(var u in c=ml({},c,t.rule.fields))if(c.hasOwnProperty(u)){var p=Array.isArray(c[u])?c[u]:[c[u]];c[u]=p.map(o.bind(null,u))}var h=new ep(c);h.messages(i.messages),t.rule.options&&(t.rule.options.messages=i.messages,t.rule.options.error=i.error),h.validate(t.value,t.rule.options||i,(function(t){e(t&&t.length?a.concat(t):t)}))}else e(a)}r=r&&(n.required||!n.required&&t.value),n.field=t.field;var a=n.validator(n,t.value,s,t.source,i);a&&a.then&&a.then((function(){return s()}),(function(t){return s(t)}))}),(function(t){h(t)}))}else s&&s();function h(t){var e,n=void 0,r=void 0,o=[],i={};for(n=0;n<t.length;n++)e=t[n],Array.isArray(e)?o=o.concat.apply(o,e):o.push(e);if(o.length)for(n=0;n<o.length;n++)i[r=o[n].field]=i[r]||[],i[r].push(o[n]);else o=null,i=null;s(o,i)}},getType:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!Yu.hasOwnProperty(t.type))throw new Error(Lu("Unknown rule type %s",t.type));return t.type||"string"},getValidationMethod:function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?Yu.required:Yu[this.getType(t)]||!1}},ep.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");Yu[t]=e},ep.messages=tp;var np,rp=z(Object.freeze({__proto__:null,default:ep})),op=D(P((function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=67)}({0:function(t,e,n){function r(t,e,n,r,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},3:function(t,e){t.exports=dc},4:function(t,e){t.exports=gc},48:function(t,e){t.exports=rp},67:function(t,e,n){n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":t.elForm&&t.elForm.statusIcon,"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-success":"success"===t.validateState,"is-required":t.isRequired||t.required,"is-no-asterisk":t.elForm&&t.elForm.hideRequiredAsterisk},t.sizeClass?"el-form-item--"+t.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":t.labelStyle&&"auto"===t.labelStyle.width,"update-all":"auto"===t.form.labelWidth}},[t.label||t.$slots.label?n("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e()]),n("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?t._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"==typeof t.inlineMessage?t.inlineMessage:t.elForm&&t.elForm.inlineMessage||!1}},[t._v("\n          "+t._s(t.validateMessage)+"\n        ")])],{error:t.validateMessage}):t._e()],2)],2)],1)};r._withStripped=!0;var o=n(48),i=n.n(o),s=n(4),a=n.n(s),c=n(9),l=n.n(c),u=n(3),p={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var t=arguments[0],e=this.$slots.default;if(!e)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,r={};if(n&&"auto"!==n){var o=parseInt(n,10)-this.computedWidth;o&&(r.marginLeft=o+"px")}return t("div",{class:"el-form-item__label-wrap",style:r},[e])}return e[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var t=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(t))}return 0},updateLabelWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===t?this.computedWidth=this.getLabelWidth():"remove"===t&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(t,e){this.updateAll&&(this.elForm.registerLabelWidth(t,e),this.elFormItem.updateComputedLabelWidth(t))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},f=n(0),h=Object(f.a)(p,void 0,void 0,!1,null,null,null);h.options.__file="packages/form/src/label-wrap.vue";var d=h.exports,m={name:"ElFormItem",componentName:"ElFormItem",mixins:[a.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:d},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?t.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(t.marginLeft=this.elForm.autoLabelWidth):t.marginLeft=n,t},form:function(){for(var t=this.$parent,e=t.$options.componentName;"ElForm"!==e;)"ElFormItem"===e&&(this.isNested=!0),e=(t=t.$parent).$options.componentName;return t},fieldValue:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),Object(u.getPropByPath)(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every((function(t){return!t.required||(e=!0,!1)})),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.noop;this.validateDisabled=!1;var r=this.getFilteredRule(t);if((!r||0===r.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var o={};r&&r.length>0&&r.forEach((function(t){delete t.trigger})),o[this.prop]=r;var s=new i.a(o),a={};a[this.prop]=this.fieldValue,s.validate(a,{firstFields:!0},(function(t,r){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",n(e.validateMessage,r),e.elForm&&e.elForm.$emit("validate",e.prop,!t,e.validateMessage||null)}))},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var t=this;this.validateState="",this.validateMessage="";var e=this.form.model,n=this.fieldValue,r=this.prop;-1!==r.indexOf(":")&&(r=r.replace(/:/,"."));var o=Object(u.getPropByPath)(e,r,!0);this.validateDisabled=!0,Array.isArray(n)?o.o[o.k]=[].concat(this.initialValue):o.o[o.k]=this.initialValue,this.$nextTick((function(){t.validateDisabled=!1})),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,n=void 0!==this.required?{required:!!this.required}:[],r=Object(u.getPropByPath)(t,this.prop||"");return t=t?r.o[this.prop||""]||r.v:[],[].concat(e||t||[]).concat(n)},getFilteredRule:function(t){return this.getRules().filter((function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)})).map((function(t){return l()({},t)}))},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(t){this.computedLabelWidth=t?t+"px":""},addValidateEvents:function(){(this.getRules().length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},v=Object(f.a)(m,r,[],!1,null,null,null);v.options.__file="packages/form/src/form-item.vue";var g=v.exports;g.install=function(t){t.component(g.name,g)},e.default=g},9:function(t,e){t.exports=va}})}))),ip=D(P((function(t){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=121)}({0:function(t,e,n){function r(t,e,n,r,o,i,s,a){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},121:function(t,e,n){n.r(e);var r=function(){var t=this.$createElement;return(this._self._c||t)("form",{staticClass:"el-form",class:[this.labelPosition?"el-form--label-"+this.labelPosition:"",{"el-form--inline":this.inline}]},[this._t("default")],2)};r._withStripped=!0;var o=n(9),i=n.n(o),s={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach((function(t){t.removeValidateEvents(),t.addValidateEvents()})),this.validateOnRuleChange&&this.validate((function(){}))}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var t=Math.max.apply(Math,this.potentialLabelWidthArr);return t?t+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var t=this;this.$on("el.form.addField",(function(e){e&&t.fields.push(e)})),this.$on("el.form.removeField",(function(e){e.prop&&t.fields.splice(t.fields.indexOf(e),1)}))},methods:{resetFields:function(){this.model?this.fields.forEach((function(t){t.resetField()})):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length?"string"==typeof t?this.fields.filter((function(e){return t===e.prop})):this.fields.filter((function(e){return t.indexOf(e.prop)>-1})):this.fields;e.forEach((function(t){t.clearValidate()}))},validate:function(t){var e=this;if(this.model){var n=void 0;"function"!=typeof t&&window.Promise&&(n=new window.Promise((function(e,n){t=function(t){t?e(t):n(t)}})));var r=!0,o=0;0===this.fields.length&&t&&t(!0);var s={};return this.fields.forEach((function(n){n.validate("",(function(n,a){n&&(r=!1),s=i()({},s,a),"function"==typeof t&&++o===e.fields.length&&t(r,s)}))})),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(t,e){t=[].concat(t);var n=this.fields.filter((function(e){return-1!==t.indexOf(e.prop)}));n.length?n.forEach((function(t){t.validate("",e)})):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(t){var e=this.potentialLabelWidthArr.indexOf(t);if(-1===e)throw new Error("[ElementForm]unpected width ",t);return e},registerLabelWidth:function(t,e){if(t&&e){var n=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(n,1,t)}else t&&this.potentialLabelWidthArr.push(t)},deregisterLabelWidth:function(t){var e=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(e,1)}}},a=n(0),c=Object(a.a)(s,r,[],!1,null,null,null);c.options.__file="packages/form/src/form.vue";var l=c.exports;l.install=function(t){t.component(l.name,l)},e.default=l},9:function(t,e){t.exports=va}})})));const sp=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("command-button",{attrs:{command:t.openEditImageDialog,tooltip:t.t("editor.extensions.Image.buttons.image_options.tooltip"),icon:"ellipsis-h"}}),t._v(" "),n("el-dialog",{attrs:{title:t.t("editor.extensions.Image.control.edit_image.title"),visible:t.editImageDialogVisible,"append-to-body":!0,width:"400px","custom-class":"el-tiptap-edit-image-dialog"},on:{"update:visible":function(e){t.editImageDialogVisible=e},open:t.syncImageAttrs},scopedSlots:t._u([{key:"footer",fn:function(){return[n("el-button",{attrs:{size:"small",round:""},on:{click:t.closeEditImageDialog}},[t._v("\n        "+t._s(t.t("editor.extensions.Image.control.edit_image.cancel"))+"\n      ")]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small",round:""},on:{click:t.updateImageAttrs}},[t._v("\n        "+t._s(t.t("editor.extensions.Image.control.edit_image.confirm"))+"\n      ")])]},proxy:!0}])},[n("el-form",{attrs:{model:t.imageAttrs,"label-position":"top",size:"small"}},[n("el-form-item",{attrs:{label:t.t("editor.extensions.Image.control.edit_image.form.src")}},[n("el-input",{attrs:{value:t.imageAttrs.src,autocomplete:"off",disabled:""}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.t("editor.extensions.Image.control.edit_image.form.alt")}},[n("el-input",{attrs:{autocomplete:"off"},model:{value:t.imageAttrs.alt,callback:function(e){t.$set(t.imageAttrs,"alt",e)},expression:"imageAttrs.alt"}})],1),t._v(" "),n("el-form-item",[n("el-col",{attrs:{span:11}},[n("el-form-item",{attrs:{label:t.t("editor.extensions.Image.control.edit_image.form.width")}},[n("el-input",{attrs:{type:"number"},model:{value:t.imageAttrs.width,callback:function(e){t.$set(t.imageAttrs,"width",e)},expression:"imageAttrs.width"}})],1)],1),t._v(" "),n("el-col",{attrs:{span:11,push:2}},[n("el-form-item",{attrs:{label:t.t("editor.extensions.Image.control.edit_image.form.height")}},[n("el-input",{attrs:{type:"number"},model:{value:t.imageAttrs.height,callback:function(e){t.$set(t.imageAttrs,"height",e)},expression:"imageAttrs.height"}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.editImageDialogVisible=!1,e.imageAttrs=e.getImageAttrs(),e}return ir(e,t),e.prototype.syncImageAttrs=function(){this.imageAttrs=this.getImageAttrs()},e.prototype.getImageAttrs=function(){return{src:this.node.attrs.src,alt:this.node.attrs.alt,width:this.node.attrs.width,height:this.node.attrs.height}},e.prototype.updateImageAttrs=function(){var t=this.imageAttrs,e=t.width,n=t.height;e=parseInt(e,10),n=parseInt(n,10),this.updateAttrs({alt:this.imageAttrs.alt,width:e>=0?e:null,height:n>=0?n:null}),this.closeEditImageDialog()},e.prototype.openEditImageDialog=function(){this.editImageDialogVisible=!0},e.prototype.closeEditImageDialog=function(){this.editImageDialogVisible=!1},ar([Nr({type:O["Node"],required:!0})],e.prototype,"node",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"updateAttrs",void 0),ar([Or({components:(np={},np[C.a.name]=C.a,np[ip.name]=ip,np[op.name]=op,np[yc.name]=yc,np[fc.name]=fc,np.CommandButton=As,np)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var ap=Math.pow(2,16);function cp(t,e){return t+e*ap}function lp(t){return 65535&t}var up=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},pp=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};pp.prototype.recover=function(t){var e=0,n=lp(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+function(t){return(t-(65535&t))/ap}(t)},pp.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},pp.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},pp.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(t<=u){var p=a+r+((c?t==a?-1:t==u?1:e:e)<0?0:l);if(n)return p;var f=t==(e<0?a:u)?null:cp(s/3,t-a);return new up(p,e<0?t!=a:t!=u,f)}r+=l-c}return n?t+r:new up(t+r)},pp.prototype.touches=function(t,e){for(var n=0,r=lp(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o];if(t<=a+c&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},pp.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},pp.prototype.invert=function(){return new pp(this.ranges,!this.inverted)},pp.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},pp.offset=function(t){return 0==t?pp.empty:new pp(t<0?[0,-t,0]:[0,0,t])},pp.empty=new pp([]);var fp=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function hp(t){var e=Error.call(this,t);return e.__proto__=hp.prototype,e}fp.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new fp(this.maps,this.mirror,t,e)},fp.prototype.copy=function(){return new fp(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},fp.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},fp.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},fp.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},fp.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},fp.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},fp.prototype.invert=function(){var t=new fp;return t.appendMappingInverted(this),t},fp.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},fp.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},fp.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o].mapResult(t,e);if(null!=i.recover){var s=this.getMirror(o);if(null!=s&&s>o&&s<this.to){o=s,t=this.maps[s].recover(i.recover);continue}}i.deleted&&(r=!0),t=i.pos}return n?t:new up(t,r)},hp.prototype=Object.create(Error.prototype),hp.prototype.constructor=hp,hp.prototype.name="TransformError";var dp=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new fp},mp={before:{configurable:!0},docChanged:{configurable:!0}};function vp(){throw new Error("Override me")}mp.before.get=function(){return this.docs.length?this.docs[0]:this.doc},dp.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new hp(e.failed);return this},dp.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},mp.docChanged.get=function(){return this.steps.length>0},dp.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(dp.prototype,mp);var gp=Object.create(null),yp=function(){};yp.prototype.apply=function(t){return vp()},yp.prototype.getMap=function(){return pp.empty},yp.prototype.invert=function(t){return vp()},yp.prototype.map=function(t){return vp()},yp.prototype.merge=function(t){return null},yp.prototype.toJSON=function(){return vp()},yp.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=gp[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},yp.jsonID=function(t,e){if(t in gp)throw new RangeError("Duplicate use of step JSON ID "+t);return gp[t]=e,e.prototype.jsonID=t,e};var bp=function(t,e){this.doc=t,this.failed=e};bp.ok=function(t){return new bp(t,null)},bp.fail=function(t){return new bp(null,t)},bp.fromReplace=function(t,e,n,r){try{return bp.ok(t.replace(e,n,r))}catch(t){if(t instanceof O["ReplaceError"])return bp.fail(t.message);throw t}};var wp=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Sp(t,this.from,this.to)?bp.fail("Structure replace would overwrite content"):bp.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new pp([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?O["Slice"].empty:new O["Slice"](t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?O["Slice"].empty:new O["Slice"](this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,O["Slice"].fromJSON(t,n.slice),!!n.structure)},e}(yp);yp.jsonID("replace",wp);var xp=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Sp(t,this.from,this.gapFrom)||Sp(t,this.gapTo,this.to)))return bp.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return bp.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?bp.fromReplace(t,this.from,this.to,n):bp.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new pp([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,O["Slice"].fromJSON(t,n.slice),n.insert,!!n.structure)},e}(yp);function Sp(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}function kp(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Cp(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),n=t.depth;;--n){var r=t.$from.node(n),o=t.$from.index(n),i=t.$to.indexAfter(n);if(n<t.depth&&r.canReplace(o,i,e))return n;if(0==n||r.type.spec.isolating||!kp(r,o,i))break}}function Op(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(u,l.childCount),f=r&&r[c]||l;if(f!=l&&(p=p.replaceChild(0,f.type.create(f.attrs))),!l.canReplace(u+1,l.childCount)||!f.type.validContent(p))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}function _p(t,e){var n,r,o=t.resolve(e),i=o.index();return n=o.nodeBefore,r=o.nodeAfter,n&&r&&!n.isLeaf&&n.canAppend(r)&&o.parent.canReplace(i,i+1)}function Mp(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Mp(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return O["Fragment"].fromArray(r)}yp.jsonID("replaceAround",xp),dp.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,l=O["Fragment"].empty,u=0,p=o,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,l=O["Fragment"].from(n.node(p).copy(l)),u++):a--;for(var h=O["Fragment"].empty,d=0,m=o,v=!1;m>e;m--)v||r.after(m+1)<r.end(m)?(v=!0,h=O["Fragment"].from(r.node(m).copy(h)),d++):c++;return this.step(new xp(a,c,i,s,new O["Slice"](l.append(h),u,d),l.size-u,!0))},dp.prototype.wrap=function(t,e){for(var n=O["Fragment"].empty,r=e.length-1;r>=0;r--)n=O["Fragment"].from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new xp(o,i,o,i,new O["Slice"](n,0,0),e.length,!0))},dp.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&function(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new xp(a,c,a+1,c-1,new O["Slice"](O["Fragment"].from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},dp.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new xp(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new O["Slice"](O["Fragment"].from(i),0,0),1,!0))},dp.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=O["Fragment"].empty,i=O["Fragment"].empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=O["Fragment"].from(r.node(s).copy(o));var l=n&&n[c];i=O["Fragment"].from(l?l.type.create(l.attrs,i):r.node(s).copy(i))}return this.step(new wp(t,t,new O["Slice"](o.append(i),e,e),!0))},dp.prototype.join=function(t,e){void 0===e&&(e=1);var n=new wp(t-e,t+e,O["Slice"].empty,!0);return this.step(n)};var Ep=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new O["Slice"](Mp(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return bp.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Tp(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(yp);yp.jsonID("addMark",Ep);var Tp=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new O["Slice"](Mp(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return bp.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Ep(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(yp);function Np(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}yp.jsonID("removeMark",Tp),dp.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,t),f=Math.min(c+r.nodeSize,e),h=n.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(h)||(s&&s.to==p&&s.mark.eq(u[d])?s.to=f:o.push(s=new Tp(p,f,u[d])));a&&a.to==p?a.to=f:i.push(a=new Ep(p,f,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},dp.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof O["MarkType"]){var c=n.isInSet(r.marks);c&&(a=[c])}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var l=Math.min(s+r.nodeSize,e),u=0;u<a.length;u++){for(var p=a[u],f=void 0,h=0;h<o.length;h++){var d=o[h];d.step==i-1&&p.eq(o[h].style)&&(f=d)}f?(f.to=l,f.step=i):o.push({style:p,from:Math.max(s,t),to:l,step:i})}}})),o.forEach((function(t){return r.step(new Tp(t.from,t.to,t.style))})),this},dp.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new Tp(i,c,a.marks[u]))}else o.push(new wp(i,c,O["Slice"].empty));i=c}if(!n.validEnd){var p=n.fillBefore(O["Fragment"].empty,!0);this.replace(i,i,new O["Slice"](p,0,0))}for(var f=o.length-1;f>=0;f--)this.step(o[f]);return this},dp.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=O["Slice"].empty);var r=function(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=O["Slice"].empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return Np(o,i,r)?new wp(e,n,r):new Ap(o,i,r).fit()}(this.doc,t,e,n);return r&&this.step(r),this},dp.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new O["Slice"](O["Fragment"].from(n),0,0))},dp.prototype.delete=function(t,e){return this.replace(t,e,O["Slice"].empty)},dp.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var Ap=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=O["Fragment"].empty;for(var i=t.depth;i>0;i--)this.placed=O["Fragment"].from(t.node(i).copy(this.placed))},Dp={depth:{configurable:!0}};function Pp(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(Pp(t.firstChild.content,e-1,n)))}function zp(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(zp(t.lastChild.content,e-1,n)))}function Rp(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function Ip(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,Ip(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O["Fragment"].empty,!0)))),t.copy(r)}function jp(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!function(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}(n,i.content,s)?a:null}function Fp(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(Fp(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(O["Fragment"].empty,!0))}return t}function Bp(t,e){for(var n=[],r=Math.min(t.depth,e.depth);r>=0;r--){var o=t.start(r);if(o<t.pos-(t.depth-r)||e.end(r)>e.pos+(e.depth-r)||t.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;o==e.start(r)&&n.push(r)}return n}function $p(t,e){return!t.selection.empty&&(e&&e(t.tr.deleteSelection().scrollIntoView()),!0)}function Lp(t,e){for(;t;t="start"==e?t.firstChild:t.lastChild)if(t.isTextblock)return!0;return!1}function Vp(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function qp(t){if(!t.parent.type.spec.isolating)for(var e=t.depth-1;e>=0;e--){var n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}function Wp(t){for(var e=0;e<t.edgeCount;e++){var n=t.edge(e).type;if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function Jp(t,e){return e&&e(t.tr.setSelection(new a["AllSelection"](t.doc))),!0}function Hp(t,e,n){var r,o,i=e.nodeBefore,s=e.nodeAfter;if(i.type.spec.isolating||s.type.spec.isolating)return!1;if(function(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!(!e.parent.canReplace(i,i+1)||!o.isTextblock&&!_p(t.doc,e.pos))&&(n&&n(t.tr.clearIncompatible(e.pos,r.type,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}(t,e,n))return!0;if(e.parent.canReplace(e.index(),e.index()+1)&&(r=(o=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&o.matchType(r[0]||s.type).validEnd){if(n){for(var c=e.pos+s.nodeSize,l=O["Fragment"].empty,u=r.length-1;u>=0;u--)l=O["Fragment"].from(r[u].create(null,l));l=O["Fragment"].from(i.copy(l));var p=t.tr.step(new xp(e.pos-1,c,e.pos,c,new O["Slice"](l,1,0),r.length,!0)),f=c+2*r.length;_p(p.doc,f)&&p.join(f),n(p.scrollIntoView())}return!0}var h=a["Selection"].findFrom(e,1),d=h&&h.$from.blockRange(h.$to),m=d&&Cp(d);return null!=m&&m>=e.depth&&(n&&n(t.tr.lift(d,m).scrollIntoView()),!0)}function Up(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}Dp.depth.get=function(){return this.frontier.length-1},Ap.prototype.fit=function(){for(;this.unplaced.size;){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;for(var i=this.placed,s=r.depth,a=o.depth;s&&a&&1==i.childCount;)i=i.firstChild.content,s--,a--;var c=new O["Slice"](i,s,a);return e>-1?new xp(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new wp(r.pos,o.pos,c):void 0},Ap.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--)for(var n=void 0,r=(e?(n=Rp(this.unplaced.content,e-1).firstChild).content:this.unplaced.content).firstChild,o=this.depth;o>=0;o--){var i=this.frontier[o],s=i.type,a=i.match,c=void 0,l=void 0;if(1==t&&(r?a.matchType(r.type)||(l=a.fillBefore(O["Fragment"].from(r),!1)):s.compatibleContent(n.type)))return{sliceDepth:e,frontierDepth:o,parent:n,inject:l};if(2==t&&r&&(c=a.findWrapping(r.type)))return{sliceDepth:e,frontierDepth:o,parent:n,wrap:c};if(n&&a.matchType(n.type))break}},Ap.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=Rp(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new O["Slice"](e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},Ap.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=Rp(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new O["Slice"](Pp(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new O["Slice"](Pp(e,n,1),n,r)},Ap.prototype.placeNodes=function(t){for(var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;this.depth>n;)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-e,u=0,p=[],f=this.frontier[n],h=f.match,d=f.type;if(o){for(var m=0;m<o.childCount;m++)p.push(o.child(m));h=h.matchFragment(o)}for(var v=c.size+e-(a.content.size-a.openEnd);u<c.childCount;){var g=c.child(u),y=h.matchType(g.type);if(!y)break;(++u>1||0==l||g.content.size)&&(h=y,p.push(Ip(g.mark(d.allowedMarks(g.marks)),1==u?l:0,u==c.childCount?v:-1)))}var b=u==c.childCount;b||(v=-1),b&&v<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=h;for(var w=0,x=c;w<v;w++){var S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=b?0==e?O["Slice"].empty:new O["Slice"](Pp(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new O["Slice"](Pp(a.content,e,u),a.openStart,a.openEnd),this.placed=zp(this.placed,n,O["Fragment"].from(p))},Ap.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!jp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;for(var n=this.$to.depth,r=this.$to.after(n);n>1&&r==this.$to.end(--n);)++r;return r},Ap.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=jp(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=jp(t,a,c.type,l,!0);if(!u||u.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},Ap.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;for(;this.depth>e.depth;)this.closeFrontierNode();e.fit.childCount&&(this.placed=zp(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},Ap.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=zp(this.placed,this.depth,O["Fragment"].from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},Ap.prototype.closeFrontierNode=function(){var t=this.frontier.pop().match.fillBefore(O["Fragment"].empty,!0);t.childCount&&(this.placed=zp(this.placed,this.frontier.length,t))},Object.defineProperties(Ap.prototype,Dp),dp.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(Np(r,o,n))return this.step(new wp(t,e,n));var i=Bp(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var u=i.indexOf(s),p=[],f=n.openStart,h=n.content,d=0;;d++){var m=h.firstChild;if(p.push(m),d==n.openStart)break;h=m.content}f>0&&p[f-1].type.spec.defining&&r.node(u).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&r.node(u).type!=p[f-2].type&&(f-=2);for(var v=n.openStart;v>=0;v--){var g=(v+f+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<i.length;b++){var w=i[(b+u)%i.length],x=!0;w<0&&(x=!1,w=-w);var S=r.node(w-1),k=r.index(w-1);if(S.canReplaceWith(k,k,y.type,y.marks))return this.replace(r.before(w),x?o.after(w):e,new O["Slice"](Fp(n.content,0,n.openStart,g),g,n.openEnd))}}for(var C=this.steps.length,_=i.length-1;_>=0&&(this.replace(t,e,n),!(this.steps.length>C));_--){var M=i[_];_<0||(t=r.before(M),e=o.after(M))}return this},dp.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=function(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new O["Slice"](O["Fragment"].from(n),0,0))},dp.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=Bp(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var Kp=Up($p,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("backward",t):r.parentOffset>0))return!1;var o=Vp(r);if(!o){var i=r.blockRange(),s=i&&Cp(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}var c=o.nodeBefore;if(!c.type.spec.isolating&&Hp(t,o,e))return!0;if(0==r.parent.content.size&&(Lp(c,"end")||a["NodeSelection"].isSelectable(c))){if(e){var l=t.tr.deleteRange(r.before(),r.after());l.setSelection(Lp(c,"end")?a["Selection"].findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):a["NodeSelection"].create(l.doc,o.pos-c.nodeSize)),e(l.scrollIntoView())}return!0}return!(!c.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos-c.nodeSize,o.pos).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):o.parentOffset>0)return!1;i=Vp(o)}var s=i&&i.nodeBefore;return!(!s||!a["NodeSelection"].isSelectable(s))&&(e&&e(t.tr.setSelection(a["NodeSelection"].create(t.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)})),Gp=Up($p,(function(t,e,n){var r=t.selection.$cursor;if(!r||(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size))return!1;var o=qp(r);if(!o)return!1;var i=o.nodeAfter;if(Hp(t,o,e))return!0;if(0==r.parent.content.size&&(Lp(i,"start")||a["NodeSelection"].isSelectable(i))){if(e){var s=t.tr.deleteRange(r.before(),r.after());s.setSelection(Lp(i,"start")?a["Selection"].findFrom(s.doc.resolve(s.mapping.map(o.pos)),1):a["NodeSelection"].create(s.doc,s.mapping.map(o.pos))),e(s.scrollIntoView())}return!0}return!(!i.isAtom||o.depth!=r.depth-1)&&(e&&e(t.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0)}),(function(t,e,n){var r=t.selection,o=r.$head,i=o;if(!r.empty)return!1;if(o.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size)return!1;i=qp(o)}var s=i&&i.nodeAfter;return!(!s||!a["NodeSelection"].isSelectable(s))&&(e&&e(t.tr.setSelection(a["NodeSelection"].create(t.doc,i.pos)).scrollIntoView()),!0)})),Xp={Enter:Up((function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;return!(!r.parent.type.spec.code||!r.sameParent(o))&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=Wp(r.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=t.tr.insert(s,i.createAndFill());c.setSelection(a["TextSelection"].create(c.doc,s+1)),e(c.scrollIntoView())}return!0}),(function(t,e){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var r=n.before();if(Op(t.doc,r))return e&&e(t.tr.split(r).scrollIntoView()),!0}var o=n.blockRange(),i=o&&Cp(o);return null!=i&&(e&&e(t.tr.lift(o,i).scrollIntoView()),!0)}),(function(t,e){var n=t.selection,r=n.$from,o=n.$to;if(t.selection instanceof a["NodeSelection"]&&t.selection.node.isBlock)return!(!r.parentOffset||!Op(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(e){var i=o.parentOffset==o.parent.content.size,s=t.tr;t.selection instanceof a["TextSelection"]&&s.deleteSelection();var c=0==r.depth?null:Wp(r.node(-1).contentMatchAt(r.indexAfter(-1))),l=i&&c?[{type:c}]:null,u=Op(s.doc,s.mapping.map(r.pos),1,l);l||u||!Op(s.doc,s.mapping.map(r.pos),1,c&&[{type:c}])||(l=[{type:c}],u=!0),u&&(s.split(s.mapping.map(r.pos),1,l),i||r.parentOffset||r.parent.type==c||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),O["Fragment"].from(c.create(),r.parent))||s.setNodeMarkup(s.mapping.map(r.before()),c)),e(s.scrollIntoView())}return!0})),"Mod-Enter":function(t,e){var n=t.selection,r=n.$head,o=n.$anchor;if(!r.parent.type.spec.code||!r.sameParent(o))return!1;var i=r.node(-1),s=r.indexAfter(-1),c=Wp(i.contentMatchAt(s));if(!i.canReplaceWith(s,s,c))return!1;if(e){var l=r.after(),u=t.tr.replaceWith(l,l,c.createAndFill());u.setSelection(a["Selection"].near(u.doc.resolve(l),1)),e(u.scrollIntoView())}return!0},Backspace:Kp,"Mod-Backspace":Kp,Delete:Gp,"Mod-Delete":Gp,"Mod-a":Jp},Zp={"Ctrl-h":Xp.Backspace,"Alt-Backspace":Xp["Mod-Backspace"],"Ctrl-d":Xp.Delete,"Ctrl-Alt-Backspace":Xp["Mod-Delete"],"Alt-Delete":Xp["Mod-Delete"],"Alt-d":Xp["Mod-Delete"]};for(var Yp in Xp)Zp[Yp]=Xp[Yp];"undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&os.platform();const Qp=ls({render:function(){var t=this.$createElement;return(this._self._c||t)("command-button",{attrs:{command:this.removeImage,tooltip:this.t("editor.extensions.Image.buttons.remove_image.tooltip"),icon:"regular/trash-alt"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.removeImage=function(){var t=this.view;$p(t.state,t.dispatch)},ar([Nr({type:Object,required:!0})],e.prototype,"view",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0),tf=ls({render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"image-bubble-menu"},[e("image-display-command-button",{attrs:{node:this.node,"update-attrs":this.updateAttrs}}),this._v(" "),e("edit-image-command-button",{attrs:{node:this.node,"update-attrs":this.updateAttrs}}),this._v(" "),e("remove-image-command-button",{attrs:{view:this.view}})],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),ar([Nr({type:O["Node"],required:!0})],e.prototype,"node",void 0),ar([Nr({type:Object,required:!0})],e.prototype,"view",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"updateAttrs",void 0),ar([Or({components:{ImageDisplayCommandButton:pc,EditImageCommandButton:sp,RemoveImageCommandButton:Qp}})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);var ef;const nf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{class:t.imageViewClass},[n("div",{staticClass:"image-view__body",class:{"image-view__body--focused":t.selected,"image-view__body--resizing":t.resizing}},[n("img",{staticClass:"image-view__body__image",attrs:{src:t.src,title:t.node.attrs.title,alt:t.node.attrs.alt,width:t.width,height:t.height},on:{click:t.selectImage}}),t._v(" "),t.view.editable?n("div",{directives:[{name:"show",rawName:"v-show",value:t.selected||t.resizing,expression:"selected || resizing"}],staticClass:"image-resizer"},t._l(t.resizeDirections,(function(e){return n("span",{key:e,staticClass:"image-resizer__handler",class:"image-resizer__handler--"+e,on:{mousedown:function(n){return t.onMouseDown(n,e)}}})})),0):t._e(),t._v(" "),n("el-popover",{attrs:{value:t.selected,"visible-arrow":!1,placement:"top",trigger:"manual","popper-class":"el-tiptap-image-popper"}},[n("image-bubble-menu",{attrs:{node:t.node,view:t.view,"update-attrs":t.updateAttrs}}),t._v(" "),n("div",{staticClass:"image-view__body__placeholder",attrs:{slot:"reference"},slot:"reference"})],1)],1)])},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maxSize={width:1e5,height:1e5},e.originalSize={width:0,height:0},e.resizeOb=new lc((function(){e.getMaxSize()})),e.resizeDirections=["tl","tr","bl","br"],e.resizing=!1,e.resizerState={x:0,y:0,w:0,h:0,dir:""},e}return ir(e,t),Object.defineProperty(e.prototype,"src",{get:function(){return this.node.attrs.src},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this.node.attrs.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this.node.attrs.height},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"display",{get:function(){return this.node.attrs.display},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"imageViewClass",{get:function(){return["image-view","image-view--"+this.display]},enumerable:!1,configurable:!0}),e.prototype.created=function(){return cr(this,void 0,void 0,(function(){var t;return lr(this,(function(e){switch(e.label){case 0:return[4,(n=this.src,new Promise((function(t,e){var r={complete:!1,width:0,height:0,src:n};if(n)if(uc[n])t(sr({},uc[n]));else{var o=new Image;o.onload=function(){r.width=o.width,r.height=o.height,r.complete=!0,uc[n]=sr({},r),t(r)},o.onerror=function(){e(r)},o.src=n}else e(r)})))];case 1:return(t=e.sent()).complete||(t.width=20,t.height=20),this.originalSize={width:t.width,height:t.height},[2]}var n}))}))},e.prototype.mounted=function(){this.resizeOb.observe(this.view.dom)},e.prototype.beforeDestroy=function(){this.resizeOb.disconnect()},e.prototype.selectImage=function(){var t=this.view.state,e=t.tr,n=a["NodeSelection"].create(t.doc,this.getPos());e=e.setSelection(n),this.view.dispatch(e)},e.prototype.getMaxSize=function(){var t=getComputedStyle(this.view.dom).width;this.maxSize.width=parseInt(t,10)},e.prototype.onMouseDown=function(t,e){t.preventDefault(),t.stopPropagation(),this.resizerState.x=t.clientX,this.resizerState.y=t.clientY;var n=this.originalSize.width,r=n/this.originalSize.height,o=this.node.attrs,i=o.width,s=o.height,a=this.maxSize.width;i&&!s?(i=i>a?a:i,s=Math.round(i/r)):s&&!i?i=(i=Math.round(s*r))>a?a:i:i||s?i=i>a?a:i:(i=n>a?a:n,s=Math.round(i/r)),this.resizerState.w=i,this.resizerState.h=s,this.resizerState.dir=e,this.resizing=!0,this.onEvents()},e.prototype.onMouseMove=function(t){if(t.preventDefault(),t.stopPropagation(),this.resizing){var e=this.resizerState,n=e.x,r=e.y,o=e.w,i=e.h,s=e.dir,a=(t.clientX-n)*(/l/.test(s)?-1:1),c=(t.clientY-r)*(/t/.test(s)?-1:1);this.updateAttrs({width:ns(o+a,20,this.maxSize.width),height:Math.max(i+c,20)})}},e.prototype.onMouseUp=function(t){t.preventDefault(),t.stopPropagation(),this.resizing&&(this.resizing=!1,this.resizerState={x:0,y:0,w:0,h:0,dir:""},this.offEvents(),this.selectImage())},e.prototype.onEvents=function(){document.addEventListener("mousemove",this.onMouseMove,!0),document.addEventListener("mouseup",this.onMouseUp,!0)},e.prototype.offEvents=function(){document.removeEventListener("mousemove",this.onMouseMove,!0),document.removeEventListener("mouseup",this.onMouseUp,!0)},ar([Nr({type:O["Node"],required:!0})],e.prototype,"node",void 0),ar([Nr({type:Object,required:!0})],e.prototype,"view",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"getPos",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"updateAttrs",void 0),ar([Nr({type:Boolean,required:!0})],e.prototype,"selected",void 0),ar([Or({components:(ef={},ef[w.a.name]=w.a,ef.ImageBubbleMenu=tf,ef)})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);var rf=/(https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|www\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9]\.[^\s]{2,}|https?:\/\/(?:www\.|(?!www))[a-zA-Z0-9]+\.[^\s]{2,}|www\.[a-zA-Z0-9]+\.[^\s]{2,})/;function of(t){var e=t.style,n=e.cssFloat,r=e.display,o=t.style,i=o.width,s=o.height,a=t.getAttribute("data-display")||t.getAttribute("display");return a=a?/(inline|block|left|right)/.test(a)?a:"inline":"left"!==n||r?"right"!==n||r?n||"block"!==r?"inline":"block":"right":"left",i=i||t.getAttribute("width")||null,s=s||t.getAttribute("height")||null,{src:t.getAttribute("src")||"",title:t.getAttribute("title")||"",alt:t.getAttribute("alt")||"",width:null==i?null:parseInt(i,10),height:null==s?null:parseInt(s,10),display:a}}function sf(t){var e=t.attrs,n=e.src,r=e.alt,o=e.title,i=e.width,s=e.height,a=e.display,c={src:n,alt:r,title:o,width:i,height:s};return c["data-display"]=a,["img",c]}var af,cf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{urlPattern:rf,uploadRequest:null}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{inline:!0,attrs:{src:{default:""},alt:{default:""},title:{default:""},width:{default:null},height:{default:null},display:{default:"inline"}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:of}],toDOM:sf}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return nf},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){return{component:Ca,componentProps:{editorContext:t}}},e}(s["i"]);const lf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"todo-item",class:{"todo-item--done":t.done},style:t.todoItemStyle,attrs:{"data-type":t.node.type.name,"data-done":t.done.toString(),"data-text-align":t.node.attrs.textAlign,"data-drag-handle":""}},[n("span",{attrs:{contenteditable:"false"}},[n("el-checkbox",{model:{value:t.done,callback:function(e){t.done=e},expression:"done"}})],1),t._v(" "),n("div",{ref:"content",staticClass:"todo-content",attrs:{contenteditable:t.view.editable.toString()}})])},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"done",{get:function(){return this.node.attrs.done},set:function(t){this.updateAttrs({done:t})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"todoItemStyle",{get:function(){return{lineHeight:Hs(this.node.attrs.lineHeight)}},enumerable:!1,configurable:!0}),ar([Nr({type:O["Node"],required:!0})],e.prototype,"node",void 0),ar([Nr({type:Object,required:!0})],e.prototype,"view",void 0),ar([Nr({type:Function,required:!0})],e.prototype,"updateAttrs",void 0),ar([Or({components:(af={},af[M.a.name]=M.a,af)})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);function uf(t){var e=t.style,n=e.textAlign,r=e.lineHeight,o=t.getAttribute("data-text-align")||n||"";return{textAlign:(o=On.test(o)?o:"")||null,lineHeight:(r=r&&r!==Hs(1.7)?r:"")||null,done:"true"===t.getAttribute("data-done")}}function pf(t){var e=t.attrs,n=e.done,r=e.textAlign,o=e.lineHeight,i="",s={"data-type":"todo_item"};return s["data-done"]=n.toString(),r&&"left"!==r&&(i+="text-align: "+r),o&&(i+="line-height: "+Hs(o)+";"),i&&(s.style=i),["li",sr(sr({},s),{class:"todo-item "+(n?"todo-item--done":"")}),["span",{contenteditable:"false"},["span",{class:"el-checkbox "+(n?"is-checked":""),style:"pointer-events: none;"},["span",{class:"el-checkbox__input "+(n?"is-checked":"")},["span",{class:"el-checkbox__inner"}]]]],["div",{class:"todo-content"},0]]}var ff,hf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{done:{default:!1},textAlign:{default:null},lineHeight:{default:null}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",parseDOM:[{priority:51,tag:'[data-type="'+this.name+'"]',getAttrs:uf}],toDOM:pf}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return lf},enumerable:!1,configurable:!0}),e}(s["q"]),df=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"schema",{get:function(){var t=this;return{group:"block",content:"todo_item+",parseDOM:[{priority:51,tag:'[data-type="'+this.name+'"]',getAttrs:function(){return{"data-type":t.name}}}],toDOM:function(){var e={};return e["data-type"]=t.name,["ul",e,0]}}},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{isActive:e.todo_list(),command:n.todo_list,icon:"tasks",tooltip:Tn("editor.extensions.TodoList.tooltip")}}},e}(s["r"]);function mf(t){var e=t.selection,n=t.doc,r=e.from,o=e.to,i=!0,s=!1;return n.nodesBetween(r,o,(function(t){var e=t.type.name;return!i||"table"!==e&&"table_row"!==e&&"table_column"!==e&&"table_cell"!==e||(i=!1,s=!0),i})),s}const vf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"right",trigger:"hover","popper-class":"el-tiptap-popper"},on:{"after-leave":t.resetTableGridSize},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[n("div",{staticClass:"table-grid-size-editor"},[n("div",{staticClass:"table-grid-size-editor__body"},t._l(t.tableGridSize.row,(function(e){return n("div",{key:"r"+e,staticClass:"table-grid-size-editor__row"},t._l(t.tableGridSize.col,(function(r){return n("div",{key:"c"+r,staticClass:"table-grid-size-editor__cell",class:{"table-grid-size-editor__cell--selected":r<=t.selectedTableGridSize.col&&e<=t.selectedTableGridSize.row},on:{mouseover:function(n){return t.selectTableGridSize(e,r)},mousedown:function(n){return t.onMouseDown(e,r)}}},[n("div",{staticClass:"table-grid-size-editor__cell__inner"})])})),0)})),0),t._v(" "),n("div",{staticClass:"table-grid-size-editor__footer"},[t._v("\n      "+t._s(t.selectedTableGridSize.row)+" X "+t._s(t.selectedTableGridSize.col)+"\n    ")])]),t._v(" "),n("div",{attrs:{slot:"reference"},on:{mouseover:function(e){t.popoverVisible=!0}},slot:"reference"},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.insert_table")))])])])},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverVisible=!1,e.tableGridSize={row:5,col:5},e.selectedTableGridSize={row:2,col:2},e}return ir(e,t),e.prototype.selectTableGridSize=function(t,e){t===this.tableGridSize.row&&(this.tableGridSize.row=Math.min(t+1,10)),e===this.tableGridSize.col&&(this.tableGridSize.col=Math.min(e+1,10)),this.selectedTableGridSize.row=t,this.selectedTableGridSize.col=e},e.prototype.onMouseDown=function(t,e){return this.popoverVisible=!1,{row:t,col:e}},e.prototype.resetTableGridSize=function(){this.tableGridSize={row:5,col:5},this.selectedTableGridSize={row:2,col:2}},ar([Pr("createTable")],e.prototype,"onMouseDown",null),ar([Or({components:(ff={},ff[w.a.name]=w.a,ff)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var gf;const yf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{disabled:t.editorStateOptions.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[n("div",{staticClass:"el-tiptap-popper__menu"},[n("div",{staticClass:"el-tiptap-popper__menu__item"},[n("create-table-popover",{on:{createTable:t.createTable}})],1),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.addColumnBefore}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.add_column_before")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.addColumnAfter}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.add_column_after")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.deleteColumn}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.delete_column")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.addRowBefore}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.add_row_before")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.addRowAfter}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.add_row_after")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.deleteRow}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.delete_row")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.enableMergeCells},on:{mousedown:t.hidePopover,click:t.editorContext.commands.mergeCells}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.merge_cells")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.enableSplitCell},on:{mousedown:t.hidePopover,click:t.editorContext.commands.splitCell}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.split_cell")))])]),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item__separator"}),t._v(" "),n("div",{staticClass:"el-tiptap-popper__menu__item",class:{"el-tiptap-popper__menu__item--disabled":!t.isTableActive},on:{mousedown:t.hidePopover,click:t.editorContext.commands.deleteTable}},[n("span",[t._v(t._s(t.t("editor.extensions.Table.buttons.delete_table")))])])]),t._v(" "),n("command-button",{attrs:{slot:"reference","is-active":t.isTableActive,tooltip:t.t("editor.extensions.Table.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"table"},slot:"reference"})],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.popoverVisible=!1,e}return ir(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this.editorContext.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isTableActive",{get:function(){return mf(this.editor.state)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableMergeCells",{get:function(){return mf(t=this.editor.state)&&Object(E["mergeCells"])(t);var t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableSplitCell",{get:function(){return mf(t=this.editor.state)&&Object(E["splitCell"])(t);var t},enumerable:!1,configurable:!0}),e.prototype.hidePopover=function(){this.popoverVisible=!1},e.prototype.createTable=function(t){var e=t.row,n=t.col;this.editorContext.commands.createTable({rowsCount:e,colsCount:n,withHeaderRow:!0}),this.hidePopover()},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(gf={},gf[w.a.name]=w.a,gf.CommandButton=As,gf.CreateTablePopover=vf,gf)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),e.prototype.menuBtnView=function(t){return{component:yf,componentProps:{editorContext:t}}}})(s["p"]);const bf=ls({render:function(){var t=this.$createElement;return(this._self._c||t)("command-button",{attrs:{command:this.openInsertVideoControl,tooltip:this.t("editor.extensions.Iframe.tooltip"),readonly:this.editorStateOptions.isCodeViewMode,icon:"video"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.openInsertVideoControl=function(){var t=this;f.a.prompt("",this.t("editor.extensions.Iframe.control.title"),{confirmButtonText:this.t("editor.extensions.Iframe.control.confirm"),cancelButtonText:this.t("editor.extensions.Iframe.control.cancel"),inputPlaceholder:this.t("editor.extensions.Iframe.control.placeholder"),roundButton:!0}).then((function(e){var n=e.value;t.editorContext.commands.iframe({src:n})})).catch((function(){}))},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"iframe"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{src:{default:null}},group:"block",selectable:!1,parseDOM:[{tag:"iframe",getAttrs:function(t){return{src:t.getAttribute("src")}}}],toDOM:function(t){return["iframe",{src:t.attrs.src,frameborder:0,allowfullscreen:"true"}]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(t){var e=t.type;return function(t){return function(n,r){var o=n.selection,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=e.create(t);r(n.tr.insert(i,s))}}},Object.defineProperty(e.prototype,"view",{get:function(){return{props:["node","updateAttrs","view"],computed:{src:{get:function(){return this.node.attrs.src},set:function(t){this.updateAttrs({src:t})}}},template:'\n        <div class="iframe">\n          <iframe class="iframe__embed" :src="src"></iframe>\n        </div>\n      '}},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){return{component:bf,componentProps:{editorContext:t}}}})(i["h"]);ce({target:"String",proto:!0,forced:vs("bold")},{bold:function(){return ms(this,"b","","")}});var wf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.bold,isActive:e.bold(),icon:"bold",tooltip:Tn("editor.extensions.Bold.tooltip")}}},e}(s["b"]),xf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.underline,isActive:e.underline(),icon:"underline",tooltip:Tn("editor.extensions.Underline.tooltip")}}},e}(s["s"]),Sf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.italic,isActive:e.italic(),icon:"italic",tooltip:Tn("editor.extensions.Italic.tooltip")}}},e}(s["j"]);ce({target:"String",proto:!0,forced:vs("strike")},{strike:function(){return ms(this,"strike","","")}});var kf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.menuBtnView=function(t){var e=t.isActive,n=t.commands;return{component:As,componentProps:{command:n.strike,isActive:e.strike(),icon:"strikethrough",tooltip:Tn("editor.extensions.Strike.tooltip")}}},e}(s["o"]);const Cf=ls({render:function(){var t=this.$createElement;return(this._self._c||t)("command-button",{attrs:{"is-active":this.editorContext.isActive.link(),readonly:this.editorStateOptions.isCodeViewMode,command:this.openApplyLinkControl,tooltip:this.t("editor.extensions.Link.add.tooltip"),icon:"link"}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),e.prototype.openApplyLinkControl=function(){var t=this,e=this.editorContext.editor,n=e.state,r=e.view,o=n.tr;f.a.prompt("",this.t("editor.extensions.Link.add.control.title"),{confirmButtonText:this.t("editor.extensions.Link.add.control.confirm"),cancelButtonText:this.t("editor.extensions.Link.add.control.cancel"),inputPlaceholder:this.t("editor.extensions.Link.add.control.placeholder"),roundButton:!0}).then((function(e){var n=e.value;r.dispatch(o),t.editorContext.commands.link({href:n})})).catch((function(){}))},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"plugins",{get:function(){return[new a["Plugin"]({props:{handleClick:function(t,e){var n=t.state,r=n.schema,o=n.doc,i=n.tr,s=ws(o.resolve(e),r.marks.link);if(!s)return!1;var c=o.resolve(s.from),l=o.resolve(s.to),u=i.setSelection(new a["TextSelection"](c,l));return t.dispatch(u),!0}}})]},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){return{component:Cf,componentProps:{editorContext:t}}}})(s["k"]);function Of(t){return(Of="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _f(t,e,n){if(!t.selection||!t.doc||!e)return t;var r=t.selection,o=r.empty,i=r.$cursor,s=r.ranges;if(o&&!i||!function(t,e,n){for(var r=function(r){var o=e[r],i=o.$from,s=o.$to,a=0===i.depth&&t.type.allowsMarkType(n);if(t.nodesBetween(i.pos,s.pos,(function(t){return!a&&(a=t.inlineContent&&t.type.allowsMarkType(n),!0)})),a)return{value:!0}},o=0;o<e.length;o++){var i=r(o);if("object"===Of(i))return i.value}return!1}(t.doc,s,e))return t;if(i)return t=t.removeStoredMark(e),n?t.addStoredMark(e.create(n)):t;for(var a=!1,c=0;!a&&c<s.length;c++){var l=s[c],u=l.$from,p=l.$to;a=t.doc.rangeHasMark(u.pos,p.pos,e)}for(c=0;c<s.length;c++){var f=s[c];u=f.$from,p=f.$to,a&&(t=t.removeMark(u.pos,p.pos,e)),n&&(t=t.addMark(u.pos,p.pos,e.create(n)))}return t}var Mf,Ef=["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4caf50","#8bc34a","#cddc39","#ffeb3b","#ffc107","#ff9800","#ff5722","#000000"];function Tf(t){return/#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})\b/gi.test(t)}const Nf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{disabled:t.editorStateOptions.isCodeViewMode,placement:"bottom",trigger:"click","popper-class":"el-tiptap-popper"},model:{value:t.popoverVisible,callback:function(e){t.popoverVisible=e},expression:"popoverVisible"}},[n("div",{staticClass:"color-set"},[t._l(t.colorSet,(function(e){return n("div",{key:e,staticClass:"color__wrapper"},[n("div",{staticClass:"color",class:{"color--selected":t.selectedColor===e},style:{"background-color":e},on:{mousedown:function(t){t.preventDefault()},click:function(n){return n.stopPropagation(),t.confirmColor(e)}}})])})),t._v(" "),n("div",{staticClass:"color__wrapper"},[n("div",{staticClass:"color color--remove",on:{mousedown:function(t){t.preventDefault()},click:function(e){return e.stopPropagation(),t.confirmColor("")}}})])],2),t._v(" "),n("div",{staticClass:"color-hex"},[n("el-input",{staticClass:"color-hex__input",attrs:{placeholder:"HEX",autofocus:"true",maxlength:"7",size:"small"},model:{value:t.color,callback:function(e){t.color=e},expression:"color"}}),t._v(" "),n("el-button",{staticClass:"color-hex__button",attrs:{type:"text",size:"small"},on:{click:function(e){return t.confirmColor(t.color)}}},[t._v("\n      "+t._s(t.confirmText)+"\n    ")])],1),t._v(" "),n("command-button",{attrs:{slot:"reference",tooltip:t.tooltip,icon:t.icon,readonly:t.editorStateOptions.isCodeViewMode},slot:"reference"})],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.color="",e.popoverVisible=!1,e}return ir(e,t),e.prototype.onSelectedColorChange=function(t){this.color=t},e.prototype.confirmColor=function(t){return this.popoverVisible=!1,t},ar([Nr({type:Array,default:function(){return[]}})],e.prototype,"colorSet",void 0),ar([Nr({type:String,default:""})],e.prototype,"selectedColor",void 0),ar([Nr({type:String,required:!0})],e.prototype,"tooltip",void 0),ar([Nr({type:String,required:!0})],e.prototype,"icon",void 0),ar([Nr({type:String,default:"OK"})],e.prototype,"confirmText",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Ar("selectedColor",{immediate:!0})],e.prototype,"onSelectedColorChange",null),ar([Pr("confirm")],e.prototype,"confirmColor",null),ar([Or({components:(Mf={},Mf[N.a.name]=N.a,Mf[w.a.name]=w.a,Mf[yc.name]=yc,Mf.CommandButton=As,Mf)})],e)}(o.a),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text_color"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{colors:Ef}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{color:""},inline:!0,group:"inline",parseDOM:[{style:"color",getAttrs:function(t){return{color:t}}}],toDOM:function(t){var e=t.attrs.color,n="";return e&&(n+="color: "+e+";"),["span",{style:n},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){if(void 0!==t){var r=e.schema,o=e.tr,i=r.marks.text_color,s=t&&Tf(t)?{color:t}:null;if((o=_f(e.tr.setSelection(e.selection),i,s)).docChanged||o.storedMarksSet)return n&&n(o),!0}return!1}}},e.prototype.menuBtnView=function(t){var e=t.commands,n=t.getMarkAttrs;return{component:Nf,componentProps:{colorSet:this.options.colors,selectedColor:n("text_color").color,tooltip:Tn("editor.extensions.TextColor.tooltip"),icon:"tint"},componentEvents:{confirm:function(t){return e.text_color(t)}}}}})(i["g"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text_highlight"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{colors:Ef}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{highlightColor:""},inline:!0,group:"inline",parseDOM:[{tag:"span[style*=background-color]",getAttrs:function(t){return{highlightColor:t.style.backgroundColor}}}],toDOM:function(t){var e=t.attrs.highlightColor,n="";return e&&(n+="background-color: "+e+";"),["span",{style:n},0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(e,n){if(void 0!==t){var r=e.schema,o=e.tr,i=r.marks.text_highlight,s=t&&Tf(t)?{highlightColor:t}:null;if((o=_f(e.tr.setSelection(e.selection),i,s)).docChanged||o.storedMarksSet)return n&&n(o),!0}return!1}}},e.prototype.menuBtnView=function(t){var e=t.commands,n=t.getMarkAttrs;return{component:Nf,componentProps:{colorSet:this.options.colors,selectedColor:n("text_highlight").highlightColor,tooltip:Tn("editor.extensions.TextHighlight.tooltip"),icon:"highlighter"},componentEvents:{confirm:function(t){return e.text_highlight(t)}}}}}(i["g"]);var Af=Math.max,Df=Math.min,Pf=Math.floor,zf=/\$([$&'`]|\d\d?|<[^>]*>)/g,Rf=/\$([$&'`]|\d\d?)/g;qe("replace",2,(function(t,e,n,r){var o=r.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,i=r.REPLACE_KEEPS_$0,s=o?"$":"$0";return[function(n,r){var o=U(this),i=null==n?void 0:n[t];return void 0!==i?i.call(n,o,r):e.call(String(o),n,r)},function(t,r){if(!o&&i||"string"==typeof r&&-1===r.indexOf(s)){var c=n(e,t,this,r);if(c.done)return c.value}var l=it(t),u=String(this),p="function"==typeof r;p||(r=String(r));var f=l.global;if(f){var h=l.unicode;l.lastIndex=0}for(var d=[];;){var m=Ye(l,u);if(null===m)break;if(d.push(m),!f)break;""===String(m[0])&&(l.lastIndex=Ze(u,$t(l.lastIndex),h))}for(var v,g="",y=0,b=0;b<d.length;b++){m=d[b];for(var w=String(m[0]),x=Af(Df(Ft(m.index),u.length),0),S=[],k=1;k<m.length;k++)S.push(void 0===(v=m[k])?v:String(v));var C=m.groups;if(p){var O=[w].concat(S,x,u);void 0!==C&&O.push(C);var _=String(r.apply(void 0,O))}else _=a(w,u,x,S,C,r);x>=y&&(g+=u.slice(y,x)+_,y=x+w.length)}return g+u.slice(y)}];function a(t,n,r,o,i,s){var a=r+t.length,c=o.length,l=Rf;return void 0!==i&&(i=ue(i),l=zf),e.call(s,l,(function(e,s){var l;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,r);case"'":return n.slice(a);case"<":l=i[s.slice(1,-1)];break;default:var u=+s;if(0===u)return e;if(u>c){var p=Pf(u/10);return 0===p?e:p<=c?void 0===o[p-1]?s.charAt(1):o[p-1]+s.charAt(1):e}l=o[u-1]}return void 0===l?"":l}))}}));var If,jf=["Arial","Arial Black","Georgia","Impact","Tahoma","Times New Roman","Verdana","Courier New","Lucida Console","Monaco","monospace"].reduce((function(t,e){return t[e]=e,t}),{});const Ff=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:t.toggleFontType}},[n("command-button",{attrs:{tooltip:t.t("editor.extensions.FontType.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"font"}}),t._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.fontTypes,(function(e){return n("el-dropdown-item",{key:e,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e===t.activeFontType},attrs:{command:e}},[n("span",{style:{"font-family":e},attrs:{"data-font":e}},[t._v(t._s(e))])])})),1)],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this.editorContext.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontTypes",{get:function(){var t,e=this.editor.extensions.options.font_type.fontTypes;return t=e,"[object Object]"!==Object.prototype.toString.call(t)?(_n.error("'fontTypes' should be an object"),jf):e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeFontType",{get:function(){return function(t){var e=t.schema,n=t.selection,r=t.tr,o=e.marks.font_type;if(!o)return"";if(n.empty){var i=(r.storedMarks||t.storedMarks||n instanceof a["TextSelection"]&&n.$cursor&&n.$cursor.marks&&n.$cursor.marks()||[]).find((function(t){return t.type===o}));return i&&i.attrs.name||""}var s=bs(t,o).name;return s||""}(this.editor.state)},enumerable:!1,configurable:!0}),e.prototype.toggleFontType=function(t){t===this.activeFontType?this.editorContext.commands.font_type(""):this.editorContext.commands.font_type(t)},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(If={},If[y.a.name]=y.a,If[v.a.name]=v.a,If[d.a.name]=d.a,If.CommandButton=As,If)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"font_type"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{fontTypes:jf}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{name:""},inline:!0,group:"inline",parseDOM:[{style:"font-family",getAttrs:function(t){return{name:t?t.replace(/["']/g,""):""}}}],toDOM:function(t){var e=t.attrs.name,n={};return e&&(n.style="font-family: "+e),["span",n,0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(t){var e=t.type;return function(t){return function(n,r){var o=n.tr;return!(!(o=function(t,e,n){var r=t.selection;return r instanceof a["TextSelection"]||r instanceof a["AllSelection"]?t=_f(t,e,n?{name:n}:null):t}(n.tr.setSelection(n.selection),e,t)).docChanged&&!o.storedMarksSet)&&(r&&r(o),!0)}}},e.prototype.menuBtnView=function(t){return{component:Ff,componentProps:{editorContext:t}}}})(i["g"]);var Bf,$f=["8","10","12","14","16","18","20","24","30","36","48","60","72"];const Lf=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:t.toggleFontSize}},[n("command-button",{attrs:{tooltip:t.t("editor.extensions.FontSize.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"text-width"}}),t._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t.activeFontSize===t.defaultSize},attrs:{command:t.defaultSize}},[n("span",{attrs:{"data-font-size":"default"}},[t._v(t._s(t.t("editor.extensions.FontSize.default")))])]),t._v(" "),t._l(t.fontSizes,(function(e){return n("el-dropdown-item",{key:e,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":e===t.activeFontSize},attrs:{command:e}},[n("span",{attrs:{"data-font-size":e}},[t._v(t._s(e))])])}))],2)],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultSize="default",e}return ir(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this.editorContext.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fontSizes",{get:function(){return this.editor.extensions.options.font_size.fontSizes},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeFontSize",{get:function(){return function(t){var e=t.schema,n=t.selection,r=t.tr,o=e.marks.font_size;if(!o)return"default";if(n.empty){var i=(r.storedMarks||t.storedMarks||n instanceof a["TextSelection"]&&n.$cursor&&n.$cursor.marks&&n.$cursor.marks()||[]).find((function(t){return t.type===o}));return i?String(i.attrs.px||"default"):"default"}var s=bs(t,o).px;return s?String(s):"default"}(this.editor.state)},enumerable:!1,configurable:!0}),e.prototype.toggleFontSize=function(t){t===this.activeFontSize?this.editorContext.commands.font_size("default"):this.editorContext.commands.font_size(t)},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(Bf={},Bf[y.a.name]=y.a,Bf[v.a.name]=v.a,Bf[d.a.name]=d.a,Bf.CommandButton=As,Bf)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"font_size"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{fontSizes:$f}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"schema",{get:function(){return{attrs:{px:""},inline:!0,group:"inline",parseDOM:[{style:"font-size",getAttrs:function(t){return{px:t||""}}}],toDOM:function(t){var e=t.attrs.px,n={};return e&&(n.style="font-size: "+e+"px"),["span",n,0]}}},enumerable:!1,configurable:!0}),e.prototype.commands=function(t){var e=t.type;return function(t){return function(n,r){var o=n.tr;return!(!(o=function(t,e,n){var r=t.selection;return r instanceof a["TextSelection"]||r instanceof a["AllSelection"]?t=_f(t,e,n&&"default"!==n?{px:n}:null):t}(n.tr.setSelection(n.selection),e,t)).docChanged&&!o.storedMarksSet)&&(r&&r(o),!0)}}},e.prototype.menuBtnView=function(t){return{component:Lf,componentProps:{editorContext:t}}}})(i["g"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),e.prototype.menuBtnView=function(t){var e=t.commands;return{component:As,componentProps:{command:e.horizontal_rule,icon:"minus",tooltip:Tn("editor.extensions.HorizontalRule.tooltip")}}}}(s["h"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),e.prototype.menuBtnView=function(t){var e=t.commands;return[{component:As,componentProps:{command:e.undo,icon:"undo",tooltip:Tn("editor.extensions.History.tooltip.undo")}},{component:As,componentProps:{command:e.redo,icon:"redo",tooltip:Tn("editor.extensions.History.tooltip.redo")}}]}}(s["g"]);var Vf=Ie("isConcatSpreadable"),qf=qr>=51||!j((function(){var t=[];return t[Vf]=!1,t.concat()[0]!==t})),Wf=Jr("concat"),Jf=function(t){if(!G(t))return!1;var e=t[Vf];return void 0!==e?!!e:Dn(t)};ce({target:"Array",proto:!0,forced:!qf||!Wf},{concat:function(t){var e,n,r,o,i,s=ue(this),a=zn(s,0),c=0;for(e=-1,r=arguments.length;e<r;e++)if(Jf(i=-1===e?s:arguments[e])){if(c+(o=$t(i.length))>9007199254740991)throw TypeError("Maximum allowed index exceeded");for(n=0;n<o;n++,c++)n in i&&Fr(a,c,i[n])}else{if(c>=9007199254740991)throw TypeError("Maximum allowed index exceeded");Fr(a,c++,i)}return a.length=c,a}});var Hf=["paragraph","heading","list_item","todo_item","title"];function Uf(t,e){var n=t.selection,r=t.doc;if(!n||!r)return t;var o=n.from,i=n.to,s=[];return e=e||null,r.nodesBetween(o,i,(function(t,n){var r=t.type;return!Hf.includes(r.name)||(t.attrs.textAlign||null)===e||(s.push({node:t,pos:n,nodeType:r}),"list_item"!==r.name&&"todo_item"!==r.name)})),s.length?(s.forEach((function(n){var r=n.node,o=n.pos,i=n.nodeType,s=r.attrs;s=sr(sr({},s),{textAlign:e}),t=t.setNodeMarkup(o,i,s,r.marks)})),t):t}(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"text_align"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{alignments:["left","center","right","justify"]}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return this.options.alignments.reduce((function(t,e){var n;return On.test(e)?sr(sr({},t),((n={})["align_"+e]=function(){return function(t,n){var r=t.selection,o=Uf(t.tr.setSelection(r),"left"===e?null:e);return!!o.docChanged&&(n&&n(o),!0)}},n)):t}),{})},e.prototype.menuBtnView=function(t){var e=t.commands,n=t.editor;return this.options.alignments.reduce((function(t,r){if(!On.test(r))return t;var o="left"!==r&&function(t,e){var n=t.selection,r=t.doc,o=n.from,i=n.to,s=!0,a=!1;return r.nodesBetween(o,i,(function(t){return s&&t.attrs.textAlign===e&&(s=!1,a=!0),s})),a}(n.state,r);return t.concat({component:As,componentProps:{isActive:o,command:e["align_"+r],icon:"align-"+r,tooltip:Tn("editor.extensions.TextAlign.buttons.align_"+r+".tooltip")}})}),[])}})(i["f"]);var Kf,Gf,Xf,Zf={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Yf=!j((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Qf=kt("IE_PROTO"),th=Object.prototype,eh=Yf?Object.getPrototypeOf:function(t){return t=ue(t),Y(t,Qf)?t[Qf]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?th:null},nh=Ie("iterator"),rh=!1;[].keys&&("next"in(Xf=[].keys())?(Gf=eh(eh(Xf)))!==Object.prototype&&(Kf=Gf):rh=!0),null==Kf&&(Kf={}),Y(Kf,nh)||ct(Kf,nh,(function(){return this}));var oh={IteratorPrototype:Kf,BUGGY_SAFARI_ITERATORS:rh},ih=oh.IteratorPrototype,sh=function(){return this},ah=oh.IteratorPrototype,ch=oh.BUGGY_SAFARI_ITERATORS,lh=Ie("iterator"),uh=function(){return this},ph=function(t,e,n,r,o,i,s){!function(t,e,n){var r=e+" Iterator";t.prototype=Jn(ih,{next:V(1,n)}),Oo(t,r,!1),Mo[r]=sh}(n,e,r);var a,c,l,u=function(t){if(t===o&&m)return m;if(!ch&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},p=e+" Iterator",f=!1,h=t.prototype,d=h[lh]||h["@@iterator"]||o&&h[o],m=!ch&&d||u(o),v="Array"==e&&h.entries||d;if(v&&(a=eh(v.call(new t)),ah!==Object.prototype&&a.next&&(eh(a)!==ah&&(nn?nn(a,ah):"function"!=typeof a[lh]&&ct(a,lh,uh)),Oo(a,p,!0))),"values"==o&&d&&"values"!==d.name&&(f=!0,m=function(){return d.call(this)}),h[lh]!==m&&ct(h,lh,m),Mo[e]=m,o)if(c={values:u("values"),keys:i?m:u("keys"),entries:u("entries")},s)for(l in c)(ch||f||!(l in h))&&Dt(h,l,c[l]);else ce({target:e,proto:!0,forced:ch||f},c);return c},fh=At.set,hh=At.getterFor("Array Iterator"),dh=ph(Array,"Array",(function(t,e){fh(this,{type:"Array Iterator",target:K(t),index:0,kind:e})}),(function(){var t=hh(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}}),"values");Mo.Arguments=Mo.Array,Kn("keys"),Kn("values"),Kn("entries");var mh=Ie("iterator"),vh=Ie("toStringTag"),gh=dh.values;for(var yh in Zf){var bh=I[yh],wh=bh&&bh.prototype;if(wh){if(wh[mh]!==gh)try{ct(wh,mh,gh)}catch(Kh){wh[mh]=gh}if(wh[vh]||ct(wh,vh,yh),Zf[yh])for(var xh in dh)if(wh[xh]!==dh[xh])try{ct(wh,xh,dh[xh])}catch(Kh){wh[xh]=dh[xh]}}}function Sh(t,e){var n=t.doc,r=t.selection;if(!n||!r)return t;if(!(r instanceof a["TextSelection"]||r instanceof a["AllSelection"]))return t;var o=r.from,i=r.to;return n.nodesBetween(o,i,(function(n,r){var o=n.type;return"paragraph"===o.name||"heading"===o.name||"blockquote"===o.name?(t=function(t,e,n){if(!t.doc)return t;var r=t.doc.nodeAt(e);if(!r)return t;var o=ns((r.attrs.indent||0)+n,0,7);if(o===r.attrs.indent)return t;var i=sr(sr({},r.attrs),{indent:o});return t.setNodeMarkup(e,r.type,i,r.marks)}(t,r,e),!1):!function(t){return function(t){return"bullet_list"===t.type.name}(t)||function(t){return"order_list"===t.type.name}(t)||function(t){return"todo_list"===t.type.name}(t)}(n)})),t}function kh(t){return function(e,n){var r=e.selection,o=e.tr;return!!(o=Sh(o=o.setSelection(r),t)).docChanged&&(n&&n(o),!0)}}var Ch;(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"indent"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{minIndent:0,maxIndent:7}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return{indent:function(){return kh(1)},outdent:function(){return kh(-1)}}},e.prototype.keys=function(){return{Tab:kh(1),"Shift-Tab":kh(-1)}},e.prototype.menuBtnView=function(t){var e=t.commands;return[{component:As,componentProps:{command:e.indent,icon:"indent",tooltip:Tn("editor.extensions.Indent.buttons.indent.tooltip")}},{component:As,componentProps:{command:e.outdent,icon:"outdent",tooltip:Tn("editor.extensions.Indent.buttons.outdent.tooltip")}}]}})(i["f"]);const Oh=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dropdown",{attrs:{placement:"bottom",trigger:"click"},on:{command:function(e){return t.editorContext.commands.line_height({lineHeight:e})}}},[n("command-button",{attrs:{tooltip:t.t("editor.extensions.LineHeight.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"text-height"}}),t._v(" "),n("el-dropdown-menu",{staticClass:"el-tiptap-dropdown-menu",attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.lineHeights,(function(e){return n("el-dropdown-item",{key:e,staticClass:"el-tiptap-dropdown-menu__item",class:{"el-tiptap-dropdown-menu__item--active":t.isLineHeightActive(e)},attrs:{command:e}},[n("span",[t._v(t._s(e))])])})),1)],1)},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"editor",{get:function(){return this.editorContext.editor},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lineHeights",{get:function(){return this.editor.extensions.options.line_height.lineHeights},enumerable:!1,configurable:!0}),e.prototype.isLineHeightActive=function(t){return function(t,e){var n=t.selection,r=t.doc,o=n.from,i=n.to,s=!0,a=!1;return r.nodesBetween(o,i,(function(t){var n=t.type,r=t.attrs.lineHeight||"100%";return Ws.includes(n.name)?s&&e===r?(s=!1,a=!0,!1):"list_item"!==n.name&&"todo_item"!==n.name:s})),a}(this.editor.state,t)},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:(Ch={},Ch[y.a.name]=y.a,Ch[v.a.name]=v.a,Ch[d.a.name]=d.a,Ch.CommandButton=As,Ch)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"line_height"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{lineHeights:["100%","115%","150%","200%","250%","300%"]}},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(t){return function(t){return function(e,n){var r=e.selection,o=e.tr;return!!(o=Us(o=o.setSelection(r),t)).docChanged&&(n&&n(o),!0)}}(t.lineHeight)}},e.prototype.menuBtnView=function(t){return{component:Oh,componentProps:{editorContext:t}}}})(i["f"]);var _h=jn.filter,Mh=Jr("filter"),Eh=ge("filter");ce({target:"Array",proto:!0,forced:!Mh||!Eh},{filter:function(t){return _h(this,t,arguments.length>1?arguments[1]:void 0)}});var Th=!j((function(){return Object.isExtensible(Object.preventExtensions({}))})),Nh=P((function(t){var e=at.f,n=xt("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!G(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!Y(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!Y(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Th&&s.REQUIRED&&o(t)&&!Y(t,n)&&i(t),t}};Ct[n]=!0})),Ah=(Nh.REQUIRED,Nh.fastKey,Nh.getWeakData,Nh.onFreeze,at.f),Dh=Nh.fastKey,Ph=At.set,zh=At.getterFor,Rh=(function(t,e,n){var r=-1!==t.indexOf("Map"),o=-1!==t.indexOf("Weak"),i=r?"set":"add",s=I[t],a=s&&s.prototype,c=s,l={},u=function(t){var e=a[t];Dt(a,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(o&&!G(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return o&&!G(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(o&&!G(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(se(t,"function"!=typeof s||!(o||a.forEach&&!j((function(){(new s).entries().next()})))))c=n.getConstructor(e,t,r,i),Nh.REQUIRED=!0;else if(se(t,!0)){var p=new c,f=p[i](o?{}:-0,1)!=p,h=j((function(){p.has(1)})),d=Vo((function(t){new s(t)})),m=!o&&j((function(){for(var t=new s,e=5;e--;)t[i](e,e);return!t.has(-0)}));d||((c=e((function(e,n){_o(e,c,t);var o=rn(new s,e,c);return null!=n&&zo(n,o[i],o,r),o}))).prototype=a,a.constructor=c),(h||m)&&(u("delete"),u("has"),r&&u("get")),(m||f)&&u(i),o&&a.clear&&delete a.clear}l[t]=c,ce({global:!0,forced:c!=s},l),Oo(c,t),o||n.setStrong(c,t,r)}("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),{getConstructor:function(t,e,n,r){var o=t((function(t,i){_o(t,o,e),Ph(t,{type:e,index:Jn(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=i&&zo(i,t[r],t,n)})),i=zh(e),s=function(t,e,n){var r,o,s=i(t),c=a(t,e);return c?c.value=n:(s.last=c={index:o=Dh(e,!0),key:e,value:n,previous:r=s.last,next:void 0,removed:!1},s.first||(s.first=c),r&&(r.next=c),F?s.size++:t.size++,"F"!==o&&(s.index[o]=c)),t},a=function(t,e){var n,r=i(t),o=Dh(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return So(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e=i(this),n=a(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),F?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=i(this),r=An(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),So(o.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return s(this,0===t?0:t,e)}}:{add:function(t){return s(this,t=0===t?0:t,t)}}),F&&Ah(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=zh(e),i=zh(r);ph(t,e,(function(t,e){Ph(this,{type:r,target:t,state:o(t),kind:e,last:void 0})}),(function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})}),n?"entries":"values",!n,!0),sn(e)}}),Ge.charAt),Ih=At.set,jh=At.getterFor("String Iterator");ph(String,"String",(function(t){Ih(this,{type:"String Iterator",string:String(t),index:0})}),(function(){var t,e=jh(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=Rh(n,r),e.index+=t.length,{value:t,done:!1})}));var Fh=["bold","italic","underline","strike","link","text_color","text_highlight"],Bh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"format_clear"},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e){var n=function(t,e){var n=t.doc,r=t.selection;if(!r||!n)return t;var o=r.from,i=r.to;if(r.empty)return t;var s=new Set(Fh.map((function(t){return e.marks[t]})).filter(Boolean));if(!s.size)return t;var a=[];return n.nodesBetween(o,i,(function(t,e){return!t.marks||!t.marks.length||(t.marks.some((function(n){s.has(n.type)&&a.push({node:t,pos:e,mark:n})})),!0)})),a.forEach((function(e){var n=e.node,r=e.mark,o=e.pos;t=t.removeMark(o,o+n.nodeSize,r.type)})),t=Us(t=Uf(t,null),null)}(t.tr.setSelection(t.selection),t.schema);return!(!e||!n.docChanged)&&(e(n),!0)}}},e.prototype.menuBtnView=function(t){var e=t.commands;return{component:As,componentProps:{command:e.format_clear,icon:"remove-format",tooltip:Tn("editor.extensions.FormatClear.tooltip")}}},e}(i["f"]);const $h=ls({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("command-button",{attrs:{command:function(){return t.isFullscreen=!t.isFullscreen},tooltip:t.buttonTooltip,icon:t.isFullscreen?"compress":"expand","is-active":t.isFullscreen}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return this.editorStateOptions.isFullscreen},set:function(t){this.editorStateOptions.isFullscreen=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buttonTooltip",{get:function(){return this.isFullscreen?this.t("editor.extensions.Fullscreen.tooltip.exit_fullscreen"):this.t("editor.extensions.Fullscreen.tooltip.fullscreen")},enumerable:!1,configurable:!0}),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"fullscreen"},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(){return{component:$h}}})(i["f"]);var Lh=!Vo((function(t){Array.from(t)}));function Vh(t){var e=t.dom.closest(".el-tiptap-editor__content");return!!e&&(function(t){var e=Array.from(document.querySelectorAll("style, link")).reduce((function(t,e){return t+e.outerHTML}),"")+t.outerHTML,n=document.createElement("iframe");n.id="el-tiptap-iframe",n.setAttribute("style","position: absolute; width: 0; height: 0; top: -10px; left: -10px;"),document.body.appendChild(n);var r=n.contentWindow,o=n.contentDocument||n.contentWindow&&n.contentWindow.document;o&&(o.open(),o.write(e),o.close()),r&&(n.onload=function(){try{setTimeout((function(){r.focus();try{r.document.execCommand("print",!1)||r.print()}catch(t){r.print()}r.close()}),10)}catch(t){_n.error(t)}setTimeout((function(){document.body.removeChild(n)}),100)})}(e),!0)}ce({target:"Array",stat:!0,forced:Lh},{from:function(t){var e,n,r,o,i,s,a=ue(t),c="function"==typeof this?this:Array,l=arguments.length,u=l>1?arguments[1]:void 0,p=void 0!==u,f=Do(a),h=0;if(p&&(u=An(u,l>2?arguments[2]:void 0,2)),null==f||c==Array&&No(f))for(n=new c(e=$t(a.length));e>h;h++)s=p?u(a[h],h):a[h],Fr(n,h,s);else for(i=(o=f.call(a)).next,n=new c;!(r=i.call(o)).done;h++)s=p?Po(o,u,[r.value,h],!0):r.value,Fr(n,h,s);return n.length=h,n}});var qh;(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"print"},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return function(t,e,n){return Vh(n)}}},e.prototype.keys=function(){return{"Mod-p":function(t,e,n){return Vh(n)}}},e.prototype.menuBtnView=function(t){var e=t.commands;return{component:As,componentProps:{command:e.print,icon:"print",tooltip:Tn("editor.extensions.Print.tooltip")}}}})(i["f"]);const Wh=ls({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("command-button",{attrs:{command:t.togglePreviewDialogVisible,tooltip:t.t("editor.extensions.Preview.tooltip"),readonly:t.editorStateOptions.isCodeViewMode,icon:"eye"}}),t._v(" "),n("el-dialog",{attrs:{title:t.t("editor.extensions.Preview.dialog.title"),visible:t.previewDialogVisible,width:t.contentWidth,"append-to-body":!0},on:{"update:visible":function(e){t.previewDialogVisible=e}}},[n("div",{staticClass:"el-tiptap-editor__content"},[n("div",{domProps:{innerHTML:t._s(t.html)}})])])],1)},staticRenderFns:[]},void 0,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.html="",e.previewDialogVisible=!1,e}return ir(e,t),e.prototype.onVisibleChange=function(t){t&&this.getHtml()},e.prototype.togglePreviewDialogVisible=function(){this.previewDialogVisible=!this.previewDialogVisible},e.prototype.getHtml=function(){this.html=this.editorContext.editor.getHTML()},ar([Nr({type:Object,required:!0})],e.prototype,"editorContext",void 0),ar([Nr({type:String,default:"80vw"})],e.prototype,"contentWidth",void 0),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Ar("previewDialogVisible")],e.prototype,"onVisibleChange",null),ar([Or({components:(qh={},qh[C.a.name]=C.a,qh.CommandButton=As,qh)})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"preview"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{contentWidth:"80vw"}},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(t){return{component:Wh,componentProps:{editorContext:t,contentWidth:this.options.contentWidth}}}})(i["f"]),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"select_all"},enumerable:!1,configurable:!0}),e.prototype.commands=function(){return function(){return Jp}},e.prototype.menuBtnView=function(t){var e=t.commands;return{component:As,componentProps:{command:e.select_all,icon:"regular/object-group",tooltip:Tn("editor.extensions.SelectAll.tooltip")}}}}(i["f"]);const Jh=ls({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("command-button",{attrs:{command:function(){return t.isCodeViewMode=!t.isCodeViewMode},tooltip:t.t("editor.extensions.CodeView.tooltip"),icon:"regular/file-code","is-active":t.editorStateOptions.isCodeViewMode}})},staticRenderFns:[]},void 0,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ir(e,t),Object.defineProperty(e.prototype,"isCodeViewMode",{get:function(){return this.editorStateOptions.isCodeViewMode},set:function(t){this.editorStateOptions.isCodeViewMode=t},enumerable:!1,configurable:!0}),ar([_r()],e.prototype,"editorStateOptions",void 0),ar([Or({components:{CommandButton:As}})],e)}(br(cs)),void 0,!1,void 0,!1,void 0,void 0,void 0);var Hh=/^(a|abbr|acronym|area|base|bdo|big|br|button|caption|cite|code|col|colgroup|dd|del|dfn|em|frame|hr|iframe|img|input|ins|kbd|label|legend|link|map|object|optgroup|option|param|q|samp|script|select|small|span|strong|sub|sup|textarea|tt|var)$/,Uh={lineNumbers:!0,lineWrapping:!0,tabSize:2,tabMode:"indent",mode:"text/html"};(function(t){function e(e){void 0===e&&(e={});var n,r=t.call(this,e)||this,o=e.codemirror;return null==o?_n.warn("`CodeView` extension requires the CodeMirror library."):((n=o).extendMode("xml",{newlineAfterToken:function(t,e,n,r){var o=!1;return"html"===this.configuration&&(o=!!r.context&&Hh.test(r.context.tagName)),!o&&("tag"===t&&/>$/.test(e)&&r.context||/^</.test(n))}}),n.defineExtension("autoFormatRange",(function(t,e){var r=this,o=r.getMode(),i=r.getRange(t,e).split("\n"),s=n.copyState(o,r.getTokenAt(t).state),a=r.getOption("tabSize"),c="",l=0,u=0===t.ch;function p(){c+="\n",u=!0,++l}for(var f=0;f<i.length;++f){for(var h=new n.StringStream(i[f],a);!h.eol();){var d=n.innerMode(o,s),m=o.token(h,s),v=h.current();h.start=h.pos,u&&!/\S/.test(v)||(c+=v,u=!1),!u&&d.mode.newlineAfterToken&&d.mode.newlineAfterToken(m,v,h.string.slice(h.pos)||i[f+1]||"",d.state)&&p()}!h.pos&&o.blankLine&&o.blankLine(s),!u&&f<i.length-1&&p()}r.operation((function(){r.replaceRange(c,t,e);for(var n=t.line+1,o=t.line+l;n<=o;++n)r.indentLine(n,"smart");r.setSelection(t,r.getCursor(!1))}))}))),r.options={codemirror:o,codemirrorOptions:sr(sr({},r.defaultOptions.codemirrorOptions),e.codemirrorOptions)},r}ir(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"code_view"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defaultOptions",{get:function(){return{codemirror:null,codemirrorOptions:sr({},Uh)}},enumerable:!1,configurable:!0}),e.prototype.menuBtnView=function(){return{component:Jh}}})(i["f"])}).call(this,n("c8ba"))},5128:function(t,e,n){"use strict";e.__esModule=!0,e.PopupManager=void 0;var r=n("8bbf"),o=f(r),i=n("7f4d"),s=f(i),a=n("4b26"),c=f(a),l=n("e62d"),u=f(l),p=n("5924");function f(t){return t&&t.__esModule?t:{default:t}}var h=1,d=void 0;e.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+h++,c.default.register(this._popupId,this)},beforeDestroy:function(){c.default.deregister(this._popupId),c.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(t){var e=this;if(t){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,o.default.nextTick((function(){e.open()})))}else this.close()}},methods:{open:function(t){var e=this;this.rendered||(this.rendered=!0);var n=(0,s.default)({},this.$props||this,t);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var r=Number(n.openDelay);r>0?this._openTimer=setTimeout((function(){e._openTimer=null,e.doOpen(n)}),r):this.doOpen(n)},doOpen:function(t){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var e=this.$el,n=t.modal,r=t.zIndex;if(r&&(c.default.zIndex=r),n&&(this._closing&&(c.default.closeModal(this._popupId),this._closing=!1),c.default.openModal(this._popupId,c.default.nextZIndex(),this.modalAppendToBody?void 0:e,t.modalClass,t.modalFade),t.lockScroll)){this.withoutHiddenClass=!(0,p.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,p.getStyle)(document.body,"paddingRight"),10)),d=(0,u.default)();var o=document.documentElement.clientHeight<document.body.scrollHeight,i=(0,p.getStyle)(document.body,"overflowY");d>0&&(o||"scroll"===i)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+d+"px"),(0,p.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(e).position&&(e.style.position="absolute"),e.style.zIndex=c.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var t=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var e=Number(this.closeDelay);e>0?this._closeTimer=setTimeout((function(){t._closeTimer=null,t.doClose()}),e):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){c.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,p.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},e.PopupManager=c.default},5313:function(t,e,n){"use strict";n.r(e),n.d(e,"AllSelection",(function(){return h})),n.d(e,"EditorState",(function(){return O})),n.d(e,"NodeSelection",(function(){return p})),n.d(e,"Plugin",(function(){return T})),n.d(e,"PluginKey",(function(){return D})),n.d(e,"Selection",(function(){return s})),n.d(e,"SelectionRange",(function(){return c})),n.d(e,"TextSelection",(function(){return l})),n.d(e,"Transaction",(function(){return w}));var r=n("304a"),o=n("0ac0"),i=Object.create(null),s=function(t,e,n){this.ranges=n||[new c(t.min(e),t.max(e))],this.$anchor=t,this.$head=e},a={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};a.anchor.get=function(){return this.$anchor.pos},a.head.get=function(){return this.$head.pos},a.from.get=function(){return this.$from.pos},a.to.get=function(){return this.$to.pos},a.$from.get=function(){return this.ranges[0].$from},a.$to.get=function(){return this.ranges[0].$to},a.empty.get=function(){for(var t=this.ranges,e=0;e<t.length;e++)if(t[e].$from.pos!=t[e].$to.pos)return!1;return!0},s.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},s.prototype.replace=function(t,e){void 0===e&&(e=r["Slice"].empty);for(var n=e.content.lastChild,o=null,i=0;i<e.openEnd;i++)o=n,n=n.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var l=a[c],u=l.$from,p=l.$to,f=t.mapping.slice(s);t.replaceRange(f.map(u.pos),f.map(p.pos),c?r["Slice"].empty:e),0==c&&v(t,s,(n?n.isInline:o&&o.isTextblock)?-1:1)}},s.prototype.replaceWith=function(t,e){for(var n=t.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=t.mapping.slice(n),l=c.map(s.pos),u=c.map(a.pos);o?t.deleteRange(l,u):(t.replaceRangeWith(l,u,e),v(t,n,e.isInline?-1:1))}},s.findFrom=function(t,e,n){var r=t.parent.inlineContent?new l(t):m(t.node(0),t.parent,t.pos,t.index(),e,n);if(r)return r;for(var o=t.depth-1;o>=0;o--){var i=e<0?m(t.node(0),t.node(o),t.before(o+1),t.index(o),e,n):m(t.node(0),t.node(o),t.after(o+1),t.index(o)+1,e,n);if(i)return i}},s.near=function(t,e){return void 0===e&&(e=1),this.findFrom(t,e)||this.findFrom(t,-e)||new h(t.node(0))},s.atStart=function(t){return m(t,t,0,0,1)||new h(t)},s.atEnd=function(t){return m(t,t,t.content.size,t.childCount,-1)||new h(t)},s.fromJSON=function(t,e){if(!e||!e.type)throw new RangeError("Invalid input for Selection.fromJSON");var n=i[e.type];if(!n)throw new RangeError("No selection type "+e.type+" defined");return n.fromJSON(t,e)},s.jsonID=function(t,e){if(t in i)throw new RangeError("Duplicate use of selection JSON ID "+t);return i[t]=e,e.prototype.jsonID=t,e},s.prototype.getBookmark=function(){return l.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(s.prototype,a),s.prototype.visible=!0;var c=function(t,e){this.$from=t,this.$to=e},l=function(t){function e(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={$cursor:{configurable:!0}};return n.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.inlineContent?i:o,o)},e.prototype.replace=function(e,n){if(void 0===n&&(n=r["Slice"].empty),t.prototype.replace.call(this,e,n),n==r["Slice"].empty){var o=this.$from.marksAcross(this.$to);o&&e.ensureMarks(o)}},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor&&t.head==this.head},e.prototype.getBookmark=function(){return new u(this.anchor,this.head)},e.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.anchor||"number"!=typeof n.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},e.between=function(n,r,o){var i=n.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return n.parent.inlineContent||(0==i?n=r:(n=(t.findFrom(n,-o,!0)||t.findFrom(n,o,!0)).$anchor,n.pos<r.pos!=i<0&&(n=r))),new e(n,r)},Object.defineProperties(e.prototype,n),e}(s);s.jsonID("text",l);var u=function(t,e){this.anchor=t,this.head=e};u.prototype.map=function(t){return new u(t.map(this.anchor),t.map(this.head))},u.prototype.resolve=function(t){return l.between(t.resolve(this.anchor),t.resolve(this.head))};var p=function(t){function e(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=n.resolve(s);return i?t.near(a):new e(a)},e.prototype.content=function(){return new r["Slice"](r["Fragment"].from(this.node),0,0)},e.prototype.eq=function(t){return t instanceof e&&t.anchor==this.anchor},e.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},e.prototype.getBookmark=function(){return new f(this.anchor)},e.fromJSON=function(t,n){if("number"!=typeof n.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new e(t.resolve(n.anchor))},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(s);p.prototype.visible=!1,s.jsonID("node",p);var f=function(t){this.anchor=t};f.prototype.map=function(t){var e=t.mapResult(this.anchor),n=e.deleted,r=e.pos;return n?new u(r,r):new f(r)},f.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=e.nodeAfter;return n&&p.isSelectable(n)?new p(e):s.near(e)};var h=function(t){function e(e){t.call(this,e.resolve(0),e.resolve(e.content.size))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.replace=function(e,n){if(void 0===n&&(n=r["Slice"].empty),n==r["Slice"].empty){e.delete(0,e.doc.content.size);var o=t.atStart(e.doc);o.eq(e.selection)||e.setSelection(o)}else t.prototype.replace.call(this,e,n)},e.prototype.toJSON=function(){return{type:"all"}},e.fromJSON=function(t){return new e(t)},e.prototype.map=function(t){return new e(t)},e.prototype.eq=function(t){return t instanceof e},e.prototype.getBookmark=function(){return d},e}(s);s.jsonID("all",h);var d={map:function(){return this},resolve:function(t){return new h(t)}};function m(t,e,n,r,o,i){if(e.inlineContent)return l.create(t,n);for(var s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){var a=e.child(s);if(a.isAtom){if(!i&&p.isSelectable(a))return p.create(t,n-(o<0?a.nodeSize:0))}else{var c=m(t,a,n+o,o<0?a.childCount:0,o,i);if(c)return c}n+=a.nodeSize*o}}function v(t,e,n){var r=t.steps.length-1;if(!(r<e)){var i=t.steps[r];if(i instanceof o["c"]||i instanceof o["b"]){var a,c=t.mapping.maps[r];c.forEach((function(t,e,n,r){null==a&&(a=r)})),t.setSelection(s.near(t.doc.resolve(a),n))}}}var g=1,y=2,b=4,w=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|g)&~y,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&g)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=y,this},e.prototype.ensureMarks=function(t){return r["Mark"].sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},e.prototype.addStoredMark=function(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))},e.prototype.removeStoredMark=function(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))},n.storedMarksSet.get=function(){return(this.updated&y)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~y,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){return this.selection.replace(this,t),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection;return!1!==e&&(t=t.mark(this.storedMarks||(n.empty?n.$from.marks():n.$from.marksAcross(n.$to)||r["Mark"].none))),n.replaceWith(this,t),this},e.prototype.deleteSelection=function(){return this.selection.replace(this),this},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=this.storedMarks;if(!o){var i=this.doc.resolve(e);o=n==e?i.marks():i.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(e,n,r.text(t,o)),this.selection.empty||this.setSelection(s.near(this.selection.$to)),this},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){for(var t in this.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=b,this},n.scrolledIntoView.get=function(){return(this.updated&b)>0},Object.defineProperties(e.prototype,n),e}(o["d"]);function x(t,e){return e&&t?t.bind(e):t}var S=function(t,e,n){this.name=t,this.init=x(e.init,n),this.apply=x(e.apply,n)},k=[new S("doc",{init:function(t){return t.doc||t.schema.topNodeType.createAndFill()},apply:function(t){return t.doc}}),new S("selection",{init:function(t,e){return t.selection||s.atStart(e.doc)},apply:function(t){return t.selection}}),new S("storedMarks",{init:function(t){return t.storedMarks||null},apply:function(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],C=function(t,e){var n=this;this.schema=t,this.fields=k.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach((function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.spec.state&&n.fields.push(new S(t.key,t.spec.state,t))}))},O=function(t){this.config=t},_={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};_.schema.get=function(){return this.config.schema},_.plugins.get=function(){return this.config.plugins},O.prototype.apply=function(t){return this.applyTransaction(t).state},O.prototype.filterTransaction=function(t,e){void 0===e&&(e=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=e){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,t,this))return!1}return!0},O.prototype.applyTransaction=function(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var e=[t],n=this.applyInner(t),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,l=a<e.length&&s.spec.appendTransaction.call(s,a?e.slice(a):e,c,n);if(l&&n.filterTransaction(l,i)){if(l.setMeta("appendedTransaction",t),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:e.length}:{state:this,n:0})}e.push(l),n=n.applyInner(l),o=!0}r&&(r[i]={state:n,n:e.length})}}if(!o)return{state:n,transactions:e}}},O.prototype.applyInner=function(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var e=new O(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];e[o.name]=o.apply(t,this[o.name],this,e)}for(var i=0;i<M.length;i++)M[i](this,t,e);return e},_.tr.get=function(){return new w(this)},O.create=function(t){for(var e=new C(t.schema||t.doc.type.schema,t.plugins),n=new O(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},O.prototype.reconfigure=function(t){for(var e=new C(t.schema||this.schema,t.plugins),n=e.fields,r=new O(e),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(t,r)}return r},O.prototype.toJSON=function(t){var e={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(e.storedMarks=this.storedMarks.map((function(t){return t.toJSON()}))),t&&"object"==typeof t)for(var n in t){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=t[n],o=r.spec.state;o&&o.toJSON&&(e[n]=o.toJSON.call(r,this[r.key]))}return e},O.fromJSON=function(t,e,n){if(!e)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var o=new C(t.schema,t.plugins),i=new O(o);return o.fields.forEach((function(o){if("doc"==o.name)i.doc=r["Node"].fromJSON(t.schema,e.doc);else if("selection"==o.name)i.selection=s.fromJSON(i.doc,e.selection);else if("storedMarks"==o.name)e.storedMarks&&(i.storedMarks=e.storedMarks.map(t.schema.markFromJSON));else{if(n)for(var a in n){var c=n[a],l=c.spec.state;if(c.key==o.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,a))return void(i[o.name]=l.fromJSON.call(c,t,e[a],i))}i[o.name]=o.init(t,i)}})),i},O.addApplyListener=function(t){M.push(t)},O.removeApplyListener=function(t){var e=M.indexOf(t);e>-1&&M.splice(e,1)},Object.defineProperties(O.prototype,_);var M=[];function E(t,e,n){for(var r in t){var o=t[r];o instanceof Function?o=o.bind(e):"handleDOMEvents"==r&&(o=E(o,e,{})),n[r]=o}return n}var T=function(t){this.props={},t.props&&E(t.props,this,this.props),this.spec=t,this.key=t.key?t.key.key:A("plugin")};T.prototype.getState=function(t){return t[this.key]};var N=Object.create(null);function A(t){return t in N?t+"$"+ ++N[t]:(N[t]=0,t+"$")}var D=function(t){void 0===t&&(t="key"),this.key=A(t)};D.prototype.get=function(t){return t.config.pluginsByKey[this.key]},D.prototype.getState=function(t){return t[this.key]}},"55be":function(t,e,n){"use strict";n.r(e),n.d(e,"CellSelection",(function(){return R})),n.d(e,"TableMap",(function(){return m})),n.d(e,"__clipCells",(function(){return K})),n.d(e,"__insertCells",(function(){return Y})),n.d(e,"__pastedCells",(function(){return J})),n.d(e,"addColumn",(function(){return vt})),n.d(e,"addColumnAfter",(function(){return yt})),n.d(e,"addColumnBefore",(function(){return gt})),n.d(e,"addRow",(function(){return St})),n.d(e,"addRowAfter",(function(){return Ct})),n.d(e,"addRowBefore",(function(){return kt})),n.d(e,"cellAround",(function(){return x})),n.d(e,"colCount",(function(){return N})),n.d(e,"columnResizing",(function(){return Jt})),n.d(e,"columnResizingPluginKey",(function(){return Wt})),n.d(e,"deleteColumn",(function(){return wt})),n.d(e,"deleteRow",(function(){return _t})),n.d(e,"deleteTable",(function(){return Lt})),n.d(e,"findCell",(function(){return T})),n.d(e,"fixTables",(function(){return ft})),n.d(e,"fixTablesKey",(function(){return ut})),n.d(e,"goToNextCell",(function(){return $t})),n.d(e,"handlePaste",(function(){return it})),n.d(e,"inSameTable",(function(){return E})),n.d(e,"isInTable",(function(){return k})),n.d(e,"mergeCells",(function(){return Tt})),n.d(e,"moveCellForward",(function(){return M})),n.d(e,"nextCell",(function(){return A})),n.d(e,"removeColumn",(function(){return bt})),n.d(e,"removeRow",(function(){return Ot})),n.d(e,"rowIsHeader",(function(){return xt})),n.d(e,"selectedRect",(function(){return dt})),n.d(e,"selectionCell",(function(){return C})),n.d(e,"setCellAttr",(function(){return Dt})),n.d(e,"splitCell",(function(){return Nt})),n.d(e,"splitCellWithType",(function(){return At})),n.d(e,"tableEditing",(function(){return ie})),n.d(e,"tableEditingKey",(function(){return w})),n.d(e,"tableNodes",(function(){return q})),n.d(e,"toggleHeader",(function(){return Rt})),n.d(e,"toggleHeaderCell",(function(){return Ft})),n.d(e,"toggleHeaderColumn",(function(){return jt})),n.d(e,"toggleHeaderRow",(function(){return It})),n.d(e,"updateColumnsOnResize",(function(){return qt}));var r,o,i=n("5313"),s=n("304a"),a=n("7f06"),c=n("576a"),l=n("0ac0");if("undefined"!=typeof WeakMap){var u=new WeakMap;r=function(t){return u.get(t)},o=function(t,e){return u.set(t,e),e}}else{var p=[],f=10,h=0;r=function(t){for(var e=0;e<p.length;e+=2)if(p[e]==t)return p[e+1]},o=function(t,e){return h==f&&(h=0),p[h++]=t,p[h++]=e}}var d=function(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r},m=function(t,e,n,r){this.width=t,this.height=e,this.map=n,this.problems=r};function v(t){if("table"!=t.type.spec.tableRole)throw new RangeError("Not a table node: "+t.type.name);for(var e=g(t),n=t.childCount,r=[],o=0,i=null,s=[],a=0,c=e*n;a<c;a++)r[a]=0;for(var l=0,u=0;l<n;l++){var p=t.child(l);u++;for(var f=0;;f++){while(o<r.length&&0!=r[o])o++;if(f==p.childCount)break;for(var h=p.child(f),d=h.attrs,v=d.colspan,b=d.rowspan,w=d.colwidth,x=0;x<b;x++){if(x+l>=n){(i||(i=[])).push({type:"overlong_rowspan",pos:u,n:b-x});break}for(var S=o+x*e,k=0;k<v;k++){0==r[S+k]?r[S+k]=u:(i||(i=[])).push({type:"collision",row:l,pos:u,n:v-k});var C=w&&w[k];if(C){var O=(S+k)%e*2,_=s[O];null==_||_!=C&&1==s[O+1]?(s[O]=C,s[O+1]=1):_==C&&s[O+1]++}}}o+=v,u+=h.nodeSize}var M=(l+1)*e,E=0;while(o<M)0==r[o++]&&E++;E&&(i||(i=[])).push({type:"missing",row:l,n:E}),u++}for(var T=new m(e,n,r,i),N=!1,A=0;!N&&A<s.length;A+=2)null!=s[A]&&s[A+1]<n&&(N=!0);return N&&y(T,s,t),T}function g(t){for(var e=-1,n=!1,r=0;r<t.childCount;r++){var o=t.child(r),i=0;if(n)for(var s=0;s<r;s++)for(var a=t.child(s),c=0;c<a.childCount;c++){var l=a.child(c);s+l.attrs.rowspan>r&&(i+=l.attrs.colspan)}for(var u=0;u<o.childCount;u++){var p=o.child(u);i+=p.attrs.colspan,p.attrs.rowspan>1&&(n=!0)}-1==e?e=i:e!=i&&(e=Math.max(e,i))}return e}function y(t,e,n){t.problems||(t.problems=[]);for(var r=0,o={};r<t.map.length;r++){var i=t.map[r];if(!o[i]){o[i]=!0;for(var s=n.nodeAt(i),a=null,c=0;c<s.attrs.colspan;c++){var l=(r+c)%t.width,u=e[2*l];null==u||s.attrs.colwidth&&s.attrs.colwidth[c]==u||((a||(a=b(s.attrs)))[c]=u)}a&&t.problems.unshift({type:"colwidth mismatch",pos:i,colwidth:a})}}}function b(t){if(t.colwidth)return t.colwidth.slice();for(var e=[],n=0;n<t.colspan;n++)e.push(0);return e}m.prototype.findCell=function(t){for(var e=0;e<this.map.length;e++){var n=this.map[e];if(n==t){for(var r=e%this.width,o=e/this.width|0,i=r+1,s=o+1,a=1;i<this.width&&this.map[e+a]==n;a++)i++;for(var c=1;s<this.height&&this.map[e+this.width*c]==n;c++)s++;return new d(r,o,i,s)}}throw new RangeError("No cell with offset "+t+" found")},m.prototype.colCount=function(t){for(var e=0;e<this.map.length;e++)if(this.map[e]==t)return e%this.width;throw new RangeError("No cell with offset "+t+" found")},m.prototype.nextCell=function(t,e,n){var r=this.findCell(t),o=r.left,i=r.right,s=r.top,a=r.bottom;return"horiz"==e?(n<0?0==o:i==this.width)?null:this.map[s*this.width+(n<0?o-1:i)]:(n<0?0==s:a==this.height)?null:this.map[o+this.width*(n<0?s-1:a)]},m.prototype.rectBetween=function(t,e){var n=this.findCell(t),r=n.left,o=n.right,i=n.top,s=n.bottom,a=this.findCell(e),c=a.left,l=a.right,u=a.top,p=a.bottom;return new d(Math.min(r,c),Math.min(i,u),Math.max(o,l),Math.max(s,p))},m.prototype.cellsInRect=function(t){for(var e=[],n={},r=t.top;r<t.bottom;r++)for(var o=t.left;o<t.right;o++){var i=r*this.width+o,s=this.map[i];n[s]||(n[s]=!0,o==t.left&&o&&this.map[i-1]==s||r==t.top&&r&&this.map[i-this.width]==s||e.push(s))}return e},m.prototype.positionAt=function(t,e,n){for(var r=0,o=0;;r++){var i=o+n.child(r).nodeSize;if(r==t){var s=e+t*this.width,a=(t+1)*this.width;while(s<a&&this.map[s]<o)s++;return s==a?i-1:this.map[s]}o=i}},m.get=function(t){return r(t)||o(t,v(t))};var w=new i["PluginKey"]("selectingCells");function x(t){for(var e=t.depth-1;e>0;e--)if("row"==t.node(e).type.spec.tableRole)return t.node(0).resolve(t.before(e+1));return null}function S(t){for(var e=t.depth;e>0;e--){var n=t.node(e).type.spec.tableRole;if("cell"===n||"header_cell"===n)return t.node(e)}return null}function k(t){for(var e=t.selection.$head,n=e.depth;n>0;n--)if("row"==e.node(n).type.spec.tableRole)return!0;return!1}function C(t){var e=t.selection;return e.$anchorCell?e.$anchorCell.pos>e.$headCell.pos?e.$anchorCell:e.$headCell:e.node&&"cell"==e.node.type.spec.tableRole?e.$anchor:x(e.$head)||O(e.$head)}function O(t){for(var e=t.nodeAfter,n=t.pos;e;e=e.firstChild,n++){var r=e.type.spec.tableRole;if("cell"==r||"header_cell"==r)return t.doc.resolve(n)}for(var o=t.nodeBefore,i=t.pos;o;o=o.lastChild,i--){var s=o.type.spec.tableRole;if("cell"==s||"header_cell"==s)return t.doc.resolve(i-o.nodeSize)}}function _(t){return"row"==t.parent.type.spec.tableRole&&t.nodeAfter}function M(t){return t.node(0).resolve(t.pos+t.nodeAfter.nodeSize)}function E(t,e){return t.depth==e.depth&&t.pos>=e.start(-1)&&t.pos<=e.end(-1)}function T(t){return m.get(t.node(-1)).findCell(t.pos-t.start(-1))}function N(t){return m.get(t.node(-1)).colCount(t.pos-t.start(-1))}function A(t,e,n){var r=t.start(-1),o=m.get(t.node(-1)),i=o.nextCell(t.pos-r,e,n);return null==i?null:t.node(0).resolve(r+i)}function D(t,e,n){var r={};for(var o in t)r[o]=t[o];return r[e]=n,r}function P(t,e,n){void 0===n&&(n=1);var r=D(t,"colspan",t.colspan-n);return r.colwidth&&(r.colwidth=r.colwidth.slice(),r.colwidth.splice(e,n),r.colwidth.some((function(t){return t>0}))||(r.colwidth=null)),r}function z(t,e,n){void 0===n&&(n=1);var r=D(t,"colspan",t.colspan+n);if(r.colwidth){r.colwidth=r.colwidth.slice();for(var o=0;o<n;o++)r.colwidth.splice(e,0,0)}return r}var R=function(t){function e(e,n){void 0===n&&(n=e);var r=e.node(-1),o=m.get(r),s=e.start(-1),a=o.rectBetween(e.pos-s,n.pos-s),c=e.node(0),l=o.cellsInRect(a).filter((function(t){return t!=n.pos-s}));l.unshift(n.pos-s);var u=l.map((function(t){var e=r.nodeAt(t),n=t+s+1;return new i["SelectionRange"](c.resolve(n),c.resolve(n+e.content.size))}));t.call(this,u[0].$from,u[0].$to,u),this.$anchorCell=e,this.$headCell=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(t,n){var r=t.resolve(n.map(this.$anchorCell.pos)),o=t.resolve(n.map(this.$headCell.pos));if(_(r)&&_(o)&&E(r,o)){var s=this.$anchorCell.node(-1)!=r.node(-1);return s&&this.isRowSelection()?e.rowSelection(r,o):s&&this.isColSelection()?e.colSelection(r,o):new e(r,o)}return i["TextSelection"].between(r,o)},e.prototype.content=function(){for(var t=this.$anchorCell.node(-1),e=m.get(t),n=this.$anchorCell.start(-1),r=e.rectBetween(this.$anchorCell.pos-n,this.$headCell.pos-n),o={},i=[],a=r.top;a<r.bottom;a++){for(var c=[],l=a*e.width+r.left,u=r.left;u<r.right;u++,l++){var p=e.map[l];if(!o[p]){o[p]=!0;var f=e.findCell(p),h=t.nodeAt(p),d=r.left-f.left,v=f.right-r.right;if(d>0||v>0){var g=h.attrs;d>0&&(g=P(g,0,d)),v>0&&(g=P(g,g.colspan-v,v)),h=f.left<r.left?h.type.createAndFill(g):h.type.create(g,h.content)}if(f.top<r.top||f.bottom>r.bottom){var y=D(h.attrs,"rowspan",Math.min(f.bottom,r.bottom)-Math.max(f.top,r.top));h=f.top<r.top?h.type.createAndFill(y):h.type.create(y,h.content)}c.push(h)}}i.push(t.child(a).copy(s["Fragment"].from(c)))}var b=this.isColSelection()&&this.isRowSelection()?t:i;return new s["Slice"](s["Fragment"].from(b),1,1)},e.prototype.replace=function(e,n){void 0===n&&(n=s["Slice"].empty);for(var r=e.steps.length,o=this.ranges,i=0;i<o.length;i++){var a=o[i],c=a.$from,l=a.$to,u=e.mapping.slice(r);e.replace(u.map(c.pos),u.map(l.pos),i?s["Slice"].empty:n)}var p=t.findFrom(e.doc.resolve(e.mapping.slice(r).map(this.to)),-1);p&&e.setSelection(p)},e.prototype.replaceWith=function(t,e){this.replace(t,new s["Slice"](s["Fragment"].from(e),0,0))},e.prototype.forEachCell=function(t){for(var e=this.$anchorCell.node(-1),n=m.get(e),r=this.$anchorCell.start(-1),o=n.cellsInRect(n.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r)),i=0;i<o.length;i++)t(e.nodeAt(o[i]),r+o[i])},e.prototype.isColSelection=function(){var t=this.$anchorCell.index(-1),e=this.$headCell.index(-1);if(Math.min(t,e)>0)return!1;var n=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=e+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(n,r)==this.$headCell.node(-1).childCount},e.colSelection=function(t,n){void 0===n&&(n=t);var r=m.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.top<=s.top?(i.top>0&&(t=a.resolve(o+r.map[i.left])),s.bottom<r.height&&(n=a.resolve(o+r.map[r.width*(r.height-1)+s.right-1]))):(s.top>0&&(n=a.resolve(o+r.map[s.left])),i.bottom<r.height&&(t=a.resolve(o+r.map[r.width*(r.height-1)+i.right-1]))),new e(t,n)},e.prototype.isRowSelection=function(){var t=m.get(this.$anchorCell.node(-1)),e=this.$anchorCell.start(-1),n=t.colCount(this.$anchorCell.pos-e),r=t.colCount(this.$headCell.pos-e);if(Math.min(n,r)>0)return!1;var o=n+this.$anchorCell.nodeAfter.attrs.colspan,i=r+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,i)==t.width},e.prototype.eq=function(t){return t instanceof e&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos},e.rowSelection=function(t,n){void 0===n&&(n=t);var r=m.get(t.node(-1)),o=t.start(-1),i=r.findCell(t.pos-o),s=r.findCell(n.pos-o),a=t.node(0);return i.left<=s.left?(i.left>0&&(t=a.resolve(o+r.map[i.top*r.width])),s.right<r.width&&(n=a.resolve(o+r.map[r.width*(s.top+1)-1]))):(s.left>0&&(n=a.resolve(o+r.map[s.top*r.width])),i.right<r.width&&(t=a.resolve(o+r.map[r.width*(i.top+1)-1]))),new e(t,n)},e.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},e.fromJSON=function(t,n){return new e(t.resolve(n.anchor),t.resolve(n.head))},e.create=function(t,n,r){return void 0===r&&(r=n),new e(t.resolve(n),t.resolve(r))},e.prototype.getBookmark=function(){return new I(this.$anchorCell.pos,this.$headCell.pos)},e}(i["Selection"]);R.prototype.visible=!1,i["Selection"].jsonID("cell",R);var I=function(t,e){this.anchor=t,this.head=e};function j(t){if(!(t.selection instanceof R))return null;var e=[];return t.selection.forEachCell((function(t,n){e.push(c["a"].node(n,n+t.nodeSize,{class:"selectedCell"}))})),c["b"].create(t.doc,e)}function F(t){var e=t.$from,n=t.$to;if(e.pos==n.pos||e.pos<e.pos-6)return!1;for(var r=e.pos,o=n.pos,i=e.depth;i>=0;i--,r++)if(e.after(i+1)<e.end(i))break;for(var s=n.depth;s>=0;s--,o--)if(n.before(s+1)>n.start(s))break;return r==o&&/row|table/.test(e.node(i).type.spec.tableRole)}function B(t){for(var e,n,r=t.$from,o=t.$to,i=r.depth;i>0;i--){var s=r.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){e=s;break}}for(var a=o.depth;a>0;a--){var c=o.node(a);if("cell"===c.type.spec.tableRole||"header_cell"===c.type.spec.tableRole){n=c;break}}return e!==n&&0===o.parentOffset}function $(t,e,n){var r,o,s=(e||t).selection,a=(e||t).doc;if(s instanceof i["NodeSelection"]&&(o=s.node.type.spec.tableRole)){if("cell"==o||"header_cell"==o)r=R.create(a,s.from);else if("row"==o){var c=a.resolve(s.from+1);r=R.rowSelection(c,c)}else if(!n){var l=m.get(s.node),u=s.from+1,p=u+l.map[l.width*l.height-1];r=R.create(a,u+1,p)}}else s instanceof i["TextSelection"]&&F(s)?r=i["TextSelection"].create(a,s.from):s instanceof i["TextSelection"]&&B(s)&&(r=i["TextSelection"].create(a,s.$from.start(),s.$from.end()));return r&&(e||(e=t.tr)).setSelection(r),e}function L(t,e){var n=t.getAttribute("data-colwidth"),r=n&&/^\d+(,\d+)*$/.test(n)?n.split(",").map((function(t){return Number(t)})):null,o=Number(t.getAttribute("colspan")||1),i={colspan:o,rowspan:Number(t.getAttribute("rowspan")||1),colwidth:r&&r.length==o?r:null};for(var s in e){var a=e[s].getFromDOM,c=a&&a(t);null!=c&&(i[s]=c)}return i}function V(t,e){var n={};for(var r in 1!=t.attrs.colspan&&(n.colspan=t.attrs.colspan),1!=t.attrs.rowspan&&(n.rowspan=t.attrs.rowspan),t.attrs.colwidth&&(n["data-colwidth"]=t.attrs.colwidth.join(",")),e){var o=e[r].setDOMAttr;o&&o(t.attrs[r],n)}return n}function q(t){var e=t.cellAttributes||{},n={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var r in e)n[r]={default:e[r].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:t.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:t.cellContent,attrs:n,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(t){return L(t,e)}}],toDOM:function(t){return["td",V(t,e),0]}},table_header:{content:t.cellContent,attrs:n,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(t){return L(t,e)}}],toDOM:function(t){return["th",V(t,e),0]}}}}function W(t){var e=t.cached.tableNodeTypes;if(!e)for(var n in e=t.cached.tableNodeTypes={},t.nodes){var r=t.nodes[n],o=r.spec.tableRole;o&&(e[o]=r)}return e}function J(t){if(!t.size)return null;var e=t.content,n=t.openStart,r=t.openEnd;while(1==e.childCount&&(n>0&&r>0||"table"==e.firstChild.type.spec.tableRole))n--,r--,e=e.firstChild.content;var o=e.firstChild,i=o.type.spec.tableRole,a=o.type.schema,c=[];if("row"==i)for(var l=0;l<e.childCount;l++){var u=e.child(l).content,p=l?0:Math.max(0,n-1),f=l<e.childCount-1?0:Math.max(0,r-1);(p||f)&&(u=U(W(a).row,new s["Slice"](u,p,f)).content),c.push(u)}else{if("cell"!=i&&"header_cell"!=i)return null;c.push(n||r?U(W(a).row,new s["Slice"](e,n,r)).content:e)}return H(a,c)}function H(t,e){for(var n=[],r=0;r<e.length;r++)for(var o=e[r],i=o.childCount-1;i>=0;i--)for(var a=o.child(i).attrs,c=a.rowspan,l=a.colspan,u=r;u<r+c;u++)n[u]=(n[u]||0)+l;for(var p=0,f=0;f<n.length;f++)p=Math.max(p,n[f]);for(var h=0;h<n.length;h++)if(h>=e.length&&e.push(s["Fragment"].empty),n[h]<p){for(var d=W(t).cell.createAndFill(),m=[],v=n[h];v<p;v++)m.push(d);e[h]=e[h].append(s["Fragment"].from(m))}return{height:e.length,width:p,rows:e}}function U(t,e){var n=t.createAndFill(),r=new l["d"](n).replace(0,n.content.size,e);return r.doc}function K(t,e,n){var r=t.width,o=t.height,i=t.rows;if(r!=e){for(var a=[],c=[],l=0;l<i.length;l++){for(var u=i[l],p=[],f=a[l]||0,h=0;f<e;h++){var d=u.child(h%u.childCount);f+d.attrs.colspan>e&&(d=d.type.create(P(d.attrs,d.attrs.colspan,f+d.attrs.colspan-e),d.content)),p.push(d),f+=d.attrs.colspan;for(var m=1;m<d.attrs.rowspan;m++)a[l+m]=(a[l+m]||0)+d.attrs.colspan}c.push(s["Fragment"].from(p))}i=c,r=e}if(o!=n){for(var v=[],g=0,y=0;g<n;g++,y++){for(var b=[],w=i[y%o],x=0;x<w.childCount;x++){var S=w.child(x);g+S.attrs.rowspan>n&&(S=S.type.create(D(S.attrs,"rowspan",n-S.attrs.rowspan),S.content)),b.push(S)}v.push(s["Fragment"].from(b))}i=v,o=n}return{width:r,height:o,rows:i}}function G(t,e,n,r,o,i,a){var c,l,u=t.doc.type.schema,p=W(u);if(o>e.width)for(var f=0,h=0;f<e.height;f++){var d=n.child(f);h+=d.nodeSize;var m=[],v=void 0;v=null==d.lastChild||d.lastChild.type==p.cell?c||(c=p.cell.createAndFill()):l||(l=p.header_cell.createAndFill());for(var g=e.width;g<o;g++)m.push(v);t.insert(t.mapping.slice(a).map(h-1+r),m)}if(i>e.height){for(var y=[],b=0,w=(e.height-1)*e.width;b<Math.max(e.width,o);b++){var x=!(b>=e.width)&&n.nodeAt(e.map[w+b]).type==p.header_cell;y.push(x?l||(l=p.header_cell.createAndFill()):c||(c=p.cell.createAndFill()))}for(var S=p.row.create(null,s["Fragment"].from(y)),k=[],C=e.height;C<i;C++)k.push(S);t.insert(t.mapping.slice(a).map(r+n.nodeSize-2),k)}return!(!c&&!l)}function X(t,e,n,r,o,i,s,a){if(0==s||s==e.height)return!1;for(var c=!1,l=o;l<i;l++){var u=s*e.width+l,p=e.map[u];if(e.map[u-e.width]==p){c=!0;var f=n.nodeAt(p),h=e.findCell(p),d=h.top,m=h.left;t.setNodeMarkup(t.mapping.slice(a).map(p+r),null,D(f.attrs,"rowspan",s-d)),t.insert(t.mapping.slice(a).map(e.positionAt(s,m,n)),f.type.createAndFill(D(f.attrs,"rowspan",d+f.attrs.rowspan-s))),l+=f.attrs.colspan-1}}return c}function Z(t,e,n,r,o,i,s,a){if(0==s||s==e.width)return!1;for(var c=!1,l=o;l<i;l++){var u=l*e.width+s,p=e.map[u];if(e.map[u-1]==p){c=!0;var f=n.nodeAt(p),h=e.colCount(p),d=t.mapping.slice(a).map(p+r);t.setNodeMarkup(d,null,P(f.attrs,s-h,f.attrs.colspan-(s-h))),t.insert(d+f.nodeSize,f.type.createAndFill(P(f.attrs,0,s-h))),l+=f.attrs.rowspan-1}}return c}function Y(t,e,n,r,o){var i=n?t.doc.nodeAt(n-1):t.doc,a=m.get(i),c=r.top,l=r.left,u=l+o.width,p=c+o.height,f=t.tr,h=0;function d(){i=n?f.doc.nodeAt(n-1):f.doc,a=m.get(i),h=f.mapping.maps.length}G(f,a,i,n,u,p,h)&&d(),X(f,a,i,n,l,u,c,h)&&d(),X(f,a,i,n,l,u,p,h)&&d(),Z(f,a,i,n,c,p,l,h)&&d(),Z(f,a,i,n,c,p,u,h)&&d();for(var v=c;v<p;v++){var g=a.positionAt(v,l,i),y=a.positionAt(v,u,i);f.replace(f.mapping.slice(h).map(g+n),f.mapping.slice(h).map(y+n),new s["Slice"](o.rows[v-c],0,0))}d(),f.setSelection(new R(f.doc.resolve(n+a.positionAt(c,l,i)),f.doc.resolve(n+a.positionAt(p-1,u-1,i)))),e(f)}I.prototype.map=function(t){return new I(t.map(this.anchor),t.map(this.head))},I.prototype.resolve=function(t){var e=t.resolve(this.anchor),n=t.resolve(this.head);return"row"==e.parent.type.spec.tableRole&&"row"==n.parent.type.spec.tableRole&&e.index()<e.parent.childCount&&n.index()<n.parent.childCount&&E(e,n)?new R(e,n):i["Selection"].near(n,1)};var Q=Object(a["a"])({ArrowLeft:et("horiz",-1),ArrowRight:et("horiz",1),ArrowUp:et("vert",-1),ArrowDown:et("vert",1),"Shift-ArrowLeft":nt("horiz",-1),"Shift-ArrowRight":nt("horiz",1),"Shift-ArrowUp":nt("vert",-1),"Shift-ArrowDown":nt("vert",1),Backspace:rt,"Mod-Backspace":rt,Delete:rt,"Mod-Delete":rt});function tt(t,e,n){return!n.eq(t.selection)&&(e&&e(t.tr.setSelection(n).scrollIntoView()),!0)}function et(t,e){return function(n,r,o){var s=n.selection;if(s instanceof R)return tt(n,r,i["Selection"].near(s.$headCell,e));if("horiz"!=t&&!s.empty)return!1;var a=at(o,t,e);if(null==a)return!1;if("horiz"==t)return tt(n,r,i["Selection"].near(n.doc.resolve(s.head+e),e));var c,l=n.doc.resolve(a),u=A(l,t,e);return c=u?i["Selection"].near(u,1):e<0?i["Selection"].near(n.doc.resolve(l.before(-1)),-1):i["Selection"].near(n.doc.resolve(l.after(-1)),1),tt(n,r,c)}}function nt(t,e){return function(n,r,o){var i=n.selection;if(!(i instanceof R)){var s=at(o,t,e);if(null==s)return!1;i=new R(n.doc.resolve(s))}var a=A(i.$headCell,t,e);return!!a&&tt(n,r,new R(i.$anchorCell,a))}}function rt(t,e){var n=t.selection;if(!(n instanceof R))return!1;if(e){var r=t.tr,o=W(t.schema).cell.createAndFill().content;n.forEachCell((function(t,e){t.content.eq(o)||r.replace(r.mapping.map(e+1),r.mapping.map(e+t.nodeSize-1),new s["Slice"](o,0,0))})),r.docChanged&&e(r)}return!0}function ot(t,e){var n=t.state.doc,r=x(n.resolve(e));return!!r&&(t.dispatch(t.state.tr.setSelection(new R(r))),!0)}function it(t,e,n){if(!k(t.state))return!1;var r=J(n),o=t.state.selection;if(o instanceof R){r||(r={width:1,height:1,rows:[s["Fragment"].from(U(W(t.state.schema).cell,n))]});var i=o.$anchorCell.node(-1),a=o.$anchorCell.start(-1),c=m.get(i).rectBetween(o.$anchorCell.pos-a,o.$headCell.pos-a);return r=K(r,c.right-c.left,c.bottom-c.top),Y(t.state,t.dispatch,a,c,r),!0}if(r){var l=C(t.state),u=l.start(-1);return Y(t.state,t.dispatch,u,m.get(l.node(-1)).findCell(l.pos-u),r),!0}return!1}function st(t,e){if(!e.ctrlKey&&!e.metaKey){var n,r=ct(t,e.target);if(e.shiftKey&&t.state.selection instanceof R)o(t.state.selection.$anchorCell,e),e.preventDefault();else if(e.shiftKey&&r&&null!=(n=x(t.state.selection.$anchor))&&lt(t,e).pos!=n.pos)o(n,e),e.preventDefault();else if(!r)return;t.root.addEventListener("mouseup",i),t.root.addEventListener("dragstart",i),t.root.addEventListener("mousemove",s)}function o(e,n){var r=lt(t,n),o=null==w.getState(t.state);if(!r||!E(e,r)){if(!o)return;r=e}var i=new R(e,r);if(o||!t.state.selection.eq(i)){var s=t.state.tr.setSelection(i);o&&s.setMeta(w,e.pos),t.dispatch(s)}}function i(){t.root.removeEventListener("mouseup",i),t.root.removeEventListener("dragstart",i),t.root.removeEventListener("mousemove",s),null!=w.getState(t.state)&&t.dispatch(t.state.tr.setMeta(w,-1))}function s(n){var s,a=w.getState(t.state);if(null!=a)s=t.state.doc.resolve(a);else if(ct(t,n.target)!=r&&(s=lt(t,e),!s))return i();s&&o(s,n)}}function at(t,e,n){if(!(t.state.selection instanceof i["TextSelection"]))return null;for(var r=t.state.selection,o=r.$head,s=o.depth-1;s>=0;s--){var a=o.node(s),c=n<0?o.index(s):o.indexAfter(s);if(c!=(n<0?0:a.childCount))return null;if("cell"==a.type.spec.tableRole||"header_cell"==a.type.spec.tableRole){var l=o.before(s),u="vert"==e?n>0?"down":"up":n>0?"right":"left";return t.endOfTextblock(u)?l:null}}return null}function ct(t,e){for(;e&&e!=t.dom;e=e.parentNode)if("TD"==e.nodeName||"TH"==e.nodeName)return e}function lt(t,e){var n=t.posAtCoords({left:e.clientX,top:e.clientY});return n&&n?x(t.state.doc.resolve(n.pos)):null}var ut=new i["PluginKey"]("fix-tables");function pt(t,e,n,r){var o=t.childCount,i=e.childCount;t:for(var s=0,a=0;s<i;s++){for(var c=e.child(s),l=a,u=Math.min(o,s+3);l<u;l++)if(t.child(l)==c){a=l+1,n+=c.nodeSize;continue t}r(c,n),a<o&&t.child(a).sameMarkup(c)?pt(t.child(a),c,n+1,r):c.nodesBetween(0,c.content.size,r,n+1),n+=c.nodeSize}}function ft(t,e){var n,r=function(e,r){"table"==e.type.spec.tableRole&&(n=ht(t,e,r,n))};return e?e.doc!=t.doc&&pt(e.doc,t.doc,0,r):t.doc.descendants(r),n}function ht(t,e,n,r){var o=m.get(e);if(!o.problems)return r;r||(r=t.tr);for(var i,s,a=[],c=0;c<o.height;c++)a.push(0);for(var l=0;l<o.problems.length;l++){var u=o.problems[l];if("collision"==u.type){for(var p=e.nodeAt(u.pos),f=0;f<p.attrs.rowspan;f++)a[u.row+f]+=u.n;r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,P(p.attrs,p.attrs.colspan-u.n,u.n))}else if("missing"==u.type)a[u.row]+=u.n;else if("overlong_rowspan"==u.type){var h=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,D(h.attrs,"rowspan",h.attrs.rowspan-u.n))}else if("colwidth mismatch"==u.type){var d=e.nodeAt(u.pos);r.setNodeMarkup(r.mapping.map(n+1+u.pos),null,D(d.attrs,"colwidth",u.colwidth))}}for(var v=0;v<a.length;v++)a[v]&&(null==i&&(i=v),s=v);for(var g=0,y=n+1;g<o.height;g++){var b=e.child(g),w=y+b.nodeSize,x=a[g];if(x>0){var S="cell";b.firstChild&&(S=b.firstChild.type.spec.tableRole);for(var k=[],C=0;C<x;C++)k.push(W(t.schema)[S].createAndFill());var O=0!=g&&i!=g-1||s!=g?w-1:y+1;r.insert(r.mapping.map(O),k)}y=w}return r.setMeta(ut,{fixTables:!0})}function dt(t){var e,n=t.selection,r=C(t),o=r.node(-1),i=r.start(-1),s=m.get(o);return e=n instanceof R?s.rectBetween(n.$anchorCell.pos-i,n.$headCell.pos-i):s.findCell(r.pos-i),e.tableStart=i,e.map=s,e.table=o,e}function mt(t,e,n){for(var r=W(e.type.schema).header_cell,o=0;o<t.height;o++)if(e.nodeAt(t.map[n+o*t.width]).type!=r)return!1;return!0}function vt(t,e,n){var r=e.map,o=e.tableStart,i=e.table,s=n>0?-1:0;mt(r,i,n+s)&&(s=0==n||n==r.width?null:0);for(var a=0;a<r.height;a++){var c=a*r.width+n;if(n>0&&n<r.width&&r.map[c-1]==r.map[c]){var l=r.map[c],u=i.nodeAt(l);t.setNodeMarkup(t.mapping.map(o+l),null,z(u.attrs,n-r.colCount(l))),a+=u.attrs.rowspan-1}else{var p=null==s?W(i.type.schema).cell:i.nodeAt(r.map[c+s]).type,f=r.positionAt(a,n,i);t.insert(t.mapping.map(o+f),p.createAndFill())}}return t}function gt(t,e){if(!k(t))return!1;if(e){var n=dt(t);e(vt(t.tr,n,n.left))}return!0}function yt(t,e){if(!k(t))return!1;if(e){var n=dt(t);e(vt(t.tr,n,n.right))}return!0}function bt(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=t.mapping.maps.length,a=0;a<r.height;){var c=a*r.width+n,l=r.map[c],u=o.nodeAt(l);if(n>0&&r.map[c-1]==l||n<r.width-1&&r.map[c+1]==l)t.setNodeMarkup(t.mapping.slice(s).map(i+l),null,P(u.attrs,n-r.colCount(l)));else{var p=t.mapping.slice(s).map(i+l);t.delete(p,p+u.nodeSize)}a+=u.attrs.rowspan}}function wt(t,e){if(!k(t))return!1;if(e){var n=dt(t),r=t.tr;if(0==n.left&&n.right==n.map.width)return!1;for(var o=n.right-1;;o--){if(bt(r,n,o),o==n.left)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=m.get(n.table)}e(r)}return!0}function xt(t,e,n){for(var r=W(e.type.schema).header_cell,o=0;o<t.width;o++)if(e.nodeAt(t.map[o+n*t.width]).type!=r)return!1;return!0}function St(t,e,n){for(var r=e.map,o=e.tableStart,i=e.table,s=o,a=0;a<n;a++)s+=i.child(a).nodeSize;var c=[],l=n>0?-1:0;xt(r,i,n+l)&&(l=0==n||n==r.height?null:0);for(var u=0,p=r.width*n;u<r.width;u++,p++)if(n>0&&n<r.height&&r.map[p]==r.map[p-r.width]){var f=r.map[p],h=i.nodeAt(f).attrs;t.setNodeMarkup(o+f,null,D(h,"rowspan",h.rowspan+1)),u+=h.colspan-1}else{var d=null==l?W(i.type.schema).cell:i.nodeAt(r.map[p+l*r.width]).type;c.push(d.createAndFill())}return t.insert(s,W(i.type.schema).row.create(null,c)),t}function kt(t,e){if(!k(t))return!1;if(e){var n=dt(t);e(St(t.tr,n,n.top))}return!0}function Ct(t,e){if(!k(t))return!1;if(e){var n=dt(t);e(St(t.tr,n,n.bottom))}return!0}function Ot(t,e,n){for(var r=e.map,o=e.table,i=e.tableStart,s=0,a=0;a<n;a++)s+=o.child(a).nodeSize;var c=s+o.child(n).nodeSize,l=t.mapping.maps.length;t.delete(s+i,c+i);for(var u=0,p=n*r.width;u<r.width;u++,p++){var f=r.map[p];if(n>0&&f==r.map[p-r.width]){var h=o.nodeAt(f).attrs;t.setNodeMarkup(t.mapping.slice(l).map(f+i),null,D(h,"rowspan",h.rowspan-1)),u+=h.colspan-1}else if(n<r.width&&f==r.map[p+r.width]){var d=o.nodeAt(f),m=d.type.create(D(d.attrs,"rowspan",d.attrs.rowspan-1),d.content),v=r.positionAt(n+1,u,o);t.insert(t.mapping.slice(l).map(i+v),m),u+=d.attrs.colspan-1}}}function _t(t,e){if(!k(t))return!1;if(e){var n=dt(t),r=t.tr;if(0==n.top&&n.bottom==n.map.height)return!1;for(var o=n.bottom-1;;o--){if(Ot(r,n,o),o==n.top)break;n.table=n.tableStart?r.doc.nodeAt(n.tableStart-1):r.doc,n.map=m.get(n.table)}e(r)}return!0}function Mt(t){var e=t.content;return 1==e.childCount&&e.firstChild.isTextblock&&0==e.firstChild.childCount}function Et(t,e){for(var n=t.width,r=t.height,o=t.map,i=e.top*n+e.left,s=i,a=(e.bottom-1)*n+e.left,c=i+(e.right-e.left-1),l=e.top;l<e.bottom;l++){if(e.left>0&&o[s]==o[s-1]||e.right<n&&o[c]==o[c+1])return!0;s+=n,c+=n}for(var u=e.left;u<e.right;u++){if(e.top>0&&o[i]==o[i-n]||e.bottom<r&&o[a]==o[a+n])return!0;i++,a++}return!1}function Tt(t,e){var n=t.selection;if(!(n instanceof R)||n.$anchorCell.pos==n.$headCell.pos)return!1;var r=dt(t),o=r.map;if(Et(o,r))return!1;if(e){for(var i,a,c=t.tr,l={},u=s["Fragment"].empty,p=r.top;p<r.bottom;p++)for(var f=r.left;f<r.right;f++){var h=o.map[p*o.width+f],d=r.table.nodeAt(h);if(!l[h])if(l[h]=!0,null==i)i=h,a=d;else{Mt(d)||(u=u.append(d.content));var m=c.mapping.map(h+r.tableStart);c.delete(m,m+d.nodeSize)}}if(c.setNodeMarkup(i+r.tableStart,null,D(z(a.attrs,a.attrs.colspan,r.right-r.left-a.attrs.colspan),"rowspan",r.bottom-r.top)),u.size){var v=i+1+a.content.size,g=Mt(a)?i+1:v;c.replaceWith(g+r.tableStart,v+r.tableStart,u)}c.setSelection(new R(c.doc.resolve(i+r.tableStart))),e(c)}return!0}function Nt(t,e){var n=W(t.schema);return At((function(t){var e=t.node;return n[e.type.spec.tableRole]}))(t,e)}function At(t){return function(e,n){var r,o,i=e.selection;if(i instanceof R){if(i.$anchorCell.pos!=i.$headCell.pos)return!1;r=i.$anchorCell.nodeAfter,o=i.$anchorCell.pos}else{if(r=S(i.$from),!r)return!1;o=x(i.$from).pos}if(1==r.attrs.colspan&&1==r.attrs.rowspan)return!1;if(n){var s=r.attrs,a=[],c=s.colwidth;s.rowspan>1&&(s=D(s,"rowspan",1)),s.colspan>1&&(s=D(s,"colspan",1));for(var l,u=dt(e),p=e.tr,f=0;f<u.right-u.left;f++)a.push(c?D(s,"colwidth",c&&c[f]?[c[f]]:null):s);for(var h=u.top;h<u.bottom;h++){var d=u.map.positionAt(h,u.left,u.table);h==u.top&&(d+=r.nodeSize);for(var m=u.left,v=0;m<u.right;m++,v++)m==u.left&&h==u.top||p.insert(l=p.mapping.map(d+u.tableStart,1),t({node:r,row:h,col:m}).createAndFill(a[v]))}p.setNodeMarkup(o,t({node:r,row:u.top,col:u.left}),a[0]),i instanceof R&&p.setSelection(new R(p.doc.resolve(i.$anchorCell.pos),l&&p.doc.resolve(l))),n(p)}return!0}}function Dt(t,e){return function(n,r){if(!k(n))return!1;var o=C(n);if(o.nodeAfter.attrs[t]===e)return!1;if(r){var i=n.tr;n.selection instanceof R?n.selection.forEachCell((function(n,r){n.attrs[t]!==e&&i.setNodeMarkup(r,null,D(n.attrs,t,e))})):i.setNodeMarkup(o.pos,null,D(o.nodeAfter.attrs,t,e)),r(i)}return!0}}function Pt(t){return function(e,n){if(!k(e))return!1;if(n){for(var r=W(e.schema),o=dt(e),i=e.tr,s=o.map.cellsInRect("column"==t?new d(o.left,0,o.right,o.map.height):"row"==t?new d(0,o.top,o.map.width,o.bottom):o),a=s.map((function(t){return o.table.nodeAt(t)})),c=0;c<s.length;c++)a[c].type==r.header_cell&&i.setNodeMarkup(o.tableStart+s[c],r.cell,a[c].attrs);if(0==i.steps.length)for(var l=0;l<s.length;l++)i.setNodeMarkup(o.tableStart+s[l],r.header_cell,a[l].attrs);n(i)}return!0}}function zt(t,e,n){for(var r=e.map.cellsInRect({left:0,top:0,right:"row"==t?e.map.width:1,bottom:"column"==t?e.map.height:1}),o=0;o<r.length;o++){var i=e.table.nodeAt(r[o]);if(i&&i.type!==n.header_cell)return!1}return!0}function Rt(t,e){return e=e||{useDeprecatedLogic:!1},e.useDeprecatedLogic?Pt(t):function(e,n){if(!k(e))return!1;if(n){var r=W(e.schema),o=dt(e),i=e.tr,s=zt("row",o,r),a=zt("column",o,r),c="column"===t?s:"row"===t&&a,l=c?1:0,u="column"==t?new d(0,l,1,o.map.height):"row"==t?new d(l,0,o.map.width,1):o,p="column"==t?a?r.cell:r.header_cell:"row"==t?s?r.cell:r.header_cell:r.cell;o.map.cellsInRect(u).forEach((function(t){var e=t+o.tableStart,n=i.doc.nodeAt(e);n&&i.setNodeMarkup(e,p,n.attrs)})),n(i)}return!0}}var It=Rt("row",{useDeprecatedLogic:!0}),jt=Rt("column",{useDeprecatedLogic:!0}),Ft=Rt("cell",{useDeprecatedLogic:!0});function Bt(t,e){if(e<0){var n=t.nodeBefore;if(n)return t.pos-n.nodeSize;for(var r=t.index(-1)-1,o=t.before();r>=0;r--){var i=t.node(-1).child(r);if(i.childCount)return o-1-i.lastChild.nodeSize;o-=i.nodeSize}}else{if(t.index()<t.parent.childCount-1)return t.pos+t.nodeAfter.nodeSize;for(var s=t.node(-1),a=t.indexAfter(-1),c=t.after();a<s.childCount;a++){var l=s.child(a);if(l.childCount)return c+1;c+=l.nodeSize}}}function $t(t){return function(e,n){if(!k(e))return!1;var r=Bt(C(e),t);if(null!=r){if(n){var o=e.doc.resolve(r);n(e.tr.setSelection(i["TextSelection"].between(o,M(o))).scrollIntoView())}return!0}}}function Lt(t,e){for(var n=t.selection.$anchor,r=n.depth;r>0;r--){var o=n.node(r);if("table"==o.type.spec.tableRole)return e&&e(t.tr.delete(n.before(r),n.after(r)).scrollIntoView()),!0}return!1}var Vt=function(t,e){this.node=t,this.cellMinWidth=e,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),qt(t,this.colgroup,this.table,e),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function qt(t,e,n,r,o,i){for(var s=0,a=!0,c=e.firstChild,l=t.firstChild,u=0,p=0;u<l.childCount;u++)for(var f=l.child(u).attrs,h=f.colspan,d=f.colwidth,m=0;m<h;m++,p++){var v=o==p?i:d&&d[m],g=v?v+"px":"";s+=v||r,v||(a=!1),c?(c.style.width!=g&&(c.style.width=g),c=c.nextSibling):e.appendChild(document.createElement("col")).style.width=g}while(c){var y=c.nextSibling;c.parentNode.removeChild(c),c=y}a?(n.style.width=s+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=s+"px")}Vt.prototype.update=function(t){return t.type==this.node.type&&(this.node=t,qt(t,this.colgroup,this.table,this.cellMinWidth),!0)},Vt.prototype.ignoreMutation=function(t){return"attributes"==t.type&&(t.target==this.table||this.colgroup.contains(t.target))};var Wt=new i["PluginKey"]("tableColumnResizing");function Jt(t){void 0===t&&(t={});var e=t.handleWidth;void 0===e&&(e=5);var n=t.cellMinWidth;void 0===n&&(n=25);var r=t.View;void 0===r&&(r=Vt);var o=t.lastColumnResizable;void 0===o&&(o=!0);var s=new i["Plugin"]({key:Wt,state:{init:function(t,e){return this.spec.props.nodeViews[W(e.schema).table.name]=function(t,e){return new r(t,n,e)},new Ht(-1,!1)},apply:function(t,e){return e.apply(t)}},props:{attributes:function(t){var e=Wt.getState(t);return e.activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(t,r){Ut(t,r,e,n,o)},mouseleave:function(t){Kt(t)},mousedown:function(t,e){Gt(t,e,n)}},decorations:function(t){var e=Wt.getState(t);if(e.activeHandle>-1)return oe(t,e.activeHandle)},nodeViews:{}}});return s}var Ht=function(t,e){this.activeHandle=t,this.dragging=e};function Ut(t,e,n,r,o){var i=Wt.getState(t.state);if(!i.dragging){var s=Zt(e.target),a=-1;if(s){var c=s.getBoundingClientRect(),l=c.left,u=c.right;e.clientX-l<=n?a=Yt(t,e,"left"):u-e.clientX<=n&&(a=Yt(t,e,"right"))}if(a!=i.activeHandle){if(!o&&-1!==a){var p=t.state.doc.resolve(a),f=p.node(-1),h=m.get(f),d=p.start(-1),v=h.colCount(p.pos-d)+p.nodeAfter.attrs.colspan-1;if(v==h.width-1)return}te(t,a)}}}function Kt(t){var e=Wt.getState(t.state);e.activeHandle>-1&&!e.dragging&&te(t,-1)}function Gt(t,e,n){var r=Wt.getState(t.state);if(-1==r.activeHandle||r.dragging)return!1;var o=t.state.doc.nodeAt(r.activeHandle),i=Xt(t,r.activeHandle,o.attrs);function s(e){window.removeEventListener("mouseup",s),window.removeEventListener("mousemove",a);var r=Wt.getState(t.state);r.dragging&&(ee(t,r.activeHandle,Qt(r.dragging,e,n)),t.dispatch(t.state.tr.setMeta(Wt,{setDragging:null})))}function a(e){if(!e.which)return s(e);var r=Wt.getState(t.state),o=Qt(r.dragging,e,n);ne(t,r.activeHandle,o,n)}return t.dispatch(t.state.tr.setMeta(Wt,{setDragging:{startX:e.clientX,startWidth:i}})),window.addEventListener("mouseup",s),window.addEventListener("mousemove",a),e.preventDefault(),!0}function Xt(t,e,n){var r=n.colspan,o=n.colwidth,i=o&&o[o.length-1];if(i)return i;var s=t.domAtPos(e),a=s.node.childNodes[s.offset],c=a.offsetWidth,l=r;if(o)for(var u=0;u<r;u++)o[u]&&(c-=o[u],l--);return c/l}function Zt(t){while(t&&"TD"!=t.nodeName&&"TH"!=t.nodeName)t=t.classList.contains("ProseMirror")?null:t.parentNode;return t}function Yt(t,e,n){var r=t.posAtCoords({left:e.clientX,top:e.clientY}),o=r.pos,i=x(t.state.doc.resolve(o));if(!i)return-1;if("right"==n)return i.pos;var s=m.get(i.node(-1)),a=i.start(-1),c=s.map.indexOf(i.pos-a);return c%s.width==0?-1:a+s.map[c-1]}function Qt(t,e,n){var r=e.clientX-t.startX;return Math.max(n,t.startWidth+r)}function te(t,e){t.dispatch(t.state.tr.setMeta(Wt,{setHandle:e}))}function ee(t,e,n){for(var r=t.state.doc.resolve(e),o=r.node(-1),i=m.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan-1,c=t.state.tr,l=0;l<i.height;l++){var u=l*i.width+a;if(!l||i.map[u]!=i.map[u-i.width]){var p=i.map[u],f=o.nodeAt(p),h=f.attrs,d=1==h.colspan?0:a-i.colCount(p);if(!h.colwidth||h.colwidth[d]!=n){var v=h.colwidth?h.colwidth.slice():re(h.colspan);v[d]=n,c.setNodeMarkup(s+p,null,D(h,"colwidth",v))}}}c.docChanged&&t.dispatch(c)}function ne(t,e,n,r){var o=t.state.doc.resolve(e),i=o.node(-1),s=o.start(-1),a=m.get(i).colCount(o.pos-s)+o.nodeAfter.attrs.colspan-1,c=t.domAtPos(o.start(-1)).node;while("TABLE"!=c.nodeName)c=c.parentNode;qt(i,c.firstChild,c,r,a,n)}function re(t){for(var e=[],n=0;n<t;n++)e.push(0);return e}function oe(t,e){for(var n=[],r=t.doc.resolve(e),o=r.node(-1),i=m.get(o),s=r.start(-1),a=i.colCount(r.pos-s)+r.nodeAfter.attrs.colspan,l=0;l<i.height;l++){var u=a+l*i.width-1;if((a==i.width||i.map[u]!=i.map[u+1])&&(0==l||i.map[u-1]!=i.map[u-1-i.width])){var p=i.map[u],f=s+p+o.nodeAt(p).nodeSize-1,h=document.createElement("div");h.className="column-resize-handle",n.push(c["a"].widget(f,h))}}return c["b"].create(t.doc,n)}function ie(t){void 0===t&&(t={});var e=t.allowTableNodeSelection;return void 0===e&&(e=!1),new i["Plugin"]({key:w,state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(w);if(null!=n)return-1==n?null:n;if(null==e||!t.docChanged)return e;var r=t.mapping.mapResult(e),o=r.deleted,i=r.pos;return o?null:i}},props:{decorations:j,handleDOMEvents:{mousedown:st},createSelectionBetween:function(t){if(null!=w.getState(t.state))return t.state.selection},handleTripleClick:ot,handleKeyDown:Q,handlePaste:it},appendTransaction:function(t,n,r){return $(r,ft(r,n),e)}})}Ht.prototype.apply=function(t){var e=this,n=t.getMeta(Wt);if(n&&null!=n.setHandle)return new Ht(n.setHandle,null);if(n&&void 0!==n.setDragging)return new Ht(e.activeHandle,n.setDragging);if(e.activeHandle>-1&&t.docChanged){var r=t.mapping.map(e.activeHandle,-1);_(t.doc.resolve(r))||(r=null),e=new Ht(r,e.dragging)}return e}},"576a":function(t,e,n){"use strict";n.d(e,"a",(function(){return yn})),n.d(e,"b",(function(){return Sn}));var r=n("5313"),o=n("304a"),i=n("0ac0"),s={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var a=/Edge\/(\d+)/.exec(navigator.userAgent),c=/MSIE \d/.test(navigator.userAgent),l=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);s.mac=/Mac/.test(navigator.platform);var u=s.ie=!!(c||l||a);s.ie_version=c?document.documentMode||6:l?+l[1]:a?+a[1]:null,s.gecko=!u&&/gecko\/(\d+)/i.test(navigator.userAgent),s.gecko_version=s.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var p=!u&&/Chrome\/(\d+)/.exec(navigator.userAgent);s.chrome=!!p,s.chrome_version=p&&+p[1],s.ios=!u&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),s.android=/Android \d/.test(navigator.userAgent),s.webkit="webkitFontSmoothing"in document.documentElement.style,s.safari=/Apple Computer/.test(navigator.vendor),s.webkit_version=s.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var f=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},h=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},d=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},m=function(t,e,n,r){return n&&(g(t,e,n,r,-1)||g(t,e,n,r,1))},v=/^(img|br|input|textarea|hr)$/i;function g(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:y(t))){var i=t.parentNode;if(1!=i.nodeType||w(t)||v.test(t.nodeName)||"false"==t.contentEditable)return!1;e=f(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(o<0?-1:0)],"false"==t.contentEditable)return!1;e=o<0?y(t):0}}}function y(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function b(t,e,n){for(var r=0==e,o=e==y(t);r||o;){if(t==n)return!0;var i=f(t);if(t=t.parentNode,!t)return!1;r=r&&0==i,o=o&&i==y(t)}}function w(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var x=function(t){var e=t.isCollapsed;return e&&s.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function S(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function k(t){return{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function C(t,e){return"number"==typeof t?t:t[e]}function O(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.left+t.clientWidth,top:e.top,bottom:e.top+t.clientHeight}}function _(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=n||t.dom;;s=h(s)){if(!s)break;if(1==s.nodeType){var a=s==i.body||1!=s.nodeType,c=a?k(i):O(s),l=0,u=0;if(e.top<c.top+C(r,"top")?u=-(c.top-e.top+C(o,"top")):e.bottom>c.bottom-C(r,"bottom")&&(u=e.bottom-c.bottom+C(o,"bottom")),e.left<c.left+C(r,"left")?l=-(c.left-e.left+C(o,"left")):e.right>c.right-C(r,"right")&&(l=e.right-c.right+C(o,"right")),l||u)if(a)i.defaultView.scrollBy(l,u);else{var p=s.scrollLeft,f=s.scrollTop;u&&(s.scrollTop+=u),l&&(s.scrollLeft+=l);var d=s.scrollLeft-p,m=s.scrollTop-f;e={left:e.left-d,top:e.top-m,right:e.right-d,bottom:e.bottom-m}}if(a)break}}}function M(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:E(t.dom)}}function E(t){for(var e=[],n=t.ownerDocument;t;t=h(t))if(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t==n)break;return e}function T(t){var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0;N(r,0==o?0:o-n)}function N(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var A=null;function D(t){if(t.setActive)return t.setActive();if(A)return t.focus(A);var e=E(t);t.focus(null==A?{get preventScroll(){return A={preventScroll:!0},!0}}:void 0),A||(A=!1,N(e,0))}function P(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=d(c).getClientRects()}for(var p=0;p<u.length;p++){var f=u[p];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==c.nodeType&&h&&(i=l+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=l+1)}}return n&&3==n.nodeType?z(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:P(n,r)}function z(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=L(r,1);if(i.top!=i.bottom&&R(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function R(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function I(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function j(t,e,n){var r=P(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}function F(t,e,n,r){for(var o=-1,i=e;;){if(i==t.dom)break;var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}function B(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(R(e,l))return B(s,e,l)}if((i=(i+1)%r)==o)break}return t}function $(t,e){var n,r,o,i,a=t.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(e.left,e.top);c&&(n=c,o=n.offsetNode,i=n.offset)}catch(v){}if(!o&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(e.left,e.top);l&&(r=l,o=r.startContainer,i=r.startOffset)}var u,p=a.elementFromPoint(e.left,e.top+1);if(!p||!t.dom.contains(1!=p.nodeType?p.parentNode:p)){var f=t.dom.getBoundingClientRect();if(!R(e,f))return null;if(p=B(t.dom,e,f),!p)return null}if(s.safari&&p.draggable&&(o=i=null),p=I(p,e),o){if(s.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var h,d=o.childNodes[i];"IMG"==d.nodeName&&(h=d.getBoundingClientRect()).right<=e.left&&h.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(u=F(t,o,i,e))}null==u&&(u=j(t,p,e));var m=t.docView.nearestDesc(p,!0);return{pos:u,inside:m?m.posAtStart-m.border:-1}}function L(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function V(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(s.webkit||s.gecko)){var i=L(d(r,o,o),0);if(s.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var a=L(d(r,o-1,o-1),-1);if(a.top==i.top){var c=L(d(r,o,o+1),-1);if(c.top!=i.top)return q(c,c.left<a.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var l,u=!0;if(o<r.childNodes.length){var p=r.childNodes[o];1==p.nodeType&&(l=p.getBoundingClientRect())}if(!l&&o){var f=r.childNodes[o-1];1==f.nodeType&&(l=f.getBoundingClientRect(),u=!1)}return W(l||r.getBoundingClientRect(),u)}for(var h=-1;h<2;h+=2)if(h<0&&o){var m=void 0,v=3==r.nodeType?d(r,o-1,o):3==(m=r.childNodes[o-1]).nodeType?d(m):1==m.nodeType&&"BR"!=m.nodeName?m:null;if(v){var g=L(v,1);if(g.top<g.bottom)return q(g,!1)}}else if(h>0&&o<y(r)){var b=void 0,w=3==r.nodeType?d(r,o,o+1):3==(b=r.childNodes[o]).nodeType?d(b):1==b.nodeType?b:null;if(w){var x=L(w,-1);if(x.top<x.bottom)return q(x,!0)}}return q(L(3==r.nodeType?d(r):r,0),!1)}function q(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function W(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function J(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function H(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return J(t,e,(function(){for(var e=t.docView.domFromPos(o.pos),r=e.node;;){var i=t.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var s=V(t,o.pos),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=d(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top&&("up"==n?u.bottom<s.top+1:u.top>s.bottom-1))return!1}}return!0}))}var U=/[\u0590-\u08ac]/;function K(t,e,n){var r=e.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=getSelection();return U.test(o.parent.textContent)&&c.modify?J(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=o.depth?t.docView.domAfterPos(o.before()):t.dom,l=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=s&&(c.caretBidiLevel=s),l})):"left"==n||"backward"==n?s:a}var G=null,X=null,Z=!1;function Y(t,e,n){return G==e&&X==n?Z:(G=e,X=n,Z="up"==n||"down"==n?H(t,e,n):K(t,e,n))}var Q=0,tt=1,et=2,nt=3,rt=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=Q},ot={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};rt.prototype.matchesWidget=function(){return!1},rt.prototype.matchesMark=function(){return!1},rt.prototype.matchesNode=function(){return!1},rt.prototype.matchesHack=function(){return!1},ot.beforePosition.get=function(){return!1},rt.prototype.parseRule=function(){return null},rt.prototype.stopEvent=function(){return!1},ot.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},ot.border.get=function(){return 0},rt.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},rt.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},ot.posBefore.get=function(){return this.parent.posBeforeChild(this)},ot.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ot.posAfter.get=function(){return this.posBefore+this.size},ot.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},rt.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;i=t.nextSibling}while(i&&(!(s=i.pmViewDesc)||s.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},rt.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},rt.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},rt.prototype.posFromDOM=function(t,e,n){for(var r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}return-1},rt.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},rt.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){while(n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM))n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:f(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},rt.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var l=i+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=i;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=f(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&(c>e||s==this.children.length-1)){e=c;for(var h=s+1;h<this.children.length;h++){var d=this.children[h];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=f(d.dom);break}e+=d.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},rt.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},rt.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},rt.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(t-a-c.border,e-a-c.border,n,r);a=l}var u=this.domFromPos(t),p=this.domFromPos(e),f=n.getSelection();if(r||!m(u.node,u.offset,f.anchorNode,f.anchorOffset)||!m(p.node,p.offset,f.focusNode,f.focusOffset)){var h=!1;if(f.extend||t==e){f.collapse(u.node,u.offset);try{t!=e&&f.extend(p.node,p.offset),h=!0}catch(g){if(!(g instanceof DOMException))throw g}}if(!h){if(t>e){var d=u;u=p,p=d}var v=document.createRange();v.setEnd(p.node,p.offset),v.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(v)}}},rt.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},ot.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},rt.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?et:tt,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=nt);o.dirty=nt}n=i}this.dirty=et},rt.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?et:tt;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(rt.prototype,ot);var it=[],st=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,it,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return this.dirty==Q&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(rt),at=function(t){function e(e,n,r,o){t.call(this,e,it,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(rt),ct=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=o["DOMSerializer"].renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,a.dom,a.contentDOM||a.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=nt&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),this.dirty!=Q){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Q}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Nt(i,n,s,r)),t>0&&(i=Nt(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(rt),lt=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n.isLeaf?it:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,i,s,a){var c,l,u=s.nodeViews[n.type.name],p=u&&u(n,s,(function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a}),r),f=p&&p.dom,h=p&&p.contentDOM;if(n.isText)if(f){if(3!=f.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else f=document.createTextNode(n.text);else f||(c=o["DOMSerializer"].renderSpec(document,n.type.spec.toDOM(n)),f=c.dom,h=c.contentDOM);h||n.isText||"BR"==f.nodeName||(f.hasAttribute("contenteditable")||(f.contentEditable=!1),n.type.spec.draggable&&(f.draggable=!0));var d=f;return f=wt(f,r,n),p?l=new ht(t,n,r,i,f,h,d,p,s,a+1):n.isText?new pt(t,n,r,i,f,d,s):new e(t,n,r,i,f,h,d,s,a+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?o["Fragment"].empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return this.dirty==Q&&t.eq(this.node)&&xt(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,i=e,s=r&&t.composing&&this.localCompositionNode(t,e),a=new kt(this,s&&s.node);_t(this.node,this.innerDeco,(function(e,s,c){e.spec.marks?a.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!c&&a.syncToMarks(s==n.node.childCount?o["Mark"].none:n.node.child(s).marks,r,t),a.placeWidget(e,t,i)}),(function(e,n,o,s){a.syncToMarks(e.marks,r,t),a.findNodeMatch(e,n,o,s)||a.updateNextNode(e,n,o,t,s)||a.addNode(e,n,o,t,i),i+=e.nodeSize})),a.syncToMarks(it,r,t),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==et)&&(s&&this.protectLocalComposition(t,s),this.renderChildren())},e.prototype.renderChildren=function(){dt(this.contentDOM,this.children),s.ios&&Mt(this.dom)},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r["TextSelection"])||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=Et(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=Tt(this.node.content,c,o-e,i-e);return l<0?null:{node:a,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new at(this,i,n,o);t.compositionNodes.push(s),this.children=Nt(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(this.dirty==nt||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Q},e.prototype.updateOuterDeco=function(t){if(!xt(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=yt(this.dom,this.nodeDOM,gt(this.outerDeco,this.node,e),gt(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(rt);function ut(t,e,n,r,o){return wt(r,e,t),new lt(null,t,e,n,r,r,r,o,0)}var pt=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){var t=this.nodeDOM.parentNode;while(t&&t!=this.dom&&!t.pmIsDeco)t=t.parentNode;return{skip:t||!0}},e.prototype.update=function(t,e){return!(this.dirty==nt||this.dirty!=Q&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==Q&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=Q,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(lt),ft=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return this.dirty==Q},e}(rt),ht=function(t){function e(e,n,r,o,i,s,a,c,l,u){t.call(this,e,n,r,o,i,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(this.dirty==nt)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(lt);function dt(t,e){for(var n=t.firstChild,r=0;r<e.length;r++){var o=e[r],i=o.dom;if(i.parentNode==t){while(i!=n)n=St(n);n=n.nextSibling}else t.insertBefore(i,n);if(o instanceof ct){var s=n?n.previousSibling:t.lastChild;dt(o.contentDOM,o.children),n=s?s.nextSibling:t.firstChild}}while(n)n=St(n)}function mt(t){t&&(this.nodeName=t)}mt.prototype=Object.create(null);var vt=[new mt];function gt(t,e,n){if(0==t.length)return vt;for(var r=n?vt[0]:new mt,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new mt(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new mt(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return o}function yt(t,e,n,r){if(n==vt&&r==vt)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.pmIsDeco=!0,c.appendChild(o),a=vt[0]),o=c}bt(o,a||vt[0],s)}return o}function bt(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):it,s=n.class?n.class.split(" "):it,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(e.style))t.style.removeProperty(l[1])}n.style&&(t.style.cssText+=n.style)}}function wt(t,e,n){return yt(t,t,vt,gt(e,n,1!=t.nodeType))}function xt(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function St(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var kt=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=Ct(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function Ct(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}function Ot(t,e){return t.type.side-e.type.side}function _t(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){if(s<o.length&&o[s].to==i){var u=o[s++],p=void 0;while(s<o.length&&o[s].to==i)(p||(p=[u])).push(o[s++]);if(p){p.sort(Ot);for(var f=0;f<p.length;f++)n(p[f],l,!!c)}else n(u,l,!!c)}var h=void 0,d=void 0;if(c)d=-1,h=c,c=null;else{if(!(l<t.childCount))break;d=l,h=t.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);while(s<o.length&&o[s].from<=i&&o[s].to>i)a.push(o[s++]);var v=i+h.nodeSize;if(h.isText){var g=v;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=h.cut(g-i),h=h.cut(0,g-i),v=g,d=-1)}r(h,a.length?a.slice():it,e.forChild(i,h),d),i=v}else for(var b=0;b<t.childCount;b++){var w=t.child(b);r(w,o,e.forChild(i,w),b),i+=w.nodeSize}}function Mt(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Et(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=y(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function Tt(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){var c=s.text;while(o<t.childCount){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}function Nt(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function At(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r["Selection"].findFrom(a,e)}function Dt(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Pt(t,e,n){var o=t.state.selection;if(!(o instanceof r["TextSelection"])){if(o instanceof r["NodeSelection"]&&o.node.isInline)return Dt(t,new r["TextSelection"](e>0?o.$to:o.$from));var i=At(t.state,e);return!!i&&Dt(t,i)}if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var a=At(t.state,e);return!!(a&&a instanceof r["NodeSelection"])&&Dt(t,a)}if(!(s.mac&&n.indexOf("m")>-1)){var c,l=o.$head,u=l.textOffset?null:e<0?l.nodeBefore:l.nodeAfter;if(!u||u.isText)return!1;var p=e<0?l.pos-u.nodeSize:l.pos;return!!(u.isAtom||(c=t.docView.descAt(p))&&!c.contentDOM)&&(r["NodeSelection"].isSelectable(u)?Dt(t,new r["NodeSelection"](e<0?t.state.doc.resolve(l.pos-u.nodeSize):l)):!!s.webkit&&Dt(t,new r["TextSelection"](t.state.doc.resolve(e<0?p:p+u.nodeSize))))}}function zt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Rt(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function It(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,a=!1;for(s.gecko&&1==n.nodeType&&r<zt(n)&&Rt(n.childNodes[r])&&(a=!0);;)if(r>0){if(1!=n.nodeType)break;var c=n.childNodes[r-1];if(Rt(c))o=n,i=--r;else{if(3!=c.nodeType)break;n=c,r=n.nodeValue.length}}else{if(Ft(n))break;var l=n.previousSibling;while(l&&Rt(l))o=n.parentNode,i=f(l),l=l.previousSibling;if(l)n=l,r=zt(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}a?Bt(t,e,n,r):o&&Bt(t,e,o,i)}}function jt(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=zt(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Rt(a))break;o=n,i=++r}else{if(Ft(n))break;var c=n.nextSibling;while(c&&Rt(c))o=c.parentNode,i=f(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=zt(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}o&&Bt(t,e,o,i)}}function Ft(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Bt(t,e,n,r){if(x(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection()}function $t(t,e,n){var o=t.state.selection;if(o instanceof r["TextSelection"]&&!o.empty||n.indexOf("s")>-1)return!1;if(s.mac&&n.indexOf("m")>-1)return!1;var i=o.$from,a=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var c=At(t.state,e);if(c&&c instanceof r["NodeSelection"])return Dt(t,c)}if(!i.parent.inlineContent){var l=r["Selection"].findFrom(e<0?i:a,e);return!l||Dt(t,l)}return!1}function Lt(t,e){if(!(t.state.selection instanceof r["TextSelection"]))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Vt(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function qt(t){if(s.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Vt(t,o,!0),setTimeout((function(){return Vt(t,o,!1)}),20)}}}function Wt(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Jt(t,e){var n=e.keyCode,r=Wt(e);return 8==n||s.mac&&72==n&&"c"==r?Lt(t,-1)||It(t):46==n||s.mac&&68==n&&"c"==r?Lt(t,1)||jt(t):13==n||27==n||(37==n?Pt(t,-1,r)||It(t):39==n?Pt(t,1,r)||jt(t):38==n?$t(t,-1,r)||It(t):40==n?qt(t)||$t(t,1,r)||jt(t):r==(s.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function Ht(t,e){var n=t.root.getSelection(),o=t.state.doc;if(!n.focusNode)return null;var i=t.docView.nearestDesc(n.focusNode),s=i&&0==i.size,a=t.docView.posFromDOM(n.focusNode,n.focusOffset);if(a<0)return null;var c,l,u=o.resolve(a);if(x(n)){c=u;while(i&&!i.node)i=i.parent;if(i&&i.node.isAtom&&r["NodeSelection"].isSelectable(i.node)&&i.parent&&(!i.node.isInline||!b(n.focusNode,n.focusOffset,i.dom))){var p=i.posBefore;l=new r["NodeSelection"](a==p?u:o.resolve(p))}}else{var f=t.docView.posFromDOM(n.anchorNode,n.anchorOffset);if(f<0)return null;c=o.resolve(f)}if(!l){var h="pointer"==e||t.state.selection.head<u.pos&&!s?1:-1;l=ne(t,c,u,h)}return l}function Ut(t,e){var n=t.state.selection;if(te(t,n),t.editable?t.hasFocus():oe(t)&&document.activeElement&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)Qt(t);else{var o,i,s=n.anchor,a=n.head;!Kt||n instanceof r["TextSelection"]||(n.$from.parent.inlineContent||(o=Gt(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=Gt(t,n.to))),t.docView.setSelection(s,a,t.root,e),Kt&&(o&&Zt(o),i&&Zt(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Yt(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}kt.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},kt.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},kt.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},kt.prototype.syncToMarks=function(t,e,n){var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=Q,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<t.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ct.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},kt.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},kt.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof lt){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=nt&&xt(e,s.outerDeco));if(!l&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},kt.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,lt.create(this.top,t,e,n,r,o)),this.changed=!0},kt.prototype.placeWidget=function(t,e,n){var r=this.index<this.top.children.length?this.top.children[this.index]:null;if(!r||!r.matchesWidget(t)||t!=r.widget&&r.widget.type.toDOM.parentNode){var o=new st(this.top,t,e,n);this.top.children.splice(this.index++,0,o),this.changed=!0}else this.index++},kt.prototype.addTextblockHacks=function(){var t=this.top.children[this.index-1];while(t instanceof ct)t=t.children[t.children.length-1];if(!t||!(t instanceof pt)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new ft(this.top,it,e,null)),this.changed=!0}};var Kt=s.safari||s.chrome&&s.chrome_version<63;function Gt(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,a=o?r.childNodes[o-1]:null;if(s.safari&&i&&"false"==i.contentEditable)return Xt(i);if((!i||"false"==i.contentEditable)&&(!a||"false"==a.contentEditable)){if(i)return Xt(i);if(a)return Xt(a)}}function Xt(t){return t.contentEditable="true",s.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Zt(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Yt(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}function Qt(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,f(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&s.ie&&s.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function te(t,e){if(e instanceof r["NodeSelection"]){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ee(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ee(t)}function ee(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function ne(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r["TextSelection"].between(e,n,o)}function re(t){return(!t.editable||t.root.activeElement==t.dom)&&oe(t)}function oe(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function ie(t){var e=t.docView.domFromPos(t.state.selection.anchor),n=t.root.getSelection();return m(e.node,e.offset,n.anchorNode,n.anchorOffset)}function se(t,e,n){var r=t.docView.parseRange(e,n),i=r.node,a=r.fromOffset,c=r.toOffset,l=r.from,u=r.to,p=t.root.getSelection(),f=null,h=p.anchorNode;if(h&&t.dom.contains(1==h.nodeType?h:h.parentNode)&&(f=[{node:h,offset:p.anchorOffset}],x(p)||f.push({node:p.focusNode,offset:p.focusOffset})),s.chrome&&8===t.lastKeyCode)for(var d=c;d>a;d--){var m=i.childNodes[d-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=d;break}if(!v||v.size)break}var g=t.state.doc,y=t.someProp("domParser")||o["DOMParser"].fromSchema(t.state.schema),b=g.resolve(l),w=null,S=y.parse(i,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!b.parent.type.spec.code||"full",editableContent:!0,findPositions:f,ruleFromNode:ae,context:b});if(f&&null!=f[0].pos){var k=f[0].pos,C=f[1]&&f[1].pos;null==C&&(C=k),w={anchor:k+l,head:C+l}}return{doc:S,sel:w,from:l,to:u}}function ae(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(s.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||s.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function ce(t,e,n,o,i){if(e<0){var a=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=Ht(t,a);if(c&&!t.state.selection.eq(c)){var l=t.state.tr.setSelection(c);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),t.dispatch(l)}}else{var u=t.state.doc.resolve(e),p=u.sharedDepth(n);e=u.before(p+1),n=t.state.doc.resolve(n).after(p+1);var f,h,d=t.state.selection,m=se(t,e,n),v=t.state.doc,g=v.slice(m.from,m.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.lastKeyCode=null;var y=he(g.content,m.doc.content,m.from,f,h);if(!y){if(!(o&&d instanceof r["TextSelection"]&&!d.empty&&d.$head.sameParent(d.$anchor))||t.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var b=le(t,t.state.doc,m.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}y={start:d.from,endA:d.to,endB:d.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof r["TextSelection"]&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),s.ie&&s.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&"  "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);var w,x=m.doc.resolveNoCache(y.start-m.from),k=m.doc.resolveNoCache(y.endB-m.from),C=x.sameParent(k)&&x.parent.inlineContent;if((s.ios&&t.lastIOSEnter>Date.now()-225&&(!C||i.some((function(t){return"DIV"==t.nodeName||"P"==t.nodeName})))||!C&&x.pos<m.doc.content.size&&(w=r["Selection"].findFrom(m.doc.resolve(x.pos+1),1,!0))&&w.head==k.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,S(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&pe(v,y.start,y.endA,x,k)&&t.someProp("handleKeyDown",(function(e){return e(t,S(8,"Backspace"))})))s.android&&s.chrome&&t.domObserver.suppressSelectionUpdates();else{s.android&&!C&&x.start()!=k.start()&&0==k.parentOffset&&x.depth==k.depth&&m.sel&&m.sel.anchor==m.sel.head&&m.sel.head==y.endA&&(y.endB-=2,k=m.doc.resolveNoCache(y.endB-m.from),setTimeout((function(){t.someProp("handleKeyDown",(function(e){return e(t,S(13,"Enter"))}))}),20));var O,_,M,E,T=y.start,N=y.endA;if(C)if(x.pos==k.pos)s.ie&&s.ie_version<=11&&0==x.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return Ut(t)}),20)),O=t.state.tr.delete(T,N),_=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(E=v.resolve(y.start))&&(M=ue(x.parent.content.cut(x.parentOffset,k.parentOffset),E.parent.content.cut(E.parentOffset,y.endA-E.start()))))O=t.state.tr,"add"==M.type?O.addMark(T,N,M.mark):O.removeMark(T,N,M.mark);else if(x.parent.child(x.index()).isText&&x.index()==k.index()-(k.textOffset?0:1)){var A=x.parent.textBetween(x.parentOffset,k.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,T,N,A)})))return;O=t.state.tr.insertText(A,T,N)}if(O||(O=t.state.tr.replace(T,N,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){var D=le(t,O.doc,m.sel);D&&!(s.chrome&&s.android&&t.composing&&D.empty&&(D.head==T||D.head==O.mapping.map(N)-1)||s.ie&&D.empty&&D.head==T)&&O.setSelection(D)}_&&O.ensureMarks(_),t.dispatch(O.scrollIntoView())}}}function le(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ne(t,e.resolve(n.anchor),e.resolve(n.head))}function ue(t,e){for(var n,r,i,s=t.firstChild.marks,a=e.firstChild.marks,c=s,l=a,u=0;u<a.length;u++)c=a[u].removeFromSet(c);for(var p=0;p<s.length;p++)l=s[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],h=0;h<e.childCount;h++)f.push(i(e.child(h)));if(o["Fragment"].from(f).eq(t))return{mark:r,type:n}}function pe(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||fe(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(fe(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||fe(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function fe(t,e,n){var r=t.depth,o=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,o++,e=!1;if(n){var i=t.node(r).maybeChild(t.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function he(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&t.size<e.size){var u=r<=i&&r>=a?i-r:0;i-=u,c=i+(c-a),a=i}else if(c<i){var p=r<=i&&r>=c?i-r:0;i-=p,a=i+(a-c),c=i}return{start:i,endA:a,endB:c}}function de(t,e){var n=[],r=e.content,i=e.openStart,s=e.openEnd;while(i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=t.someProp("clipboardSerializer")||o["DOMSerializer"].fromSchema(t.state.schema),l=Ce(),u=l.createElement("div");u.appendChild(c.serializeFragment(r,{document:l}));var p,f=u.firstChild;while(f&&1==f.nodeType&&(p=Se[f.nodeName.toLowerCase()])){for(var h=p.length-1;h>=0;h--){var d=l.createElement(p[h]);while(u.firstChild)d.appendChild(u.firstChild);u.appendChild(d)}f=u.firstChild}f&&1==f.nodeType&&f.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n));var m=t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:u,text:m}}function me(t,e,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e,c||r)})),c)return new o["Slice"](o["Fragment"].from(t.state.schema.text(e)),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,i,r)}));u?a=u:(s=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){s.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),s=Oe(n);var p=s&&s.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!a){var h=t.someProp("clipboardParser")||t.someProp("domParser")||o["DOMParser"].fromSchema(t.state.schema);a=h.parseSlice(s,{preserveWhitespace:!(!l&&!f),context:i})}return a=f?_e(xe(a,+f[1],+f[2]),f[3]):o["Slice"].maxOpen(ve(a.content,i),!1),t.someProp("transformPasted",(function(t){a=t(a)})),a}function ve(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n),i=r.contentMatchAt(e.index(n)),s=void 0,a=[];if(t.forEach((function(t){if(a){var e,n=i.findWrapping(t.type);if(!n)return a=null;if(e=a.length&&s.length&&ye(n,s,t,a[a.length-1],0))a[a.length-1]=e;else{a.length&&(a[a.length-1]=be(a[a.length-1],s.length));var r=ge(t,n);a.push(r),i=i.matchType(r.type,r.attrs),s=n}}})),a)return{v:o["Fragment"].from(a)}},r=e.depth;r>=0;r--){var i=n(r);if(i)return i.v}return t}function ge(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,o["Fragment"].from(t));return t}function ye(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){var s=ye(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));var a=r.contentMatchAt(r.childCount);if(a.matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(o["Fragment"].from(ge(n,t,i+1))))}}function be(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,be(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(o["Fragment"].empty,!0);return t.copy(n.append(r))}function we(t,e,n,r,i,s){var a=e<0?t.firstChild:t.lastChild,c=a.content;return i<r-1&&(c=we(c,e,n,r,i+1,s)),i>=n&&(c=e<0?a.contentMatchAt(0).fillBefore(c,t.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(o["Fragment"].empty,!0))),t.replaceChild(e<0?0:t.childCount-1,a.copy(c))}function xe(t,e,n){return e<t.openStart&&(t=new o["Slice"](we(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new o["Slice"](we(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Se={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},ke=null;function Ce(){return ke||(ke=document.implementation.createHTMLDocument("title"))}function Oe(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Ce().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&Se[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length),r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}function _e(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(u){return t}for(var i=t.content,s=t.openStart,a=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=o["Fragment"].from(l.create(n[c+1],i)),s++,a++}return new o["Slice"](i,s,a)}var Me={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Ee=s.ie&&s.ie_version<=11,Te=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Te.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},Te.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Ne=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);s.ie&&s.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new Te,Ee&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ne.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Ne.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Ne.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Me),Ee&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ne.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Ee&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ne.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ne.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ne.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Ne.prototype.onSelectionChange=function(){if(re(this.view)){if(this.suppressingSelectionUpdates)return Ut(this.view);if(s.ie&&s.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&m(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Ne.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ne.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Ne.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&oe(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,a=[];if(this.view.editable)for(var c=0;c<t.length;c++){var l=this.registerMutation(t[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),o=o<0?l.to:Math.max(l.to,o),l.typeOver&&(i=!0))}if(s.gecko&&a.length>1){var u=a.filter((function(t){return"BR"==t.nodeName}));if(2==u.length){var p=u[0],f=u[1];p.parentNode&&p.parentNode.parentNode==f.parentNode?f.remove():p.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),De(this.view)),this.handleDOMChange(r,o,i,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||Ut(this.view))}},Ne.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(s.ie&&s.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var a=t.addedNodes[i],c=a.previousSibling,l=a.nextSibling;(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(r=c),(!l||Array.prototype.indexOf.call(t.addedNodes,l)<0)&&(o=l)}for(var u=r&&r.parentNode==t.target?f(r)+1:0,p=n.localPosFromDOM(t.target,u,-1),h=o&&o.parentNode==t.target?f(o):t.target.childNodes.length,d=0;d<t.addedNodes.length;d++)e.push(t.addedNodes[d]);var m=n.localPosFromDOM(t.target,h,1);return{from:p,to:m}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Ae=!1;function De(t){Ae||(Ae=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Pe={},ze={};function Re(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.lastIOSEnterFallbackTimeout=null,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Ne(t,(function(e,n,r,o){return ce(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Pe[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!$e(t,e)||Be(t,e)||!t.editable&&e.type in ze||n(t,e)})};for(var n in Pe)e(n);s.safari&&t.dom.addEventListener("input",(function(){return null})),Fe(t)}function Ie(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function je(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout),clearTimeout(t.lastIOSEnterFallbackTimeout)}function Fe(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Be(t,e)})}))}function Be(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function $e(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Le(t,e){Be(t,e)||!Pe[e.type]||!t.editable&&e.type in ze||Pe[e.type](t,e)}function Ve(t){return{left:t.clientX,top:t.clientY}}function qe(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function We(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Je(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function He(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r["NodeSelection"].isSelectable(o))&&(Je(t,new r["NodeSelection"](n),"pointer"),!0)}function Ue(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r["NodeSelection"]&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r["NodeSelection"].isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(Je(t,r["NodeSelection"].create(t.state.doc,o),"pointer"),!0)}function Ke(t,e,n,r,o){return We(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?Ue(t,n):He(t,n))}function Ge(t,e,n,r){return We(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function Xe(t,e,n,r){return We(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||Ze(t,n)}function Ze(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(Je(t,r["TextSelection"].create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)Je(t,r["TextSelection"].create(n,a+1,a+1+s.content.size),"pointer");else{if(!r["NodeSelection"].isSelectable(s))continue;Je(t,r["NodeSelection"].create(n,a),"pointer")}return!0}}function Ye(t){return on(t)}ze.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!en(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!s.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||Jt(t,e)?e.preventDefault():Ie(t,"key");else{var n=Date.now();t.lastIOSEnter=n,t.lastIOSEnterFallbackTimeout=setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,S(13,"Enter"))})),t.lastIOSEnter=0)}),200)}},ze.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},ze.keypress=function(t,e){if(!(en(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||s.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r["TextSelection"])||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var Qe=s.mac?"metaKey":"ctrlKey";Pe.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=Ye(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&qe(e,t.lastClick)&&!e[Qe]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Ve(e));i&&("singleClick"==o?t.mouseDown=new tn(t,i,e,n):("doubleClick"==o?Ge:Xe)(t,i.pos,i.inside,e)?e.preventDefault():Ie(t,"pointer"))};var tn=function(t,e,n,o){var i,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[Qe],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),a=e.inside;else{var l=t.state.doc.resolve(e.pos);i=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var u=o?null:n.target,p=u?t.docView.nearestDesc(u,!0):null;this.target=p?p.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof r["NodeSelection"]&&a==t.state.selection.from)&&(this.mightDrag={node:i,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&s.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return c.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ie(t,"pointer")};function en(t,e){return!!t.composing||!!(s.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}tn.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},tn.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Ve(t))),this.allowDefault||!e?Ie(this.view,"pointer"):Ke(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():this.flushed||s.safari&&this.mightDrag&&!this.mightDrag.node.isAtom||s.chrome&&!(this.view.state.selection instanceof r["TextSelection"])&&(e.pos==this.view.state.selection.from||e.pos==this.view.state.selection.to)?(Je(this.view,r["Selection"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault()):Ie(this.view,"pointer")}},tn.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Ie(this.view,"pointer")},Pe.touchdown=function(t){Ye(t),Ie(t,"pointer")},Pe.contextmenu=function(t){return Ye(t)};var nn=s.android?5e3:-1;function rn(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return on(t)}),e))}function on(t,e){t.domObserver.forceFlush(),t.composing=!1;while(t.compositionNodes.length>0)t.compositionNodes.pop().markParentsDirty();if(e||t.docView.dirty){var n=Ht(t);return n&&!n.eq(t.state.selection)?t.dispatch(t.state.tr.setSelection(n)):t.updateState(t.state),!0}return!1}function sn(t,e){if(t.dom.parentNode){var n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout((function(){n.parentNode&&n.parentNode.removeChild(n),t.focus()}),50)}}ze.compositionstart=ze.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),on(t,!0),t.markCursor=null;else if(on(t),s.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var a=i<0?o.lastChild:o.childNodes[i-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}o=a,i=-1}t.composing=!0}rn(t,nn)},ze.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,rn(t,20))};var an=s.ie&&s.ie_version<15||s.ios&&s.webkit_version<604;function cn(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function ln(t,e){if(t.dom.parentNode){var n=t.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout((function(){t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?un(t,r.value,null,e):un(t,r.textContent,r.innerHTML,e)}),50)}}function un(t,e,n,r){var i=me(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,i||o["Slice"].empty)}))&&i){var s=cn(i),a=s?t.state.tr.replaceSelectionWith(s,t.shiftKey):t.state.tr.replaceSelection(i);t.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Pe.copy=ze.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=an?null:e.clipboardData,i=n.content(),s=de(t,i),a=s.dom,c=s.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):sn(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},ze.paste=function(t,e){var n=an?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(un(t,o,r,e),e.preventDefault()):ln(t,e)};var pn=function(t,e){this.slice=t,this.move=e},fn=s.mac?"altKey":"ctrlKey";for(var hn in Pe.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(Ve(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r["NodeSelection"]?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r["NodeSelection"].create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r["NodeSelection"].create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=de(t,a),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(an?"Text":"text/html",l.innerHTML),an||e.dataTransfer.setData("text/plain",u),t.dragging=new pn(a,!e[fn])}},Pe.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},ze.dragover=ze.dragenter=function(t,e){return e.preventDefault()},ze.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var s=t.posAtCoords(Ve(e));if(s){var a=t.state.doc.resolve(s.pos);if(a){var c=n&&n.slice||me(t,e.dataTransfer.getData(an?"Text":"text/plain"),an?null:e.dataTransfer.getData("text/html"),!1,a);if(t.someProp("handleDrop",(function(r){return r(t,e,c||o["Slice"].empty,n&&n.move)})))e.preventDefault();else if(c){e.preventDefault();var l=c?Object(i["g"])(t.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var u=t.state.tr;n&&n.move&&u.deleteSelection();var p=u.mapping.map(l),f=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,h=u.doc;if(f?u.replaceRangeWith(p,p,c.content.firstChild):u.replaceRange(p,p,c),!u.doc.eq(h)){var d=u.doc.resolve(p);f&&r["NodeSelection"].isSelectable(c.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(c.content.firstChild)?u.setSelection(new r["NodeSelection"](d)):u.setSelection(ne(t,d,u.doc.resolve(u.mapping.map(l)))),t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))}}}}}},Pe.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&Ut(t)}),20))},Pe.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Pe.beforeinput=function(t,e){if(s.chrome&&s.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,S(8,"Backspace"))})))){var e=t.state.selection,r=e.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},ze)Pe[hn]=ze[hn];function dn(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var mn=function(t,e){this.spec=e||xn,this.side=this.spec.side||0,this.toDOM=t};mn.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos,s=o.deleted;return s?null:new yn(i-n,i-n,this)},mn.prototype.valid=function(){return!0},mn.prototype.eq=function(t){return this==t||t instanceof mn&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&dn(this.spec,t.spec))};var vn=function(t,e){this.spec=e||xn,this.attrs=t};vn.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new yn(o,i,this)},vn.prototype.valid=function(t,e){return e.from<e.to},vn.prototype.eq=function(t){return this==t||t instanceof vn&&dn(this.attrs,t.attrs)&&dn(this.spec,t.spec)},vn.is=function(t){return t.type instanceof vn};var gn=function(t,e){this.spec=e||xn,this.attrs=t};gn.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new yn(o.pos-n,i.pos-n,this)},gn.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},gn.prototype.eq=function(t){return this==t||t instanceof gn&&dn(this.attrs,t.attrs)&&dn(this.spec,t.spec)};var yn=function(t,e,n){this.from=t,this.to=e,this.type=n},bn={spec:{configurable:!0}};yn.prototype.copy=function(t,e){return new yn(t,e,this.type)},yn.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},yn.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},yn.widget=function(t,e,n){return new yn(t,t,new mn(e,n))},yn.inline=function(t,e,n,r){return new yn(t,e,new vn(n,r))},yn.node=function(t,e,n,r){return new yn(t,e,new gn(n,r))},bn.spec.get=function(){return this.type.spec},Object.defineProperties(yn.prototype,bn);var wn=[],xn={},Sn=function(t,e){this.local=t&&t.length?t:wn,this.children=e&&e.length?e:wn};Sn.create=function(t,e){return e.length?Nn(e,t,0,xn):kn},Sn.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Sn.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Sn.prototype.map=function(t,e,n){return this==kn||0==t.maps.length?this:this.mapInner(t,e,0,0,n||xn)},Sn.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?On(this.children,i,t,e,n,r,o):i?new Sn(i.sort(An)):kn},Sn.prototype.add=function(t,e){return e.length?this==kn?Sn.create(t,e):this.addInner(t,e,0):this},Sn.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=En(e,t,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<s)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,Nn(a,t,c+1,xn)),i+=3}}));var s=_n(i?Tn(e):e,-n);return new Sn(s.length?this.local.concat(s).sort(An):this.local,r||this.children)},Sn.prototype.remove=function(t){return 0==t.length||this==kn?this:this.removeInner(t,0)},Sn.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=kn?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,f=void 0;p<t.length;p++)if(f=t[p])for(var h=0;h<r.length;h++)r[h].eq(f,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Sn(r,n):kn},Sn.prototype.forChild=function(t,e){if(this==kn)return this;if(e.isLeaf)return Sn.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof vn){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var p=new Sn(r.sort(An));return n?new Cn([p,n]):p}return n||kn},Sn.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Sn)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Sn.prototype.locals=function(t){return Dn(this.localsInner(t))},Sn.prototype.localsInner=function(t){if(this==kn)return wn;if(t.inlineContent||!this.local.some(vn.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof vn||e.push(this.local[n]);return e};var kn=new Sn;Sn.empty=kn,Sn.removeOverlap=Dn;var Cn=function(t){this.members=t};function On(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var f=n.map(a[p]+i),h=f-o;if(h<0||h>=r.content.size){u=!0;continue}var d=n.map(t[p+1]+i,-1),m=d-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var w=a[p+2].mapInner(n,b,f+1,a[p]+i+1,s);w!=kn?(a[p]=h,a[p+1]=m,a[p+2]=w):(a[p+1]=-2,u=!0)}else u=!0}if(u){var x=Mn(a,t,e||[],n,o,i,s),S=Nn(x,r,0,s);e=S.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var C=0,O=0;C<S.children.length;C+=3){var _=S.children[C];while(O<a.length&&a[O]<_)O+=3;a.splice(O,0,S.children[C],S.children[C+1],S.children[C+2])}}return new Sn(e&&e.sort(An),a)}function _n(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new yn(o.from+e,o.to+e,o.type))}return n}function Mn(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}function En(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function Tn(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Nn(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=En(t,e,s+n);if(a){i=!0;var c=Nn(a,e,n+s+1,r);c!=kn&&o.push(s,s+e.nodeSize,c)}}));for(var s=_n(i?Tn(t):t,-n).sort(An),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Sn(s,o):kn}function An(t,e){return t.from-e.from||t.to-e.to}function Dn(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Pn(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Pn(e,o+1,i.copy(r.to,i.to)))}}return e}function Pn(t,e,n){while(e<t.length&&An(n,t[e])>0)e++;t.splice(e,0,n)}function zn(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=kn&&e.push(r)})),t.cursorWrapper&&e.push(Sn.create(t.state.doc,[t.cursorWrapper.deco])),Cn.from(e)}Cn.prototype.forChild=function(t,e){if(e.isLeaf)return Sn.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=kn&&(o instanceof Cn?n=n.concat(o.members):n.push(o))}return Cn.from(n)},Cn.prototype.eq=function(t){if(!(t instanceof Cn)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Cn.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?Dn(n?e:e.sort(An)):wn},Cn.from=function(t){switch(t.length){case 0:return kn;case 1:return t[0];default:return new Cn(t)}};var Rn=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Bn(this),this.markCursor=null,this.cursorWrapper=null,Fn(this),this.nodeViews=Ln(this),this.docView=ut(this.state.doc,jn(this),zn(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Re(this),this.pluginViews=[],this.updatePluginViews()},In={props:{configurable:!0},root:{configurable:!0}};function jn(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[yn.node(0,t.state.doc.content.size,e)]}function Fn(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:yn.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Bn(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function $n(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Ln(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function Vn(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r}function qn(t){var e=t.getSelection(),n=e.focusOffset,r=e.focusNode;return r&&1==r.nodeType?[r,n,r.childNodes[n-1],r.childNodes[n]]:null}function Wn(t,e){var n=qn(e);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<t.length;r++)if(n[r]!=t[r])return!0;return!1}In.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Rn.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Fe(this),this._props=t,this.updateStateInner(t.state,!0)},Rn.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Rn.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Rn.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1;if(this.state=t,e){var a=Ln(this);Vn(a,this.nodeViews)&&(this.nodeViews=a,i=!0),Fe(this)}this.editable=Bn(this),Fn(this);var c=zn(this),l=jn(this),u=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",p=i||!this.docView.matchesNode(t.doc,l,c),f=p||!t.selection.eq(o.selection),h="preserve"==u&&f&&null==this.dom.style.overflowAnchor&&M(this);if(f){this.domObserver.stop();var d=p&&(s.ie||s.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&$n(o.selection,t.selection);if(p){var m=s.chrome&&qn(this.root);!i&&this.docView.update(t.doc,l,c,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=ut(t.doc,l,c,this.dom,this)),m&&Wn(m,this.root)&&(d=!0)}d||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&ie(this))?Ut(this,d):(te(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==u)this.dom.scrollTop=0;else if("to selection"==u){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r["NodeSelection"]?_(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v):_(this,this.coordsAtPos(t.selection.head),v))}else h&&T(h)},Rn.prototype.destroyPluginViews=function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()},Rn.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Rn.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},Rn.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Rn.prototype.focus=function(){this.domObserver.stop(),this.editable&&D(this.dom),Ut(this),this.domObserver.start()},In.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Rn.prototype.posAtCoords=function(t){return $(this,t)},Rn.prototype.coordsAtPos=function(t){return V(this,t)},Rn.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},Rn.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Rn.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Rn.prototype.endOfTextblock=function(t,e){return Y(this,e||this.state,t)},Rn.prototype.destroy=function(){this.docView&&(je(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],zn(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Rn.prototype.dispatchEvent=function(t){return Le(this,t)},Rn.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Rn.prototype,In)},5924:function(t,e,n){"use strict";e.__esModule=!0,e.isInContainer=e.getScrollContainer=e.isScroll=e.getStyle=e.once=e.off=e.on=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=m,e.addClass=v,e.removeClass=g,e.setStyle=b;var o=n("8bbf"),i=s(o);function s(t){return t&&t.__esModule?t:{default:t}}var a=i.default.prototype.$isServer,c=/([\:\-\_]+(.))/g,l=/^moz([A-Z])/,u=a?0:Number(document.documentMode),p=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},f=function(t){return t.replace(c,(function(t,e,n,r){return r?n.toUpperCase():n})).replace(l,"Moz$1")},h=e.on=function(){return!a&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),d=e.off=function(){return!a&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}();e.once=function(t,e,n){var r=function r(){n&&n.apply(this,arguments),d(t,e,r)};h(t,e,r)};function m(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function v(t,e){if(t){for(var n=t.className,r=(e||"").split(" "),o=0,i=r.length;o<i;o++){var s=r[o];s&&(t.classList?t.classList.add(s):m(t,s)||(n+=" "+s))}t.classList||(t.className=n)}}function g(t,e){if(t&&e){for(var n=e.split(" "),r=" "+t.className+" ",o=0,i=n.length;o<i;o++){var s=n[o];s&&(t.classList?t.classList.remove(s):m(t,s)&&(r=r.replace(" "+s+" "," ")))}t.classList||(t.className=p(r))}}var y=e.getStyle=u<9?function(t,e){if(!a){if(!t||!e)return null;e=f(e),"float"===e&&(e="styleFloat");try{switch(e){case"opacity":try{return t.filters.item("alpha").opacity/100}catch(n){return 1}default:return t.style[e]||t.currentStyle?t.currentStyle[e]:null}}catch(n){return t.style[e]}}}:function(t,e){if(!a){if(!t||!e)return null;e=f(e),"float"===e&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(r){return t.style[e]}}};function b(t,e,n){if(t&&e)if("object"===("undefined"===typeof e?"undefined":r(e)))for(var o in e)e.hasOwnProperty(o)&&b(t,o,e[o]);else e=f(e),"opacity"===e&&u<9?t.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":t.style[e]=n}var w=e.isScroll=function(t,e){if(!a){var n=null!==e||void 0!==e,r=y(t,n?e?"overflow-y":"overflow-x":"overflow");return r.match(/(scroll|auto)/)}};e.getScrollContainer=function(t,e){if(!a){var n=t;while(n){if([window,document,document.documentElement].includes(n))return window;if(w(n,e))return n;n=n.parentNode}return n}},e.isInContainer=function(t,e){if(a||!t||!e)return!1;var n=t.getBoundingClientRect(),r=void 0;return r=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),n.top<r.bottom&&n.bottom>r.top&&n.right>r.left&&n.left<r.right}},"597f":function(t,e){t.exports=function(t,e,n,r){var o,i=0;function s(){var s=this,a=Number(new Date)-i,c=arguments;function l(){i=Number(new Date),n.apply(s,c)}function u(){o=void 0}r&&!o&&l(),o&&clearTimeout(o),void 0===r&&a>t?l():!0!==e&&(o=setTimeout(r?u:l,void 0===r?t-a:t))}return"boolean"!==typeof e&&(r=n,n=e,e=void 0),s}},"5b82":function(t,e,n){"use strict";var r=n("f891"),o=n.n(r);o.a},"5dbe":function(t,e,n){(function(){var e;function n(){console.log(o.apply(null,arguments))}function r(t,e){return o.apply(null,[t].concat(e))}function o(t){for(var e,n,r,o,i=1,s=[].slice.call(arguments),a=0,c=t.length,l="",u=!1,p=!1,f=function(){return s[i++]},h=function(){var n="";while(/\d/.test(t[a]))n+=t[a++],e=t[a];return n.length>0?parseInt(n):null};a<c;++a)if(e=t[a],u)switch(u=!1,"."==e?(p=!1,e=t[++a]):"0"==e&&"."==t[a+1]?(p=!0,a+=2,e=t[a]):p=!0,o=h(),e){case"b":l+=parseInt(f(),10).toString(2);break;case"c":n=f(),l+="string"===typeof n||n instanceof String?n:String.fromCharCode(parseInt(n,10));break;case"d":l+=parseInt(f(),10);break;case"f":r=String(parseFloat(f()).toFixed(o||6)),l+=p?r:r.replace(/^0/,"");break;case"j":l+=JSON.stringify(f());break;case"o":l+="0"+parseInt(f(),10).toString(8);break;case"s":l+=f();break;case"x":l+="0x"+parseInt(f(),10).toString(16);break;case"X":l+="0x"+parseInt(f(),10).toString(16).toUpperCase();break;default:l+=e;break}else"%"===e?u=!0:l+=e;return l}e=t.exports=o,e.format=o,e.vsprintf=r,"undefined"!==typeof console&&"function"===typeof console.log&&(e.printf=n)})()},6167:function(t,e,n){"use strict";var r,o;"function"===typeof Symbol&&Symbol.iterator;(function(i,s){r=s,o="function"===typeof r?r.call(e,n,e,t):r,void 0===o||(t.exports=o)})(0,(function(){var t=window,e={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(t,n,r){this._reference=t.jquery?t[0]:t,this.state={};var o="undefined"===typeof n||null===n,i=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=o||i?this.parse(i?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},e,r),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),p(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function r(e){var n=e.style.display,r=e.style.visibility;e.style.display="block",e.style.visibility="hidden";e.offsetWidth;var o=t.getComputedStyle(e),i=parseFloat(o.marginTop)+parseFloat(o.marginBottom),s=parseFloat(o.marginLeft)+parseFloat(o.marginRight),a={width:e.offsetWidth+s,height:e.offsetHeight+i};return e.style.display=n,e.style.visibility=r,a}function o(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,(function(t){return e[t]}))}function i(t){var e=Object.assign({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function s(t,e){var n,r=0;for(n in t){if(t[n]===e)return r;r++}return null}function a(e,n){var r=t.getComputedStyle(e,null);return r[n]}function c(e){var n=e.offsetParent;return n!==t.document.body&&n?n:t.document.documentElement}function l(e){var n=e.parentNode;return n?n===t.document?t.document.body.scrollTop||t.document.body.scrollLeft?t.document.body:t.document.documentElement:-1!==["scroll","auto"].indexOf(a(n,"overflow"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(a(n,"overflow-y"))?n:l(e.parentNode):e}function u(e){return e!==t.document.body&&("fixed"===a(e,"position")||(e.parentNode?u(e.parentNode):e))}function p(t,e){function n(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}Object.keys(e).forEach((function(r){var o="";-1!==["width","height","top","right","bottom","left"].indexOf(r)&&n(e[r])&&(o="px"),t.style[r]=e[r]+o}))}function f(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function h(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function d(t){var e=t.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE"),r=n&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:r,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-r}}function m(t,e,n){var r=d(t),o=d(e);if(n){var i=l(e);o.top+=i.scrollTop,o.bottom+=i.scrollTop,o.left+=i.scrollLeft,o.right+=i.scrollLeft}var s={top:r.top-o.top,left:r.left-o.left,bottom:r.top-o.top+r.height,right:r.left-o.left+r.width,width:r.width,height:r.height};return s}function v(e){for(var n=["","ms","webkit","moz","o"],r=0;r<n.length;r++){var o=n[r]?n[r]+e.charAt(0).toUpperCase()+e.slice(1):e;if("undefined"!==typeof t.document.body.style[o])return o}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[v("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(t)},n.prototype.onCreate=function(t){return t(this),this},n.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},n.prototype.parse=function(e){var n={tagName:"div",classNames:["popper"],attributes:[],parent:t.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};e=Object.assign({},n,e);var r=t.document,o=r.createElement(e.tagName);if(a(o,e.classNames),c(o,e.attributes),"node"===e.contentType?o.appendChild(e.content.jquery?e.content[0]:e.content):"html"===e.contentType?o.innerHTML=e.content:o.textContent=e.content,e.arrowTagName){var i=r.createElement(e.arrowTagName);a(i,e.arrowClassNames),c(i,e.arrowAttributes),o.appendChild(i)}var s=e.parent.jquery?e.parent[0]:e.parent;if("string"===typeof s){if(s=r.querySelectorAll(e.parent),s.length>1&&console.warn("WARNING: the given `parent` query("+e.parent+") matched more than one element, the first one will be used"),0===s.length)throw"ERROR: the given `parent` doesn't exists!";s=s[0]}return s.length>1&&s instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),s=s[0]),s.appendChild(o),o;function a(t,e){e.forEach((function(e){t.classList.add(e)}))}function c(t,e){e.forEach((function(e){t.setAttribute(e.split(":")[0],e.split(":")[1]||"")}))}},n.prototype._getPosition=function(t,e){var n=c(e);if(this._options.forceAbsolute)return"absolute";var r=u(e,n);return r?"fixed":"absolute"},n.prototype._getOffsets=function(t,e,n){n=n.split("-")[0];var o={};o.position=this.state.position;var i="fixed"===o.position,s=m(e,c(t),i),a=r(t);return-1!==["right","left"].indexOf(n)?(o.top=s.top+s.height/2-a.height/2,o.left="left"===n?s.left-a.width:s.right):(o.left=s.left+s.width/2-a.width/2,o.top="top"===n?s.top-a.height:s.bottom),o.width=a.width,o.height=a.height,{popper:o,reference:s}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),t.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=l(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=e}},n.prototype._removeEventListeners=function(){t.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(e,n,r){var o,i,s={};if("window"===r){var a=t.document.body,u=t.document.documentElement;i=Math.max(a.scrollHeight,a.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),o=Math.max(a.scrollWidth,a.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),s={top:0,right:o,bottom:i,left:0}}else if("viewport"===r){var p=c(this._popper),f=l(this._popper),d=h(p),m=function(t){return t==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):t.scrollTop},v=function(t){return t==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):t.scrollLeft},g="fixed"===e.offsets.popper.position?0:m(f),y="fixed"===e.offsets.popper.position?0:v(f);s={top:0-(d.top-g),right:t.document.documentElement.clientWidth-(d.left-y),bottom:t.document.documentElement.clientHeight-(d.top-g),left:0-(d.left-y)}}else s=c(this._popper)===r?{top:0,left:0,right:r.clientWidth,bottom:r.clientHeight}:h(r);return s.left+=n,s.right-=n,s.top=s.top+n,s.bottom=s.bottom-n,s},n.prototype.runModifiers=function(t,e,n){var r=e.slice();return void 0!==n&&(r=this._options.modifiers.slice(0,s(this._options.modifiers,n))),r.forEach(function(e){f(e)&&(t=e.call(this,t))}.bind(this)),t},n.prototype.isModifierRequired=function(t,e){var n=s(this._options.modifiers,t);return!!this._options.modifiers.slice(0,n).filter((function(t){return t===e})).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(t){var e,n={position:t.offsets.popper.position},r=Math.round(t.offsets.popper.left),o=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=v("transform"))?(n[e]="translate3d("+r+"px, "+o+"px, 0)",n.top=0,n.left=0):(n.left=r,n.top=o),Object.assign(n,t.styles),p(this._popper,n),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&p(t.arrowElement,t.offsets.arrow),t},n.prototype.modifiers.shift=function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var o=t.offsets.reference,s=i(t.offsets.popper),a={y:{start:{top:o.top},end:{top:o.top+o.height-s.height}},x:{start:{left:o.left},end:{left:o.left+o.width-s.width}}},c=-1!==["bottom","top"].indexOf(n)?"x":"y";t.offsets.popper=Object.assign(s,a[c][r])}return t},n.prototype.modifiers.preventOverflow=function(t){var e=this._options.preventOverflowOrder,n=i(t.offsets.popper),r={left:function(){var e=n.left;return n.left<t.boundaries.left&&(e=Math.max(n.left,t.boundaries.left)),{left:e}},right:function(){var e=n.left;return n.right>t.boundaries.right&&(e=Math.min(n.left,t.boundaries.right-n.width)),{left:e}},top:function(){var e=n.top;return n.top<t.boundaries.top&&(e=Math.max(n.top,t.boundaries.top)),{top:e}},bottom:function(){var e=n.top;return n.bottom>t.boundaries.bottom&&(e=Math.min(n.top,t.boundaries.bottom-n.height)),{top:e}}};return e.forEach((function(e){t.offsets.popper=Object.assign(n,r[e]())})),t},n.prototype.modifiers.keepTogether=function(t){var e=i(t.offsets.popper),n=t.offsets.reference,r=Math.floor;return e.right<r(n.left)&&(t.offsets.popper.left=r(n.left)-e.width),e.left>r(n.right)&&(t.offsets.popper.left=r(n.right)),e.bottom<r(n.top)&&(t.offsets.popper.top=r(n.top)-e.height),e.top>r(n.bottom)&&(t.offsets.popper.top=r(n.bottom)),t},n.prototype.modifiers.flip=function(t){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),t;if(t.flipped&&t.placement===t._originalPlacement)return t;var e=t.placement.split("-")[0],n=o(e),r=t.placement.split("-")[1]||"",s=[];return s="flip"===this._options.flipBehavior?[e,n]:this._options.flipBehavior,s.forEach(function(a,c){if(e===a&&s.length!==c+1){e=t.placement.split("-")[0],n=o(e);var l=i(t.offsets.popper),u=-1!==["right","bottom"].indexOf(e);(u&&Math.floor(t.offsets.reference[e])>Math.floor(l[n])||!u&&Math.floor(t.offsets.reference[e])<Math.floor(l[n]))&&(t.flipped=!0,t.placement=s[c+1],r&&(t.placement+="-"+r),t.offsets.popper=this._getOffsets(this._popper,this._reference,t.placement).popper,t=this.runModifiers(t,this._options.modifiers,this._flip))}}.bind(this)),t},n.prototype.modifiers.offset=function(t){var e=this._options.offset,n=t.offsets.popper;return-1!==t.placement.indexOf("left")?n.top-=e:-1!==t.placement.indexOf("right")?n.top+=e:-1!==t.placement.indexOf("top")?n.left-=e:-1!==t.placement.indexOf("bottom")&&(n.left+=e),t},n.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement,n=this._options.arrowOffset;if("string"===typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var o={},s=t.placement.split("-")[0],a=i(t.offsets.popper),c=t.offsets.reference,l=-1!==["left","right"].indexOf(s),u=l?"height":"width",p=l?"top":"left",f=l?"left":"top",h=l?"bottom":"right",d=r(e)[u];c[h]-d<a[p]&&(t.offsets.popper[p]-=a[p]-(c[h]-d)),c[p]+d>a[h]&&(t.offsets.popper[p]+=c[p]+d-a[h]);var m=c[p]+(n||c[u]/2-d/2),v=m-a[p];return v=Math.max(Math.min(a[u]-d-8,v),8),o[p]=v,o[f]="",t.offsets.arrow=o,t.arrowElement=e,t},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(void 0!==r&&null!==r){r=Object(r);for(var o=Object.keys(r),i=0,s=o.length;i<s;i++){var a=o[i],c=Object.getOwnPropertyDescriptor(r,a);void 0!==c&&c.enumerable&&(e[a]=r[a])}}}return e}}),n}))},"685c":function(t,e,n){"use strict";n.d(e,"d",(function(){return o})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return a}));var r=n("b775"),o=function(t){return Object(r["a"])({method:"POST",url:"/mp/v1_0/user/images",data:t})},i=function(t){return Object(r["a"])({method:"GET",url:"/mp/v1_0/user/images",params:t})},s=function(t,e){return Object(r["a"])({method:"PUT",url:"/mp/v1_0/user/images/".concat(t),data:{collect:e}})},a=function(t){return Object(r["a"])({method:"DELETE",url:"/mp/v1_0/user/images/".concat(t)})}},"6ac9":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=74)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},5:function(t,e){t.exports=n("e974")},7:function(t,e){t.exports=n("8bbf")},74:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("transition",{attrs:{name:t.transition},on:{"after-enter":t.handleAfterEnter,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&t.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[t.popperClass,t.content&&"el-popover--plain"],style:{width:t.width+"px"},attrs:{role:"tooltip",id:t.tooltipId,"aria-hidden":t.disabled||!t.showPopper?"true":"false"}},[t.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:t._s(t.title)}}):t._e(),t._t("default",[t._v(t._s(t.content))])],2)]),t._t("reference")],2)},o=[];r._withStripped=!0;var i=n(5),s=n.n(i),a=n(2),c=n(3),l={name:"ElPopover",mixins:[s.a],props:{trigger:{type:String,default:"click",validator:function(t){return["click","focus","hover","manual"].indexOf(t)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(c["generateId"])()}},watch:{showPopper:function(t){this.disabled||(t?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var t=this,e=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$slots.reference&&this.$slots.reference[0]&&(e=this.referenceElm=this.$slots.reference[0].elm),e&&(Object(a["addClass"])(e,"el-popover__reference"),e.setAttribute("aria-describedby",this.tooltipId),e.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(a["on"])(e,"focusin",(function(){t.handleFocus();var n=e.__vue__;n&&"function"===typeof n.focus&&n.focus()})),Object(a["on"])(n,"focusin",this.handleFocus),Object(a["on"])(e,"focusout",this.handleBlur),Object(a["on"])(n,"focusout",this.handleBlur)),Object(a["on"])(e,"keydown",this.handleKeydown),Object(a["on"])(e,"click",this.handleClick)),"click"===this.trigger?(Object(a["on"])(e,"click",this.doToggle),Object(a["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(a["on"])(e,"mouseenter",this.handleMouseEnter),Object(a["on"])(n,"mouseenter",this.handleMouseEnter),Object(a["on"])(e,"mouseleave",this.handleMouseLeave),Object(a["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),e.querySelector("input, textarea")?(Object(a["on"])(e,"focusin",this.doShow),Object(a["on"])(e,"focusout",this.doClose)):(Object(a["on"])(e,"mousedown",this.doShow),Object(a["on"])(e,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(a["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(a["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(a["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var t=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout((function(){t.showPopper=!0}),this.openDelay):this.showPopper=!0},handleKeydown:function(t){27===t.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var t=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout((function(){t.showPopper=!1}),this.closeDelay):this.showPopper=!1},handleDocumentClick:function(t){var e=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$slots.reference&&this.$slots.reference[0]&&(e=this.referenceElm=this.$slots.reference[0].elm),this.$el&&e&&!this.$el.contains(t.target)&&!e.contains(t.target)&&n&&!n.contains(t.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var t=this.reference;Object(a["off"])(t,"click",this.doToggle),Object(a["off"])(t,"mouseup",this.doClose),Object(a["off"])(t,"mousedown",this.doShow),Object(a["off"])(t,"focusin",this.doShow),Object(a["off"])(t,"focusout",this.doClose),Object(a["off"])(t,"mousedown",this.doShow),Object(a["off"])(t,"mouseup",this.doClose),Object(a["off"])(t,"mouseleave",this.handleMouseLeave),Object(a["off"])(t,"mouseenter",this.handleMouseEnter),Object(a["off"])(document,"click",this.handleDocumentClick)}},u=l,p=n(0),f=Object(p["a"])(u,r,o,!1,null,null,null);f.options.__file="packages/popover/src/main.vue";var h=f.exports,d=function(t,e,n){var r=e.expression?e.value:e.arg,o=n.context.$refs[r];o&&(Array.isArray(o)?o[0].$refs.reference=t:o.$refs.reference=t)},m={bind:function(t,e,n){d(t,e,n)},inserted:function(t,e,n){d(t,e,n)}},v=n(7),g=n.n(v);g.a.directive("popover",m),h.install=function(t){t.directive("popover",m),t.component(h.name,h)},h.directive=m;e["default"]=h}})},"6b7c":function(t,e,n){"use strict";e.__esModule=!0;var r=n("4897");e.default={methods:{t:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r.t.apply(this,e)}}}},"6ed5":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=77)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},10:function(t,e){t.exports=n("f3ad")},13:function(t,e){t.exports=n("eedf")},15:function(t,e){t.exports=n("5128")},19:function(t,e){t.exports=n("4897")},2:function(t,e){t.exports=n("5924")},23:function(t,e){t.exports=n("41f8")},47:function(t,e){t.exports=n("722f")},6:function(t,e){t.exports=n("6b7c")},7:function(t,e){t.exports=n("8bbf")},77:function(t,e,n){"use strict";n.r(e);var r=n(7),o=n.n(r),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{staticClass:"el-message-box",class:[t.customClass,t.center&&"el-message-box--center"]},[null!==t.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[t.icon&&t.center?n("div",{class:["el-message-box__status",t.icon]}):t._e(),n("span",[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.handleAction(t.distinguishCancelAndClose?"close":"cancel")},keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction(t.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):t._e()]):t._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[t.icon&&!t.center&&""!==t.message?n("div",{class:["el-message-box__status",t.icon]}):t._e(),""!==t.message?n("div",{staticClass:"el-message-box__message"},[t._t("default",[t.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:t._s(t.message)}}):n("p",[t._v(t._s(t.message))])])],2):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:t.inputType,placeholder:t.inputPlaceholder},nativeOn:{keydown:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputEnter(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:t.editorErrorMessage?"visible":"hidden"}},[t._v(t._s(t.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[t.showCancelButton?n("el-button",{class:[t.cancelButtonClasses],attrs:{loading:t.cancelButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("cancel")}},nativeOn:{click:function(e){t.handleAction("cancel")}}},[t._v("\n          "+t._s(t.cancelButtonText||t.t("el.messagebox.cancel"))+"\n        ")]):t._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[t.confirmButtonClasses],attrs:{loading:t.confirmButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("confirm")}},nativeOn:{click:function(e){t.handleAction("confirm")}}},[t._v("\n          "+t._s(t.confirmButtonText||t.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},s=[];i._withStripped=!0;var a=n(15),c=n.n(a),l=n(6),u=n.n(l),p=n(10),f=n.n(p),h=n(13),d=n.n(h),m=n(2),v=n(19),g=n(47),y=n.n(g),b=void 0,w={success:"success",info:"info",warning:"warning",error:"error"},x={mixins:[c.a,u.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:f.a,ElButton:d.a},computed:{icon:function(){var t=this.type,e=this.iconClass;return e||(t&&w[t]?"el-icon-"+w[t]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var t=this,e=this.uid;return function(){t.$nextTick((function(){e===t.uid&&t.doClose()}))}},doClose:function(){var t=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),b.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout((function(){t.action&&t.callback(t.action,t)})))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(t){("prompt"!==this.$type||"confirm"!==t||this.validate())&&(this.action=t,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(t,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var t=this.inputPattern;if(t&&!t.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(v["t"])("el.messagebox.error"),Object(m["addClass"])(this.getInputElement(),"invalid"),!1;var e=this.inputValidator;if("function"===typeof e){var n=e(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(v["t"])("el.messagebox.error"),Object(m["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(m["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(m["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var t=this.$el.querySelector(".el-message-box__btns .el-button"),e=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return t||e},getInputElement:function(){var t=this.$refs.input.$refs;return t.input||t.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(t){var e=this;this.$nextTick((function(n){"prompt"===e.$type&&null!==t&&e.validate()}))}},visible:function(t){var e=this;t&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick((function(){e.$refs.confirm.$el.focus()})),this.focusAfterClosed=document.activeElement,b=new y.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(t?setTimeout((function(){e.$refs.input&&e.$refs.input.$el&&e.getInputElement().focus()}),500):(this.editorErrorMessage="",Object(m["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var t=this;this.$nextTick((function(){t.closeOnHashChange&&window.addEventListener("hashchange",t.close)}))},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout((function(){b.closeDialog()}))},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},S=x,k=n(0),C=Object(k["a"])(S,i,s,!1,null,null,null);C.options.__file="packages/message-box/src/main.vue";var O=C.exports,_=n(9),M=n.n(_),E=n(23),T="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},A=o.a.extend(O),D=void 0,P=void 0,z=[],R=function(t){if(D){var e=D.callback;"function"===typeof e&&(P.showInput?e(P.inputValue,t):e(t)),D.resolve&&("confirm"===t?P.showInput?D.resolve({value:P.inputValue,action:t}):D.resolve(t):!D.reject||"cancel"!==t&&"close"!==t||D.reject(t))}},I=function(){P=new A({el:document.createElement("div")}),P.callback=R},j=function t(){if(P||I(),P.action="",(!P.visible||P.closeTimer)&&z.length>0){D=z.shift();var e=D.options;for(var n in e)e.hasOwnProperty(n)&&(P[n]=e[n]);void 0===e.callback&&(P.callback=R);var r=P.callback;P.callback=function(e,n){r(e,n),t()},Object(E["isVNode"])(P.message)?(P.$slots.default=[P.message],P.message=null):delete P.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach((function(t){void 0===P[t]&&(P[t]=!0)})),document.body.appendChild(P.$el),o.a.nextTick((function(){P.visible=!0}))}},F=function t(e,n){if(!o.a.prototype.$isServer){if("string"===typeof e||Object(E["isVNode"])(e)?(e={message:e},"string"===typeof arguments[1]&&(e.title=arguments[1])):e.callback&&!n&&(n=e.callback),"undefined"!==typeof Promise)return new Promise((function(r,o){z.push({options:M()({},N,t.defaults,e),callback:n,resolve:r,reject:o}),j()}));z.push({options:M()({},N,t.defaults,e),callback:n}),j()}};F.setDefaults=function(t){F.defaults=t},F.alert=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":T(e))?(n=e,e=""):void 0===e&&(e=""),F(M()({title:e,message:t,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},F.confirm=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":T(e))?(n=e,e=""):void 0===e&&(e=""),F(M()({title:e,message:t,$type:"confirm",showCancelButton:!0},n))},F.prompt=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":T(e))?(n=e,e=""):void 0===e&&(e=""),F(M()({title:e,message:t,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},F.close=function(){P.doClose(),P.visible=!1,z=[],D=null};var B=F;e["default"]=B},9:function(t,e){t.exports=n("7f4d")}})},"722f":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n("e452"),i=s(o);function s(t){return t&&t.__esModule?t:{default:t}}var a,c=c||{};c.Dialog=function(t,e,n){var o=this;if(this.dialogNode=t,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof e?this.focusAfterClosed=document.getElementById(e):"object"===("undefined"===typeof e?"undefined":r(e))?this.focusAfterClosed=e:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":r(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():i.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,a=function(t){o.trapFocus(t)},this.addListeners()},c.Dialog.prototype.addListeners=function(){document.addEventListener("focus",a,!0)},c.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",a,!0)},c.Dialog.prototype.closeDialog=function(){var t=this;this.removeListeners(),this.focusAfterClosed&&setTimeout((function(){t.focusAfterClosed.focus()}))},c.Dialog.prototype.trapFocus=function(t){i.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(t.target)?this.lastFocus=t.target:(i.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&i.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},e.default=c.Dialog},"7eef":function(t,e,n){},"7f06":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r=n("9ea7"),o=(n("5313"),"undefined"!=typeof navigator&&/Mac/.test(navigator.platform));function i(t){var e,n,r,i,s=t.split(/-(?!$)/),a=s[s.length-1];"Space"==a&&(a=" ");for(var c=0;c<s.length-1;c++){var l=s[c];if(/^(cmd|meta|m)$/i.test(l))i=!0;else if(/^a(lt)?$/i.test(l))e=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else if(/^s(hift)?$/i.test(l))r=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);o?i=!0:n=!0}}return e&&(a="Alt-"+a),n&&(a="Ctrl-"+a),i&&(a="Meta-"+a),r&&(a="Shift-"+a),a}function s(t){var e=Object.create(null);for(var n in t)e[i(n)]=t[n];return e}function a(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function c(t){var e=s(t);return function(t,n){var o,i=Object(r["b"])(n),s=1==i.length&&" "!=i,c=e[a(i,n,!s)];if(c&&c(t.state,t.dispatch,t))return!0;if(s&&(n.shiftKey||n.altKey||n.metaKey||i.charCodeAt(0)>127)&&(o=r["a"][n.keyCode])&&o!=i){var l=e[a(o,n,!0)];if(l&&l(t.state,t.dispatch,t))return!0}else if(s&&n.shiftKey){var u=e[a(i,n,!0)];if(u&&u(t.state,t.dispatch,t))return!0}return!1}}},"7f4d":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=1,n=arguments.length;e<n;e++){var r=arguments[e]||{};for(var o in r)if(r.hasOwnProperty(o)){var i=r[o];void 0!==i&&(t[o]=i)}}return t}},8122:function(t,e,n){"use strict";e.__esModule=!0,e.isEmpty=e.isEqual=e.arrayEquals=e.looseEqual=e.capitalize=e.kebabCase=e.autoprefixer=e.isFirefox=e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.noop=l,e.hasOwn=u,e.toObject=f,e.getPropByPath=h,e.rafThrottle=y,e.objToArray=b;var o=n("8bbf"),i=a(o),s=n("a742");function a(t){return t&&t.__esModule?t:{default:t}}var c=Object.prototype.hasOwnProperty;function l(){}function u(t,e){return c.call(t,e)}function p(t,e){for(var n in e)t[n]=e[n];return t}function f(t){for(var e={},n=0;n<t.length;n++)t[n]&&p(e,t[n]);return e}e.getValueByPath=function(t,e){e=e||"";for(var n=e.split("."),r=t,o=null,i=0,s=n.length;i<s;i++){var a=n[i];if(!r)break;if(i===s-1){o=r[a];break}r=r[a]}return o};function h(t,e,n){var r=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var o=e.split("."),i=0,s=o.length;i<s-1;++i){if(!r&&!n)break;var a=o[i];if(!(a in r)){if(n)throw new Error("please transfer a valid prop path to form item!");break}r=r[a]}return{o:r,k:o[i],v:r?r[o[i]]:null}}e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var n=0;n!==t.length;++n)if(t[n]!==e[n])return!1;return!0},e.escapeRegexpString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var d=e.arrayFindIndex=function(t,e){for(var n=0;n!==t.length;++n)if(e(t[n]))return n;return-1},m=(e.arrayFind=function(t,e){var n=d(t,e);return-1!==n?t[n]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!i.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!i.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},e.isFirefox=function(){return!i.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},e.autoprefixer=function(t){if("object"!==("undefined"===typeof t?"undefined":r(t)))return t;var e=["transform","transition","animation"],n=["ms-","webkit-"];return e.forEach((function(e){var r=t[e];e&&r&&n.forEach((function(n){t[n+e]=r}))})),t},e.kebabCase=function(t){var e=/([^-])([A-Z])/g;return t.replace(e,"$1-$2").replace(e,"$1-$2").toLowerCase()},e.capitalize=function(t){return(0,s.isString)(t)?t.charAt(0).toUpperCase()+t.slice(1):t},e.looseEqual=function(t,e){var n=(0,s.isObject)(t),r=(0,s.isObject)(e);return n&&r?JSON.stringify(t)===JSON.stringify(e):!n&&!r&&String(t)===String(e)}),v=e.arrayEquals=function(t,e){if(t=t||[],e=e||[],t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!m(t[n],e[n]))return!1;return!0},g=(e.isEqual=function(t,e){return Array.isArray(t)&&Array.isArray(e)?v(t,e):m(t,e)},e.isEmpty=function(t){if(null==t)return!0;if("boolean"===typeof t)return!1;if("number"===typeof t)return!t;if(t instanceof Error)return""===t.message;switch(Object.prototype.toString.call(t)){case"[object String]":case"[object Array]":return!t.length;case"[object File]":case"[object Map]":case"[object Set]":return!t.size;case"[object Object]":return!Object.keys(t).length}return!1});function y(t){var e=!1;return function(){for(var n=this,r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];e||(e=!0,window.requestAnimationFrame((function(r){t.apply(n,o),e=!1})))}}function b(t){return Array.isArray(t)?t:g(t)?[]:[t]}},"845f":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=99)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},99:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-button-group"},[t._t("default")],2)},o=[];r._withStripped=!0;var i={name:"ElButtonGroup"},s=i,a=n(0),c=Object(a["a"])(s,r,o,!1,null,null,null);c.options.__file="packages/button/src/button-group.vue";var l=c.exports;l.install=function(t){t.component(l.name,l)};e["default"]=l}})},"884c":function(t,e,n){"use strict";function r(t){this.content=t}r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?void 0:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)};var o=r;e["a"]=o},"89a9":function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=57)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},26:function(t,e){t.exports=n("92fa")},42:function(t,e){t.exports=n("c284")},57:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{class:["el-upload-list","el-upload-list--"+t.listType,{"is-disabled":t.disabled}],attrs:{tag:"ul",name:"el-list"}},t._l(t.files,(function(e){return n("li",{key:e.uid,class:["el-upload-list__item","is-"+e.status,t.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&t._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!t.disabled&&t.$emit("remove",e)},focus:function(e){t.focusing=!0},blur:function(e){t.focusing=!1},click:function(e){t.focusing=!1}}},[t._t("default",["uploading"!==e.status&&["picture-card","picture"].indexOf(t.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.url,alt:""}}):t._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){t.handleClick(e)}}},[n("i",{staticClass:"el-icon-document"}),t._v(t._s(e.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===t.listType,"el-icon-check":["picture-card","picture"].indexOf(t.listType)>-1}})]),t.disabled?t._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){t.$emit("remove",e)}}}),t.disabled?t._e():n("i",{staticClass:"el-icon-close-tip"},[t._v(t._s(t.t("el.upload.deleteTip")))]),"uploading"===e.status?n("el-progress",{attrs:{type:"picture-card"===t.listType?"circle":"line","stroke-width":"picture-card"===t.listType?6:2,percentage:t.parsePercentage(e.percentage)}}):t._e(),"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-actions"},[t.handlePreview&&"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){t.handlePreview(e)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):t._e(),t.disabled?t._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){t.$emit("remove",e)}}},[n("i",{staticClass:"el-icon-delete"})])]):t._e()],{file:e})],2)})),0)},o=[];r._withStripped=!0;var i=n(6),s=n.n(i),a=n(42),c=n.n(a),l={name:"ElUploadList",mixins:[s.a],data:function(){return{focusing:!1}},components:{ElProgress:c.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(t){return parseInt(t,10)},handleClick:function(t){this.handlePreview&&this.handlePreview(t)}}},u=l,p=n(0),f=Object(p["a"])(u,r,o,!1,null,null,null);f.options.__file="packages/upload/src/upload-list.vue";var h=f.exports,d=n(26),m=n.n(d);function v(t,e,n){var r=void 0;r=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+t+" "+n.status;var o=new Error(r);return o.status=n.status,o.method="post",o.url=t,o}function g(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(n){return e}}function y(t){if("undefined"!==typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var r=new FormData;t.data&&Object.keys(t.data).forEach((function(e){r.append(e,t.data[e])})),r.append(t.filename,t.file,t.file.name),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(v(n,t,e));t.onSuccess(g(e))},e.open("post",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var o=t.headers||{};for(var i in o)o.hasOwnProperty(i)&&null!==o[i]&&e.setRequestHeader(i,o[i]);return e.send(r),e}}var b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":t.dragover},on:{drop:function(e){return e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){e.preventDefault(),t.dragover=!1}}},[t._t("default")],2)},w=[];b._withStripped=!0;var x={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(t){if(!this.disabled&&this.uploader){var e=this.uploader.accept;this.dragover=!1,e?this.$emit("file",[].slice.call(t.dataTransfer.files).filter((function(t){var n=t.type,r=t.name,o=r.indexOf(".")>-1?"."+r.split(".").pop():"",i=n.replace(/\/.*$/,"");return e.split(",").map((function(t){return t.trim()})).filter((function(t){return t})).some((function(t){return/\..+$/.test(t)?o===t:/\/\*$/.test(t)?i===t.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(t)&&n===t}))}))):this.$emit("file",t.dataTransfer.files)}}}},S=x,k=Object(p["a"])(S,b,w,!1,null,null,null);k.options.__file="packages/upload/src/upload-dragger.vue";var C,O,_=k.exports,M={inject:["uploader"],components:{UploadDragger:_},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:y},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(t){return-1!==t.indexOf("image")},handleChange:function(t){var e=t.target.files;e&&this.uploadFiles(e)},uploadFiles:function(t){var e=this;if(this.limit&&this.fileList.length+t.length>this.limit)this.onExceed&&this.onExceed(t,this.fileList);else{var n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach((function(t){e.onStart(t),e.autoUpload&&e.upload(t)}))}},upload:function(t){var e=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t);n&&n.then?n.then((function(n){var r=Object.prototype.toString.call(n);if("[object File]"===r||"[object Blob]"===r){for(var o in"[object Blob]"===r&&(n=new File([n],t.name,{type:t.type})),t)t.hasOwnProperty(o)&&(n[o]=t[o]);e.post(n)}else e.post(t)}),(function(){e.onRemove(null,t)})):!1!==n?this.post(t):this.onRemove(null,t)},abort:function(t){var e=this.reqs;if(t){var n=t;t.uid&&(n=t.uid),e[n]&&e[n].abort()}else Object.keys(e).forEach((function(t){e[t]&&e[t].abort(),delete e[t]}))},post:function(t){var e=this,n=t.uid,r={headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(n){e.onProgress(n,t)},onSuccess:function(r){e.onSuccess(r,t),delete e.reqs[n]},onError:function(r){e.onError(r,t),delete e.reqs[n]}},o=this.httpRequest(r);this.reqs[n]=o,o&&o.then&&o.then(r.onSuccess,r.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(t){t.target===t.currentTarget&&(13!==t.keyCode&&32!==t.keyCode||this.handleClick())}},render:function(t){var e=this.handleClick,n=this.drag,r=this.name,o=this.handleChange,i=this.multiple,s=this.accept,a=this.listType,c=this.uploadFiles,l=this.disabled,u=this.handleKeydown,p={class:{"el-upload":!0},on:{click:e,keydown:u}};return p.class["el-upload--"+a]=!0,t("div",m()([p,{attrs:{tabindex:"0"}}]),[n?t("upload-dragger",{attrs:{disabled:l},on:{file:c}},[this.$slots.default]):this.$slots.default,t("input",{class:"el-upload__input",attrs:{type:"file",name:r,multiple:i,accept:s},ref:"input",on:{change:o}})])}},E=M,T=Object(p["a"])(E,C,O,!1,null,null,null);T.options.__file="packages/upload/src/upload.vue";var N=T.exports,A=n(11),D=n.n(A);function P(){}var z,R,I={name:"ElUpload",mixins:[D.a],components:{ElProgress:c.a,UploadList:h,Upload:N},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:P},onChange:{type:Function,default:P},onPreview:{type:Function},onSuccess:{type:Function,default:P},onProgress:{type:Function,default:P},onError:{type:Function,default:P},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:P}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(t){"picture-card"!==t&&"picture"!==t||(this.uploadFiles=this.uploadFiles.map((function(t){if(!t.url&&t.raw)try{t.url=URL.createObjectURL(t.raw)}catch(e){console.error("[Element Error][Upload]",e)}return t})))},fileList:{immediate:!0,handler:function(t){var e=this;this.uploadFiles=t.map((function(t){return t.uid=t.uid||Date.now()+e.tempIndex++,t.status=t.status||"success",t}))}}},methods:{handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"ready",name:t.name,size:t.size,percentage:0,uid:t.uid,raw:t};if("picture-card"===this.listType||"picture"===this.listType)try{e.url=URL.createObjectURL(t)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(e),this.onChange(e,this.uploadFiles)},handleProgress:function(t,e){var n=this.getFile(e);this.onProgress(t,n,this.uploadFiles),n.status="uploading",n.percentage=t.percent||0},handleSuccess:function(t,e){var n=this.getFile(e);n&&(n.status="success",n.response=t,this.onSuccess(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(t,e){var n=this.getFile(e),r=this.uploadFiles;n.status="fail",r.splice(r.indexOf(n),1),this.onError(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(t,e){var n=this;e&&(t=this.getFile(e));var r=function(){n.abort(t);var e=n.uploadFiles;e.splice(e.indexOf(t),1),n.onRemove(t,e)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var o=this.beforeRemove(t,this.uploadFiles);o&&o.then?o.then((function(){r()}),P):!1!==o&&r()}}else r()},getFile:function(t){var e=this.uploadFiles,n=void 0;return e.every((function(e){return n=t.uid===e.uid?e:null,!n})),n},abort:function(t){this.$refs["upload-inner"].abort(t)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var t=this;this.uploadFiles.filter((function(t){return"ready"===t.status})).forEach((function(e){t.$refs["upload-inner"].upload(e.raw)}))},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach((function(t){t.url&&0===t.url.indexOf("blob:")&&URL.revokeObjectURL(t.url)}))},render:function(t){var e=this,n=void 0;this.showFileList&&(n=t(h,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(t){if(e.$scopedSlots.file)return e.$scopedSlots.file({file:t.file})}]));var r={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},o=this.$slots.trigger||this.$slots.default,i=t("upload",r,[o]);return t("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[i,this.$slots.default]:i,this.$slots.tip,"picture-card"!==this.listType?n:""])}},j=I,F=Object(p["a"])(j,z,R,!1,null,null,null);F.options.__file="packages/upload/src/index.vue";var B=F.exports;B.install=function(t){t.component(B.name,B)};e["default"]=B},6:function(t,e){t.exports=n("6b7c")}})},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function r(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var o,i,s,a,c;for(s in e)if(o=t[s],i=e[s],o&&n.test(s))if("class"===s&&("string"===typeof o&&(c=o,t[s]=o={},o[c]=!0),"string"===typeof i&&(c=i,e[s]=i={},i[c]=!0)),"on"===s||"nativeOn"===s||"hook"===s)for(a in i)o[a]=r(o[a],i[a]);else if(Array.isArray(o))t[s]=o.concat(i);else if(Array.isArray(i))t[s]=[o].concat(i);else for(a in i)o[a]=i[a];else t[s]=e[s];return t}),{})}},"986d":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("5313"),o=n("304a"),i=n("55be"),s=function(t){return function(e){var n=L(t)(e.selection);return n?k(n.pos)(e):e}},a=function(t,e){return function(n){Array.isArray(t)||(t=[t]);for(var r=0,o=t.length;r<o;r++){var i=L(t[r])(n.selection);if(i){var s=x(i.pos,e)(n);if(s!==n)return s}}return n}},c=function(t){if(y(t.selection)){var e=t.selection.$from.pos,n=t.selection.$to.pos;return w(t.delete(e,n))}return t},l=function(t){return function(e){if(y(e.selection)){var n=e.selection,i=n.$from,s=n.$to;if(t instanceof o.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),t)||i.parent.canReplaceWith(i.index(),i.indexAfter(),t.type))return w(e.replaceWith(i.pos,s.pos,t).setSelection(new r.NodeSelection(e.doc.resolve(i.pos))))}return e}},u=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=r.Selection.findFrom(n.doc.resolve(t),e,!0);return o?n.setSelection(o):n}},p=function(t){return t.type&&t.type.spec.selectable},f=function(t){return p(t)&&t.type.isLeaf},h=function(t,e,n){return f(t)?n.setSelection(new r.NodeSelection(n.doc.resolve(e))):u(e)(n)},d=function(t,e,n){return function(r){var o="number"===typeof e,i=r.selection.$from,s=o?r.doc.resolve(e):y(r.selection)?r.doc.resolve(i.pos+1):i,c=s.parent;if(y(r.selection)&&n){var u=r;if(r=l(t)(r),u!==r)return r}if(_(c)){var f=r;if(r=a(c.type,t)(r),f!==r){var d=p(t)?s.before(s.depth):s.pos;return h(t,d,r)}}if(O(s,t)){r.insert(s.pos,t);var m=o?s.pos:p(t)?r.selection.$anchor.pos-1:r.selection.$anchor.pos;return w(h(t,m,r))}for(var v=s.depth;v>0;v--){var g=s.after(v),b=r.doc.resolve(g);if(O(b,t))return r.insert(g,t),w(h(t,g,r))}return r}},m=function(t,e,n,r){return function(o){var i=L(t)(o.selection);return i?w(o.setNodeMarkup(i.pos,e,Object.assign({},i.node.attrs,n),r)):o}},v=function(t){return function(e){if(!y(e.selection)){var n=L(t)(e.selection);if(n)return w(e.setSelection(r.NodeSelection.create(e.doc,n.pos)))}return e}},g=function(t){var e=H(t.selection);return"number"===typeof e?k(e)(t):t},y=function(t){return t instanceof r.NodeSelection},b=function(t,e){return Array.isArray(t)&&t.indexOf(e.type)>-1||e.type===t},w=function(t){return Object.assign(Object.create(t),t).setTime(Date.now())},x=function(t,e){return function(n){var r=n.doc.nodeAt(t),o=n.doc.resolve(t);if(S(o,e)){n=n.replaceWith(t,t+r.nodeSize,e);var i=n.selection.$from.pos-1;return n=u(Math.max(i,0),-1)(n),n=u(n.selection.$from.start())(n),w(n)}return n}},S=function(t,e){var n=t.node(t.depth);return n&&n.type.validContent(e instanceof o.Fragment?e:o.Fragment.from(e))},k=function(t){return function(e){var n=e.doc.nodeAt(t);return w(e.delete(t,t+n.nodeSize))}},C=function(t){if(t.cached.tableNodeTypes)return t.cached.tableNodeTypes;var e={};return Object.keys(t.nodes).forEach((function(n){var r=t.nodes[n];r.spec.tableRole&&(e[r.spec.tableRole]=r)})),t.cached.tableNodeTypes=e,e},O=function(t,e){var n=t.index();return e instanceof o.Fragment?t.parent.canReplace(n,n,e):e instanceof o.Node&&t.parent.canReplaceWith(n,n,e.type)},_=function(t){return!t||"paragraph"===t.type.name&&2===t.nodeSize},M=function(t){var e=function(t){return t.type.spec.tableRole&&/table/i.test(t.type.spec.tableRole)};return F(t,e)},E=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e?t.createChecked(null,e):t.createAndFill()},T=function(t){return function(e){for(var n=i.TableMap.get(e.$anchorCell.node(-1)),r=e.$anchorCell.start(-1),o=n.cellsInRect(t),s=n.cellsInRect(n.rectBetween(e.$anchorCell.pos-r,e.$headCell.pos-r)),a=0,c=o.length;a<c;a++)if(-1===s.indexOf(o[a]))return!1;return!0}},N=function(t){return t[0].map((function(e,n){return t.map((function(t){return t[n]}))}))},A=function(t){for(var e=i.TableMap.get(t),n=[],r=0;r<e.height;r++){for(var o=[],s={},a=0;a<e.width;a++){var c=e.map[r*e.width+a],l=t.nodeAt(c),u=e.findCell(c);s[c]||u.top!==r?o.push(null):(s[c]=!0,o.push(l))}n.push(o)}return n},D=function(t,e){for(var n=[],r=i.TableMap.get(t),o=0;o<r.height;o++){for(var s=t.child(o),a=[],c=0;c<r.width;c++)if(e[o][c]){var l=r.map[o*r.width+c],u=e[o][c],p=t.nodeAt(l),f=p.type.createChecked(Object.assign({},u.attrs),u.content,u.marks);a.push(f)}n.push(s.type.createChecked(s.attrs,a,s.marks))}var h=t.type.createChecked(t.attrs,n,t.marks);return h},P=function(t,e,n,r){var o=N(A(t.node));return o=R(o,e,n,r),o=N(o),D(t.node,o)},z=function(t,e,n,r){var o=A(t.node);return o=R(o,e,n,r),D(t.node,o)},R=function(t,e,n,r){var o=e[0]>n[0]?-1:1,i=t.splice(e[0],e.length),s=i.length%2===0?1:0,a=void 0;return a=-1===r&&1===o?n[0]-1:1===r&&-1===o?n[n.length-1]-s+1:-1===o?n[0]:n[n.length-1]-s,t.splice.apply(t,[a,0].concat(i)),t},I=function(t,e,n,r){var o=t>e?-1:1,i="Target position is invalid, you can't move the "+r+" "+t+" to "+e+", the target can't be split. You could use tryToFit option.";if(1===o){if(-1!==n.slice(0,n.length-1).indexOf(e))throw new Error(i)}else if(-1!==n.slice(1).indexOf(e))throw new Error(i);return!0},j=function(t){return function(e){var n=e.$from;return F(n,t)}},F=function(t,e){for(var n=t.depth;n>0;n--){var r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}},B=function(t,e){return function(n){var r=j(t)(n);if(r)return U(r.pos,e)}},$=function(t){return function(e){return!!j(t)(e)}},L=function(t){return function(e){return j((function(e){return b(t,e)}))(e)}},V=function(t,e){return F(t,(function(t){return b(e,t)}))},q=function(t){return function(e){return $((function(e){return b(t,e)}))(e)}},W=function(t,e){return function(n){return B((function(e){return b(t,e)}),e)(n)}},J=function(t){return function(e){if(y(e)){var n=e.node,r=e.$from;if(b(t,n))return{node:n,pos:r.pos,depth:r.depth}}}},H=function(t){var e=t.$from.nodeBefore,n=r.Selection.findFrom(t.$from,-1);if(n&&e){var o=L(e.type)(n);return o?o.pos:n.$from.pos}},U=function(t,e){var n=e(t),r=n.node.childNodes[n.offset];return n.node.nodeType===Node.TEXT_NODE?n.node.parentNode:r&&r.nodeType!==Node.TEXT_NODE?r:n.node},K=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t)throw new Error('Invalid "node" parameter');var n=[];return t.descendants((function(t,r){if(n.push({node:t,pos:r}),!e)return!1})),n},G=function(t,e,n){if(!t)throw new Error('Invalid "node" parameter');if(!e)throw new Error('Invalid "predicate" parameter');return K(t,n).filter((function(t){return e(t.node)}))},X=function(t,e){return G(t,(function(t){return t.isText}),e)},Z=function(t,e){return G(t,(function(t){return t.isInline}),e)},Y=function(t,e){return G(t,(function(t){return t.isBlock}),e)},Q=function(t,e,n){return G(t,(function(t){return!!e(t.attrs)}),n)},tt=function(t,e,n){return G(t,(function(t){return t.type===e}),n)},et=function(t,e,n){return G(t,(function(t){return e.isInSet(t.marks)}),n)},nt=function(t,e){return!!tt(t,e).length};function rt(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var ot=function(t){return j((function(t){return t.type.spec.tableRole&&"table"===t.type.spec.tableRole}))(t)},it=function(t){return t instanceof i.CellSelection},st=function(t){if(it(t)){var e=t.$anchorCell.start(-1),n=i.TableMap.get(t.$anchorCell.node(-1));return n.rectBetween(t.$anchorCell.pos-e,t.$headCell.pos-e)}},at=function(t){return function(e){if(it(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return T({left:t,right:t+1,top:0,bottom:n.height})(e)}return!1}},ct=function(t){return function(e){if(it(e)){var n=i.TableMap.get(e.$anchorCell.node(-1));return T({left:0,right:n.width,top:t,bottom:t+1})(e)}return!1}},lt=function(t){if(it(t)){var e=i.TableMap.get(t.$anchorCell.node(-1));return T({left:0,right:e.width,top:0,bottom:e.height})(t)}return!1},ut=function(t){return function(e){var n=ot(e);if(n){var r=i.TableMap.get(n.node),o=Array.isArray(t)?t:Array.from([t]);return o.reduce((function(t,e){if(e>=0&&e<=r.width-1){var o=r.cellsInRect({left:e,right:e+1,top:0,bottom:r.height});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},pt=function(t){return function(e){var n=ot(e);if(n){var r=i.TableMap.get(n.node),o=Array.isArray(t)?t:Array.from([t]);return o.reduce((function(t,e){if(e>=0&&e<=r.height-1){var o=r.cellsInRect({left:0,right:r.width,top:e,bottom:e+1});return t.concat(o.map((function(t){var e=n.node.nodeAt(t),r=t+n.start;return{pos:r,start:r+1,node:e}})))}}),[])}}},ft=function(t){var e=ot(t);if(e){var n=i.TableMap.get(e.node),r=n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height});return r.map((function(t){var n=e.node.nodeAt(t),r=t+e.start;return{pos:r,start:r+1,node:n}}))}},ht=function(t){return function(e,n){return function(r){var o=ot(r.selection),s="row"===t;if(o){var a=i.TableMap.get(o.node);if(e>=0&&e<(s?a.height:a.width)){var c=s?0:e,l=s?e:0,u=s?a.width:e+1,p=s?e+1:a.height;if(n){var f=zt(r.selection.$from);if(!f)return r;var h=a.findCell(f.pos-o.start);s?(l=Math.min(l,h.top),p=Math.max(p,h.bottom)):(c=Math.min(c,h.left),u=Math.max(u,h.right))}var d=a.cellsInRect({left:c,top:l,right:s?u:c+1,bottom:s?l+1:p}),m=p-l===1?d:a.cellsInRect({left:s?c:u-1,top:s?p-1:l,right:u,bottom:p}),v=o.start+d[0],g=o.start+m[m.length-1],y=r.doc.resolve(v),b=r.doc.resolve(g);return w(r.setSelection(new i.CellSelection(b,y)))}}return r}}},dt=ht("column"),mt=ht("row"),vt=function(t){var e=ot(t.selection);if(e){var n=i.TableMap.get(e.node),r=n.map;if(r&&r.length){var o=e.start+r[0],s=e.start+r[r.length-1],a=t.doc.resolve(o),c=t.doc.resolve(s);return w(t.setSelection(new i.CellSelection(c,a)))}}return t},gt=function(t,e){return function(n){if(t){var r=C(e).cell.createAndFill(),o=r.content;if(!t.node.content.eq(o))return n.replaceWith(t.pos+1,t.pos+t.node.nodeSize,o),w(n)}return n}},yt=function(t){return function(e){var n=ot(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.width)return w(i.addColumn(e,{map:r,tableStart:n.start,table:n.node},t))}return e}},bt=function(t,e,n){return function(r){var o={tryToFit:!1,direction:0},i=Object.assign(o,n),s=ot(r.selection);if(!s)return r;var a=Ft(t)(r),c=a.indexes,l=Ft(e)(r),u=l.indexes;if(c.indexOf(e)>-1)return r;!i.tryToFit&&u.length>1&&I(t,e,u,"row");var p=z(s,c,u,i.direction);return w(r).replaceWith(s.pos,s.pos+s.node.nodeSize,p)}},wt=function(t,e,n){return function(r){var o={tryToFit:!1,direction:0},i=Object.assign(o,n),s=ot(r.selection);if(!s)return r;var a=jt(t)(r),c=a.indexes,l=jt(e)(r),u=l.indexes;if(c.indexOf(e)>-1)return r;!i.tryToFit&&u.length>1&&I(t,e,u,"column");var p=P(s,c,u,i.direction);return w(r).replaceWith(s.pos,s.pos+s.node.nodeSize,p)}},xt=function(t,e){return function(n){var r=ot(n.selection);if(r){var o=i.TableMap.get(r.node),s=t-1;if(e&&s>=0)return w(St(s)(n));if(t>=0&&t<=o.height)return w(i.addRow(n,{map:o,tableStart:r.start,table:r.node},t))}return n}},St=function(t){return function(e){var n=ot(e.selection);if(n){var r=i.TableMap.get(n.node);if(t>=0&&t<=r.height){for(var o=n.node,s=C(o.type.schema),a=n.start,c=0;c<t+1;c++)a+=o.child(c).nodeSize;var l=o.child(t),u=[],p=0;if(l.forEach((function(t){1===t.attrs.rowspan&&(p+=t.attrs.colspan,u.push(s[t.type.spec.tableRole].createAndFill(t.attrs,t.marks)))})),p<r.width){for(var f=[],h=function(n){var r=It(n,(function(e,r){var o=e.node.attrs.rowspan,i=n+o;return o>1&&i>t}))(e);f.push.apply(f,rt(r))},m=t;m>=0;m--)h(m);f.length&&f.forEach((function(t){e=Dt(t,{rowspan:t.node.attrs.rowspan+1})(e)}))}return d(s.row.create(l.attrs,u),a)(e)}}return e}},kt=function(t){return function(e){var n=ot(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.width)return Ot(e);if(t>=0&&t<=r.width)return i.removeColumn(e,{map:r,tableStart:n.start,table:n.node},t),w(e)}return e}},Ct=function(t){return function(e){var n=ot(e.selection);if(n){var r=i.TableMap.get(n.node);if(0===t&&1===r.height)return Ot(e);if(t>=0&&t<=r.height)return i.removeRow(e,{map:r,tableStart:n.start,table:n.node},t),w(e)}return e}},Ot=function(t){for(var e=t.selection.$from,n=e.depth;n>0;n--){var r=e.node(n);if("table"===r.type.spec.tableRole)return w(t.delete(e.before(n),e.after(n)))}return t},_t=function(t){var e=t.selection;if(lt(e))return Ot(t);if(it(e)){var n=ot(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.left&&o.right==r.width)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.right-1;;a--){if(i.removeColumn(t,s,a),a===s.left)break;s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table)}return w(t)}}return t},Mt=function(t){var e=t.selection;if(lt(e))return Ot(t);if(it(e)){var n=ot(e);if(n){var r=i.TableMap.get(n.node),o=r.rectBetween(e.$anchorCell.pos-n.start,e.$headCell.pos-n.start);if(0==o.top&&o.bottom==r.height)return!1;for(var s=Object.assign({},o,{map:r,table:n.node,tableStart:n.start}),a=s.bottom-1;;a--){if(i.removeRow(t,s,a),a===s.top)break;s.table=s.tableStart?t.doc.nodeAt(s.tableStart-1):t.doc,s.map=i.TableMap.get(s.table)}return w(t)}}return t},Et=function(t){return function(e){var n=Rt(t);return n?kt(n.left)(u(t.pos)(e)):e}},Tt=function(t){return function(e){var n=Rt(t);return n?Ct(n.top)(u(t.pos)(e)):e}},Nt=function(t,e,n){return function(o){var i=ut(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}return w(o)}return o}},At=function(t,e,n){return function(o){var i=pt(t)(o.selection);if(i){for(var s=i.length-1;s>=0;s--)o=e(i[s],o);if(n){var a=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(r.Selection.near(a))}}return o}},Dt=function(t,e){return function(n){return t?(n.setNodeMarkup(t.pos,null,Object.assign({},t.node.attrs,e)),w(n)):n}},Pt=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=C(t),s=i.cell,a=i.header_cell,c=i.row,l=i.table,u=[],p=[],f=0;f<n;f++)u.push(E(s,o)),r&&p.push(E(a,o));for(var h=[],d=0;d<e;d++)h.push(c.createChecked(null,r&&0===d?p:u));return l.createChecked(null,h)},zt=function(t){var e=function(t){return t.type.spec.tableRole&&/cell/i.test(t.type.spec.tableRole)};return F(t,e)},Rt=function(t){var e=zt(t);if(e){var n=M(t),r=i.TableMap.get(n.node),o=e.pos-n.start;return r.rectBetween(o,o)}},It=function(t,e){return function(n){var r=[],o=pt(t)(n.selection);if(o)for(var i=o.length-1;i>=0;i--)e(o[i],n)&&r.push(o[i]);return r}},jt=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=ut(t)(e.selection);o&&o.forEach((function(e){var o=e.node.attrs.colspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=ut(t)(e.selection);n&&n.forEach((function(e){var n=e.node.attrs.colspan+t-1;e.node.attrs.colspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=ut(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=ut(n)(e.selection),u=pt(0)(e.selection),p=e.doc.resolve(l[l.length-1].pos),f=void 0,h=r;h>=n;h--){var d=ut(h)(e.selection);if(d&&d.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===d[0].pos){f=d[0];break}if(f)break}}var v=e.doc.resolve(f.pos);return{$anchor:p,$head:v,indexes:a}}},Ft=function(t){return function(e){for(var n=t,r=t,o=function(t){var o=pt(t)(e.selection);o.forEach((function(e){var o=e.node.attrs.rowspan+t-1;o>=n&&(n=t),o>r&&(r=o)}))},i=t;i>=0;i--)o(i);var s=function(t){var n=pt(t)(e.selection);n.forEach((function(e){var n=e.node.attrs.rowspan+t-1;e.node.attrs.rowspan>1&&n>r&&(r=n)}))};for(i=t;i<=r;i++)s(i);var a=[];for(i=n;i<=r;i++){var c=pt(i)(e.selection);c&&c.length&&a.push(i)}n=a[0],r=a[a.length-1];for(var l=pt(n)(e.selection),u=ut(0)(e.selection),p=e.doc.resolve(l[l.length-1].pos),f=void 0,h=r;h>=n;h--){var d=pt(h)(e.selection);if(d&&d.length){for(var m=u.length-1;m>=0;m--)if(u[m].pos===d[0].pos){f=d[0];break}if(f)break}}var v=e.doc.resolve(f.pos);return{$anchor:p,$head:v,indexes:a}}};e.isNodeSelection=y,e.canInsert=O,e.convertTableNodeToArrayOfRows=A,e.convertArrayOfRowsToTableNode=D,e.findParentNode=j,e.findParentNodeClosestToPos=F,e.findParentDomRef=B,e.hasParentNode=$,e.findParentNodeOfType=L,e.findParentNodeOfTypeClosestToPos=V,e.hasParentNodeOfType=q,e.findParentDomRefOfType=W,e.findSelectedNodeOfType=J,e.findPositionOfNodeBefore=H,e.findDomRefAtPos=U,e.flatten=K,e.findChildren=G,e.findTextNodes=X,e.findInlineNodes=Z,e.findBlockNodes=Y,e.findChildrenByAttr=Q,e.findChildrenByType=tt,e.findChildrenByMark=et,e.contains=nt,e.findTable=ot,e.isCellSelection=it,e.getSelectionRect=st,e.isColumnSelected=at,e.isRowSelected=ct,e.isTableSelected=lt,e.getCellsInColumn=ut,e.getCellsInRow=pt,e.getCellsInTable=ft,e.selectColumn=dt,e.selectRow=mt,e.selectTable=vt,e.emptyCell=gt,e.addColumnAt=yt,e.moveRow=bt,e.moveColumn=wt,e.addRowAt=xt,e.cloneRowAt=St,e.removeColumnAt=kt,e.removeRowAt=Ct,e.removeTable=Ot,e.removeSelectedColumns=_t,e.removeSelectedRows=Mt,e.removeColumnClosestToPos=Et,e.removeRowClosestToPos=Tt,e.forEachCellInColumn=Nt,e.forEachCellInRow=At,e.setCellAttrs=Dt,e.createTable=Pt,e.findCellClosestToPos=zt,e.findCellRectClosestToPos=Rt,e.getSelectionRangeInColumn=jt,e.getSelectionRangeInRow=Ft,e.removeParentNodeOfType=s,e.replaceParentNodeOfType=a,e.removeSelectedNode=c,e.replaceSelectedNode=l,e.setTextSelection=u,e.safeInsert=d,e.setParentNodeMarkup=m,e.selectParentNodeOfType=v,e.removeNodeBefore=g},"9d7e":function(t,e,n){"use strict";e.__esModule=!0;var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){function e(t){for(var e=arguments.length,n=Array(e>1?e-1:0),s=1;s<e;s++)n[s-1]=arguments[s];return 1===n.length&&"object"===r(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),t.replace(i,(function(e,r,i,s){var a=void 0;return"{"===t[s-1]&&"}"===t[s+e.length]?i:(a=(0,o.hasOwn)(n,i)?n[i]:null,null===a||void 0===a?"":a)}))}return e};var o=n("8122"),i=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9ea7":function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return h}));for(var r={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},o={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},i="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),s="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),a="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),c="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),l="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),u=i&&(c||+i[1]<57)||a&&c,p=0;p<10;p++)r[48+p]=r[96+p]=String(p);for(p=1;p<=24;p++)r[p+111]="F"+p;for(p=65;p<=90;p++)r[p]=String.fromCharCode(p+32),o[p]=String.fromCharCode(p);for(var f in r)o.hasOwnProperty(f)||(o[f]=r[f]);function h(t){var e=u&&(t.ctrlKey||t.altKey||t.metaKey)||(s||l)&&t.shiftKey&&t.key&&1==t.key.length,n=!e&&t.key||(t.shiftKey?o:r)[t.keyCode]||t.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}},a15f:function(t,e,n){"use strict";n.d(e,"a",(function(){return h})),n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return d})),n.d(e,"d",(function(){return v})),n.d(e,"e",(function(){return g})),n.d(e,"f",(function(){return y}));var r=n("986d");
/*!
    * tiptap-utils v1.9.0
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */
function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function a(t){return c(t)||l(t)||u(t)||f()}function c(t){if(Array.isArray(t))return p(t)}function l(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function u(t,e){if(t){if("string"===typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function f(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(t,e){var n=t.selection,r=n.from,o=n.to,i=[];t.doc.nodesBetween(r,o,(function(t){i=[].concat(a(i),a(t.marks))}));var s=i.find((function(t){return t.type.name===e.name}));return s?s.attrs:{}}function d(t,e){var n=t.selection,r=n.from,o=n.to,i=[];t.doc.nodesBetween(r,o,(function(t){i=[].concat(a(i),[t])}));var s=i.reverse().find((function(t){return t.type.name===e.name}));return s?s.attrs:{}}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t||!e)return!1;var n=t.parent.childAfter(t.parentOffset);if(!n.node)return!1;var r=n.node.marks.find((function(t){return t.type===e}));if(!r)return!1;var o=t.index(),i=t.start()+n.offset,s=o+1,a=i+n.node.nodeSize;while(o>0&&r.isInSet(t.parent.child(o-1).marks))o-=1,i-=t.parent.child(o).nodeSize;while(s<t.parent.childCount&&r.isInSet(t.parent.child(s).marks))a+=t.parent.child(s).nodeSize,s+=1;return{from:i,to:a}}function v(t,e){var n=t.selection,r=n.from,o=n.$from,i=n.to,s=n.empty;return s?!!e.isInSet(t.storedMarks||o.marks()):!!t.doc.rangeHasMark(r,i,e)}function g(t){var e=t.types,n=t.node;return Array.isArray(e)&&e.includes(n.type)||n.type===e}function y(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=function(t){return t.type===e},i=Object(r["findSelectedNodeOfType"])(e)(t.selection)||Object(r["findParentNode"])(o)(t.selection);return Object.keys(n).length&&i?i.node.hasMarkup(e,s({},i.node.attrs,{},n)):!!i}},a742:function(t,e,n){"use strict";function r(t){return"[object String]"===Object.prototype.toString.call(t)}function o(t){return"[object Object]"===Object.prototype.toString.call(t)}function i(t){return t&&t.nodeType===Node.ELEMENT_NODE}e.__esModule=!0,e.isString=r,e.isObject=o,e.isHtmlElement=i;e.isFunction=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},e.isUndefined=function(t){return void 0===t},e.isDefined=function(t){return void 0!==t&&null!==t}},a9de:function(t,e,n){"use strict";n.d(e,"a",(function(){return r["b"]})),n.d(e,"b",(function(){return r["c"]})),n.d(e,"k",(function(){return r["e"]})),n.d(e,"r",(function(){return r["f"]})),n.d(e,"d",(function(){return l})),n.d(e,"l",(function(){return f})),n.d(e,"m",(function(){return c})),n.d(e,"o",(function(){return h["c"]})),n.d(e,"u",(function(){return h["e"]})),n.d(e,"c",(function(){return Wt})),n.d(e,"e",(function(){return Yt})),n.d(e,"f",(function(){return ee})),n.d(e,"g",(function(){return Qt})),n.d(e,"h",(function(){return te})),n.d(e,"i",(function(){return ne})),n.d(e,"j",(function(){return re})),n.d(e,"n",(function(){return ie})),n.d(e,"p",(function(){return se})),n.d(e,"q",(function(){return ce})),n.d(e,"s",(function(){return le})),n.d(e,"t",(function(){return ue}));var r=n("0010"),o=n("0ac0"),i=n("304a");function s(t,e){return function(n,r){var s=n.selection,c=s.$from,l=s.$to,u=c.blockRange(l),p=!1,f=u;if(!u)return!1;if(u.depth>=2&&c.node(u.depth-1).type.compatibleContent(t)&&0==u.startIndex){if(0==c.index(u.depth-1))return!1;var h=n.doc.resolve(u.start-2);f=new i["NodeRange"](h,h,u.depth),u.endIndex<u.parent.childCount&&(u=new i["NodeRange"](c,n.doc.resolve(l.end(u.depth)),u.depth)),p=!0}var d=Object(o["h"])(f,t,e,u);return!!d&&(r&&r(a(n.tr,u,d,p,t).scrollIntoView()),!0)}}function a(t,e,n,r,s){for(var a=i["Fragment"].empty,c=n.length-1;c>=0;c--)a=i["Fragment"].from(n[c].type.create(n[c].attrs,a));t.step(new o["b"](e.start-(r?2:0),e.end,e.start,e.end,new i["Slice"](a,0,0),n.length,!0));for(var l=0,u=0;u<n.length;u++)n[u].type==s&&(l=u+1);for(var p=n.length-l,f=e.start+n.length-(r?2:0),h=e.parent,d=e.startIndex,m=e.endIndex,v=!0;d<m;d++,v=!1)!v&&Object(o["f"])(t.doc,f,p)&&(t.split(f,p),f+=2*p),f+=h.child(d).nodeSize;return t}function c(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=r.node;if(c&&c.isBlock||s.depth<2||!s.sameParent(a))return!1;var l=s.node(-1);if(l.type!=t)return!1;if(0==s.parent.content.size){if(2==s.depth||s.node(-3).type!=t||s.index(-2)!=s.node(-2).childCount-1)return!1;if(n){for(var u=i["Fragment"].empty,p=s.index(-1)>0,f=s.depth-(p?1:2);f>=s.depth-3;f--)u=i["Fragment"].from(s.node(f).copy(u));u=u.append(i["Fragment"].from(t.createAndFill()));var h=e.tr.replace(s.before(p?null:-1),s.after(-3),new i["Slice"](u,p?3:2,2));h.setSelection(e.selection.constructor.near(h.doc.resolve(s.pos+(p?3:2)))),n(h.scrollIntoView())}return!0}var d=a.pos==s.end()?l.contentMatchAt(0).defaultType:null,m=e.tr.delete(s.pos,a.pos),v=d&&[null,{type:d}];return!!Object(o["f"])(m.doc,s.pos,2,v)&&(n&&n(m.split(s.pos,2,v).scrollIntoView()),!0)}}function l(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,(function(e){return e.childCount&&e.firstChild.type==t}));return!!s&&(!n||(o.node(s.depth-1).type==t?u(e,n,t,s):p(e,n,s)))}}function u(t,e,n,r){var s=t.tr,a=r.end,c=r.$to.end(r.depth);return a<c&&(s.step(new o["b"](a-1,c,a,c,new i["Slice"](i["Fragment"].from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new i["NodeRange"](s.doc.resolve(r.$from.pos),s.doc.resolve(c),r.depth)),e(s.lift(r,Object(o["j"])(r)).scrollIntoView()),!0}function p(t,e,n){for(var r=t.tr,s=n.parent,a=n.end,c=n.endIndex-1,l=n.startIndex;c>l;c--)a-=s.child(c).nodeSize,r.delete(a-1,a+1);var u=r.doc.resolve(n.start),p=u.nodeAfter,f=0==n.startIndex,h=n.endIndex==s.childCount,d=u.node(-1),m=u.index(-1);if(!d.canReplace(m+(f?0:1),m+1,p.content.append(h?i["Fragment"].empty:i["Fragment"].from(s))))return!1;var v=u.pos,g=v+p.nodeSize;return r.step(new o["b"](v-(f?1:0),g+(h?1:0),v+1,g-1,new i["Slice"]((f?i["Fragment"].empty:i["Fragment"].from(s.copy(i["Fragment"].empty))).append(h?i["Fragment"].empty:i["Fragment"].from(s.copy(i["Fragment"].empty))),f?0:1,h?0:1),f?0:1)),e(r.scrollIntoView()),!0}function f(t){return function(e,n){var r=e.selection,s=r.$from,a=r.$to,c=s.blockRange(a,(function(e){return e.childCount&&e.firstChild.type==t}));if(!c)return!1;var l=c.startIndex;if(0==l)return!1;var u=c.parent,p=u.child(l-1);if(p.type!=t)return!1;if(n){var f=p.lastChild&&p.lastChild.type==u.type,h=i["Fragment"].from(f?t.create():null),d=new i["Slice"](i["Fragment"].from(t.create(null,i["Fragment"].from(u.type.create(null,h)))),f?3:1,0),m=c.start,v=c.end;n(e.tr.step(new o["b"](m-(f?3:1),v,m,v,d,1,!0)).scrollIntoView())}return!0}}var h=n("f95e"),d=n("5313"),m=n("884c");function v(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=v(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function g(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,u=Math.min(s.text.length,a.text.length);while(l<u&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var p=g(s.content,a.content,n-1,r-1);if(p)return p}n-=c,r-=c}else n-=c,r-=c}}var y=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},b={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};y.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},y.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},y.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},y.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new y(r,this.size+t.size)},y.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new y(n,r)},y.prototype.cutByIndex=function(t,e){return t==e?y.empty:0==t&&e==this.content.length?this:new y(this.content.slice(t,e))},y.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new y(r,o)},y.prototype.addToStart=function(t){return new y([t].concat(this.content),this.size+t.nodeSize)},y.prototype.addToEnd=function(t){return new y(this.content.concat(t),this.size+t.nodeSize)},y.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},b.firstChild.get=function(){return this.content.length?this.content[0]:null},b.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},b.childCount.get=function(){return this.content.length},y.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},y.prototype.maybeChild=function(t){return this.content[t]},y.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},y.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),v(this,t,e)},y.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),g(this,t,e,n)},y.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return x(0,t);if(t==this.size)return x(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?x(n+1,i):x(n,r);r=i}},y.prototype.toString=function(){return"<"+this.toStringInner()+">"},y.prototype.toStringInner=function(){return this.content.join(", ")},y.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},y.fromJSON=function(t,e){if(!e)return y.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new y(e.map(t.nodeFromJSON))},y.fromArray=function(t){if(!t.length)return y.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new y(e||t,n)},y.from=function(t){if(!t)return y.empty;if(t instanceof y)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new y([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(y.prototype,b);var w={index:0,offset:0};function x(t,e){return w.index=t,w.offset=e,w}function S(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!S(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!S(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}y.empty=new y([],0);var k=function(t,e){this.type=t,this.attrs=e};function C(t){var e=Error.call(this,t);return e.__proto__=C.prototype,e}k.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},k.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},k.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},k.prototype.eq=function(t){return this==t||this.type==t.type&&S(this.attrs,t.attrs)},k.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},k.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},k.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},k.setFrom=function(t){if(!t||0==t.length)return k.none;if(t instanceof k)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},k.none=[],C.prototype=Object.create(Error.prototype),C.prototype.constructor=C,C.prototype.name="ReplaceError";var O=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},_={size:{configurable:!0}};function M(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(M(s.content,e-i-1,n-i-1)))}function E(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=E(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function T(t,e,n){if(n.openStart>t.depth)throw new C("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new C("Inconsistent open depths");return N(t,e,n,0)}function N(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=N(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=F(n,t),c=a.start,l=a.end;return R(i,I(t,c,l,e,r))}var u=t.parent,p=u.content;return R(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return R(i,j(t,e,r))}function A(t,e){if(!e.type.compatibleContent(t.type))throw new C("Cannot join "+e.type.name+" onto "+t.type.name)}function D(t,e,n){var r=t.node(n);return A(r,e.node(n)),r}function P(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function z(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(P(t.nodeAfter,r),i++));for(var a=i;a<s;a++)P(o.child(a),r);e&&e.depth==n&&e.textOffset&&P(e.nodeBefore,r)}function R(t,e){if(!t.type.validContent(e))throw new C("Invalid content for node "+t.type.name);return t.copy(e)}function I(t,e,n,r,o){var i=t.depth>o&&D(t,e,o+1),s=r.depth>o&&D(n,r,o+1),a=[];return z(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(A(i,s),P(R(i,I(t,e,n,r,o+1)),a)):(i&&P(R(i,j(t,e,o+1)),a),z(e,n,o,a),s&&P(R(s,j(n,r,o+1)),a)),z(r,null,o,a),new y(a)}function j(t,e,n){var r=[];if(z(null,t,n,r),t.depth>n){var o=D(t,e,n+1);P(R(o,j(t,e,n+1)),r)}return z(e,null,n,r),new y(r)}function F(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(y.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}_.size.get=function(){return this.content.size-this.openStart-this.openEnd},O.prototype.insertAt=function(t,e){var n=E(this.content,t+this.openStart,e,null);return n&&new O(n,this.openStart,this.openEnd)},O.prototype.removeBetween=function(t,e){return new O(M(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},O.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},O.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},O.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},O.fromJSON=function(t,e){if(!e)return O.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new O(y.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},O.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new O(t,n,r)},Object.defineProperties(O.prototype,_),O.empty=new O(y.empty,0,0);var B=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},$={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};B.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},$.parent.get=function(){return this.node(this.depth)},$.doc.get=function(){return this.node(0)},B.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},B.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},B.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},B.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},B.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},B.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},B.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},$.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},$.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},$.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},B.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return k.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},B.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},B.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},B.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new W(this,t,n)},B.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},B.prototype.max=function(t){return t.pos>this.pos?t:this},B.prototype.min=function(t){return t.pos<this.pos?t:this},B.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},B.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new B(e,n,o)},B.resolveCached=function(t,e){for(var n=0;n<L.length;n++){var r=L[n];if(r.pos==e&&r.doc==t)return r}var o=L[V]=B.resolve(t,e);return V=(V+1)%q,o},Object.defineProperties(B.prototype,$);var L=[],V=0,q=12,W=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},J={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};J.start.get=function(){return this.$from.before(this.depth+1)},J.end.get=function(){return this.$to.after(this.depth+1)},J.parent.get=function(){return this.$from.node(this.depth)},J.startIndex.get=function(){return this.$from.index(this.depth)},J.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(W.prototype,J);var H=Object.create(null),U=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||y.empty,this.marks=r||k.none},K={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};K.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},K.childCount.get=function(){return this.content.childCount},U.prototype.child=function(t){return this.content.child(t)},U.prototype.maybeChild=function(t){return this.content.maybeChild(t)},U.prototype.forEach=function(t){this.content.forEach(t)},U.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},U.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},K.textContent.get=function(){return this.textBetween(0,this.content.size,"")},U.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},K.firstChild.get=function(){return this.content.firstChild},K.lastChild.get=function(){return this.content.lastChild},U.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},U.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},U.prototype.hasMarkup=function(t,e,n){return this.type==t&&S(this.attrs,e||t.defaultAttrs||H)&&k.sameSet(this.marks,n||k.none)},U.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},U.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},U.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},U.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return O.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new O(c,r.depth-i,o.depth-i)},U.prototype.replace=function(t,e,n){return T(this.resolve(t),this.resolve(e),n)},U.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},U.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},U.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},U.prototype.resolve=function(t){return B.resolveCached(this,t)},U.prototype.resolveNoCache=function(t){return B.resolve(this,t)},U.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},K.isBlock.get=function(){return this.type.isBlock},K.isTextblock.get=function(){return this.type.isTextblock},K.inlineContent.get=function(){return this.type.inlineContent},K.isInline.get=function(){return this.type.isInline},K.isText.get=function(){return this.type.isText},K.isLeaf.get=function(){return this.type.isLeaf},K.isAtom.get=function(){return this.type.isAtom},U.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),X(this.marks,t)},U.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},U.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=y.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},U.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},U.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},U.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},U.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},U.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=y.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(U.prototype,K);var G=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):X(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(U);function X(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Z=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Y={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Z.parse=function(t,e){var n=new Q(t,e);if(null==n.next)return Z.empty;var r=et(n);n.next&&n.err("Unexpected trailing text");var o=pt(ct(r));return ft(o,n),o},Z.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Z.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},Y.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Y.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Z.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Z.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return y.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var p=o(u,s.concat(l));if(p)return p}}}return o(this,[])},Z.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Z.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Y.edgeCount.get=function(){return this.next.length>>1},Z.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Z.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(Z.prototype,Y),Z.empty=new Z(!0);var Q=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},tt={next:{configurable:!0}};function et(t){var e=[];do{e.push(nt(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function nt(t){var e=[];do{e.push(rt(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function rt(t){for(var e=at(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=it(t,e)}return e}function ot(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function it(t,e){var n=ot(t),r=n;return t.eat(",")&&(r="}"!=t.next?ot(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function st(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function at(t){if(t.eat("(")){var e=et(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=st(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function ct(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function lt(t,e){return e-t}function ut(t,e){var n=[];return r(e),n.sort(lt);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function pt(t){var e=Object.create(null);return n(ut(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];ut(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new Z(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(lt);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function ft(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function ht(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function dt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function mt(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new yt(t[n]);return e}tt.next.get=function(){return this.tokens[this.pos]},Q.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Q.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Q.prototype,tt);var vt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=mt(n.attrs),this.defaultAttrs=ht(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},gt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};gt.isInline.get=function(){return!this.isBlock},gt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},gt.isLeaf.get=function(){return this.contentMatch==Z.empty},gt.isAtom.get=function(){return this.isLeaf||this.spec.atom},vt.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},vt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},vt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:dt(this.attrs,t)},vt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new U(this,this.computeAttrs(t),y.from(e),k.setFrom(n))},vt.prototype.createChecked=function(t,e,n){if(e=y.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new U(this,this.computeAttrs(t),e,k.setFrom(n))},vt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=y.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(y.empty,!0);return o?new U(this,t,e.append(o),k.setFrom(n)):null},vt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},vt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},vt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},vt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:k.empty:t},vt.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new vt(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(vt.prototype,gt);var yt=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},bt={isRequired:{configurable:!0}};bt.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(yt.prototype,bt);var wt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=mt(r.attrs),this.rank=e,this.excluded=null;var o=ht(this.attrs);this.instance=o&&new k(this,o)};wt.prototype.create=function(t){return!t&&this.instance?this.instance:new k(this,dt(this.attrs,t))},wt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new wt(t,r++,e,o)})),n},wt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},wt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},wt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var xt=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=m["a"].from(t.nodes),this.spec.marks=m["a"].from(t.marks),this.nodes=vt.compile(this.spec.nodes,this),this.marks=wt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=Z.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?St(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var c=this.marks[a],l=c.spec.excludes;c.excluded=null==l?[c]:""==l?[]:St(this,l.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function St(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}xt.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof vt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},xt.prototype.text=function(t,e){var n=this.nodes.text;return new G(n,n.defaultAttrs,t,k.setFrom(e))},xt.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},xt.prototype.nodeFromJSON=function(t){return U.fromJSON(this,t)},xt.prototype.markFromJSON=function(t){return k.fromJSON(this,t)},xt.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var kt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)}))};kt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Dt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},kt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Dt(this,e,!0);return n.addAll(t,null,e.from,e.to),O.maxOpen(n.finish())},kt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Rt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},kt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},kt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=jt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=jt(t)),t.node=s}))};for(var s in t.nodes)i();return e},kt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new kt(t,kt.schemaRules(t)))};var Ct={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Ot={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_t={ol:!0,ul:!0},Mt=1,Et=2,Tt=4;function Nt(t){return(t?Mt:0)|("full"===t?Et:0)}var At=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&Tt?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=k.none,this.pendingMarks=r};At.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(y.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},At.prototype.finish=function(t){if(!(this.options&Mt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=y.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(y.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},At.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Ft(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Dt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=Nt(e.preserveWhitespace)|(n?Tt:0);r=o?new At(o.type,o.attrs,k.none,k.none,!0,e.topMatch||o.type.contentMatch,i):new At(n?null:t.schema.topNodeType,null,k.none,k.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Pt={top:{configurable:!0},currentPos:{configurable:!0}};function zt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&_t.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Rt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function It(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function jt(t){var e={};for(var n in t)e[n]=t[n];return e}function Ft(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Pt.top.get=function(){return this.nodes[this.open]},Dt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(It(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Dt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&Mt)n.options&Et||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Dt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();_t.hasOwnProperty(e)&&zt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:Ot.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(Ct.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},Dt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Dt.prototype.readStyles=function(t){for(var e=k.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},Dt.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Dt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Ct.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Dt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Dt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Dt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Dt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~Tt:Nt(r);o.options&Tt&&0==o.content.length&&(i|=Tt),this.nodes.push(new At(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Dt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Dt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Dt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Pt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Dt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Dt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Dt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Dt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Dt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},Dt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Dt.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Dt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(Dt.prototype,Pt);var Bt=function(t,e){this.nodes=t||{},this.marks=e||{}};function $t(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Lt(t){return t.document||window.document}Bt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Lt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Bt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Bt.renderSpec(Lt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Bt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Bt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Bt.renderSpec(Lt(n),r(t,e))},Bt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=Bt.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Bt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Bt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Bt.nodesFromSchema=function(t){var e=$t(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Bt.marksFromSchema=function(t){return $t(t.marks)};var Vt=n("a15f"),qt=n("986d");
/*!
    * tiptap-commands v1.13.0
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */
function Wt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(e,n){var r=e.selection.$from,o=r.pos.pos;return n(e.tr.insertText(t,o)),!0}}function Jt(t){return Ht(t)||Ut(t)||Kt(t)||Xt()}function Ht(t){if(Array.isArray(t))return Gt(t)}function Ut(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Kt(t,e){if(t){if("string"===typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Gt(t,e):void 0}}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Xt(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Zt(t,e,n){var r=[];return n.doc.nodesBetween(t,e,(function(t,e){r=[].concat(Jt(r),Jt(t.marks.map((function(n){return{start:e,end:e+t.nodeSize,mark:n}}))))})),r}function Yt(t,e,n){return new h["a"](t,(function(t,r,o,i){var s=n instanceof Function?n(r):n,a=t.tr,c=r.length-1,l=i,u=o;if(r[c]){var p=o+r[0].indexOf(r[c-1]),f=p+r[c-1].length-1,h=p+r[c-1].lastIndexOf(r[c]),d=h+r[c].length,m=Zt(o,i,t).filter((function(t){var n=t.mark.type.excluded;return n.find((function(t){return t.name===e.name}))})).filter((function(t){return t.end>p}));if(m.length)return!1;d<f&&a.delete(d,f),h>p&&a.delete(p,h),u=p,l=u+r[c].length}return a.addMark(u,l,e.create(s)),a.removeStoredMark(e),a}))}function Qt(t,e,n){return new h["a"](t,(function(t,r,o,i){var s=n instanceof Function?n(r):n,a=t.tr;return r[0]&&a.replaceWith(o-1,i,e.create(s)),a}))}function te(t,e,n){var r=function r(o){var i=[];return o.forEach((function(o){if(o.isText){var s,a=o.text,c=0;do{if(s=t.exec(a),s){var l=s.index,u=l+s[0].length,p=n instanceof Function?n(s[0]):n;l>0&&i.push(o.cut(c,l)),i.push(o.cut(l,u).mark(e.create(p).addToSet(o.marks))),c=u}}while(s);c<a.length&&i.push(o.cut(c))}else i.push(o.copy(r(o.content)))})),y.fromArray(i)};return new d["Plugin"]({props:{transformPasted:function(t){return new O(r(t.content),t.openStart,t.openEnd)}}})}function ee(t,e,n){var r=function r(o,i){var s=[];return o.forEach((function(o){if(o.isText){var a,c=o.text,l=o.marks,u=0,p=!!l.filter((function(t){return"link"===t.type.name}))[0];while(!p&&null!==(a=t.exec(c)))if(i.type.allowsMarkType(e)&&a[1]){var f=a.index,h=f+a[0].length,d=f+a[0].indexOf(a[1]),m=d+a[1].length,v=n instanceof Function?n(a):n;f>0&&s.push(o.cut(u,f)),s.push(o.cut(d,m).mark(e.create(v).addToSet(o.marks))),u=h}u<c.length&&s.push(o.cut(u))}else s.push(o.copy(r(o.content,o)))})),y.fromArray(s)};return new d["Plugin"]({props:{transformPasted:function(t){return new O(r(t.content),t.openStart,t.openEnd)}}})}function ne(t){return function(e,n){var r=e.tr,o=e.selection,i=o.from,s=o.to,a=o.$from,c=o.empty;if(c){var l=Object(Vt["b"])(a,t);i=l.from,s=l.to}return r.removeMark(i,s,t),n(r)}}function re(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(r,o){var i=r.selection,s=i.$from,a=i.$to,c=s.index(),l=t?t.from:s.pos,u=t?t.to:a.pos;return!!s.parent.canReplaceWith(c,c,e)&&(o&&o(r.tr.replaceWith(l,u,e.create(n))),!0)}}function oe(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,o=t.resolve(e),i=o.depth-n,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=n-2;a>i;a--,c--){var l=o.node(a),u=o.index(a);if(l.type.spec.isolating)return!1;var p=l.content.cutByIndex(u,l.childCount),f=r&&r[c]||l;if(f!=l&&(p=p.replaceChild(0,f.type.create(f.attrs))),!l.canReplace(u+1,l.childCount))return!1}var h=o.indexAfter(i),d=r&&r[0];return o.node(i).canReplaceWith(h,h,d?d.type:o.node(i+1).type)}function ie(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=r.node;if(s&&s.isBlock||o.depth<2||!o.sameParent(i))return!1;var a=o.node(-1);if(a.type!=t)return!1;if(0==o.parent.content.size){if(2==o.depth||o.node(-3).type!=t||o.index(-2)!=o.node(-2).childCount-1)return!1;if(n){for(var c=y.empty,l=o.index(-1)>0,u=o.depth-(l?1:2);u>=o.depth-3;u--)c=y.from(o.node(u).copy(c));c=c.append(y.from(t.createAndFill()));var p=e.tr.replace(o.before(l?null:-1),o.after(-3),new O(c,l?3:2,2));p.setSelection(e.selection.constructor.near(p.doc.resolve(o.pos+(l?3:2)))),n(p.scrollIntoView())}return!0}var f=i.pos==o.end()?a.contentMatchAt(o.indexAfter(-1)).defaultType:null,h=e.tr.delete(o.pos,i.pos),d=f&&[{type:t},{type:f}];return d||(d=[{type:t},null]),!!oe(h.doc,o.pos,2,d)&&(n&&n(h.split(o.pos,2,d).scrollIntoView()),!0)}}function se(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o,i,s){var a=Object(Vt["f"])(o,t,n);return a?Object(r["e"])(e)(o,i,s):Object(r["e"])(t,n)(o,i,s)}}function ae(t,e){return t.type===e.nodes.bullet_list||t.type===e.nodes.ordered_list||t.type===e.nodes.todo_list}function ce(t,e){return function(n,r,o){var i=n.schema,a=n.selection,c=a.$from,u=a.$to,p=c.blockRange(u);if(!p)return!1;var f=Object(qt["findParentNode"])((function(t){return ae(t,i)}))(a);if(p.depth>=1&&f&&p.depth-f.depth<=1){if(f.node.type===t)return l(e)(n,r,o);if(ae(f.node,i)&&t.validContent(f.node.content)){var h=n.tr;return h.setNodeMarkup(f.pos,t),r&&r(h),!1}}return s(t)(n,r,o)}}function le(t){return function(e,n,o){var i=Object(Vt["f"])(e,t);return i?Object(r["d"])(e,n):Object(r["g"])(t)(e,n,o)}}function ue(t,e){return function(n,r){var o=n.tr,i=n.selection,s=n.doc,a=i.from,c=i.to,l=i.$from,u=i.empty;if(u){var p=Object(Vt["b"])(l,t);a=p.from,c=p.to}var f=s.rangeHasMark(a,c,t);return f&&o.removeMark(a,c,t),o.addMark(a,c,t.create(e)),r(o)}}},b370:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=128)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},12:function(t,e){t.exports=n("417f")},128:function(t,e,n){"use strict";n.r(e);var r,o,i=n(12),s=n.n(i),a=n(4),c=n.n(a),l=n(11),u=n.n(l),p=n(13),f=n.n(p),h=n(36),d=n.n(h),m=n(3),v={name:"ElDropdown",componentName:"ElDropdown",mixins:[c.a,u.a],directives:{Clickoutside:s.a},components:{ElButton:f.a,ElButtonGroup:d.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(m["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(t){this.broadcast("ElDropdownMenu","visible",t),this.$emit("visible-change",t)},focusing:function(t){var e=this.$el.querySelector(".el-dropdown-selfdefine");e&&(t?e.className+=" focusing":e.className=e.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var t=this;this.triggerElm.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.visible=!0}),"click"===this.trigger?0:this.showTimeout))},hide:function(){var t=this;this.triggerElm.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout((function(){t.visible=!1}),"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.triggerElm.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(t){var e=t.keyCode;[38,40].indexOf(e)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),t.preventDefault(),t.stopPropagation()):13===e?this.handleClick():[9,27].indexOf(e)>-1&&this.hide()},handleItemKeyDown:function(t){var e=t.keyCode,n=t.target,r=this.menuItemsArray.indexOf(n),o=this.menuItemsArray.length-1,i=void 0;[38,40].indexOf(e)>-1?(i=38===e?0!==r?r-1:0:r<o?r+1:o,this.removeTabindex(),this.resetTabindex(this.menuItems[i]),this.menuItems[i].focus(),t.preventDefault(),t.stopPropagation()):13===e?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(e)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(t){this.removeTabindex(),t.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach((function(t){t.setAttribute("tabindex","-1")}))},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var t=this,e=this.trigger,n=this.show,r=this.hide,o=this.handleClick,i=this.splitButton,s=this.handleTriggerKeyDown,a=this.handleItemKeyDown;this.triggerElm=i?this.$refs.trigger.$el:this.$slots.default[0].elm;var c=this.dropdownElm;this.triggerElm.addEventListener("keydown",s),c.addEventListener("keydown",a,!0),i||(this.triggerElm.addEventListener("focus",(function(){t.focusing=!0})),this.triggerElm.addEventListener("blur",(function(){t.focusing=!1})),this.triggerElm.addEventListener("click",(function(){t.focusing=!1}))),"hover"===e?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",r),c.addEventListener("mouseenter",n),c.addEventListener("mouseleave",r)):"click"===e&&this.triggerElm.addEventListener("click",o)},handleMenuItemClick:function(t,e){this.hideOnClick&&(this.visible=!1),this.$emit("command",t,e)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(t){var e=this,n=this.hide,r=this.splitButton,o=this.type,i=this.dropdownSize,s=function(t){e.$emit("click",t),n()},a=r?t("el-button-group",[t("el-button",{attrs:{type:o,size:i},nativeOn:{click:s}},[this.$slots.default]),t("el-button",{ref:"trigger",attrs:{type:o,size:i},class:"el-dropdown__caret-button"},[t("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]):this.$slots.default;return t("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}]},[a,this.$slots.dropdown])}},g=v,y=n(0),b=Object(y["a"])(g,r,o,!1,null,null,null);b.options.__file="packages/dropdown/src/dropdown.vue";var w=b.exports;w.install=function(t){t.component(w.name,w)};e["default"]=w},13:function(t,e){t.exports=n("eedf")},3:function(t,e){t.exports=n("8122")},36:function(t,e){t.exports=n("845f")},4:function(t,e){t.exports=n("d010")}})},c284:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=119)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},119:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-progress",class:["el-progress--"+t.type,t.status?"is-"+t.status:"",{"el-progress--without-text":!t.showText,"el-progress--text-inside":t.textInside}],attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===t.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:t.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:t.barStyle},[t.showText&&t.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[t._v(t._s(t.content))]):t._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:t.width+"px",width:t.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:t.trailPathStyle,attrs:{d:t.trackPath,stroke:"#e5e9f2","stroke-width":t.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:t.circlePathStyle,attrs:{d:t.trackPath,stroke:t.stroke,fill:"none","stroke-linecap":t.strokeLinecap,"stroke-width":t.percentage?t.relativeStrokeWidth:0}})])]),t.showText&&!t.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:t.progressTextSize+"px"}},[t.status?n("i",{class:t.iconClass}):[t._v(t._s(t.content))]],2):t._e()])},o=[];r._withStripped=!0;var i={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(t){return["line","circle","dashboard"].indexOf(t)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(t){return t>=0&&t<=100}},status:{type:String,validator:function(t){return["success","exception","warning"].indexOf(t)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var t={};return t.width=this.percentage+"%",t.backgroundColor=this.getCurrentColor(this.percentage),t},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var t=this.radius,e="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(e?"":"-")+t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"-":"")+2*t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"":"-")+2*t+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var t=-1*this.perimeter*(1-this.rate)/2;return t+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var t=void 0;if(this.color)t=this.getCurrentColor(this.percentage);else switch(this.status){case"success":t="#13ce66";break;case"exception":t="#ff4949";break;case"warning":t="#e6a23c";break;default:t="#20a0ff"}return t},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(t){return"function"===typeof this.color?this.color(t):"string"===typeof this.color?this.color:this.getLevelColor(t)},getLevelColor:function(t){for(var e=this.getColorArray().sort((function(t,e){return t.percentage-e.percentage})),n=0;n<e.length;n++)if(e[n].percentage>t)return e[n].color;return e[e.length-1].color},getColorArray:function(){var t=this.color,e=100/t.length;return t.map((function(t,n){return"string"===typeof t?{color:t,progress:(n+1)*e}:t}))}}},s=i,a=n(0),c=Object(a["a"])(s,r,o,!1,null,null,null);c.options.__file="packages/progress/src/progress.vue";var l=c.exports;l.install=function(t){t.component(l.name,l)};e["default"]=l}})},cd42:function(t,e,n){"use strict";n.d(e,"j",(function(){return r["Plugin"]})),n.d(e,"k",(function(){return r["PluginKey"]})),n.d(e,"a",(function(){return Gs})),n.d(e,"b",(function(){return Qs})),n.d(e,"c",(function(){return ta})),n.d(e,"d",(function(){return ra})),n.d(e,"e",(function(){return la})),n.d(e,"f",(function(){return qs})),n.d(e,"g",(function(){return Hs})),n.d(e,"h",(function(){return Ks})),n.d(e,"i",(function(){return Xs})),n.d(e,"l",(function(){return Zs}));var r=n("5313"),o=n("884c");function i(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),s=e.child(r);if(o!=s){if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)n++;return n}if(o.content.size||s.content.size){var c=i(o.content,s.content,n+1);if(null!=c)return c}n+=o.nodeSize}else n+=o.nodeSize}}function s(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var a=t.child(--o),c=e.child(--i),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){var u=0,p=Math.min(a.text.length,c.text.length);while(u<p&&a.text[a.text.length-u-1]==c.text[c.text.length-u-1])u++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var f=s(a.content,c.content,n-1,r-1);if(f)return f}n-=l,r-=l}else n-=l,r-=l}}var a=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},c={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};a.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},a.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},a.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},a.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new a(r,this.size+t.size)},a.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],c=i+s.nodeSize;c>t&&((i<t||c>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=c}return new a(n,r)},a.prototype.cutByIndex=function(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))},a.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,o)},a.prototype.addToStart=function(t){return new a([t].concat(this.content),this.size+t.nodeSize)},a.prototype.addToEnd=function(t){return new a(this.content.concat(t),this.size+t.nodeSize)},a.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},c.firstChild.get=function(){return this.content.length?this.content[0]:null},c.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},c.childCount.get=function(){return this.content.length},a.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},a.prototype.maybeChild=function(t){return this.content[t]},a.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},a.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),i(this,t,e)},a.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),s(this,t,e,n)},a.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return u(0,t);if(t==this.size)return u(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?u(n+1,i):u(n,r);r=i}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},a.fromJSON=function(t,e){if(!e)return a.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new a(e.map(t.nodeFromJSON))},a.fromArray=function(t){if(!t.length)return a.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new a(e||t,n)},a.from=function(t){if(!t)return a.empty;if(t instanceof a)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new a([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(a.prototype,c);var l={index:0,offset:0};function u(t,e){return l.index=t,l.offset=e,l}function p(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!p(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!p(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}a.empty=new a([],0);var f=function(t,e){this.type=t,this.attrs=e};function h(t){var e=Error.call(this,t);return e.__proto__=h.prototype,e}f.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},f.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},f.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},f.prototype.eq=function(t){return this==t||this.type==t.type&&p(this.attrs,t.attrs)},f.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},f.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},f.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},f.setFrom=function(t){if(!t||0==t.length)return f.none;if(t instanceof f)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},f.none=[],h.prototype=Object.create(Error.prototype),h.prototype.constructor=h,h.prototype.name="ReplaceError";var d=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},m={size:{configurable:!0}};function v(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(v(s.content,e-i-1,n-i-1)))}function g(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=g(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function y(t,e,n){if(n.openStart>t.depth)throw new h("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new h("Inconsistent open depths");return b(t,e,n,0)}function b(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=b(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=M(n,t),c=a.start,l=a.end;return C(i,O(t,c,l,e,r))}var u=t.parent,p=u.content;return C(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return C(i,_(t,e,r))}function w(t,e){if(!e.type.compatibleContent(t.type))throw new h("Cannot join "+e.type.name+" onto "+t.type.name)}function x(t,e,n){var r=t.node(n);return w(r,e.node(n)),r}function S(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(S(t.nodeAfter,r),i++));for(var a=i;a<s;a++)S(o.child(a),r);e&&e.depth==n&&e.textOffset&&S(e.nodeBefore,r)}function C(t,e){if(!t.type.validContent(e))throw new h("Invalid content for node "+t.type.name);return t.copy(e)}function O(t,e,n,r,o){var i=t.depth>o&&x(t,e,o+1),s=r.depth>o&&x(n,r,o+1),c=[];return k(null,t,o,c),i&&s&&e.index(o)==n.index(o)?(w(i,s),S(C(i,O(t,e,n,r,o+1)),c)):(i&&S(C(i,_(t,e,o+1)),c),k(e,n,o,c),s&&S(C(s,_(n,r,o+1)),c)),k(r,null,o,c),new a(c)}function _(t,e,n){var r=[];if(k(null,t,n,r),t.depth>n){var o=x(t,e,n+1);S(C(o,_(t,e,n+1)),r)}return k(e,null,n,r),new a(r)}function M(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(a.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}m.size.get=function(){return this.content.size-this.openStart-this.openEnd},d.prototype.insertAt=function(t,e){var n=g(this.content,t+this.openStart,e,null);return n&&new d(n,this.openStart,this.openEnd)},d.prototype.removeBetween=function(t,e){return new d(v(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},d.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},d.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},d.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},d.fromJSON=function(t,e){if(!e)return d.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new d(a.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},d.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new d(t,n,r)},Object.defineProperties(d.prototype,m),d.empty=new d(a.empty,0,0);var E=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},T={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};E.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},T.parent.get=function(){return this.node(this.depth)},T.doc.get=function(){return this.node(0)},E.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},E.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},E.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},E.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},E.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},E.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},E.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},T.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},T.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},T.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},E.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return f.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},E.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},E.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},E.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new P(this,t,n)},E.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},E.prototype.max=function(t){return t.pos>this.pos?t:this},E.prototype.min=function(t){return t.pos<this.pos?t:this},E.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},E.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new E(e,n,o)},E.resolveCached=function(t,e){for(var n=0;n<N.length;n++){var r=N[n];if(r.pos==e&&r.doc==t)return r}var o=N[A]=E.resolve(t,e);return A=(A+1)%D,o},Object.defineProperties(E.prototype,T);var N=[],A=0,D=12,P=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},z={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};z.start.get=function(){return this.$from.before(this.depth+1)},z.end.get=function(){return this.$to.after(this.depth+1)},z.parent.get=function(){return this.$from.node(this.depth)},z.startIndex.get=function(){return this.$from.index(this.depth)},z.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(P.prototype,z);var R=Object.create(null),I=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||a.empty,this.marks=r||f.none},j={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};j.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},j.childCount.get=function(){return this.content.childCount},I.prototype.child=function(t){return this.content.child(t)},I.prototype.maybeChild=function(t){return this.content.maybeChild(t)},I.prototype.forEach=function(t){this.content.forEach(t)},I.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},I.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},j.textContent.get=function(){return this.textBetween(0,this.content.size,"")},I.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},j.firstChild.get=function(){return this.content.firstChild},j.lastChild.get=function(){return this.content.lastChild},I.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},I.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},I.prototype.hasMarkup=function(t,e,n){return this.type==t&&p(this.attrs,e||t.defaultAttrs||R)&&f.sameSet(this.marks,n||f.none)},I.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},I.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},I.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},I.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return d.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new d(c,r.depth-i,o.depth-i)},I.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},I.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},I.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},I.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},I.prototype.resolve=function(t){return E.resolveCached(this,t)},I.prototype.resolveNoCache=function(t){return E.resolve(this,t)},I.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},j.isBlock.get=function(){return this.type.isBlock},j.isTextblock.get=function(){return this.type.isTextblock},j.inlineContent.get=function(){return this.type.inlineContent},j.isInline.get=function(){return this.type.isInline},j.isText.get=function(){return this.type.isText},j.isLeaf.get=function(){return this.type.isLeaf},j.isAtom.get=function(){return this.type.isAtom},I.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B(this.marks,t)},I.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},I.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=a.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var c=r;c<o;c++)if(!this.type.allowsMarks(n.child(c).marks))return!1;return!0},I.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},I.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},I.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},I.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},I.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=a.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(I.prototype,j);var F=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(I);function B(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var $=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},L={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};$.parse=function(t,e){var n=new V(t,e);if(null==n.next)return $.empty;var r=W(n);n.next&&n.err("Unexpected trailing text");var o=tt(Z(r));return et(o,n),o},$.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},$.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},L.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},L.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},$.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},$.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var c=i.matchFragment(t,n);if(c&&(!e||c.validEnd))return a.from(s.map((function(t){return t.createAndFill()})));for(var l=0;l<i.next.length;l+=2){var u=i.next[l],p=i.next[l+1];if(!u.isText&&!u.hasRequiredAttrs()&&-1==r.indexOf(p)){r.push(p);var f=o(p,s.concat(u));if(f)return f}}}return o(this,[])},$.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},$.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},L.edgeCount.get=function(){return this.next.length>>1},$.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},$.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties($.prototype,L),$.empty=new $(!0);var V=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},q={next:{configurable:!0}};function W(t){var e=[];do{e.push(J(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function J(t){var e=[];do{e.push(H(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function H(t){for(var e=X(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=K(t,e)}return e}function U(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function K(t,e){var n=U(t),r=n;return t.eat(",")&&(r="}"!=t.next?U(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function G(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function X(t){if(t.eat("(")){var e=W(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=G(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Z(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Y(t,e){return e-t}function Q(t,e){var n=[];return r(e),n.sort(Y);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function tt(t){var e=Object.create(null);return n(Q(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Q(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new $(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Y);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function et(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nt(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rt(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function ot(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new at(t[n]);return e}q.next.get=function(){return this.tokens[this.pos]},V.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},V.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(V.prototype,q);var it=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=ot(n.attrs),this.defaultAttrs=nt(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},st={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};st.isInline.get=function(){return!this.isBlock},st.isTextblock.get=function(){return this.isBlock&&this.inlineContent},st.isLeaf.get=function(){return this.contentMatch==$.empty},st.isAtom.get=function(){return this.isLeaf||this.spec.atom},it.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},it.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},it.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:rt(this.attrs,t)},it.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new I(this,this.computeAttrs(t),a.from(e),f.setFrom(n))},it.prototype.createChecked=function(t,e,n){if(e=a.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new I(this,this.computeAttrs(t),e,f.setFrom(n))},it.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=a.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(a.empty,!0);return o?new I(this,t,e.append(o),f.setFrom(n)):null},it.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},it.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},it.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},it.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:f.empty:t},it.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new it(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(it.prototype,st);var at=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ct={isRequired:{configurable:!0}};ct.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(at.prototype,ct);var lt=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=ot(r.attrs),this.rank=e,this.excluded=null;var o=nt(this.attrs);this.instance=o&&new f(this,o)};lt.prototype.create=function(t){return!t&&this.instance?this.instance:new f(this,rt(this.attrs,t))},lt.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new lt(t,r++,e,o)})),n},lt.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},lt.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},lt.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var ut=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o["a"].from(t.nodes),this.spec.marks=o["a"].from(t.marks),this.nodes=it.compile(this.spec.nodes,this),this.marks=lt.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=$.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?pt(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:pt(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function pt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}ut.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof it))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},ut.prototype.text=function(t,e){var n=this.nodes.text;return new F(n,n.defaultAttrs,t,f.setFrom(e))},ut.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},ut.prototype.nodeFromJSON=function(t){return I.fromJSON(this,t)},ut.prototype.markFromJSON=function(t){return f.fromJSON(this,t)},ut.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var ft=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};ft.prototype.parse=function(t,e){void 0===e&&(e={});var n=new xt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},ft.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new xt(this,e,!0);return n.addAll(t,null,e.from,e.to),d.maxOpen(n.finish())},ft.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Ct(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},ft.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},ft.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=_t(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=_t(t)),t.node=s}))};for(var s in t.nodes)i();return e},ft.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new ft(t,ft.schemaRules(t)))};var ht={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},dt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},mt={ol:!0,ul:!0},vt=1,gt=2,yt=4;function bt(t){return(t?vt:0)|("full"===t?gt:0)}var wt=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&yt?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=f.none,this.pendingMarks=r};wt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(a.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},wt.prototype.finish=function(t){if(!(this.options&vt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=a.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(a.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},wt.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Mt(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var xt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=bt(e.preserveWhitespace)|(n?yt:0);r=o?new wt(o.type,o.attrs,f.none,f.none,!0,e.topMatch||o.type.contentMatch,i):new wt(n?null:t.schema.topNodeType,null,f.none,f.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},St={top:{configurable:!0},currentPos:{configurable:!0}};function kt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&mt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Ct(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Ot(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function _t(t){var e={};for(var n in t)e[n]=t[n];return e}function Mt(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}St.top.get=function(){return this.nodes[this.open]},xt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Ot(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},xt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&vt)n.options&gt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},xt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();mt.hasOwnProperty(e)&&this.normalizeLists&&kt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:dt.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(ht.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},xt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},xt.prototype.readStyles=function(t){for(var e=f.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},xt.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},xt.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&ht.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},xt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},xt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},xt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},xt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~yt:bt(r);o.options&yt&&0==o.content.length&&(i|=yt),this.nodes.push(new wt(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},xt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},xt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},xt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},St.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},xt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},xt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},xt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},xt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},xt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},xt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},xt.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},xt.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(xt.prototype,St);var Et=function(t,e){this.nodes=t||{},this.marks=e||{}};function Tt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Nt(t){return t.document||window.document}Et.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Nt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Et.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Et.renderSpec(Nt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Et.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Et.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Et.renderSpec(Nt(n),r(t,e))},Et.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=Et.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Et.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Et(this.nodesFromSchema(t),this.marksFromSchema(t)))},Et.nodesFromSchema=function(t){var e=Tt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Et.marksFromSchema=function(t){return Tt(t.marks)};var At=n("0ac0"),Dt={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var Pt=/Edge\/(\d+)/.exec(navigator.userAgent),zt=/MSIE \d/.test(navigator.userAgent),Rt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Dt.mac=/Mac/.test(navigator.platform);var It=Dt.ie=!!(zt||Rt||Pt);Dt.ie_version=zt?document.documentMode||6:Rt?+Rt[1]:Pt?+Pt[1]:null,Dt.gecko=!It&&/gecko\/(\d+)/i.test(navigator.userAgent),Dt.gecko_version=Dt.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var jt=!It&&/Chrome\/(\d+)/.exec(navigator.userAgent);Dt.chrome=!!jt,Dt.chrome_version=jt&&+jt[1],Dt.ios=!It&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Dt.android=/Android \d/.test(navigator.userAgent),Dt.webkit="webkitFontSmoothing"in document.documentElement.style,Dt.safari=/Apple Computer/.test(navigator.vendor),Dt.webkit_version=Dt.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var Ft=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Bt=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},$t=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},Lt=function(t,e,n,r){return n&&(qt(t,e,n,r,-1)||qt(t,e,n,r,1))},Vt=/^(img|br|input|textarea|hr)$/i;function qt(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Wt(t))){var i=t.parentNode;if(1!=i.nodeType||Ht(t)||Vt.test(t.nodeName)||"false"==t.contentEditable)return!1;e=Ft(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(o<0?-1:0)],"false"==t.contentEditable)return!1;e=o<0?Wt(t):0}}}function Wt(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Jt(t,e,n){for(var r=0==e,o=e==Wt(t);r||o;){if(t==n)return!0;var i=Ft(t);if(t=t.parentNode,!t)return!1;r=r&&0==i,o=o&&i==Wt(t)}}function Ht(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var Ut=function(t){var e=t.isCollapsed;return e&&Dt.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Kt(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function Gt(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Xt(t,e){return"number"==typeof t?t:t[e]}function Zt(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=i.defaultView,a=n||t.dom;;a=Bt(a)){if(!a)break;if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,l=c?Gt(s):a.getBoundingClientRect(),u=0,p=0;if(e.top<l.top+Xt(r,"top")?p=-(l.top-e.top+Xt(o,"top")):e.bottom>l.bottom-Xt(r,"bottom")&&(p=e.bottom-l.bottom+Xt(o,"bottom")),e.left<l.left+Xt(r,"left")?u=-(l.left-e.left+Xt(o,"left")):e.right>l.right-Xt(r,"right")&&(u=e.right-l.right+Xt(o,"right")),u||p)if(c)s.scrollBy(u,p);else{var f=a.scrollLeft,h=a.scrollTop;p&&(a.scrollTop+=p),u&&(a.scrollLeft+=u);var d=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-d,top:e.top-m,right:e.right-d,bottom:e.bottom-m}}if(c)break}}}function Yt(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:Qt(t.dom)}}function Qt(t){for(var e=[],n=t.ownerDocument;t;t=Bt(t))if(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t==n)break;return e}function te(t){var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0;ee(r,0==o?0:o-n)}function ee(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var ne=null;function re(t){if(t.setActive)return t.setActive();if(ne)return t.focus(ne);var e=Qt(t);t.focus(null==ne?{get preventScroll(){return ne={preventScroll:!0},!0}}:void 0),ne||(ne=!1,ee(e,0))}function oe(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=$t(c).getClientRects()}for(var p=0;p<u.length;p++){var f=u[p];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==c.nodeType&&h&&(i=l+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=l+1)}}return n&&3==n.nodeType?ie(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:oe(n,r)}function ie(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=fe(r,1);if(i.top!=i.bottom&&se(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function se(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function ae(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function ce(t,e,n){var r=oe(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}function le(t,e,n,r){for(var o=-1,i=e;;){if(i==t.dom)break;var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}function ue(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(se(e,l))return ue(s,e,l)}if((i=(i+1)%r)==o)break}return t}function pe(t,e){var n,r,o,i,s=t.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(n=a,o=n.offsetNode,i=n.offset)}catch(m){}if(!o&&s.caretRangeFromPoint){var c=s.caretRangeFromPoint(e.left,e.top);c&&(r=c,o=r.startContainer,i=r.startOffset)}var l,u=s.elementFromPoint(e.left,e.top+1);if(!u||!t.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=t.dom.getBoundingClientRect();if(!se(e,p))return null;if(u=ue(t.dom,e,p),!u)return null}if(u=ae(u,e),o){if(Dt.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var f,h=o.childNodes[i];"IMG"==h.nodeName&&(f=h.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=le(t,o,i,e))}null==l&&(l=ce(t,u,e));var d=t.docView.nearestDesc(u,!0);return{pos:l,inside:d?d.posAtStart-d.border:-1}}function fe(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function he(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(Dt.webkit||Dt.gecko)){var i=fe($t(r,o,o),0);if(Dt.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var s=fe($t(r,o-1,o-1),-1);if(s.top==i.top){var a=fe($t(r,o,o+1),-1);if(a.top!=i.top)return de(a,a.left<s.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var c,l=!0;if(o<r.childNodes.length){var u=r.childNodes[o];1==u.nodeType&&(c=u.getBoundingClientRect())}if(!c&&o){var p=r.childNodes[o-1];1==p.nodeType&&(c=p.getBoundingClientRect(),l=!1)}return me(c||r.getBoundingClientRect(),l)}for(var f=-1;f<2;f+=2)if(f<0&&o){var h=void 0,d=3==r.nodeType?$t(r,o-1,o):3==(h=r.childNodes[o-1]).nodeType?$t(h):1==h.nodeType&&"BR"!=h.nodeName?h:null;if(d){var m=fe(d,1);if(m.top<m.bottom)return de(m,!1)}}else if(f>0&&o<Wt(r)){var v=void 0,g=3==r.nodeType?$t(r,o,o+1):3==(v=r.childNodes[o]).nodeType?$t(v):1==v.nodeType?v:null;if(g){var y=fe(g,-1);if(y.top<y.bottom)return de(y,!0)}}return de(fe(3==r.nodeType?$t(r):r,0),!1)}function de(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function me(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function ve(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o.focus()}}function ge(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return ve(t,e,(function(){for(var e=t.docView.domFromPos(o.pos),r=e.node;;){var i=t.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var s=he(t,o.pos),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=$t(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top&&("up"==n?u.bottom<s.top+1:u.top>s.bottom-1))return!1}}return!0}))}var ye=/[\u0590-\u08ac]/;function be(t,e,n){var r=e.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=getSelection();return ye.test(o.parent.textContent)&&c.modify?ve(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=o.depth?t.docView.domAfterPos(o.before()):t.dom,l=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=s&&(c.caretBidiLevel=s),l})):"left"==n||"backward"==n?s:a}var we=null,xe=null,Se=!1;function ke(t,e,n){return we==e&&xe==n?Se:(we=e,xe=n,Se="up"==n||"down"==n?ge(t,e,n):be(t,e,n))}var Ce=0,Oe=1,_e=2,Me=3,Ee=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=Ce},Te={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};Ee.prototype.matchesWidget=function(){return!1},Ee.prototype.matchesMark=function(){return!1},Ee.prototype.matchesNode=function(){return!1},Ee.prototype.matchesHack=function(){return!1},Te.beforePosition.get=function(){return!1},Ee.prototype.parseRule=function(){return null},Ee.prototype.stopEvent=function(){return!1},Te.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},Te.border.get=function(){return 0},Ee.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},Ee.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},Te.posBefore.get=function(){return this.parent.posBeforeChild(this)},Te.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Te.posAfter.get=function(){return this.posBefore+this.size},Te.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Ee.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;i=t.nextSibling}while(i&&(!(s=i.pmViewDesc)||s.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},Ee.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},Ee.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},Ee.prototype.posFromDOM=function(t,e,n){for(var r=t;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}},Ee.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},Ee.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){while(n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM))n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:Ft(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},Ee.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var l=i+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=i;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=Ft(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&e<=c){e=c;for(var f=s+1;f<this.children.length;f++){var h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=Ft(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},Ee.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},Ee.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},Ee.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(t-a-c.border,e-a-c.border,n,r);a=l}var u=this.domFromPos(t),p=this.domFromPos(e),f=n.getSelection();if(r||!Lt(u.node,u.offset,f.anchorNode,f.anchorOffset)||!Lt(p.node,p.offset,f.focusNode,f.focusOffset)){var h=!1;if(f.extend||t==e){f.collapse(u.node,u.offset);try{t!=e&&f.extend(p.node,p.offset),h=!0}catch(v){if(!(v instanceof DOMException))throw v}}if(!h){if(t>e){var d=u;u=p,p=d}var m=document.createRange();m.setEnd(p.node,p.offset),m.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(m)}}},Ee.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},Te.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Ee.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?_e:Oe,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=Me);o.dirty=Me}n=i}this.dirty=_e},Ee.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?_e:Oe;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(Ee.prototype,Te);var Ne=[],Ae=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,Ne,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return this.dirty==Ce&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(Ee),De=function(t){function e(e,n,r,o){t.call(this,e,Ne,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(Ee),Pe=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=Et.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=Me&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),this.dirty!=Ce){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Ce}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=en(i,n,s,r)),t>0&&(i=en(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(Ee),ze=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n.isLeaf?Ne:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,o,i,s){var a,c,l=i.nodeViews[n.type.name],u=l&&l(n,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:s}),r),p=u&&u.dom,f=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(a=Et.renderSpec(document,n.type.spec.toDOM(n)),p=a.dom,f=a.contentDOM);f||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var h=p;return p=Je(p,r,n),u?c=new Fe(t,n,r,o,p,f,h,u,i,s+1):n.isText?new Ie(t,n,r,o,p,h,i):new e(t,n,r,o,p,f,h,i,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?a.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return this.dirty==Ce&&t.eq(this.node)&&He(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,i=r&&t.composing&&this.localCompositionNode(t,e),s=new Ke(this,i&&i.node);Ze(this.node,this.innerDeco,(function(e,i,a){e.spec.marks?s.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?f.none:n.node.child(i).marks,r,t),s.placeWidget(e,t,o)}),(function(e,n,i,a){s.syncToMarks(e.marks,r,t),s.findNodeMatch(e,n,i,a)||s.updateNextNode(e,n,i,t,a)||s.addNode(e,n,i,t,o),o+=e.nodeSize})),s.syncToMarks(Ne,r,t),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==_e)&&(i&&this.protectLocalComposition(t,i),this.renderChildren())},e.prototype.renderChildren=function(){Be(this.contentDOM,this.children),Dt.ios&&Ye(this.dom)},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,o=n.from,i=n.to;if(!(!(t.state.selection instanceof r["TextSelection"])||o<e||i>e+this.node.content.size)){var s=t.root.getSelection(),a=Qe(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=tn(this.node.content,c,o-e,i-e);return l<0?null:{node:a,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new De(this,i,n,o);t.compositionNodes.push(s),this.children=en(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(this.dirty==Me||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Ce},e.prototype.updateOuterDeco=function(t){if(!He(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=qe(this.dom,this.nodeDOM,Ve(this.outerDeco,this.node,e),Ve(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(Ee);function Re(t,e,n,r,o){return Je(r,e,t),new ze(null,t,e,n,r,r,r,o,0)}var Ie=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function(t,e){return!(this.dirty==Me||this.dirty!=Ce&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==Ce&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=Ce,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(ze),je=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return this.dirty==Ce},e}(Ee),Fe=function(t){function e(e,n,r,o,i,s,a,c,l,u){t.call(this,e,n,r,o,i,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(this.dirty==Me)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(ze);function Be(t,e){for(var n=t.firstChild,r=0;r<e.length;r++){var o=e[r],i=o.dom;if(i.parentNode==t){while(i!=n)n=Ue(n);n=n.nextSibling}else t.insertBefore(i,n);if(o instanceof Pe){var s=n?n.previousSibling:t.lastChild;Be(o.contentDOM,o.children),n=s?s.nextSibling:t.firstChild}}while(n)n=Ue(n)}function $e(t){t&&(this.nodeName=t)}$e.prototype=Object.create(null);var Le=[new $e];function Ve(t,e,n){if(0==t.length)return Le;for(var r=n?Le[0]:new $e,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new $e(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new $e(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return o}function qe(t,e,n,r){if(n==Le&&r==Le)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.appendChild(o),a=Le[0]),o=c}We(o,a||Le[0],s)}return o}function We(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):Ne,s=n.class?n.class.split(" "):Ne,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(e.style))t.style.removeProperty(l[1])}n.style&&(t.style.cssText+=n.style)}}function Je(t,e,n){return qe(t,t,Le,Ve(e,n,1!=t.nodeType))}function He(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Ue(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var Ke=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=Ge(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function Ge(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}function Xe(t,e){return t.type.side-e.type.side}function Ze(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){if(s<o.length&&o[s].to==i){var u=o[s++],p=void 0;while(s<o.length&&o[s].to==i)(p||(p=[u])).push(o[s++]);if(p){p.sort(Xe);for(var f=0;f<p.length;f++)n(p[f],l,!!c)}else n(u,l,!!c)}var h=void 0,d=void 0;if(c)d=-1,h=c,c=null;else{if(!(l<t.childCount))break;d=l,h=t.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);while(s<o.length&&o[s].from==i)a.push(o[s++]);var v=i+h.nodeSize;if(h.isText){var g=v;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=h.cut(g-i),h=h.cut(0,g-i),v=g,d=-1)}r(h,a.length?a.slice():Ne,e.forChild(i,h),d),i=v}else for(var b=0;b<t.childCount;b++){var w=t.child(b);r(w,o,e.forChild(i,w),b),i+=w.nodeSize}}function Ye(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Qe(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=Wt(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function tn(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){var c=s.text;while(o<t.childCount){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}function en(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function nn(t,e){var n=t.selection,o=n.$anchor,i=n.$head,s=e>0?o.max(i):o.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return a&&r["Selection"].findFrom(a,e)}function rn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function on(t,e,n){var o=t.state.selection;if(o instanceof r["TextSelection"]){if(!o.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var i=nn(t.state,e);return!!(i&&i instanceof r["NodeSelection"])&&rn(t,i)}var s,a=o.$head,c=a.textOffset?null:e<0?a.nodeBefore:a.nodeAfter;if(!c||c.isText)return!1;var l=e<0?a.pos-c.nodeSize:a.pos;return!!(c.isAtom||(s=t.docView.descAt(l))&&!s.contentDOM)&&(r["NodeSelection"].isSelectable(c)?rn(t,new r["NodeSelection"](e<0?t.state.doc.resolve(a.pos-c.nodeSize):a)):!!Dt.webkit&&rn(t,new r["TextSelection"](t.state.doc.resolve(e<0?l:l+c.nodeSize))))}if(o instanceof r["NodeSelection"]&&o.node.isInline)return rn(t,new r["TextSelection"](e>0?o.$to:o.$from));var u=nn(t.state,e);return!!u&&rn(t,u)}function sn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function an(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function cn(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(Dt.gecko&&1==n.nodeType&&r<sn(n)&&an(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(an(a))o=n,i=--r;else{if(3!=a.nodeType)break;n=a,r=n.nodeValue.length}}else{if(un(n))break;var c=n.previousSibling;while(c&&an(c))o=n.parentNode,i=Ft(c),c=c.previousSibling;if(c)n=c,r=sn(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}s?pn(t,e,n,r):o&&pn(t,e,o,i)}}function ln(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=sn(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!an(a))break;o=n,i=++r}else{if(un(n))break;var c=n.nextSibling;while(c&&an(c))o=c.parentNode,i=Ft(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=sn(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}o&&pn(t,e,o,i)}}function un(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function pn(t,e,n,r){if(Ut(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection()}function fn(t,e,n){var o=t.state.selection;if(o instanceof r["TextSelection"]&&!o.empty||n.indexOf("s")>-1)return!1;var i=o.$from,s=o.$to;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var a=nn(t.state,e);if(a&&a instanceof r["NodeSelection"])return rn(t,a)}if(!i.parent.inlineContent){var c=r["Selection"].findFrom(e<0?i:s,e);return!c||rn(t,c)}return!1}function hn(t,e){if(!(t.state.selection instanceof r["TextSelection"]))return!0;var n=t.state.selection,o=n.$head,i=n.$anchor,s=n.empty;if(!o.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var a=!o.textOffset&&(e<0?o.nodeBefore:o.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return e<0?c.delete(o.pos-a.nodeSize,o.pos):c.delete(o.pos,o.pos+a.nodeSize),t.dispatch(c),!0}return!1}function dn(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function mn(t){if(Dt.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;dn(t,o,!0),setTimeout((function(){return dn(t,o,!1)}),20)}}}function vn(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function gn(t,e){var n=e.keyCode,r=vn(e);return 8==n||Dt.mac&&72==n&&"c"==r?hn(t,-1)||cn(t):46==n||Dt.mac&&68==n&&"c"==r?hn(t,1)||ln(t):13==n||27==n||(37==n?on(t,-1,r)||cn(t):39==n?on(t,1,r)||ln(t):38==n?fn(t,-1,r)||cn(t):40==n?mn(t)||fn(t,1,r)||ln(t):r==(Dt.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function yn(t,e){var n,o,i=t.root.getSelection(),s=t.state.doc,a=t.docView.nearestDesc(i.focusNode),c=a&&0==a.size,l=t.docView.posFromDOM(i.focusNode,i.focusOffset),u=s.resolve(l);if(Ut(i)){n=u;while(a&&!a.node)a=a.parent;if(a&&a.node.isAtom&&r["NodeSelection"].isSelectable(a.node)&&a.parent&&(!a.node.isInline||!Jt(i.focusNode,i.focusOffset,a.dom))){var p=a.posBefore;o=new r["NodeSelection"](l==p?u:s.resolve(p))}}else n=s.resolve(t.docView.posFromDOM(i.anchorNode,i.anchorOffset));if(!o){var f="pointer"==e||t.state.selection.head<u.pos&&!c?1:-1;o=En(t,n,u,f)}return o}function bn(t,e){var n=t.state.selection;if(_n(t,n),t.editable?t.hasFocus():Nn(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)On(t);else{var o,i,s=n.anchor,a=n.head;!wn||n instanceof r["TextSelection"]||(n.$from.parent.inlineContent||(o=xn(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=xn(t,n.to))),t.docView.setSelection(s,a,t.root,e),wn&&(o&&kn(o),i&&kn(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Cn(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}Ke.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},Ke.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},Ke.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},Ke.prototype.syncToMarks=function(t,e,n){var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=Ce,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<t.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=Pe.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},Ke.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},Ke.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof ze){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=Me&&He(e,s.outerDeco));if(!l&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},Ke.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,ze.create(this.top,t,e,n,r,o)),this.changed=!0},Ke.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var r=new Ae(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},Ke.prototype.addTextblockHacks=function(){var t=this.top.children[this.index-1];while(t instanceof Pe)t=t.children[t.children.length-1];if(!t||!(t instanceof Ie)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new je(this.top,Ne,e,null)),this.changed=!0}};var wn=Dt.safari||Dt.chrome&&Dt.chrome_version<63;function xn(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(Dt.safari&&i&&"false"==i.contentEditable)return Sn(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return Sn(i);if(s)return Sn(s)}}function Sn(t){return t.contentEditable="true",Dt.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function kn(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function Cn(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}function On(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,Ft(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&Dt.ie&&Dt.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function _n(t,e){if(e instanceof r["NodeSelection"]){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(Mn(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Mn(t)}function Mn(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function En(t,e,n,o){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||r["TextSelection"].between(e,n,o)}function Tn(t){return(!t.editable||t.root.activeElement==t.dom)&&Nn(t)}function Nn(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function An(t){var e=t.docView.domFromPos(t.state.selection.anchor),n=t.root.getSelection();return Lt(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Dn(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,c=r.to,l=t.root.getSelection(),u=null,p=l.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:l.anchorOffset}],Ut(l)||u.push({node:l.focusNode,offset:l.focusOffset})),Dt.chrome&&8===t.lastKeyCode)for(var f=s;f>i;f--){var h=o.childNodes[f-1],d=h.pmViewDesc;if("BR"==h.nodeType&&!d){s=f;break}if(!d||d.size)break}var m=t.state.doc,v=t.someProp("domParser")||ft.fromSchema(t.state.schema),g=m.resolve(a),y=null,b=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:Pn,context:g});if(u&&null!=u[0].pos){var w=u[0].pos,x=u[1]&&u[1].pos;null==x&&(x=w),y={anchor:w+a,head:x+a}}return{doc:b,sel:y,from:a,to:c}}function Pn(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(Dt.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||Dt.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function zn(t,e,n,o,i){if(e<0){var s=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,a=yn(t,s);if(!t.state.selection.eq(a)){var c=t.state.tr.setSelection(a);"pointer"==s?c.setMeta("pointer",!0):"key"==s&&c.scrollIntoView(),t.dispatch(c)}}else{var l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);var p,f,h=t.state.selection,d=Dn(t,e,n),m=t.state.doc,v=m.slice(d.from,d.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(p=t.state.selection.to,f="end"):(p=t.state.selection.from,f="start"),t.lastKeyCode=null;var g=Bn(v.content,d.doc.content,d.from,p,f);if(!g){if(!(o&&h instanceof r["TextSelection"]&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){var y=Rn(t,t.state.doc,d.sel);y&&!y.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(y))}return}g={start:h.from,endA:h.to,endB:h.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof r["TextSelection"]&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),Dt.ie&&Dt.ie_version<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>d.from&&"  "==d.doc.textBetween(g.start-d.from-1,g.start-d.from+1)&&(g.start--,g.endA--,g.endB--);var b,w=d.doc.resolveNoCache(g.start-d.from),x=d.doc.resolveNoCache(g.endB-d.from);if((Dt.ios&&t.lastIOSEnter>Date.now()-100&&(!w.sameParent(x)||i.some((function(t){return"DIV"==t.nodeName})))||!w.sameParent(x)&&w.pos<d.doc.content.size&&(b=r["Selection"].findFrom(d.doc.resolve(w.pos+1),1,!0))&&b.head==x.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Kt(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>g.start&&jn(m,g.start,g.endA,w,x)&&t.someProp("handleKeyDown",(function(e){return e(t,Kt(8,"Backspace"))})))Dt.android&&Dt.chrome&&t.domObserver.suppressSelectionUpdates();else{var S,k,C,O,_=g.start,M=g.endA;if(w.sameParent(x)&&w.parent.inlineContent)if(w.pos==x.pos)Dt.ie&&Dt.ie_version<=11&&0==w.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return bn(t)}),20)),S=t.state.tr.delete(_,M),k=m.resolve(g.start).marksAcross(m.resolve(g.endA));else if(g.endA==g.endB&&(O=m.resolve(g.start))&&(C=In(w.parent.content.cut(w.parentOffset,x.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))S=t.state.tr,"add"==C.type?S.addMark(_,M,C.mark):S.removeMark(_,M,C.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var E=w.parent.textBetween(w.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,_,M,E)})))return;S=t.state.tr.insertText(E,_,M)}if(S||(S=t.state.tr.replace(_,M,d.doc.slice(g.start-d.from,g.endB-d.from))),d.sel){var T=Rn(t,S.doc,d.sel);T&&!(Dt.chrome&&Dt.android&&t.composing&&T.empty&&(T.head==_||T.head==S.mapping.map(M)-1)||Dt.ie&&T.empty&&T.head==_)&&S.setSelection(T)}k&&S.ensureMarks(k),t.dispatch(S.scrollIntoView())}}}function Rn(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:En(t,e.resolve(n.anchor),e.resolve(n.head))}function In(t,e){for(var n,r,o,i=t.firstChild.marks,s=e.firstChild.marks,c=i,l=s,u=0;u<s.length;u++)c=s[u].removeFromSet(c);for(var p=0;p<i.length;p++)l=i[p].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],h=0;h<e.childCount;h++)f.push(o(e.child(h)));if(a.from(f).eq(t))return{mark:r,type:n}}function jn(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||Fn(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(Fn(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||Fn(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function Fn(t,e,n){var r=t.depth,o=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,o++,e=!1;if(n){var i=t.node(r).maybeChild(t.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function Bn(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&t.size<e.size){var u=r<=i&&r>=a?i-r:0;i-=u,c=i+(c-a),a=i}else if(c<i){var p=r<=i&&r>=c?i-r:0;i-=p,a=i+(a-c),c=i}return{start:i,endA:a,endB:c}}function $n(t,e){var n=[],r=e.content,o=e.openStart,i=e.openEnd;while(o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount){o--,i--;var s=r.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),r=s.content}var a=t.someProp("clipboardSerializer")||Et.fromSchema(t.state.schema),c=Xn(),l=c.createElement("div");l.appendChild(a.serializeFragment(r,{document:c}));var u,p=l.firstChild;while(p&&1==p.nodeType&&(u=Kn[p.nodeName.toLowerCase()])){for(var f=u.length-1;f>=0;f--){var h=c.createElement(u[f]);while(l.firstChild)h.appendChild(l.firstChild);l.appendChild(h)}p=l.firstChild}p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n));var d=t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:d}}function Ln(t,e,n,r,o){var i,s,c=o.parent.type.spec.code;if(!n&&!e)return null;var l=e&&(r||c||!n);if(l){if(t.someProp("transformPastedText",(function(t){e=t(e)})),c)return new d(a.from(t.state.schema.text(e)),0,0);var u=t.someProp("clipboardTextParser",(function(t){return t(e,o)}));u?s=u:(i=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){i.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),i=Zn(n);var p=i&&i.querySelector("[data-pm-slice]"),f=p&&/^(\d+) (\d+) (.*)/.exec(p.getAttribute("data-pm-slice"));if(!s){var h=t.someProp("clipboardParser")||t.someProp("domParser")||ft.fromSchema(t.state.schema);s=h.parseSlice(i,{preserveWhitespace:!(!l&&!f),context:o})}return s=f?Yn(Un(s,+f[1],+f[2]),f[3]):d.maxOpen(Vn(s.content,o),!1),t.someProp("transformPasted",(function(t){s=t(s)})),s}function Vn(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n),o=r.contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=o.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&Wn(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=Jn(s[s.length-1],i.length));var r=qn(t,n);s.push(r),o=o.matchType(r.type,r.attrs),i=n}}})),s)return{v:a.from(s)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}function qn(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,a.from(t));return t}function Wn(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=Wn(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var s=r.contentMatchAt(r.childCount);if(s.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(a.from(qn(n,t,o+1))))}}function Jn(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Jn(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(a.empty,!0);return t.copy(n.append(r))}function Hn(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,c=s.content;return o<r-1&&(c=Hn(c,e,n,r,o+1,i)),o>=n&&(c=e<0?s.contentMatchAt(0).fillBefore(c,t.childCount>1||i<=o).append(c):c.append(s.contentMatchAt(s.childCount).fillBefore(a.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(c))}function Un(t,e,n){return e<t.openStart&&(t=new d(Hn(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new d(Hn(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Kn={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},Gn=null;function Xn(){return Gn||(Gn=document.implementation.createHTMLDocument("title"))}function Zn(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Xn().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&Kn[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length),r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}function Yn(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(u){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;o=a.from(l.create(n[c+1],o)),i++,s++}return new d(o,i,s)}var Qn={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},tr=Dt.ie&&Dt.ie_version<=11,er=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};er.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},er.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var nr=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);Dt.ie&&Dt.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new er,tr&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};nr.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},nr.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},nr.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Qn),tr&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},nr.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}tr&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},nr.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},nr.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},nr.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},nr.prototype.onSelectionChange=function(){if(Tn(this.view)){if(this.suppressingSelectionUpdates)return bn(this.view);if(Dt.ie&&Dt.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&Lt(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},nr.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},nr.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},nr.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&Nn(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var c=this.registerMutation(t[a],s);c&&(r=r<0?c.from:Math.min(c.from,r),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(Dt.gecko&&s.length>1){var l=s.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var u=l[0],p=l[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),or(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||bn(this.view))}},nr.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(Dt.ie&&Dt.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var s=t.addedNodes[i],a=s.previousSibling,c=s.nextSibling;(!a||Array.prototype.indexOf.call(t.addedNodes,a)<0)&&(r=a),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(o=c)}for(var l=r&&r.parentNode==t.target?Ft(r)+1:0,u=n.localPosFromDOM(t.target,l,-1),p=o&&o.parentNode==t.target?Ft(o):t.target.childNodes.length,f=0;f<t.addedNodes.length;f++)e.push(t.addedNodes[f]);var h=n.localPosFromDOM(t.target,p,1);return{from:u,to:h}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var rr=!1;function or(t){rr||(rr=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var ir={},sr={};function ar(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new nr(t,(function(e,n,r,o){return zn(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=ir[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!fr(t,e)||pr(t,e)||!t.editable&&e.type in sr||n(t,e)})};for(var n in ir)e(n);Dt.safari&&t.dom.addEventListener("input",(function(){return null})),ur(t)}function cr(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function lr(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout)}function ur(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return pr(t,e)})}))}function pr(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function fr(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function hr(t,e){pr(t,e)||!ir[e.type]||!t.editable&&e.type in sr||ir[e.type](t,e)}function dr(t){return{left:t.clientX,top:t.clientY}}function mr(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function vr(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function gr(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function yr(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),o=n.nodeAfter;return!!(o&&o.isAtom&&r["NodeSelection"].isSelectable(o))&&(gr(t,new r["NodeSelection"](n),"pointer"),!0)}function br(t,e){if(-1==e)return!1;var n,o,i=t.state.selection;i instanceof r["NodeSelection"]&&(n=i.node);for(var s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(r["NodeSelection"].isSelectable(c)){o=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=o&&(gr(t,r["NodeSelection"].create(t.state.doc,o),"pointer"),!0)}function wr(t,e,n,r,o){return vr(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?br(t,n):yr(t,n))}function xr(t,e,n,r){return vr(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function Sr(t,e,n,r){return vr(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||kr(t,n)}function kr(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(gr(t,r["TextSelection"].create(n,0,n.content.size),"pointer"),!0);for(var o=n.resolve(e),i=o.depth+1;i>0;i--){var s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)gr(t,r["TextSelection"].create(n,a+1,a+1+s.content.size),"pointer");else{if(!r["NodeSelection"].isSelectable(s))continue;gr(t,r["NodeSelection"].create(n,a),"pointer")}return!0}}function Cr(t){return Nr(t)}sr.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!Mr(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!Dt.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||gn(t,e)?e.preventDefault():cr(t,"key");else{var n=Date.now();t.lastIOSEnter=n,setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,Kt(13,"Enter"))})),t.lastIOSEnter=0)}),50)}},sr.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},sr.keypress=function(t,e){if(!(Mr(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||Dt.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof r["TextSelection"])||!n.$from.sameParent(n.$to)){var o=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,o)}))||t.dispatch(t.state.tr.insertText(o).scrollIntoView()),e.preventDefault()}}};var Or=Dt.mac?"metaKey":"ctrlKey";ir.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=Cr(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&mr(e,t.lastClick)&&!e[Or]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(dr(e));i&&("singleClick"==o?t.mouseDown=new _r(t,i,e,n):("doubleClick"==o?xr:Sr)(t,i.pos,i.inside,e)?e.preventDefault():cr(t,"pointer"))};var _r=function(t,e,n,o){var i,s,a=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=o,this.selectNode=n[Or],this.allowDefault=n.shiftKey,e.inside>-1)i=t.state.doc.nodeAt(e.inside),s=e.inside;else{var c=t.state.doc.resolve(e.pos);i=c.parent,s=c.depth?c.before():0}this.mightDrag=null;var l=o?null:n.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u?u.dom:null,(i.type.spec.draggable&&!1!==i.type.spec.selectable||t.state.selection instanceof r["NodeSelection"]&&s==t.state.selection.from)&&(this.mightDrag={node:i,pos:s,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&Dt.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return a.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),cr(t,"pointer")};function Mr(t,e){return!!t.composing||!!(Dt.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}_r.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},_r.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(dr(t))),this.allowDefault||!e?cr(this.view,"pointer"):wr(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!Dt.chrome||this.view.state.selection instanceof r["TextSelection"]||e.pos!=this.view.state.selection.from&&e.pos!=this.view.state.selection.to)?cr(this.view,"pointer"):(gr(this.view,r["Selection"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault())}},_r.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),cr(this.view,"pointer")},ir.touchdown=function(t){Cr(t),cr(t,"pointer")},ir.contextmenu=function(t){return Cr(t)};var Er=Dt.android?5e3:-1;function Tr(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return Nr(t)}),e))}function Nr(t,e){t.domObserver.forceFlush(),t.composing=!1;while(t.compositionNodes.length>0)t.compositionNodes.pop().markParentsDirty();if(e||t.docView.dirty){var n=yn(t);return n.eq(t.state.selection)?t.updateState(t.state):t.dispatch(t.state.tr.setSelection(n)),!0}return!1}function Ar(t,e){var n=t.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),t.focus()}),50)}sr.compositionstart=sr.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),Nr(t,!0),t.markCursor=null;else if(Nr(t),Dt.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}Tr(t,Er)},sr.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,Tr(t,20))};var Dr=Dt.ie&&Dt.ie_version<15||Dt.ios&&Dt.webkit_version<604;function Pr(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function zr(t,e){var n=t.dom.ownerDocument,r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){t.focus(),n.body.removeChild(o),r?Rr(t,o.value,null,e):Rr(t,o.textContent,o.innerHTML,e)}),50)}function Rr(t,e,n,r){var o=Ln(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,o||d.empty)}))&&o){var i=Pr(o),s=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}ir.copy=sr.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=Dr?null:e.clipboardData,i=n.content(),s=$n(t,i),a=s.dom,c=s.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):Ar(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},sr.paste=function(t,e){var n=Dr?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(Rr(t,o,r,e),e.preventDefault()):zr(t,e)};var Ir=function(t,e){this.slice=t,this.move=e},jr=Dt.mac?"altKey":"ctrlKey";for(var Fr in ir.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var o=t.state.selection,i=o.empty?null:t.posAtCoords(dr(e));if(i&&i.pos>=o.from&&i.pos<=(o instanceof r["NodeSelection"]?o.to-1:o.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(r["NodeSelection"].create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var s=t.docView.nearestDesc(e.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(r["NodeSelection"].create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=$n(t,a),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(Dr?"Text":"text/html",l.innerHTML),Dr||e.dataTransfer.setData("text/plain",u),t.dragging=new Ir(a,!e[jr])}},ir.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},sr.dragover=sr.dragenter=function(t,e){return e.preventDefault()},sr.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var o=t.posAtCoords(dr(e));if(o){var i=t.state.doc.resolve(o.pos);if(i){var s=n&&n.slice||Ln(t,e.dataTransfer.getData(Dr?"Text":"text/plain"),Dr?null:e.dataTransfer.getData("text/html"),!1,i);if(t.someProp("handleDrop",(function(r){return r(t,e,s||d.empty,n&&n.move)})))e.preventDefault();else if(s){e.preventDefault();var a=s?Object(At["g"])(t.state.doc,i.pos,s):i.pos;null==a&&(a=i.pos);var c=t.state.tr;n&&n.move&&c.deleteSelection();var l=c.mapping.map(a),u=0==s.openStart&&0==s.openEnd&&1==s.content.childCount,p=c.doc;if(u?c.replaceRangeWith(l,l,s.content.firstChild):c.replaceRange(l,l,s),!c.doc.eq(p)){var f=c.doc.resolve(l);u&&r["NodeSelection"].isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild)?c.setSelection(new r["NodeSelection"](f)):c.setSelection(En(t,f,c.doc.resolve(c.mapping.map(a)))),t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}}},ir.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&bn(t)}),20))},ir.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},ir.beforeinput=function(t,e){if(Dt.chrome&&Dt.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Kt(8,"Backspace"))})))){var e=t.state.selection,r=e.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},sr)ir[Fr]=sr[Fr];function Br(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var $r=function(t,e){this.spec=e||Hr,this.side=this.spec.side||0,this.toDOM=t};$r.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos,s=o.deleted;return s?null:new qr(i-n,i-n,this)},$r.prototype.valid=function(){return!0},$r.prototype.eq=function(t){return this==t||t instanceof $r&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Br(this.spec,t.spec))};var Lr=function(t,e){this.spec=e||Hr,this.attrs=t};Lr.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new qr(o,i,this)},Lr.prototype.valid=function(t,e){return e.from<e.to},Lr.prototype.eq=function(t){return this==t||t instanceof Lr&&Br(this.attrs,t.attrs)&&Br(this.spec,t.spec)},Lr.is=function(t){return t.type instanceof Lr};var Vr=function(t,e){this.spec=e||Hr,this.attrs=t};Vr.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new qr(o.pos-n,i.pos-n,this)},Vr.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},Vr.prototype.eq=function(t){return this==t||t instanceof Vr&&Br(this.attrs,t.attrs)&&Br(this.spec,t.spec)};var qr=function(t,e,n){this.from=t,this.to=e,this.type=n},Wr={spec:{configurable:!0}};qr.prototype.copy=function(t,e){return new qr(t,e,this.type)},qr.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},qr.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},qr.widget=function(t,e,n){return new qr(t,t,new $r(e,n))},qr.inline=function(t,e,n,r){return new qr(t,e,new Lr(n,r))},qr.node=function(t,e,n,r){return new qr(t,e,new Vr(n,r))},Wr.spec.get=function(){return this.type.spec},Object.defineProperties(qr.prototype,Wr);var Jr=[],Hr={},Ur=function(t,e){this.local=t&&t.length?t:Jr,this.children=e&&e.length?e:Jr};Ur.create=function(t,e){return e.length?eo(e,t,0,Hr):Kr},Ur.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Ur.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Ur.prototype.map=function(t,e,n){return this==Kr||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Hr)},Ur.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Xr(this.children,i,t,e,n,r,o):i?new Ur(i.sort(no)):Kr},Ur.prototype.add=function(t,e){return e.length?this==Kr?Ur.create(t,e):this.addInner(t,e,0):this},Ur.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=Qr(e,t,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<s)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,eo(a,t,c+1,Hr)),i+=3}}));var s=Zr(i?to(e):e,-n);return new Ur(s.length?this.local.concat(s).sort(no):this.local,r||this.children)},Ur.prototype.remove=function(t){return 0==t.length||this==Kr?this:this.removeInner(t,0)},Ur.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=Kr?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,f=void 0;p<t.length;p++)if(f=t[p])for(var h=0;h<r.length;h++)r[h].eq(f,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Ur(r,n):Kr},Ur.prototype.forChild=function(t,e){if(this==Kr)return this;if(e.isLeaf)return Ur.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Lr){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var p=new Ur(r.sort(no));return n?new Gr([p,n]):p}return n||Kr},Ur.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Ur)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Ur.prototype.locals=function(t){return ro(this.localsInner(t))},Ur.prototype.localsInner=function(t){if(this==Kr)return Jr;if(t.inlineContent||!this.local.some(Lr.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Lr||e.push(this.local[n]);return e};var Kr=new Ur;Ur.empty=Kr,Ur.removeOverlap=ro;var Gr=function(t){this.members=t};function Xr(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var f=n.map(a[p]+i),h=f-o;if(h<0||h>=r.content.size){u=!0;continue}var d=n.map(t[p+1]+i,-1),m=d-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var w=a[p+2].mapInner(n,b,f+1,a[p]+i+1,s);w!=Kr?(a[p]=h,a[p+1]=m,a[p+2]=w):(a[p+1]=-2,u=!0)}else u=!0}if(u){var x=Yr(a,t,e||[],n,o,i,s),S=eo(x,r,0,s);e=S.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var C=0,O=0;C<S.children.length;C+=3){var _=S.children[C];while(O<a.length&&a[O]<_)O+=3;a.splice(O,0,S.children[C],S.children[C+1],S.children[C+2])}}return new Ur(e&&e.sort(no),a)}function Zr(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new qr(o.from+e,o.to+e,o.type))}return n}function Yr(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}function Qr(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function to(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function eo(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Qr(t,e,s+n);if(a){i=!0;var c=eo(a,e,n+s+1,r);c!=Kr&&o.push(s,s+e.nodeSize,c)}}));for(var s=Zr(i?to(t):t,-n).sort(no),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Ur(s,o):Kr}function no(t,e){return t.from-e.from||t.to-e.to}function ro(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),oo(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),oo(e,o+1,i.copy(r.to,i.to)))}}return e}function oo(t,e,n){while(e<t.length&&no(n,t[e])>0)e++;t.splice(e,0,n)}function io(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=Kr&&e.push(r)})),t.cursorWrapper&&e.push(Ur.create(t.state.doc,[t.cursorWrapper.deco])),Gr.from(e)}Gr.prototype.forChild=function(t,e){if(e.isLeaf)return Ur.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=Kr&&(o instanceof Gr?n=n.concat(o.members):n.push(o))}return Gr.from(n)},Gr.prototype.eq=function(t){if(!(t instanceof Gr)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Gr.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?ro(n?e:e.sort(no)):Jr},Gr.from=function(t){switch(t.length){case 0:return Kr;case 1:return t[0];default:return new Gr(t)}};var so=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=uo(this),this.markCursor=null,this.cursorWrapper=null,lo(this),this.nodeViews=fo(this),this.docView=Re(this.state.doc,co(this),io(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,ar(this),this.pluginViews=[],this.updatePluginViews()},ao={props:{configurable:!0},root:{configurable:!0}};function co(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[qr.node(0,t.state.doc.content.size,e)]}function lo(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:qr.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function uo(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function po(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function fo(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function ho(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r}function mo(t){var e=t.getSelection(),n=e.focusOffset,r=e.focusNode;return r&&1==r.nodeType?[r,n,r.childNodes[n-1],r.childNodes[n]]:null}function vo(t,e){var n=mo(e);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<t.length;r++)if(n[r]!=t[r])return!0;return!1}function go(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=go(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function yo(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,u=Math.min(s.text.length,a.text.length);while(l<u&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var p=yo(s.content,a.content,n-1,r-1);if(p)return p}n-=c,r-=c}else n-=c,r-=c}}ao.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},so.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ur(this),this._props=t,this.updateStateInner(t.state,!0)},so.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},so.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},so.prototype.updateStateInner=function(t,e){var n=this,o=this.state,i=!1;if(this.state=t,e){var s=fo(this);ho(s,this.nodeViews)&&(this.nodeViews=s,i=!0),ur(this)}this.editable=uo(this),lo(this);var a=io(this),c=co(this),l=e?"reset":t.scrollToSelection>o.scrollToSelection?"to selection":"preserve",u=i||!this.docView.matchesNode(t.doc,c,a),p=u||!t.selection.eq(o.selection),f="preserve"==l&&p&&null==this.dom.style.overflowAnchor&&Yt(this);if(p){this.domObserver.stop();var h=u&&(Dt.ie||Dt.chrome)&&!this.composing&&!o.selection.empty&&!t.selection.empty&&po(o.selection,t.selection);if(u){var d=Dt.chrome&&mo(this.root);!i&&this.docView.update(t.doc,c,a,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=Re(t.doc,c,a,this.dom,this)),d&&vo(d,this.root)&&(h=!0)}h||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&An(this))?bn(this,h):(_n(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(o),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof r["NodeSelection"]?Zt(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),m):Zt(this,this.coordsAtPos(t.selection.head),m))}else f&&te(f)},so.prototype.destroyPluginViews=function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()},so.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},so.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},so.prototype.hasFocus=function(){return this.root.activeElement==this.dom},so.prototype.focus=function(){this.domObserver.stop(),this.editable&&re(this.dom),bn(this),this.domObserver.start()},ao.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},so.prototype.posAtCoords=function(t){return pe(this,t)},so.prototype.coordsAtPos=function(t){return he(this,t)},so.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},so.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},so.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},so.prototype.endOfTextblock=function(t,e){return ke(this,e||this.state,t)},so.prototype.destroy=function(){this.docView&&(lr(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],io(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},so.prototype.dispatchEvent=function(t){return hr(this,t)},so.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(so.prototype,ao);var bo=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},wo={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};bo.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},bo.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},bo.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},bo.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new bo(r,this.size+t.size)},bo.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new bo(n,r)},bo.prototype.cutByIndex=function(t,e){return t==e?bo.empty:0==t&&e==this.content.length?this:new bo(this.content.slice(t,e))},bo.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new bo(r,o)},bo.prototype.addToStart=function(t){return new bo([t].concat(this.content),this.size+t.nodeSize)},bo.prototype.addToEnd=function(t){return new bo(this.content.concat(t),this.size+t.nodeSize)},bo.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},wo.firstChild.get=function(){return this.content.length?this.content[0]:null},wo.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},wo.childCount.get=function(){return this.content.length},bo.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},bo.prototype.maybeChild=function(t){return this.content[t]},bo.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},bo.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),go(this,t,e)},bo.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),yo(this,t,e,n)},bo.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return So(0,t);if(t==this.size)return So(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?So(n+1,i):So(n,r);r=i}},bo.prototype.toString=function(){return"<"+this.toStringInner()+">"},bo.prototype.toStringInner=function(){return this.content.join(", ")},bo.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},bo.fromJSON=function(t,e){if(!e)return bo.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new bo(e.map(t.nodeFromJSON))},bo.fromArray=function(t){if(!t.length)return bo.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new bo(e||t,n)},bo.from=function(t){if(!t)return bo.empty;if(t instanceof bo)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new bo([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(bo.prototype,wo);var xo={index:0,offset:0};function So(t,e){return xo.index=t,xo.offset=e,xo}function ko(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!ko(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!ko(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}bo.empty=new bo([],0);var Co=function(t,e){this.type=t,this.attrs=e};function Oo(t){var e=Error.call(this,t);return e.__proto__=Oo.prototype,e}Co.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},Co.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},Co.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},Co.prototype.eq=function(t){return this==t||this.type==t.type&&ko(this.attrs,t.attrs)},Co.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},Co.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},Co.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},Co.setFrom=function(t){if(!t||0==t.length)return Co.none;if(t instanceof Co)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},Co.none=[],Oo.prototype=Object.create(Error.prototype),Oo.prototype.constructor=Oo,Oo.prototype.name="ReplaceError";var _o=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},Mo={size:{configurable:!0}};function Eo(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(Eo(s.content,e-i-1,n-i-1)))}function To(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=To(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function No(t,e,n){if(n.openStart>t.depth)throw new Oo("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Oo("Inconsistent open depths");return Ao(t,e,n,0)}function Ao(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=Ao(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=Bo(n,t),c=a.start,l=a.end;return Io(i,jo(t,c,l,e,r))}var u=t.parent,p=u.content;return Io(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return Io(i,Fo(t,e,r))}function Do(t,e){if(!e.type.compatibleContent(t.type))throw new Oo("Cannot join "+e.type.name+" onto "+t.type.name)}function Po(t,e,n){var r=t.node(n);return Do(r,e.node(n)),r}function zo(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Ro(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(zo(t.nodeAfter,r),i++));for(var a=i;a<s;a++)zo(o.child(a),r);e&&e.depth==n&&e.textOffset&&zo(e.nodeBefore,r)}function Io(t,e){if(!t.type.validContent(e))throw new Oo("Invalid content for node "+t.type.name);return t.copy(e)}function jo(t,e,n,r,o){var i=t.depth>o&&Po(t,e,o+1),s=r.depth>o&&Po(n,r,o+1),a=[];return Ro(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(Do(i,s),zo(Io(i,jo(t,e,n,r,o+1)),a)):(i&&zo(Io(i,Fo(t,e,o+1)),a),Ro(e,n,o,a),s&&zo(Io(s,Fo(n,r,o+1)),a)),Ro(r,null,o,a),new bo(a)}function Fo(t,e,n){var r=[];if(Ro(null,t,n,r),t.depth>n){var o=Po(t,e,n+1);zo(Io(o,Fo(t,e,n+1)),r)}return Ro(e,null,n,r),new bo(r)}function Bo(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(bo.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}Mo.size.get=function(){return this.content.size-this.openStart-this.openEnd},_o.prototype.insertAt=function(t,e){var n=To(this.content,t+this.openStart,e,null);return n&&new _o(n,this.openStart,this.openEnd)},_o.prototype.removeBetween=function(t,e){return new _o(Eo(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},_o.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},_o.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},_o.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},_o.fromJSON=function(t,e){if(!e)return _o.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new _o(bo.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},_o.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new _o(t,n,r)},Object.defineProperties(_o.prototype,Mo),_o.empty=new _o(bo.empty,0,0);var $o=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Lo={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};$o.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Lo.parent.get=function(){return this.node(this.depth)},Lo.doc.get=function(){return this.node(0)},$o.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},$o.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},$o.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},$o.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},$o.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},$o.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},$o.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Lo.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Lo.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Lo.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},$o.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return Co.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},$o.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},$o.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},$o.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Jo(this,t,n)},$o.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},$o.prototype.max=function(t){return t.pos>this.pos?t:this},$o.prototype.min=function(t){return t.pos<this.pos?t:this},$o.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},$o.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new $o(e,n,o)},$o.resolveCached=function(t,e){for(var n=0;n<Vo.length;n++){var r=Vo[n];if(r.pos==e&&r.doc==t)return r}var o=Vo[qo]=$o.resolve(t,e);return qo=(qo+1)%Wo,o},Object.defineProperties($o.prototype,Lo);var Vo=[],qo=0,Wo=12,Jo=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},Ho={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};Ho.start.get=function(){return this.$from.before(this.depth+1)},Ho.end.get=function(){return this.$to.after(this.depth+1)},Ho.parent.get=function(){return this.$from.node(this.depth)},Ho.startIndex.get=function(){return this.$from.index(this.depth)},Ho.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Jo.prototype,Ho);var Uo=Object.create(null),Ko=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||bo.empty,this.marks=r||Co.none},Go={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};Go.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},Go.childCount.get=function(){return this.content.childCount},Ko.prototype.child=function(t){return this.content.child(t)},Ko.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Ko.prototype.forEach=function(t){this.content.forEach(t)},Ko.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},Ko.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},Go.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Ko.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},Go.firstChild.get=function(){return this.content.firstChild},Go.lastChild.get=function(){return this.content.lastChild},Ko.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Ko.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Ko.prototype.hasMarkup=function(t,e,n){return this.type==t&&ko(this.attrs,e||t.defaultAttrs||Uo)&&Co.sameSet(this.marks,n||Co.none)},Ko.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Ko.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Ko.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Ko.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return _o.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new _o(c,r.depth-i,o.depth-i)},Ko.prototype.replace=function(t,e,n){return No(this.resolve(t),this.resolve(e),n)},Ko.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},Ko.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},Ko.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},Ko.prototype.resolve=function(t){return $o.resolveCached(this,t)},Ko.prototype.resolveNoCache=function(t){return $o.resolve(this,t)},Ko.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},Go.isBlock.get=function(){return this.type.isBlock},Go.isTextblock.get=function(){return this.type.isTextblock},Go.inlineContent.get=function(){return this.type.inlineContent},Go.isInline.get=function(){return this.type.isInline},Go.isText.get=function(){return this.type.isText},Go.isLeaf.get=function(){return this.type.isLeaf},Go.isAtom.get=function(){return this.type.isAtom},Ko.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Zo(this.marks,t)},Ko.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Ko.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=bo.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Ko.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},Ko.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Ko.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},Ko.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Ko.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=bo.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(Ko.prototype,Go);var Xo=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Zo(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(Ko);function Zo(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var Yo=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Qo={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};Yo.parse=function(t,e){var n=new ti(t,e);if(null==n.next)return Yo.empty;var r=ni(n);n.next&&n.err("Unexpected trailing text");var o=fi(li(r));return hi(o,n),o},Yo.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},Yo.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},Qo.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Qo.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},Yo.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},Yo.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return bo.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var p=o(u,s.concat(l));if(p)return p}}}return o(this,[])},Yo.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},Yo.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Qo.edgeCount.get=function(){return this.next.length>>1},Yo.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},Yo.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(Yo.prototype,Qo),Yo.empty=new Yo(!0);var ti=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},ei={next:{configurable:!0}};function ni(t){var e=[];do{e.push(ri(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function ri(t){var e=[];do{e.push(oi(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function oi(t){for(var e=ci(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=si(t,e)}return e}function ii(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function si(t,e){var n=ii(t),r=n;return t.eat(",")&&(r="}"!=t.next?ii(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ai(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function ci(t){if(t.eat("(")){var e=ni(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=ai(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function li(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function ui(t,e){return e-t}function pi(t,e){var n=[];return r(e),n.sort(ui);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function fi(t){var e=Object.create(null);return n(pi(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];pi(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new Yo(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(ui);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function hi(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function di(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function mi(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function vi(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new bi(t[n]);return e}ei.next.get=function(){return this.tokens[this.pos]},ti.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},ti.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(ti.prototype,ei);var gi=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=vi(n.attrs),this.defaultAttrs=di(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},yi={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};yi.isInline.get=function(){return!this.isBlock},yi.isTextblock.get=function(){return this.isBlock&&this.inlineContent},yi.isLeaf.get=function(){return this.contentMatch==Yo.empty},yi.isAtom.get=function(){return this.isLeaf||this.spec.atom},gi.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},gi.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},gi.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:mi(this.attrs,t)},gi.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ko(this,this.computeAttrs(t),bo.from(e),Co.setFrom(n))},gi.prototype.createChecked=function(t,e,n){if(e=bo.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Ko(this,this.computeAttrs(t),e,Co.setFrom(n))},gi.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=bo.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(bo.empty,!0);return o?new Ko(this,t,e.append(o),Co.setFrom(n)):null},gi.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},gi.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},gi.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},gi.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:Co.empty:t},gi.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new gi(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(gi.prototype,yi);var bi=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},wi={isRequired:{configurable:!0}};wi.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(bi.prototype,wi);var xi=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=vi(r.attrs),this.rank=e,this.excluded=null;var o=di(this.attrs);this.instance=o&&new Co(this,o)};xi.prototype.create=function(t){return!t&&this.instance?this.instance:new Co(this,mi(this.attrs,t))},xi.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new xi(t,r++,e,o)})),n},xi.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},xi.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},xi.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var Si=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=o["a"].from(t.nodes),this.spec.marks=o["a"].from(t.marks),this.nodes=gi.compile(this.spec.nodes,this),this.marks=xi.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var i=this.nodes[r],s=i.spec.content||"",a=i.spec.marks;i.contentMatch=n[s]||(n[s]=Yo.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.markSet="_"==a?null:a?ki(this,a.split(" ")):""!=a&&i.inlineContent?null:[]}for(var c in this.marks){var l=this.marks[c],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:ki(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ki(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}Si.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof gi))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},Si.prototype.text=function(t,e){var n=this.nodes.text;return new Xo(n,n.defaultAttrs,t,Co.setFrom(e))},Si.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},Si.prototype.nodeFromJSON=function(t){return Ko.fromJSON(this,t)},Si.prototype.markFromJSON=function(t){return Co.fromJSON(this,t)},Si.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var Ci=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)}))};Ci.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Pi(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},Ci.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Pi(this,e,!0);return n.addAll(t,null,e.from,e.to),_o.maxOpen(n.finish())},Ci.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Ii(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},Ci.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},Ci.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Fi(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=Fi(t)),t.node=s}))};for(var s in t.nodes)i();return e},Ci.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new Ci(t,Ci.schemaRules(t)))};var Oi={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_i={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Mi={ol:!0,ul:!0},Ei=1,Ti=2,Ni=4;function Ai(t){return(t?Ei:0)|("full"===t?Ti:0)}var Di=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&Ni?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=Co.none,this.pendingMarks=r};Di.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(bo.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Di.prototype.finish=function(t){if(!(this.options&Ei)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=bo.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(bo.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Di.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Bi(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Pi=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=Ai(e.preserveWhitespace)|(n?Ni:0);r=o?new Di(o.type,o.attrs,Co.none,Co.none,!0,e.topMatch||o.type.contentMatch,i):new Di(n?null:t.schema.topNodeType,null,Co.none,Co.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},zi={top:{configurable:!0},currentPos:{configurable:!0}};function Ri(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&Mi.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Ii(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function ji(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Fi(t){var e={};for(var n in t)e[n]=t[n];return e}function Bi(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}zi.top.get=function(){return this.nodes[this.open]},Pi.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(ji(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Pi.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&Ei)n.options&Ti||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Pi.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();Mi.hasOwnProperty(e)&&Ri(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:_i.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(Oi.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},Pi.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Pi.prototype.readStyles=function(t){for(var e=Co.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},Pi.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Pi.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&Oi.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Pi.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Pi.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Pi.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Pi.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~Ni:Ai(r);o.options&Ni&&0==o.content.length&&(i|=Ni),this.nodes.push(new Di(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Pi.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Pi.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Pi.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},zi.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Pi.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Pi.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Pi.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Pi.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Pi.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},Pi.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Pi.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Pi.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(Pi.prototype,zi);var $i=function(t,e){this.nodes=t||{},this.marks=e||{}};function Li(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Vi(t){return t.document||window.document}function qi(t){return void 0===t&&(t={}),new r["Plugin"]({view:function(e){return new Wi(e,t)}})}$i.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Vi(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},$i.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=$i.renderSpec(Vi(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},$i.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},$i.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&$i.renderSpec(Vi(n),r(t,e))},$i.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=$i.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},$i.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new $i(this.nodesFromSchema(t),this.marksFromSchema(t)))},$i.nodesFromSchema=function(t){var e=Li(t.nodes);return e.text||(e.text=function(t){return t.text}),e},$i.marksFromSchema=function(t){return Li(t.marks)};var Wi=function(t,e){var n=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map((function(e){var r=function(t){return n[e](t)};return t.dom.addEventListener(e,r),{name:e,handler:r}}))};Wi.prototype.destroy=function(){var t=this;this.handlers.forEach((function(e){var n=e.name,r=e.handler;return t.editorView.dom.removeEventListener(n,r)}))},Wi.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},Wi.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},Wi.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var n=e.nodeBefore,r=e.nodeAfter;if(n||r){var o=this.editorView.nodeDOM(this.cursorPos-(n?n.nodeSize:0)).getBoundingClientRect(),i=n?o.bottom:o.top;n&&r&&(i=(i+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:o.left,right:o.right,top:i-this.width/2,bottom:i+this.width/2}}}if(!t){var s=this.editorView.coordsAtPos(this.cursorPos);t={left:s.left-this.width/2,right:s.left+this.width/2,top:s.top,bottom:s.bottom}}var a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var c=!a||a==document.body&&"static"==getComputedStyle(a).position?{left:-pageXOffset,top:-pageYOffset}:a.getBoundingClientRect();this.element.style.left=t.left-c.left+"px",this.element.style.top=t.top-c.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},Wi.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){return e.setCursor(null)}),t)},Wi.prototype.dragover=function(t){if(this.editorView.editable){var e=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(e){var n=e.pos;this.editorView.dragging&&this.editorView.dragging.slice&&(n=Object(At["g"])(this.editorView.state.doc,n,this.editorView.dragging.slice),null==n&&(n=e.pos)),this.setCursor(n),this.scheduleRemoval(5e3)}}},Wi.prototype.dragend=function(){this.scheduleRemoval(20)},Wi.prototype.drop=function(){this.scheduleRemoval(20)},Wi.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};var Ji=n("7f06"),Hi=n("576a"),Ui=n("304a"),Ki=function(t){function e(e){t.call(this,e,e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));return e.valid(o)?new e(o):t.near(o)},e.prototype.content=function(){return Ui["Slice"].empty},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head},e.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},e.fromJSON=function(t,n){if("number"!=typeof n.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new e(t.resolve(n.pos))},e.prototype.getBookmark=function(){return new Gi(this.anchor)},e.valid=function(t){var e=t.parent;if(e.isTextblock||!Xi(t)||!Zi(t))return!1;var n=e.type.spec.allowGapCursor;if(null!=n)return n;var r=e.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock},e.findFrom=function(t,n,o){t:for(;;){if(!o&&e.valid(t))return t;for(var i=t.pos,s=null,a=t.depth;;a--){var c=t.node(a);if(n>0?t.indexAfter(a)<c.childCount:t.index(a)>0){s=c.child(n>0?t.indexAfter(a):t.index(a)-1);break}if(0==a)return null;i+=n;var l=t.doc.resolve(i);if(e.valid(l))return l}for(;;){var u=n>0?s.firstChild:s.lastChild;if(!u){if(s.isAtom&&!s.isText&&!r["NodeSelection"].isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),o=!1;continue t}break}s=u,i+=n;var p=t.doc.resolve(i);if(e.valid(p))return p}return null}},e}(r["Selection"]);Ki.prototype.visible=!1,r["Selection"].jsonID("gapcursor",Ki);var Gi=function(t){this.pos=t};function Xi(t){for(var e=t.depth;e>=0;e--){var n=t.index(e);if(0!=n)for(var r=t.node(e).child(n-1);;r=r.lastChild){if(0==r.childCount&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function Zi(t){for(var e=t.depth;e>=0;e--){var n=t.indexAfter(e),r=t.node(e);if(n!=r.childCount)for(var o=r.child(n);;o=o.firstChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}Gi.prototype.map=function(t){return new Gi(t.map(this.pos))},Gi.prototype.resolve=function(t){var e=t.resolve(this.pos);return Ki.valid(e)?new Ki(e):r["Selection"].near(e)};var Yi=function(){return new r["Plugin"]({props:{decorations:ns,createSelectionBetween:function(t,e,n){if(e.pos==n.pos&&Ki.valid(n))return new Ki(n)},handleClick:es,handleKeyDown:Qi}})},Qi=Object(Ji["a"])({ArrowLeft:ts("horiz",-1),ArrowRight:ts("horiz",1),ArrowUp:ts("vert",-1),ArrowDown:ts("vert",1)});function ts(t,e){var n="vert"==t?e>0?"down":"up":e>0?"right":"left";return function(t,o,i){var s=t.selection,a=e>0?s.$to:s.$from,c=s.empty;if(s instanceof r["TextSelection"]){if(!i.endOfTextblock(n)||0==a.depth)return!1;c=!1,a=t.doc.resolve(e>0?a.after():a.before())}var l=Ki.findFrom(a,e,c);return!!l&&(o&&o(t.tr.setSelection(new Ki(l))),!0)}}function es(t,e,n){if(!t.editable)return!1;var o=t.state.doc.resolve(e);if(!Ki.valid(o))return!1;var i=t.posAtCoords({left:n.clientX,top:n.clientY}),s=i.inside;return!(s>-1&&r["NodeSelection"].isSelectable(t.state.doc.nodeAt(s)))&&(t.dispatch(t.state.tr.setSelection(new Ki(o))),!0)}function ns(t){if(!(t.selection instanceof Ki))return null;var e=document.createElement("div");return e.className="ProseMirror-gapcursor",Hi["b"].create(t.doc,[Hi["a"].widget(t.selection.head,e,{key:"gapcursor"})])}var rs=n("9ea7"),os="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function is(t){var e,n,r,o,i=t.split(/-(?!$)/),s=i[i.length-1];"Space"==s&&(s=" ");for(var a=0;a<i.length-1;a++){var c=i[a];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))e=!0;else if(/^(c|ctrl|control)$/i.test(c))n=!0;else if(/^s(hift)?$/i.test(c))r=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);os?o=!0:n=!0}}return e&&(s="Alt-"+s),n&&(s="Ctrl-"+s),o&&(s="Meta-"+s),r&&(s="Shift-"+s),s}function ss(t){var e=Object.create(null);for(var n in t)e[is(n)]=t[n];return e}function as(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function cs(t){return new r["Plugin"]({props:{handleKeyDown:ls(t)}})}function ls(t){var e=ss(t);return function(t,n){var r,o=Object(rs["b"])(n),i=1==o.length&&" "!=o,s=e[as(o,n,!i)];if(s&&s(t.state,t.dispatch,t))return!0;if(i&&(n.shiftKey||n.altKey||n.metaKey)&&(r=rs["a"][n.keyCode])&&r!=o){var a=e[as(r,n,!0)];if(a&&a(t.state,t.dispatch,t))return!0}else if(i&&n.shiftKey){var c=e[as(o,n,!0)];if(c&&c(t.state,t.dispatch,t))return!0}return!1}}var us=n("0010"),ps=n("f95e"),fs=n("a15f"),hs=n("8bbf"),ds=n.n(hs),ms=n("a9de");
/*!
    * tiptap v1.27.0
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */
function vs(t){return vs="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(t)}function gs(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ys(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bs(t,e,n){return e&&ys(t.prototype,e),n&&ys(t,n),t}function ws(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ss(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xs(Object(n),!0).forEach((function(e){ws(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ks(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Os(t,e)}function Cs(t){return Cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},Cs(t)}function Os(t,e){return Os=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},Os(t,e)}function _s(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function Ms(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Es(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?Ms(t):e}function Ts(t){return function(){var e,n=Cs(t);if(_s()){var r=Cs(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return Es(this,e)}}function Ns(t,e){return Ps(t)||Rs(t,e)||Is(t,e)||Bs()}function As(t){return Ds(t)||zs(t)||Is(t)||Fs()}function Ds(t){if(Array.isArray(t))return js(t)}function Ps(t){if(Array.isArray(t))return t}function zs(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function Rs(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(c){o=!0,i=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(o)throw i}}return n}}function Is(t,e){if(t){if("string"===typeof t)return js(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?js(t,e):void 0}}function js(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function Fs(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Bs(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function $s(t){return t.replace(/(?:^\w|[A-Z]|\b\w)/g,(function(t,e){return 0===e?t.toLowerCase():t.toUpperCase()})).replace(/\s+/g,"")}var Ls=function(){function t(e,n){var r=n.editor,o=n.extension,i=n.parent,s=n.node,a=n.view,c=n.decorations,l=n.getPos;gs(this,t),this.component=e,this.editor=r,this.extension=o,this.parent=i,this.node=s,this.view=a,this.decorations=c,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:l,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}return bs(t,[{key:"createDOM",value:function(){var t=this,e=ds.a.extend(this.component),n={editor:this.editor,node:this.node,view:this.view,getPos:function(){return t.getPos()},decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:function(e){return t.updateAttrs(e)}};return"function"===typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),"function"===typeof this.extension.update&&(this.update=this.extension.update),this.vm=new e({parent:this.parent,propsData:n}).$mount(),this.vm.$el}},{key:"update",value:function(t,e){return t.type===this.node.type&&(t===this.node&&this.decorations===e||(this.node=t,this.decorations=e,this.updateComponentProps({node:t,decorations:e})),!0)}},{key:"updateComponentProps",value:function(t){var e=this;if(this.vm._props){var n=ds.a.config.silent;ds.a.config.silent=!0,Object.entries(t).forEach((function(t){var n=Ns(t,2),r=n[0],o=n[1];e.vm._props[r]=o})),ds.a.config.silent=n}}},{key:"updateAttrs",value:function(t){if(this.view.editable){var e=this.view.state,n=this.node.type,r=this.getPos(),o=Ss({},this.node.attrs,{},t),i=this.isMark?e.tr.removeMark(r.from,r.to,n).addMark(r.from,r.to,n.create(o)):e.tr.setNodeMarkup(r,null,o);this.view.dispatch(i)}}},{key:"ignoreMutation",value:function(t){return"selection"!==t.type&&(!this.contentDOM||!this.contentDOM.contains(t.target))}},{key:"stopEvent",value:function(t){var e=this;if("function"===typeof this.extension.stopEvent)return this.extension.stopEvent(t);var n=!!this.extension.schema.draggable;if(n&&"mousedown"===t.type){var r=t.target.closest&&t.target.closest("[data-drag-handle]"),o=r&&(this.dom===r||this.dom.contains(r));o&&(this.captureEvents=!1,document.addEventListener("dragend",(function(){e.captureEvents=!0}),{once:!0}))}var i="copy"===t.type,s="paste"===t.type,a="cut"===t.type,c=t.type.startsWith("drag")||"drop"===t.type;return!(n&&c||i||s||a)&&this.captureEvents}},{key:"selectNode",value:function(){this.updateComponentProps({selected:!0})}},{key:"deselectNode",value:function(){this.updateComponentProps({selected:!1})}},{key:"getMarkPos",value:function(){var t=this.view.posAtDOM(this.dom),e=this.view.state.doc.resolve(t),n=Object(fs["b"])(e,this.node.type);return n}},{key:"destroy",value:function(){this.vm.$destroy()}}]),t}(),Vs=function(){function t(){gs(this,t)}return bs(t,[{key:"on",value:function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this}},{key:"emit",value:function(t){for(var e=this,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this._callbacks=this._callbacks||{};var i=this._callbacks[t];return i&&i.forEach((function(t){return t.apply(e,r)})),this}},{key:"off",value:function(t,e){if(arguments.length){var n=this._callbacks?this._callbacks[t]:null;n&&(e?this._callbacks[t]=n.filter((function(t){return t!==e})):delete this._callbacks[t])}else this._callbacks={};return this}}]),t}(),qs=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};gs(this,t),this.options=Ss({},this.defaultOptions,{},e)}return bs(t,[{key:"init",value:function(){return null}},{key:"bindEditor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editor=t}},{key:"inputRules",value:function(){return[]}},{key:"pasteRules",value:function(){return[]}},{key:"keys",value:function(){return{}}},{key:"name",get:function(){return null}},{key:"type",get:function(){return"extension"}},{key:"defaultOptions",get:function(){return{}}},{key:"plugins",get:function(){return[]}}]),t}(),Ws=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;gs(this,t),e.forEach((function(t){t.bindEditor(n),t.init()})),this.extensions=e}return bs(t,[{key:"keymaps",value:function(t){var e=t.schema,n=this.extensions.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.keys})).map((function(t){return t.keys({schema:e})})),r=this.extensions.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.keys})).map((function(t){return t.keys({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(As(n),As(r)).map((function(t){return cs(t)}))}},{key:"inputRules",value:function(t){var e=t.schema,n=t.excludedExtensions;if(!(n instanceof Array)&&n)return[];var r=n instanceof Array?this.extensions.filter((function(t){return!n.includes(t.name)})):this.extensions,o=r.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.inputRules})).map((function(t){return t.inputRules({schema:e})})),i=r.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.inputRules})).map((function(t){return t.inputRules({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(As(o),As(i)).reduce((function(t,e){return[].concat(As(t),As(e))}),[])}},{key:"pasteRules",value:function(t){var e=t.schema,n=t.excludedExtensions;if(!(n instanceof Array)&&n)return[];var r=n instanceof Array?this.extensions.filter((function(t){return!n.includes(t.name)})):this.extensions,o=r.filter((function(t){return["extension"].includes(t.type)})).filter((function(t){return t.pasteRules})).map((function(t){return t.pasteRules({schema:e})})),i=r.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.pasteRules})).map((function(t){return t.pasteRules({type:e["".concat(t.type,"s")][t.name],schema:e})}));return[].concat(As(o),As(i)).reduce((function(t,e){return[].concat(As(t),As(e))}),[])}},{key:"commands",value:function(t){var e=t.schema,n=t.view;return this.extensions.filter((function(t){return t.commands})).reduce((function(t,r){var o=r.name,i=r.type,s={},a=r.commands(Ss({schema:e},["node","mark"].includes(i)?{type:e["".concat(i,"s")][o]}:{})),c=function(t,e){return!!n.editable&&(n.focus(),t(e)(n.state,n.dispatch,n))},l=function(t,e){Array.isArray(e)?s[t]=function(t){return e.forEach((function(e){return c(e,t)}))}:"function"===typeof e&&(s[t]=function(t){return c(e,t)})};return"object"===vs(a)?Object.entries(a).forEach((function(t){var e=Ns(t,2),n=e[0],r=e[1];l(n,r)})):l(o,a),Ss({},t,{},s)}),{})}},{key:"nodes",get:function(){return this.extensions.filter((function(t){return"node"===t.type})).reduce((function(t,e){var n=e.name,r=e.schema;return Ss({},t,ws({},n,r))}),{})}},{key:"options",get:function(){var t=this.view;return this.extensions.reduce((function(e,n){return Ss({},e,ws({},n.name,new Proxy(n.options,{set:function(e,n,r){var o=e[n]!==r;return Object.assign(e,ws({},n,r)),o&&t.updateState(t.state),!0}})))}),{})}},{key:"marks",get:function(){return this.extensions.filter((function(t){return"mark"===t.type})).reduce((function(t,e){var n=e.name,r=e.schema;return Ss({},t,ws({},n,r))}),{})}},{key:"plugins",get:function(){return this.extensions.filter((function(t){return t.plugins})).reduce((function(t,e){var n=e.plugins;return[].concat(As(t),As(n))}),[])}}]),t}();function Js(t){var e=document.createElement("style");e.type="text/css",e.textContent=t;var n=document,r=n.head,o=r.firstChild;o?r.insertBefore(e,o):r.appendChild(e)}var Hs=function(t){ks(n,t);var e=Ts(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gs(this,n),e.call(this,t)}return bs(n,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"mark"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),n}(qs);function Us(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(parseInt(t,10),e),n)}var Ks=function(t){ks(n,t);var e=Ts(n);function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gs(this,n),e.call(this,t)}return bs(n,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"node"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),n}(qs),Gs=function(t){ks(n,t);var e=Ts(n);function n(){return gs(this,n),e.apply(this,arguments)}return bs(n,[{key:"name",get:function(){return"doc"}},{key:"schema",get:function(){return{content:"block+"}}}]),n}(Ks),Xs=function(t){ks(n,t);var e=Ts(n);function n(){return gs(this,n),e.apply(this,arguments)}return bs(n,[{key:"commands",value:function(t){var e=t.type;return function(){return Object(ms["k"])(e)}}},{key:"name",get:function(){return"paragraph"}},{key:"schema",get:function(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}}}}]),n}(Ks),Zs=function(t){ks(n,t);var e=Ts(n);function n(){return gs(this,n),e.apply(this,arguments)}return bs(n,[{key:"name",get:function(){return"text"}},{key:"schema",get:function(){return{group:"inline"}}}]),n}(Ks),Ys='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n',Qs=function(t){ks(n,t);var e=Ts(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gs(this,n),t=e.call(this),t.defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},parseOptions:{},injectCSS:!0,onInit:function(){},onTransaction:function(){},onUpdate:function(){},onFocus:function(){},onBlur:function(){},onPaste:function(){},onDrop:function(){}},t.events=["init","transaction","update","focus","blur","paste","drop"],t.init(r),t}return bs(n,[{key:"init",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(Ss({},this.defaultOptions,{},e)),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&Js(Ys),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach((function(e){t.on(e,t.options[$s("on ".concat(e))]||function(){})})),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}},{key:"setOptions",value:function(t){this.options=Ss({},this.options,{},t),this.view&&this.state&&this.view.updateState(this.state)}},{key:"createExtensions",value:function(){return new Ws([].concat(As(this.builtInExtensions),As(this.options.extensions)),this)}},{key:"createPlugins",value:function(){return this.extensions.plugins}},{key:"createKeymaps",value:function(){return this.extensions.keymaps({schema:this.schema})}},{key:"createInputRules",value:function(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}},{key:"createPasteRules",value:function(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}},{key:"createCommands",value:function(){return this.extensions.commands({schema:this.schema,view:this.view})}},{key:"createNodes",value:function(){return this.extensions.nodes}},{key:"createMarks",value:function(){return this.extensions.marks}},{key:"createSchema",value:function(){return new Si({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}},{key:"createState",value:function(){var t=this;return r["EditorState"].create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[].concat(As(this.plugins),[Object(ps["b"])({rules:this.inputRules})],As(this.pasteRules),As(this.keymaps),[cs({Backspace:ps["d"]}),cs(us["a"]),qi(this.options.dropCursor),Yi(),new r["Plugin"]({key:new r["PluginKey"]("editable"),props:{editable:function(){return t.options.editable}}}),new r["Plugin"]({props:{attributes:{tabindex:0},handleDOMEvents:{focus:function(e,n){t.focused=!0,t.emit("focus",{event:n,state:e.state,view:e});var r=t.state.tr.setMeta("focused",!0);t.view.dispatch(r)},blur:function(e,n){t.focused=!1,t.emit("blur",{event:n,state:e.state,view:e});var r=t.state.tr.setMeta("focused",!1);t.view.dispatch(r)}}}}),new r["Plugin"]({props:this.options.editorProps})])})}},{key:"createDocument",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.parseOptions;if(null===t)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"===vs(t))try{return this.schema.nodeFromJSON(t)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",r),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"===typeof t){var n=document.createElement("div");return n.innerHTML=t.trim(),Ci.fromSchema(this.schema).parse(n,e)}return!1}},{key:"createView",value:function(){var t=this;return new so(this.element,{state:this.createState(),handlePaste:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,["paste"].concat(n))},handleDrop:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.emit.apply(t,["drop"].concat(n))},dispatchTransaction:this.dispatchTransaction.bind(this)})}},{key:"setParentComponent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&this.view.setProps({nodeViews:this.initNodeViews({parent:t,extensions:[].concat(As(this.builtInExtensions),As(this.options.extensions))})})}},{key:"initNodeViews",value:function(t){var e=this,n=t.parent,r=t.extensions;return r.filter((function(t){return["node","mark"].includes(t.type)})).filter((function(t){return t.view})).reduce((function(t,r){var o=function(t,o,i,s){var a=r.view;return new Ls(a,{editor:e,extension:r,parent:n,node:t,view:o,getPos:i,decorations:s})};return Ss({},t,ws({},r.name,o))}),{})}},{key:"dispatchTransaction",value:function(t){var e=this.state.apply(t);this.view.updateState(e),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t}),t.docChanged&&!t.getMeta("preventUpdate")&&this.emitUpdate(t)}},{key:"emitUpdate",value:function(t){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:t})}},{key:"resolveSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.selection&&null===t)return this.selection;if("start"===t||!0===t)return{from:0,to:0};if("end"===t){var e=this.state.doc;return{from:e.content.size,to:e.content.size}}return{from:t,to:t}}},{key:"focus",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(this.view.focused&&null===e||!1===e)){var n=this.resolveSelection(e),r=n.from,o=n.to;this.setSelection(r,o),setTimeout((function(){return t.view.focus()}),10)}}},{key:"setSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.state,o=n.doc,i=n.tr,s=Us(t,0,o.content.size),a=Us(e,0,o.content.size),c=r["TextSelection"].create(o,s,a),l=i.setSelection(c);this.view.dispatch(l)}},{key:"blur",value:function(){this.view.dom.blur()}},{key:"getSchemaJSON",value:function(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}},{key:"getHTML",value:function(){var t=document.createElement("div"),e=$i.fromSchema(this.schema).serializeFragment(this.state.doc.content);return t.appendChild(e),t.innerHTML}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,o=this.state,i=o.doc,s=o.tr,a=this.createDocument(t,n),c=r["TextSelection"].create(i,0,i.content.size),l=s.setSelection(c).replaceSelectionWith(a,!1).setMeta("preventUpdate",!e);this.view.dispatch(l)}},{key:"clearContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setContent(this.options.emptyDocument,t)}},{key:"setActiveNodesAndMarks",value:function(){var t=this;this.activeMarks=Object.entries(this.schema.marks).reduce((function(e,n){var r=Ns(n,2),o=r[0],i=r[1];return Ss({},e,ws({},o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(fs["d"])(t.state,i,e)})))}),{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce((function(e,n){var r=Ns(n,2),o=r[0],i=r[1];return Ss({},e,ws({},o,Object(fs["a"])(t.state,i)))}),{}),this.activeNodes=Object.entries(this.schema.nodes).reduce((function(e,n){var r=Ns(n,2),o=r[0],i=r[1];return Ss({},e,ws({},o,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(fs["f"])(t.state,i,e)})))}),{})}},{key:"getMarkAttrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.activeMarkAttrs[t]}},{key:"getNodeAttrs",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return Ss({},Object(fs["c"])(this.state,this.schema.nodes[t]))}},{key:"registerPlugin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,n="function"===typeof e?e(t,this.state.plugins):[t].concat(As(this.state.plugins)),r=this.state.reconfigure({plugins:n});this.view.updateState(r)}},{key:"unregisterPlugin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(t&&this.view.docView){var e=this.state.reconfigure({plugins:this.state.plugins.filter((function(e){return!e.key.startsWith("".concat(t,"$"))}))});this.view.updateState(e)}}},{key:"destroy",value:function(){this.view&&this.view.destroy()}},{key:"builtInExtensions",get:function(){return this.options.useBuiltInExtensions?[new Gs,new Zs,new Xs]:[]}},{key:"state",get:function(){return this.view?this.view.state:null}},{key:"isActive",get:function(){return Object.entries(Ss({},this.activeMarks,{},this.activeNodes)).reduce((function(t,e){var n=Ns(e,2),r=n[0],o=n[1];return Ss({},t,ws({},r,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o(t)})))}),{})}}]),n}(Vs),ta={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler:function(t){var e=this;t&&t.element&&this.$nextTick((function(){e.$el.appendChild(t.element.firstChild),t.setParentComponent(e)}))}}},render:function(t){return t("div")},beforeDestroy:function(){this.editor.element=this.$el}},ea=function(){function t(e){var n=this,r=e.options;gs(this,t),this.options=r,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.blurHandler=function(){n.preventHide?n.preventHide=!1:n.options.editor.emit("menubar:focusUpdate",!1)},this.options.editor.on("blur",this.blurHandler)}return bs(t,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("blur",this.blurHandler)}}]),t}();function na(t){return new r["Plugin"]({key:new r["PluginKey"]("menu_bar"),view:function(e){return new ea({editorView:e,options:t})}})}var ra={props:{editor:{default:null,type:Object}},data:function(){return{focused:!1}},watch:{editor:{immediate:!0,handler:function(t){var e=this;t&&this.$nextTick((function(){t.registerPlugin(na({editor:t,element:e.$el})),e.focused=t.focused,t.on("focus",(function(){e.focused=!0})),t.on("menubar:focusUpdate",(function(t){e.focused=t}))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor)}):null}};function oa(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r}function ia(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function sa(t,e){var n,r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=t.docView.domFromPos(e),s=i.node,a=i.offset;if(3===s.nodeType)o&&a<s.nodeValue.length?(r=ia(oa(s,a-1,a),-1),n="right"):a<s.nodeValue.length&&(r=ia(oa(s,a,a+1),-1),n="left");else if(s.firstChild){if(a<s.childNodes.length){var c=s.childNodes[a];r=ia(3===c.nodeType?oa(c):c,-1),n="left"}if((!r||r.top===r.bottom)&&a){var l=s.childNodes[a-1];r=ia(3===l.nodeType?oa(l):l,1),n="right"}}else r=s.getBoundingClientRect(),n="left";var u=r[n];return{top:r.top,bottom:r.bottom,left:u,right:u}}var aa=function(){function t(e){var n=this,r=e.options,o=e.editorView;gs(this,t),this.options=Ss({},{element:null,keepInBounds:!0,onUpdate:function(){return!1}},{},r),this.editorView=o,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.focusHandler=function(t){var e=t.view;n.update(e)},this.options.editor.on("focus",this.focusHandler),this.blurHandler=function(t){var e=t.event;n.preventHide?n.preventHide=!1:n.hide(e)},this.options.editor.on("blur",this.blurHandler)}return bs(t,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(t,e){var n=t.state;if(!t.composing&&!(e&&e.doc.eq(n.doc)&&e.selection.eq(n.selection)))if(n.selection.empty)this.hide();else{var r=n.selection,o=r.from,i=r.to,s=sa(t,o),a=sa(t,i,!0),c=this.options.element.offsetParent;if(c){var l=c.getBoundingClientRect(),u=this.options.element.getBoundingClientRect(),p=(s.left+a.left)/2-l.left;this.left=Math.round(this.options.keepInBounds?Math.min(l.width-u.width/2,Math.max(p,u.width/2)):p),this.bottom=Math.round(l.bottom-s.top),this.top=Math.round(a.bottom-l.top),this.isActive=!0,this.sendUpdate()}else this.hide()}}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}},{key:"hide",value:function(t){t&&t.relatedTarget&&this.options.element.parentNode&&this.options.element.parentNode.contains(t.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.options.editor.off("focus",this.focusHandler),this.options.editor.off("blur",this.blurHandler)}}]),t}();function ca(t){return new r["Plugin"]({key:new r["PluginKey"]("menu_bubble"),view:function(e){return new aa({editorView:e,options:t})}})}var la={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:function(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(t){var e=this;t&&this.$nextTick((function(){t.registerPlugin(ca({editor:t,element:e.$el,keepInBounds:e.keepInBounds,onUpdate:function(t){t.isActive&&!1===e.menu.isActive?e.$emit("show",t):t.isActive||!0!==e.menu.isActive||e.$emit("hide",t),e.menu=t}}))}))}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),getNodeAttrs:this.editor.getNodeAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("menu_bubble")}}},d010:function(t,e,n){"use strict";function r(t,e,n){this.$children.forEach((function(o){var i=o.$options.componentName;i===t?o.$emit.apply(o,[e].concat(n)):r.apply(o,[t,e].concat([n]))}))}e.__esModule=!0,e.default={methods:{dispatch:function(t,e,n){var r=this.$parent||this.$root,o=r.$options.componentName;while(r&&(!o||o!==t))r=r.$parent,r&&(o=r.$options.componentName);r&&r.$emit.apply(r,[e].concat(n))},broadcast:function(t,e,n){r.call(this,t,e,n)}}}},d2a2:function(t,e,n){var r,o;(function(n){var i="object"===typeof window&&window||"object"===typeof self&&self;e.nodeType?i&&(i.hljs=n({}),r=[],o=function(){return i.hljs}.apply(e,r),void 0===o||(t.exports=o)):n(e)})((function(t){var e,n=[],r=Object.keys,o={},i={},s=/^(no-?highlight|plain|text)$/i,a=/\blang(?:uage)?-([\w-]+)\b/i,c=/((^(<[^>]+>|\t|)+|(?:\n)))/gm,l="</span>",u={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},p="of and for in not or if then".split(" ");function f(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function h(t){return t.nodeName.toLowerCase()}function d(t,e){var n=t&&t.exec(e);return n&&0===n.index}function m(t){return s.test(t)}function v(t){var e,n,r,o,i=t.className+" ";if(i+=t.parentNode?t.parentNode.className:"",n=a.exec(i),n)return j(n[1])?n[1]:"no-highlight";for(i=i.split(/\s+/),e=0,r=i.length;e<r;e++)if(o=i[e],m(o)||j(o))return o}function g(t){var e,n={},r=Array.prototype.slice.call(arguments,1);for(e in t)n[e]=t[e];return r.forEach((function(t){for(e in t)n[e]=t[e]})),n}function y(t){var e=[];return function t(n,r){for(var o=n.firstChild;o;o=o.nextSibling)3===o.nodeType?r+=o.nodeValue.length:1===o.nodeType&&(e.push({event:"start",offset:r,node:o}),r=t(o,r),h(o).match(/br|hr|img|input/)||e.push({event:"stop",offset:r,node:o}));return r}(t,0),e}function b(t,e,r){var o=0,i="",s=[];function a(){return t.length&&e.length?t[0].offset!==e[0].offset?t[0].offset<e[0].offset?t:e:"start"===e[0].event?t:e:t.length?t:e}function c(t){function e(t){return" "+t.nodeName+'="'+f(t.value).replace('"',"&quot;")+'"'}i+="<"+h(t)+n.map.call(t.attributes,e).join("")+">"}function l(t){i+="</"+h(t)+">"}function u(t){("start"===t.event?c:l)(t.node)}while(t.length||e.length){var p=a();if(i+=f(r.substring(o,p[0].offset)),o=p[0].offset,p===t){s.reverse().forEach(l);do{u(p.splice(0,1)[0]),p=a()}while(p===t&&p.length&&p[0].offset===o);s.reverse().forEach(c)}else"start"===p[0].event?s.push(p[0].node):s.pop(),u(p.splice(0,1)[0])}return i+f(r.substr(o))}function w(t){return!!t&&(t.endsWithParent||w(t.starts))}function x(t){return t.variants&&!t.cached_variants&&(t.cached_variants=t.variants.map((function(e){return g(t,{variants:null},e)}))),t.cached_variants?t.cached_variants:w(t)?[g(t,{starts:t.starts?g(t.starts):null})]:[t]}function S(t){if(e&&!t.langApiRestored){for(var n in t.langApiRestored=!0,e)t[n]&&(t[e[n]]=t[n]);(t.contains||[]).concat(t.variants||[]).forEach(S)}}function k(t,e){var n={};return"string"===typeof t?o("keyword",t):r(t).forEach((function(e){o(e,t[e])})),n;function o(t,r){e&&(r=r.toLowerCase()),r.split(" ").forEach((function(e){var r=e.split("|");n[r[0]]=[t,C(r[0],r[1])]}))}}function C(t,e){return e?Number(e):O(t)?0:1}function O(t){return-1!=p.indexOf(t.toLowerCase())}function _(t){function e(t){return t&&t.source||t}function n(n,r){return new RegExp(e(n),"m"+(t.case_insensitive?"i":"")+(r?"g":""))}function r(t){return new RegExp(t.toString()+"|").exec("").length-1}function o(t,n){for(var r=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,o=0,i="",s=0;s<t.length;s++){o+=1;var a=o,c=e(t[s]);s>0&&(i+=n),i+="(";while(c.length>0){var l=r.exec(c);if(null==l){i+=c;break}i+=c.substring(0,l.index),c=c.substring(l.index+l[0].length),"\\"==l[0][0]&&l[1]?i+="\\"+String(Number(l[1])+a):(i+=l[0],"("==l[0]&&o++)}i+=")"}return i}function i(t){var e,i,s={},a=[],c={},l=1;function u(t,e){s[l]=t,a.push([t,e]),l+=r(e)+1}for(var p=0;p<t.contains.length;p++){var f;i=t.contains[p],f=i.beginKeywords?"\\.?(?:"+i.begin+")\\.?":i.begin,u(i,f)}t.terminator_end&&u("end",t.terminator_end),t.illegal&&u("illegal",t.illegal);var h=a.map((function(t){return t[1]}));return e=n(o(h,"|"),!0),c.lastIndex=0,c.exec=function(n){var r;if(0===a.length)return null;e.lastIndex=c.lastIndex;var o=e.exec(n);if(!o)return null;for(var i=0;i<o.length;i++)if(void 0!=o[i]&&void 0!=s[""+i]){r=s[""+i];break}return"string"===typeof r?(o.type=r,o.extra=[t.illegal,t.terminator_end]):(o.type="begin",o.rule=r),o},c}function s(r,o){r.compiled||(r.compiled=!0,r.keywords=r.keywords||r.beginKeywords,r.keywords&&(r.keywords=k(r.keywords,t.case_insensitive)),r.lexemesRe=n(r.lexemes||/\w+/,!0),o&&(r.beginKeywords&&(r.begin="\\b("+r.beginKeywords.split(" ").join("|")+")\\b"),r.begin||(r.begin=/\B|\b/),r.beginRe=n(r.begin),r.endSameAsBegin&&(r.end=r.begin),r.end||r.endsWithParent||(r.end=/\B|\b/),r.end&&(r.endRe=n(r.end)),r.terminator_end=e(r.end)||"",r.endsWithParent&&o.terminator_end&&(r.terminator_end+=(r.end?"|":"")+o.terminator_end)),r.illegal&&(r.illegalRe=n(r.illegal)),null==r.relevance&&(r.relevance=1),r.contains||(r.contains=[]),r.contains=Array.prototype.concat.apply([],r.contains.map((function(t){return x("self"===t?r:t)}))),r.contains.forEach((function(t){s(t,r)})),r.starts&&s(r.starts,o),r.terminators=i(r))}s(t)}function M(t,e,n,r){function i(t){return new RegExp(t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")}function s(t,e){if(d(t.endRe,e)){while(t.endsParent&&t.parent)t=t.parent;return t}if(t.endsWithParent)return s(t.parent,e)}function a(t,e){var n=x.case_insensitive?e[0].toLowerCase():e[0];return t.keywords.hasOwnProperty(n)&&t.keywords[n]}function c(t,e,n,r){if(!n&&""===e)return"";if(!t)return e;var o=r?"":u.classPrefix,i='<span class="'+o,s=n?"":l;return i+=t+'">',i+e+s}function p(){var t,e,n,r;if(!k.keywords)return f(T);r="",e=0,k.lexemesRe.lastIndex=0,n=k.lexemesRe.exec(T);while(n)r+=f(T.substring(e,n.index)),t=a(k,n),t?(N+=t[1],r+=c(t[0],f(n[0]))):r+=f(n[0]),e=k.lexemesRe.lastIndex,n=k.lexemesRe.exec(T);return r+f(T.substr(e))}function h(){var t="string"===typeof k.subLanguage;if(t&&!o[k.subLanguage])return f(T);var e=t?M(k.subLanguage,T,!0,C[k.subLanguage]):E(T,k.subLanguage.length?k.subLanguage:void 0);return k.relevance>0&&(N+=e.relevance),t&&(C[k.subLanguage]=e.top),c(e.language,e.value,!1,!0)}function m(){O+=null!=k.subLanguage?h():p(),T=""}function v(t){O+=t.className?c(t.className,"",!0):"",k=Object.create(t,{parent:{value:k}})}function g(t){var e=t[0],n=t.rule;return n&&n.endSameAsBegin&&(n.endRe=i(e)),n.skip?T+=e:(n.excludeBegin&&(T+=e),m(),n.returnBegin||n.excludeBegin||(T=e)),v(n,e),n.returnBegin?0:e.length}function y(t){var e=t[0],n=s(k,e);if(n){var r=k;r.skip?T+=e:(r.returnEnd||r.excludeEnd||(T+=e),m(),r.excludeEnd&&(T=e));do{k.className&&(O+=l),k.skip||k.subLanguage||(N+=k.relevance),k=k.parent}while(k!==n.parent);return n.starts&&(n.endSameAsBegin&&(n.starts.endRe=n.endRe),v(n.starts,"")),r.returnEnd?0:e.length}}var b={};function w(t,r){var o=r&&r[0];if(T+=t,null==o)return m(),0;if("begin"==b.type&&"end"==r.type&&b.index==r.index&&""===o)return T+=e.slice(r.index,r.index+1),1;if(b=r,"begin"===r.type)return g(r);if("illegal"===r.type&&!n)throw new Error('Illegal lexeme "'+o+'" for mode "'+(k.className||"<unnamed>")+'"');if("end"===r.type){var i=y(r);if(void 0!=i)return i}return T+=o,o.length}var x=j(t);if(!x)throw new Error('Unknown language: "'+t+'"');_(x);var S,k=r||x,C={},O="";for(S=k;S!==x;S=S.parent)S.className&&(O=c(S.className,"",!0)+O);var T="",N=0;try{var A,D,P=0;while(1){if(k.terminators.lastIndex=P,A=k.terminators.exec(e),!A)break;D=w(e.substring(P,A.index),A),P=A.index+D}for(w(e.substr(P)),S=k;S.parent;S=S.parent)S.className&&(O+=l);return{relevance:N,value:O,illegal:!1,language:t,top:k}}catch(z){if(z.message&&-1!==z.message.indexOf("Illegal"))return{illegal:!0,relevance:0,value:f(e)};throw z}}function E(t,e){e=e||u.languages||r(o);var n={relevance:0,value:f(t)},i=n;return e.filter(j).filter(F).forEach((function(e){var r=M(e,t,!1);r.language=e,r.relevance>i.relevance&&(i=r),r.relevance>n.relevance&&(i=n,n=r)})),i.language&&(n.second_best=i),n}function T(t){return u.tabReplace||u.useBR?t.replace(c,(function(t,e){return u.useBR&&"\n"===t?"<br>":u.tabReplace?e.replace(/\t/g,u.tabReplace):""})):t}function N(t,e,n){var r=e?i[e]:n,o=[t.trim()];return t.match(/\bhljs\b/)||o.push("hljs"),-1===t.indexOf(r)&&o.push(r),o.join(" ").trim()}function A(t){var e,n,r,o,i,s=v(t);m(s)||(u.useBR?(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),e.innerHTML=t.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):e=t,i=e.textContent,r=s?M(s,i,!0):E(i),n=y(e),n.length&&(o=document.createElementNS("http://www.w3.org/1999/xhtml","div"),o.innerHTML=r.value,r.value=b(n,y(o),i)),r.value=T(r.value),t.innerHTML=r.value,t.className=N(t.className,s,r.language),t.result={language:r.language,re:r.relevance},r.second_best&&(t.second_best={language:r.second_best.language,re:r.second_best.relevance}))}function D(t){u=g(u,t)}function P(){if(!P.called){P.called=!0;var t=document.querySelectorAll("pre code");n.forEach.call(t,A)}}function z(){addEventListener("DOMContentLoaded",P,!1),addEventListener("load",P,!1)}function R(e,n){var r=o[e]=n(t);S(r),r.rawDefinition=n.bind(null,t),r.aliases&&r.aliases.forEach((function(t){i[t]=e}))}function I(){return r(o)}function j(t){return t=(t||"").toLowerCase(),o[t]||o[i[t]]}function F(t){var e=j(t);return e&&!e.disableAutodetect}return t.highlight=M,t.highlightAuto=E,t.fixMarkup=T,t.highlightBlock=A,t.configure=D,t.initHighlighting=P,t.initHighlightingOnLoad=z,t.registerLanguage=R,t.listLanguages=I,t.getLanguage=j,t.autoDetection=F,t.inherit=g,t.IDENT_RE="[a-zA-Z]\\w*",t.UNDERSCORE_IDENT_RE="[a-zA-Z_]\\w*",t.NUMBER_RE="\\b\\d+(\\.\\d+)?",t.C_NUMBER_RE="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",t.BINARY_NUMBER_RE="\\b(0b[01]+)",t.RE_STARTERS_RE="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",t.BACKSLASH_ESCAPE={begin:"\\\\[\\s\\S]",relevance:0},t.APOS_STRING_MODE={className:"string",begin:"'",end:"'",illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.QUOTE_STRING_MODE={className:"string",begin:'"',end:'"',illegal:"\\n",contains:[t.BACKSLASH_ESCAPE]},t.PHRASAL_WORDS_MODE={begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/},t.COMMENT=function(e,n,r){var o=t.inherit({className:"comment",begin:e,end:n,contains:[]},r||{});return o.contains.push(t.PHRASAL_WORDS_MODE),o.contains.push({className:"doctag",begin:"(?:TODO|FIXME|NOTE|BUG|XXX):",relevance:0}),o},t.C_LINE_COMMENT_MODE=t.COMMENT("//","$"),t.C_BLOCK_COMMENT_MODE=t.COMMENT("/\\*","\\*/"),t.HASH_COMMENT_MODE=t.COMMENT("#","$"),t.NUMBER_MODE={className:"number",begin:t.NUMBER_RE,relevance:0},t.C_NUMBER_MODE={className:"number",begin:t.C_NUMBER_RE,relevance:0},t.BINARY_NUMBER_MODE={className:"number",begin:t.BINARY_NUMBER_RE,relevance:0},t.CSS_NUMBER_MODE={className:"number",begin:t.NUMBER_RE+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",relevance:0},t.REGEXP_MODE={className:"regexp",begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[t.BACKSLASH_ESCAPE,{begin:/\[/,end:/\]/,relevance:0,contains:[t.BACKSLASH_ESCAPE]}]},t.TITLE_MODE={className:"title",begin:t.IDENT_RE,relevance:0},t.UNDERSCORE_TITLE_MODE={className:"title",begin:t.UNDERSCORE_IDENT_RE,relevance:0},t.METHOD_GUARD={begin:"\\.\\s*"+t.UNDERSCORE_IDENT_RE,relevance:0},t}))},d397:function(t,e,n){"use strict";function r(t){return void 0!==t&&null!==t}function o(t){var e=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return e.test(t)}e.__esModule=!0,e.isDef=r,e.isKorean=o},dcdc:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=83)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},4:function(t,e){t.exports=n("d010")},83:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-checkbox",class:[t.border&&t.checkboxSize?"el-checkbox--"+t.checkboxSize:"",{"is-disabled":t.isDisabled},{"is-bordered":t.border},{"is-checked":t.isChecked}],attrs:{id:t.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":t.isDisabled,"is-checked":t.isChecked,"is-indeterminate":t.indeterminate,"is-focus":t.focus},attrs:{tabindex:!!t.indeterminate&&0,role:!!t.indeterminate&&"checkbox","aria-checked":!!t.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),t.trueLabel||t.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",name:t.name,disabled:t.isDisabled,"true-value":t.trueLabel,"false-value":t.falseLabel},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t._q(t.model,t.trueLabel)},on:{change:[function(e){var n=t.model,r=e.target,o=r.checked?t.trueLabel:t.falseLabel;if(Array.isArray(n)){var i=null,s=t._i(n,i);r.checked?s<0&&(t.model=n.concat([i])):s>-1&&(t.model=n.slice(0,s).concat(n.slice(s+1)))}else t.model=o},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",disabled:t.isDisabled,name:t.name},domProps:{value:t.label,checked:Array.isArray(t.model)?t._i(t.model,t.label)>-1:t.model},on:{change:[function(e){var n=t.model,r=e.target,o=!!r.checked;if(Array.isArray(n)){var i=t.label,s=t._i(n,i);r.checked?s<0&&(t.model=n.concat([i])):s>-1&&(t.model=n.slice(0,s).concat(n.slice(s+1)))}else t.model=o},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})]),t.$slots.default||t.label?n("span",{staticClass:"el-checkbox__label"},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2):t._e()])},o=[];r._withStripped=!0;var i=n(4),s=n.n(i),a={name:"ElCheckbox",mixins:[s.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(t){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&t.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&t.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[t])):(this.$emit("input",t),this.selfModel=t)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var t=this.$parent;while(t){if("ElCheckboxGroup"===t.$options.componentName)return this._checkboxGroup=t,!0;t=t.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var t=this._checkboxGroup,e=t.max,n=t.min;return!(!e&&!n)&&this.model.length>=e&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||t}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(t){var e=this;if(!this.isLimitExceeded){var n=void 0;n=t.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,t),this.$nextTick((function(){e.isGroup&&e.dispatch("ElCheckboxGroup","change",[e._checkboxGroup.value])}))}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",t)}}},c=a,l=n(0),u=Object(l["a"])(c,r,o,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox.vue";var p=u.exports;p.install=function(t){t.component(p.name,p)};e["default"]=p}})},defb:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=82)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},5:function(t,e){t.exports=n("e974")},82:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[t.size&&"el-dropdown-menu--"+t.size]},[t._t("default")],2)])},o=[];r._withStripped=!0;var i=n(5),s=n.n(i),a={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[s.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var t=this;this.$on("updatePopper",(function(){t.showPopper&&t.updatePopper()})),this.$on("visible",(function(e){t.showPopper=e}))},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(t){this.currentPlacement=t}}}},c=a,l=n(0),u=Object(l["a"])(c,r,o,!1,null,null,null);u.options.__file="packages/dropdown/src/dropdown-menu.vue";var p=u.exports;p.install=function(t){t.component(p.name,p)};e["default"]=p}})},df33:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=89)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},15:function(t,e){t.exports=n("5128")},4:function(t,e){t.exports=n("d010")},89:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{key:t.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":t.fullscreen,"el-dialog--center":t.center},t.customClass],style:t.style,attrs:{role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[t._t("title",[n("span",{staticClass:"el-dialog__title"},[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):t._e()],2),t.rendered?n("div",{staticClass:"el-dialog__body"},[t._t("default")],2):t._e(),t.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[t._t("footer")],2):t._e()])])])},o=[];r._withStripped=!0;var i=n(15),s=n.n(i),a=n(11),c=n.n(a),l=n(4),u=n.n(l),p={name:"ElDialog",mixins:[s.a,u.a,c.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick((function(){e.$refs.dialog.scrollTop=0})),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick((function(){e.key++})))}},computed:{style:function(){var t={};return this.fullscreen||(t.marginTop=this.top,this.width&&(t.width=this.width)),t}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(t){!1!==t&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},f=p,h=n(0),d=Object(h["a"])(f,r,o,!1,null,null,null);d.options.__file="packages/dialog/src/component.vue";var m=d.exports;m.install=function(t){t.component(m.name,m)};e["default"]=m}})},e452:function(t,e,n){"use strict";e.__esModule=!0;var r=r||{};r.Utils=r.Utils||{},r.Utils.focusFirstDescendant=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(r.Utils.attemptFocus(n)||r.Utils.focusFirstDescendant(n))return!0}return!1},r.Utils.focusLastDescendant=function(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(r.Utils.attemptFocus(n)||r.Utils.focusLastDescendant(n))return!0}return!1},r.Utils.attemptFocus=function(t){if(!r.Utils.isFocusable(t))return!1;r.Utils.IgnoreUtilFocusChanges=!0;try{t.focus()}catch(e){}return r.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===t},r.Utils.isFocusable=function(t){if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return"hidden"!==t.type&&"file"!==t.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},r.Utils.triggerEvent=function(t,e){var n=void 0;n=/^mouse|click/.test(e)?"MouseEvents":/^key/.test(e)?"KeyboardEvent":"HTMLEvents";for(var r=document.createEvent(n),o=arguments.length,i=Array(o>2?o-2:0),s=2;s<o;s++)i[s-2]=arguments[s];return r.initEvent.apply(r,[e].concat(i)),t.dispatchEvent?t.dispatchEvent(r):t.fireEvent("on"+e,r),t},r.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},e.default=r.Utils},e62d:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){if(o.default.prototype.$isServer)return 0;if(void 0!==s)return s;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var r=n.offsetWidth;return t.parentNode.removeChild(t),s=e-r,s};var r=n("8bbf"),o=i(r);function i(t){return t&&t.__esModule?t:{default:t}}var s=void 0},e974:function(t,e,n){"use strict";e.__esModule=!0;var r=n("8bbf"),o=s(r),i=n("5128");function s(t){return t&&t.__esModule?t:{default:t}}var a=o.default.prototype.$isServer?function(){}:n("6167"),c=function(t){return t.stopPropagation()};e.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(t){this.showPopper=t,this.$emit("input",t)}},showPopper:function(t){this.disabled||(t?this.updatePopper():this.destroyPopper(),this.$emit("input",t))}},methods:{createPopper:function(){var t=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var e=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,r=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!r&&this.$slots.reference&&this.$slots.reference[0]&&(r=this.referenceElm=this.$slots.reference[0].elm),n&&r&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),e.placement=this.currentPlacement,e.offset=this.offset,e.arrowOffset=this.arrowOffset,this.popperJS=new a(r,n,e),this.popperJS.onCreate((function(e){t.$emit("created",t),t.resetTransformOrigin(),t.$nextTick(t.updatePopper)})),"function"===typeof e.onUpdate&&this.popperJS.onUpdate(e.onUpdate),this.popperJS._popper.style.zIndex=i.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",c))}},updatePopper:function(){var t=this.popperJS;t?(t.update(),t._popper&&(t._popper.style.zIndex=i.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(t){!this.popperJS||this.showPopper&&!t||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var t={top:"bottom",bottom:"top",left:"right",right:"left"},e=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n=t[e];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(e)>-1?"center "+n:n+" center"}},appendArrow:function(t){var e=void 0;if(!this.appended){for(var n in this.appended=!0,t.attributes)if(/^_v-/.test(t.attributes[n].name)){e=t.attributes[n].name;break}var r=document.createElement("div");e&&r.setAttribute(e,""),r.setAttribute("x-arrow",""),r.className="popper__arrow",t.appendChild(r)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",c),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},eedf:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=97)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},97:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?n("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?n("i",{class:t.icon}):t._e(),t.$slots.default?n("span",[t._t("default")],2):t._e()])},o=[];r._withStripped=!0;var i={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},s=i,a=n(0),c=Object(a["a"])(s,r,o,!1,null,null,null);c.options.__file="packages/button/src/button.vue";var l=c.exports;l.install=function(t){t.component(l.name,l)};e["default"]=l}})},f0d9:function(t,e,n){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"确定",clear:"清空"},datepicker:{now:"此刻",today:"今天",cancel:"取消",clear:"清空",confirm:"确定",selectDate:"选择日期",selectTime:"选择时间",startDate:"开始日期",startTime:"开始时间",endDate:"结束日期",endTime:"结束时间",prevYear:"前一年",nextYear:"后一年",prevMonth:"上个月",nextMonth:"下个月",year:"年",month1:"1 月",month2:"2 月",month3:"3 月",month4:"4 月",month5:"5 月",month6:"6 月",month7:"7 月",month8:"8 月",month9:"9 月",month10:"10 月",month11:"11 月",month12:"12 月",weeks:{sun:"日",mon:"一",tue:"二",wed:"三",thu:"四",fri:"五",sat:"六"},months:{jan:"一月",feb:"二月",mar:"三月",apr:"四月",may:"五月",jun:"六月",jul:"七月",aug:"八月",sep:"九月",oct:"十月",nov:"十一月",dec:"十二月"}},select:{loading:"加载中",noMatch:"无匹配数据",noData:"无数据",placeholder:"请选择"},cascader:{noMatch:"无匹配数据",loading:"加载中",placeholder:"请选择",noData:"暂无数据"},pagination:{goto:"前往",pagesize:"条/页",total:"共 {total} 条",pageClassifier:"页"},messagebox:{title:"提示",confirm:"确定",cancel:"取消",error:"输入的数据不合法!"},upload:{deleteTip:"按 delete 键可删除",delete:"删除",preview:"查看图片",continue:"继续上传"},table:{emptyText:"暂无数据",confirmFilter:"筛选",resetFilter:"重置",clearFilter:"全部",sumText:"合计"},tree:{emptyText:"暂无数据"},transfer:{noMatch:"无匹配数据",noData:"无数据",titles:["列表 1","列表 2"],filterPlaceholder:"请输入搜索内容",noCheckedFormat:"共 {total} 项",hasCheckedFormat:"已选 {checked}/{total} 项"},image:{error:"加载失败"},pageHeader:{title:"返回"},popconfirm:{confirmButtonText:"确定",cancelButtonText:"取消"}}}},f23d:function(t,e,n){"use strict";n.d(e,"a",(function(){return yc})),n.d(e,"b",(function(){return Ic})),n.d(e,"c",(function(){return bc})),n.d(e,"d",(function(){return wc})),n.d(e,"e",(function(){return kc})),n.d(e,"f",(function(){return Cc})),n.d(e,"g",(function(){return Lc})),n.d(e,"h",(function(){return Oc})),n.d(e,"i",(function(){return Mc})),n.d(e,"j",(function(){return jc})),n.d(e,"k",(function(){return Fc})),n.d(e,"l",(function(){return Ec})),n.d(e,"m",(function(){return Ac})),n.d(e,"n",(function(){return Vc})),n.d(e,"o",(function(){return Bc})),n.d(e,"p",(function(){return Pc})),n.d(e,"q",(function(){return zc})),n.d(e,"r",(function(){return Rc})),n.d(e,"s",(function(){return $c}));var r=n("cd42"),o=n("a9de"),i=n("3ce4"),s=n.n(i),a=n("5313"),c=n("884c");function l(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=l(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function u(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,p=Math.min(s.text.length,a.text.length);while(l<p&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var f=u(s.content,a.content,n-1,r-1);if(f)return f}n-=c,r-=c}else n-=c,r-=c}}var p=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},f={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};p.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},p.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},p.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},p.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new p(r,this.size+t.size)},p.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new p(n,r)},p.prototype.cutByIndex=function(t,e){return t==e?p.empty:0==t&&e==this.content.length?this:new p(this.content.slice(t,e))},p.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new p(r,o)},p.prototype.addToStart=function(t){return new p([t].concat(this.content),this.size+t.nodeSize)},p.prototype.addToEnd=function(t){return new p(this.content.concat(t),this.size+t.nodeSize)},p.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},f.firstChild.get=function(){return this.content.length?this.content[0]:null},f.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},f.childCount.get=function(){return this.content.length},p.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},p.prototype.maybeChild=function(t){return this.content[t]},p.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},p.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),l(this,t,e)},p.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),u(this,t,e,n)},p.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return d(0,t);if(t==this.size)return d(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?d(n+1,i):d(n,r);r=i}},p.prototype.toString=function(){return"<"+this.toStringInner()+">"},p.prototype.toStringInner=function(){return this.content.join(", ")},p.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},p.fromJSON=function(t,e){if(!e)return p.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new p(e.map(t.nodeFromJSON))},p.fromArray=function(t){if(!t.length)return p.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new p(e||t,n)},p.from=function(t){if(!t)return p.empty;if(t instanceof p)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new p([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(p.prototype,f);var h={index:0,offset:0};function d(t,e){return h.index=t,h.offset=e,h}function m(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!m(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!m(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}p.empty=new p([],0);var v=function(t,e){this.type=t,this.attrs=e};function g(t){var e=Error.call(this,t);return e.__proto__=g.prototype,e}v.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},v.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},v.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},v.prototype.eq=function(t){return this==t||this.type==t.type&&m(this.attrs,t.attrs)},v.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},v.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},v.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},v.setFrom=function(t){if(!t||0==t.length)return v.none;if(t instanceof v)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},v.none=[],g.prototype=Object.create(Error.prototype),g.prototype.constructor=g,g.prototype.name="ReplaceError";var y=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},b={size:{configurable:!0}};function w(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(w(s.content,e-i-1,n-i-1)))}function x(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=x(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function S(t,e,n){if(n.openStart>t.depth)throw new g("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new g("Inconsistent open depths");return k(t,e,n,0)}function k(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=k(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=A(n,t),c=a.start,l=a.end;return E(i,T(t,c,l,e,r))}var u=t.parent,p=u.content;return E(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return E(i,N(t,e,r))}function C(t,e){if(!e.type.compatibleContent(t.type))throw new g("Cannot join "+e.type.name+" onto "+t.type.name)}function O(t,e,n){var r=t.node(n);return C(r,e.node(n)),r}function _(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function M(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(_(t.nodeAfter,r),i++));for(var a=i;a<s;a++)_(o.child(a),r);e&&e.depth==n&&e.textOffset&&_(e.nodeBefore,r)}function E(t,e){if(!t.type.validContent(e))throw new g("Invalid content for node "+t.type.name);return t.copy(e)}function T(t,e,n,r,o){var i=t.depth>o&&O(t,e,o+1),s=r.depth>o&&O(n,r,o+1),a=[];return M(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(C(i,s),_(E(i,T(t,e,n,r,o+1)),a)):(i&&_(E(i,N(t,e,o+1)),a),M(e,n,o,a),s&&_(E(s,N(n,r,o+1)),a)),M(r,null,o,a),new p(a)}function N(t,e,n){var r=[];if(M(null,t,n,r),t.depth>n){var o=O(t,e,n+1);_(E(o,N(t,e,n+1)),r)}return M(e,null,n,r),new p(r)}function A(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(p.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}b.size.get=function(){return this.content.size-this.openStart-this.openEnd},y.prototype.insertAt=function(t,e){var n=x(this.content,t+this.openStart,e,null);return n&&new y(n,this.openStart,this.openEnd)},y.prototype.removeBetween=function(t,e){return new y(w(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},y.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},y.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},y.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},y.fromJSON=function(t,e){if(!e)return y.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new y(p.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},y.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new y(t,n,r)},Object.defineProperties(y.prototype,b),y.empty=new y(p.empty,0,0);var D=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},P={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};D.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},P.parent.get=function(){return this.node(this.depth)},P.doc.get=function(){return this.node(0)},D.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},D.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},D.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},D.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},D.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},D.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},D.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},P.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},P.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},P.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},D.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return v.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},D.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},D.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},D.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new j(this,t,n)},D.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},D.prototype.max=function(t){return t.pos>this.pos?t:this},D.prototype.min=function(t){return t.pos<this.pos?t:this},D.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},D.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new D(e,n,o)},D.resolveCached=function(t,e){for(var n=0;n<z.length;n++){var r=z[n];if(r.pos==e&&r.doc==t)return r}var o=z[R]=D.resolve(t,e);return R=(R+1)%I,o},Object.defineProperties(D.prototype,P);var z=[],R=0,I=12,j=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},F={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};F.start.get=function(){return this.$from.before(this.depth+1)},F.end.get=function(){return this.$to.after(this.depth+1)},F.parent.get=function(){return this.$from.node(this.depth)},F.startIndex.get=function(){return this.$from.index(this.depth)},F.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(j.prototype,F);var B=Object.create(null),$=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||p.empty,this.marks=r||v.none},L={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};L.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},L.childCount.get=function(){return this.content.childCount},$.prototype.child=function(t){return this.content.child(t)},$.prototype.maybeChild=function(t){return this.content.maybeChild(t)},$.prototype.forEach=function(t){this.content.forEach(t)},$.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},$.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},L.textContent.get=function(){return this.textBetween(0,this.content.size,"")},$.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},L.firstChild.get=function(){return this.content.firstChild},L.lastChild.get=function(){return this.content.lastChild},$.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},$.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},$.prototype.hasMarkup=function(t,e,n){return this.type==t&&m(this.attrs,e||t.defaultAttrs||B)&&v.sameSet(this.marks,n||v.none)},$.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},$.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},$.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},$.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return y.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new y(c,r.depth-i,o.depth-i)},$.prototype.replace=function(t,e,n){return S(this.resolve(t),this.resolve(e),n)},$.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},$.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},$.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},$.prototype.resolve=function(t){return D.resolveCached(this,t)},$.prototype.resolveNoCache=function(t){return D.resolve(this,t)},$.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},L.isBlock.get=function(){return this.type.isBlock},L.isTextblock.get=function(){return this.type.isTextblock},L.inlineContent.get=function(){return this.type.inlineContent},L.isInline.get=function(){return this.type.isInline},L.isText.get=function(){return this.type.isText},L.isLeaf.get=function(){return this.type.isLeaf},L.isAtom.get=function(){return this.type.isAtom},$.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),q(this.marks,t)},$.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},$.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=p.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},$.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},$.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},$.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},$.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},$.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=p.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties($.prototype,L);var V=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):q(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}($);function q(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var W=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},J={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};W.parse=function(t,e){var n=new H(t,e);if(null==n.next)return W.empty;var r=K(n);n.next&&n.err("Unexpected trailing text");var o=ot(et(r));return it(o,n),o},W.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},W.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},J.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},J.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},W.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},W.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return p.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var f=o(u,s.concat(l));if(f)return f}}}return o(this,[])},W.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},W.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},J.edgeCount.get=function(){return this.next.length>>1},W.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},W.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties(W.prototype,J),W.empty=new W(!0);var H=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},U={next:{configurable:!0}};function K(t){var e=[];do{e.push(G(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function G(t){var e=[];do{e.push(X(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function X(t){for(var e=tt(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Y(t,e)}return e}function Z(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Y(t,e){var n=Z(t),r=n;return t.eat(",")&&(r="}"!=t.next?Z(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Q(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function tt(t){if(t.eat("(")){var e=K(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=Q(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function et(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function nt(t,e){return e-t}function rt(t,e){var n=[];return r(e),n.sort(nt);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function ot(t){var e=Object.create(null);return n(rt(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];rt(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new W(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(nt);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function it(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function st(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function at(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function ct(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new pt(t[n]);return e}U.next.get=function(){return this.tokens[this.pos]},H.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},H.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(H.prototype,U);var lt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=ct(n.attrs),this.defaultAttrs=st(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},ut={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ut.isInline.get=function(){return!this.isBlock},ut.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ut.isLeaf.get=function(){return this.contentMatch==W.empty},ut.isAtom.get=function(){return this.isLeaf||this.spec.atom},lt.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},lt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},lt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:at(this.attrs,t)},lt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new $(this,this.computeAttrs(t),p.from(e),v.setFrom(n))},lt.prototype.createChecked=function(t,e,n){if(e=p.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new $(this,this.computeAttrs(t),e,v.setFrom(n))},lt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=p.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(p.empty,!0);return o?new $(this,t,e.append(o),v.setFrom(n)):null},lt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},lt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},lt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},lt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:v.empty:t},lt.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new lt(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(lt.prototype,ut);var pt=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ft={isRequired:{configurable:!0}};ft.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(pt.prototype,ft);var ht=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=ct(r.attrs),this.rank=e,this.excluded=null;var o=st(this.attrs);this.instance=o&&new v(this,o)};ht.prototype.create=function(t){return!t&&this.instance?this.instance:new v(this,at(this.attrs,t))},ht.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ht(t,r++,e,o)})),n},ht.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},ht.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ht.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var dt=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=c["a"].from(t.nodes),this.spec.marks=c["a"].from(t.marks),this.nodes=lt.compile(this.spec.nodes,this),this.marks=ht.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=W.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?mt(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:mt(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function mt(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}dt.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof lt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},dt.prototype.text=function(t,e){var n=this.nodes.text;return new V(n,n.defaultAttrs,t,v.setFrom(e))},dt.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},dt.prototype.nodeFromJSON=function(t){return $.fromJSON(this,t)},dt.prototype.markFromJSON=function(t){return v.fromJSON(this,t)},dt.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var vt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};vt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new Ot(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},vt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new Ot(this,e,!0);return n.addAll(t,null,e.from,e.to),y.maxOpen(n.finish())},vt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Et(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},vt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},vt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=Nt(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=Nt(t)),t.node=s}))};for(var s in t.nodes)i();return e},vt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new vt(t,vt.schemaRules(t)))};var gt={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},yt={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},bt={ol:!0,ul:!0},wt=1,xt=2,St=4;function kt(t){return(t?wt:0)|("full"===t?xt:0)}var Ct=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&St?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=v.none,this.pendingMarks=r};Ct.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(p.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},Ct.prototype.finish=function(t){if(!(this.options&wt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=p.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(p.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},Ct.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):At(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var Ot=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=kt(e.preserveWhitespace)|(n?St:0);r=o?new Ct(o.type,o.attrs,v.none,v.none,!0,e.topMatch||o.type.contentMatch,i):new Ct(n?null:t.schema.topNodeType,null,v.none,v.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},_t={top:{configurable:!0},currentPos:{configurable:!0}};function Mt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&bt.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Et(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Tt(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function Nt(t){var e={};for(var n in t)e[n]=t[n];return e}function At(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}_t.top.get=function(){return this.nodes[this.open]},Ot.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Tt(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},Ot.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&wt)n.options&xt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},Ot.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();bt.hasOwnProperty(e)&&this.normalizeLists&&Mt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:yt.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(gt.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},Ot.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},Ot.prototype.readStyles=function(t){for(var e=v.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},Ot.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},Ot.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&gt.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},Ot.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},Ot.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},Ot.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},Ot.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~St:kt(r);o.options&St&&0==o.content.length&&(i|=St),this.nodes.push(new Ct(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},Ot.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},Ot.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},Ot.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},_t.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},Ot.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},Ot.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},Ot.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},Ot.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},Ot.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},Ot.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},Ot.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},Ot.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(Ot.prototype,_t);var Dt=function(t,e){this.nodes=t||{},this.marks=e||{}};function Pt(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function zt(t){return t.document||window.document}Dt.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=zt(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Dt.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Dt.renderSpec(zt(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Dt.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Dt.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Dt.renderSpec(zt(n),r(t,e))},Dt.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=Dt.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Dt.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Dt(this.nodesFromSchema(t),this.marksFromSchema(t)))},Dt.nodesFromSchema=function(t){var e=Pt(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Dt.marksFromSchema=function(t){return Pt(t.marks)};var Rt=65535,It=Math.pow(2,16);function jt(t,e){return t+e*It}function Ft(t){return t&Rt}function Bt(t){return(t-(t&Rt))/It}var $t=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},Lt=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};Lt.prototype.recover=function(t){var e=0,n=Ft(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Bt(t)},Lt.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Lt.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},Lt.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(t<=u){var p=c?t==a?-1:t==u?1:e:e,f=a+r+(p<0?0:l);if(n)return f;var h=t==(e<0?a:u)?null:jt(s/3,t-a);return new $t(f,e<0?t!=a:t!=u,h)}r+=l-c}return n?t+r:new $t(t+r)},Lt.prototype.touches=function(t,e){for(var n=0,r=Ft(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o],l=a+c;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},Lt.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},Lt.prototype.invert=function(){return new Lt(this.ranges,!this.inverted)},Lt.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},Lt.offset=function(t){return 0==t?Lt.empty:new Lt(t<0?[0,-t,0]:[0,0,t])},Lt.empty=new Lt([]);var Vt=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function qt(t){var e=Error.call(this,t);return e.__proto__=qt.prototype,e}Vt.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Vt(this.maps,this.mirror,t,e)},Vt.prototype.copy=function(){return new Vt(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Vt.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Vt.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Vt.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Vt.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Vt.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Vt.prototype.invert=function(){var t=new Vt;return t.appendMappingInverted(this),t},Vt.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Vt.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Vt.prototype._map=function(t,e,n){for(var r=!1,o=this.from;o<this.to;o++){var i=this.maps[o],s=i.mapResult(t,e);if(null!=s.recover){var a=this.getMirror(o);if(null!=a&&a>o&&a<this.to){o=a,t=this.maps[a].recover(s.recover);continue}}s.deleted&&(r=!0),t=s.pos}return n?t:new $t(t,r)},qt.prototype=Object.create(Error.prototype),qt.prototype.constructor=qt,qt.prototype.name="TransformError";var Wt=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Vt},Jt={before:{configurable:!0},docChanged:{configurable:!0}};function Ht(){throw new Error("Override me")}Jt.before.get=function(){return this.docs.length?this.docs[0]:this.doc},Wt.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new qt(e.failed);return this},Wt.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Jt.docChanged.get=function(){return this.steps.length>0},Wt.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(Wt.prototype,Jt);var Ut=Object.create(null),Kt=function(){};Kt.prototype.apply=function(t){return Ht()},Kt.prototype.getMap=function(){return Lt.empty},Kt.prototype.invert=function(t){return Ht()},Kt.prototype.map=function(t){return Ht()},Kt.prototype.merge=function(t){return null},Kt.prototype.toJSON=function(){return Ht()},Kt.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=Ut[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Kt.jsonID=function(t,e){if(t in Ut)throw new RangeError("Duplicate use of step JSON ID "+t);return Ut[t]=e,e.prototype.jsonID=t,e};var Gt=function(t,e){this.doc=t,this.failed=e};Gt.ok=function(t){return new Gt(t,null)},Gt.fail=function(t){return new Gt(null,t)},Gt.fromReplace=function(t,e,n,r){try{return Gt.ok(t.replace(e,n,r))}catch(o){if(o instanceof g)return Gt.fail(o.message);throw o}};var Xt=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Yt(t,this.from,this.to)?Gt.fail("Structure replace would overwrite content"):Gt.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new Lt([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?y.empty:new y(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?y.empty:new y(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,y.fromJSON(t,n.slice),!!n.structure)},e}(Kt);Kt.jsonID("replace",Xt);var Zt=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Yt(t,this.from,this.gapFrom)||Yt(t,this.gapTo,this.to)))return Gt.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Gt.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Gt.fromReplace(t,this.from,this.to,n):Gt.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new Lt([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,y.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Kt);function Yt(t,e,n){var r=t.resolve(e),o=n-e,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var s=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Qt(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function te(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function ee(t,e,n){var r=t.resolve(e);if(!n.content.size)return e;for(var o=n.content,i=0;i<n.openStart;i++)o=o.firstChild.content;for(var s=1;s<=(0==n.openStart&&n.size?2:1);s++)for(var a=r.depth;a>=0;a--){var c=a==r.depth?0:r.pos<=(r.start(a+1)+r.end(a+1))/2?-1:1,l=r.index(a)+(c>0?1:0);if(1==s?r.node(a).canReplace(l,l,o):r.node(a).contentMatchAt(l).findWrapping(o.firstChild.type))return 0==c?r.pos:c<0?r.before(a+1):r.after(a+1)}return null}function ne(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(ne(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return p.fromArray(r)}Kt.jsonID("replaceAround",Zt),Wt.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,l=p.empty,u=0,f=o,h=!1;f>e;f--)h||n.index(f)>0?(h=!0,l=p.from(n.node(f).copy(l)),u++):a--;for(var d=p.empty,m=0,v=o,g=!1;v>e;v--)g||r.after(v+1)<r.end(v)?(g=!0,d=p.from(r.node(v).copy(d)),m++):c++;return this.step(new Zt(a,c,i,s,new y(l.append(d),u,m),l.size-u,!0))},Wt.prototype.wrap=function(t,e){for(var n=p.empty,r=e.length-1;r>=0;r--)n=p.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new Zt(o,i,o,i,new y(n,0,0),e.length,!0))},Wt.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&Qt(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new Zt(a,c,a+1,c-1,new y(p.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},Wt.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Zt(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new y(p.from(i),0,0),1,!0))},Wt.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=p.empty,i=p.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=p.from(r.node(s).copy(o));var l=n&&n[c];i=p.from(l?l.type.create(l.attrs,i):r.node(s).copy(i))}return this.step(new Xt(t,t,new y(o.append(i),e,e),!0))},Wt.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Xt(t-e,t+e,y.empty,!0);return this.step(n)};var re=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new y(ne(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Gt.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new oe(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Kt);Kt.jsonID("addMark",re);var oe=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new y(ne(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Gt.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new re(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Kt);function ie(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=y.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return se(o,i,r)?new Xt(e,n,r):new ae(o,i,r).fit()}function se(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Kt.jsonID("removeMark",oe),Wt.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,t),f=Math.min(c+r.nodeSize,e),h=n.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(h)||(s&&s.to==p&&s.mark.eq(u[d])?s.to=f:o.push(s=new oe(p,f,u[d])));a&&a.to==p?a.to=f:i.push(a=new re(p,f,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},Wt.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof ht){var c=n.isInSet(r.marks);c&&(a=[c])}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var l=Math.min(s+r.nodeSize,e),u=0;u<a.length;u++){for(var p=a[u],f=void 0,h=0;h<o.length;h++){var d=o[h];d.step==i-1&&p.eq(o[h].style)&&(f=d)}f?(f.to=l,f.step=i):o.push({style:p,from:Math.max(s,t),to:l,step:i})}}})),o.forEach((function(t){return r.step(new oe(t.from,t.to,t.style))})),this},Wt.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new oe(i,c,a.marks[u]))}else o.push(new Xt(i,c,y.empty));i=c}if(!n.validEnd){var f=n.fillBefore(p.empty,!0);this.replace(i,i,new y(f,0,0))}for(var h=o.length-1;h>=0;h--)this.step(o[h]);return this},Wt.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=y.empty);var r=ie(this.doc,t,e,n);return r&&this.step(r),this},Wt.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new y(p.from(n),0,0))},Wt.prototype.delete=function(t,e){return this.replace(t,e,y.empty)},Wt.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var ae=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=p.empty;for(var i=t.depth;i>0;i--)this.placed=p.from(t.node(i).copy(this.placed))},ce={depth:{configurable:!0}};function le(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(le(t.firstChild.content,e-1,n)))}function ue(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ue(t.lastChild.content,e-1,n)))}function pe(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function fe(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,fe(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(p.empty,!0)))),t.copy(r)}function he(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!de(n,i.content,s)?a:null}function de(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function me(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(me(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(p.empty,!0))}return t}function ve(t,e){for(var n=[],r=Math.min(t.depth,e.depth),o=r;o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&n.push(o)}return n}ce.depth.get=function(){return this.frontier.length-1},ae.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;var i=this.placed,s=r.depth,a=o.depth;while(s&&a&&1==i.childCount)i=i.firstChild.content,s--,a--;var c=new y(i,s,a);return e>-1?new Zt(r.pos,e,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Xt(r.pos,o.pos,c):void 0},ae.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=void 0;e?(r=pe(this.unplaced.content,e-1).firstChild,n=r.content):n=this.unplaced.content;for(var o=n.firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(o?c.matchType(o.type)||(u=c.fillBefore(p.from(o),!1)):a.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:i,parent:r,inject:u};if(2==t&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:r,wrap:l};if(r&&c.matchType(r.type))break}}},ae.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=pe(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new y(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},ae.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=pe(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new y(le(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new y(le(e,n,1),n,r)},ae.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;while(this.depth>n)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-e,u=0,f=[],h=this.frontier[n],d=h.match,m=h.type;if(o){for(var v=0;v<o.childCount;v++)f.push(o.child(v));d=d.matchFragment(o)}var g=c.size+e-(a.content.size-a.openEnd);while(u<c.childCount){var b=c.child(u),w=d.matchType(b.type);if(!w)break;u++,(u>1||0==l||b.content.size)&&(d=w,f.push(fe(b.mark(m.allowedMarks(b.marks)),1==u?l:0,u==c.childCount?g:-1)))}var x=u==c.childCount;x||(g=-1),x&&g<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=d;for(var S=0,k=c;S<g;S++){var C=k.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),k=C.content}this.unplaced=x?0==e?y.empty:new y(le(a.content,e-1,1),e-1,g<0?a.openEnd:e-1):new y(le(a.content,e,u),a.openStart,a.openEnd),this.placed=ue(this.placed,n,p.from(f))},ae.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock||this.$to.end()==this.$to.pos)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!he(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},ae.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=e<t.depth&&t.end(e+1)==t.pos+(t.depth-(e+1)),s=he(t,e,o,r,i);if(s){for(var a=e-1;a>=0;a--){var c=this.frontier[a],l=c.match,u=c.type,p=he(t,a,u,l,!0);if(!p||p.childCount)continue t}return{depth:e,fit:s,move:i?t.doc.resolve(t.after(e+1)):t}}}},ae.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return null;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=ue(this.placed,e.depth,e.fit)),t=e.move;for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return t},ae.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=ue(this.placed,this.depth,p.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},ae.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(p.empty,!0);e.childCount&&(this.placed=ue(this.placed,this.frontier.length,e))},Object.defineProperties(ae.prototype,ce),Wt.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(se(r,o,n))return this.step(new Xt(t,e,n));var i=ve(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var u=i.indexOf(s),p=[],f=n.openStart,h=n.content,d=0;;d++){var m=h.firstChild;if(p.push(m),d==n.openStart)break;h=m.content}f>0&&p[f-1].type.spec.defining&&r.node(u).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&r.node(u).type!=p[f-2].type&&(f-=2);for(var v=n.openStart;v>=0;v--){var g=(v+f+1)%(n.openStart+1),b=p[g];if(b)for(var w=0;w<i.length;w++){var x=i[(w+u)%i.length],S=!0;x<0&&(S=!1,x=-x);var k=r.node(x-1),C=r.index(x-1);if(k.canReplaceWith(C,C,b.type,b.marks))return this.replace(r.before(x),S?o.after(x):e,new y(me(n.content,0,n.openStart,g),g,n.openEnd))}}for(var O=this.steps.length,_=i.length-1;_>=0;_--){if(this.replace(t,e,n),this.steps.length>O)break;var M=i[_];_<0||(t=r.before(M),e=o.after(M))}return this},Wt.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=te(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new y(p.from(n),0,0))},Wt.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=ve(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var ge={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var ye=/Edge\/(\d+)/.exec(navigator.userAgent),be=/MSIE \d/.test(navigator.userAgent),we=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ge.mac=/Mac/.test(navigator.platform);var xe=ge.ie=!!(be||we||ye);ge.ie_version=be?document.documentMode||6:we?+we[1]:ye?+ye[1]:null,ge.gecko=!xe&&/gecko\/(\d+)/i.test(navigator.userAgent),ge.gecko_version=ge.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var Se=!xe&&/Chrome\/(\d+)/.exec(navigator.userAgent);ge.chrome=!!Se,ge.chrome_version=Se&&+Se[1],ge.ios=!xe&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ge.android=/Android \d/.test(navigator.userAgent),ge.webkit="webkitFontSmoothing"in document.documentElement.style,ge.safari=/Apple Computer/.test(navigator.vendor),ge.webkit_version=ge.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var ke=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Ce=function(t){var e=t.parentNode;return e&&11==e.nodeType?e.host:e},Oe=function(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r},_e=function(t,e,n,r){return n&&(Ee(t,e,n,r,-1)||Ee(t,e,n,r,1))},Me=/^(img|br|input|textarea|hr)$/i;function Ee(t,e,n,r,o){for(;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Te(t))){var i=t.parentNode;if(1!=i.nodeType||Ae(t)||Me.test(t.nodeName)||"false"==t.contentEditable)return!1;e=ke(t)+(o<0?0:1),t=i}else{if(1!=t.nodeType)return!1;if(t=t.childNodes[e+(o<0?-1:0)],"false"==t.contentEditable)return!1;e=o<0?Te(t):0}}}function Te(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Ne(t,e,n){for(var r=0==e,o=e==Te(t);r||o;){if(t==n)return!0;var i=ke(t);if(t=t.parentNode,!t)return!1;r=r&&0==i,o=o&&i==Te(t)}}function Ae(t){for(var e,n=t;n;n=n.parentNode)if(e=n.pmViewDesc)break;return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}var De=function(t){var e=t.isCollapsed;return e&&ge.chrome&&t.rangeCount&&!t.getRangeAt(0).collapsed&&(e=!1),e};function Pe(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function ze(t){return{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function Re(t,e){return"number"==typeof t?t:t[e]}function Ie(t,e,n){for(var r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,i=t.dom.ownerDocument,s=i.defaultView,a=n||t.dom;;a=Ce(a)){if(!a)break;if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,l=c?ze(s):a.getBoundingClientRect(),u=0,p=0;if(e.top<l.top+Re(r,"top")?p=-(l.top-e.top+Re(o,"top")):e.bottom>l.bottom-Re(r,"bottom")&&(p=e.bottom-l.bottom+Re(o,"bottom")),e.left<l.left+Re(r,"left")?u=-(l.left-e.left+Re(o,"left")):e.right>l.right-Re(r,"right")&&(u=e.right-l.right+Re(o,"right")),u||p)if(c)s.scrollBy(u,p);else{var f=a.scrollLeft,h=a.scrollTop;p&&(a.scrollTop+=p),u&&(a.scrollLeft+=u);var d=a.scrollLeft-f,m=a.scrollTop-h;e={left:e.left-d,top:e.top-m,right:e.right-d,bottom:e.bottom-m}}if(c)break}}}function je(t){for(var e,n,r=t.dom.getBoundingClientRect(),o=Math.max(0,r.top),i=(r.left+r.right)/2,s=o+1;s<Math.min(innerHeight,r.bottom);s+=5){var a=t.root.elementFromPoint(i,s);if(a!=t.dom&&t.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=o-20){e=a,n=c.top;break}}}return{refDOM:e,refTop:n,stack:Fe(t.dom)}}function Fe(t){for(var e=[],n=t.ownerDocument;t;t=Ce(t))if(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),t==n)break;return e}function Be(t){var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0;$e(r,0==o?0:o-n)}function $e(t,e){for(var n=0;n<t.length;n++){var r=t[n],o=r.dom,i=r.top,s=r.left;o.scrollTop!=i+e&&(o.scrollTop=i+e),o.scrollLeft!=s&&(o.scrollLeft=s)}}var Le=null;function Ve(t){if(t.setActive)return t.setActive();if(Le)return t.focus(Le);var e=Fe(t);t.focus(null==Le?{get preventScroll(){return Le={preventScroll:!0},!0}}:void 0),Le||(Le=!1,$e(e,0))}function qe(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,c=t.firstChild,l=0;c;c=c.nextSibling,l++){var u=void 0;if(1==c.nodeType)u=c.getClientRects();else{if(3!=c.nodeType)continue;u=Oe(c).getClientRects()}for(var p=0;p<u.length;p++){var f=u[p];if(f.top<=s&&f.bottom>=a){s=Math.max(f.bottom,s),a=Math.min(f.top,a);var h=f.left>e.left?f.left-e.left:f.right<e.left?e.left-f.right:0;if(h<o){n=c,o=h,r=h&&3==n.nodeType?{left:f.right<e.left?f.right:f.left,top:e.top}:e,1==c.nodeType&&h&&(i=l+(e.left>=(f.left+f.right)/2?1:0));continue}}!n&&(e.left>=f.right&&e.top>=f.top||e.left>=f.left&&e.top>=f.bottom)&&(i=l+1)}}return n&&3==n.nodeType?We(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:qe(n,r)}function We(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=Ze(r,1);if(i.top!=i.bottom&&Je(e,i))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function Je(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function He(t,e){var n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function Ue(t,e,n){var r=qe(e,n),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&n.left>(a.left+a.right)/2?1:-1}return t.docView.posFromDOM(o,i,s)}function Ke(t,e,n,r){for(var o=-1,i=e;;){if(i==t.dom)break;var s=t.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>r.left||a.top>r.top)o=s.posBefore;else{if(!(a.right<r.left||a.bottom<r.top))break;o=s.posAfter}}i=s.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n)}function Ge(t,e,n){var r=t.childNodes.length;if(r&&n.top<n.bottom)for(var o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),i=o;;){var s=t.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(Je(e,l))return Ge(s,e,l)}if((i=(i+1)%r)==o)break}return t}function Xe(t,e){var n,r,o,i,s=t.root;if(s.caretPositionFromPoint)try{var a=s.caretPositionFromPoint(e.left,e.top);a&&(n=a,o=n.offsetNode,i=n.offset)}catch(m){}if(!o&&s.caretRangeFromPoint){var c=s.caretRangeFromPoint(e.left,e.top);c&&(r=c,o=r.startContainer,i=r.startOffset)}var l,u=s.elementFromPoint(e.left,e.top+1);if(!u||!t.dom.contains(1!=u.nodeType?u.parentNode:u)){var p=t.dom.getBoundingClientRect();if(!Je(e,p))return null;if(u=Ge(t.dom,e,p),!u)return null}if(u=He(u,e),o){if(ge.gecko&&1==o.nodeType&&(i=Math.min(i,o.childNodes.length),i<o.childNodes.length)){var f,h=o.childNodes[i];"IMG"==h.nodeName&&(f=h.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&i++}o==t.dom&&i==o.childNodes.length-1&&1==o.lastChild.nodeType&&e.top>o.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:0!=i&&1==o.nodeType&&"BR"==o.childNodes[i-1].nodeName||(l=Ke(t,o,i,e))}null==l&&(l=Ue(t,u,e));var d=t.docView.nearestDesc(u,!0);return{pos:l,inside:d?d.posAtStart-d.border:-1}}function Ze(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function Ye(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset;if(3==r.nodeType&&(ge.webkit||ge.gecko)){var i=Ze(Oe(r,o,o),0);if(ge.gecko&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){var s=Ze(Oe(r,o-1,o-1),-1);if(s.top==i.top){var a=Ze(Oe(r,o,o+1),-1);if(a.top!=i.top)return Qe(a,a.left<s.left)}}return i}if(1==r.nodeType&&!t.state.doc.resolve(e).parent.inlineContent){var c,l=!0;if(o<r.childNodes.length){var u=r.childNodes[o];1==u.nodeType&&(c=u.getBoundingClientRect())}if(!c&&o){var p=r.childNodes[o-1];1==p.nodeType&&(c=p.getBoundingClientRect(),l=!1)}return tn(c||r.getBoundingClientRect(),l)}for(var f=-1;f<2;f+=2)if(f<0&&o){var h=void 0,d=3==r.nodeType?Oe(r,o-1,o):3==(h=r.childNodes[o-1]).nodeType?Oe(h):1==h.nodeType&&"BR"!=h.nodeName?h:null;if(d){var m=Ze(d,1);if(m.top<m.bottom)return Qe(m,!1)}}else if(f>0&&o<Te(r)){var v=void 0,g=3==r.nodeType?Oe(r,o,o+1):3==(v=r.childNodes[o]).nodeType?Oe(v):1==v.nodeType?v:null;if(g){var y=Ze(g,-1);if(y.top<y.bottom)return Qe(y,!0)}}return Qe(Ze(3==r.nodeType?Oe(r):r,0),!1)}function Qe(t,e){if(0==t.width)return t;var n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function tn(t,e){if(0==t.height)return t;var n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function en(t,e,n){var r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o.focus()}}function nn(t,e,n){var r=e.selection,o="up"==n?r.$anchor.min(r.$head):r.$anchor.max(r.$head);return en(t,e,(function(){for(var e=t.docView.domFromPos(o.pos),r=e.node;;){var i=t.docView.nearestDesc(r,!0);if(!i)break;if(i.node.isBlock){r=i.dom;break}r=i.dom.parentNode}for(var s=Ye(t,o.pos),a=r.firstChild;a;a=a.nextSibling){var c=void 0;if(1==a.nodeType)c=a.getClientRects();else{if(3!=a.nodeType)continue;c=Oe(a,0,a.nodeValue.length).getClientRects()}for(var l=0;l<c.length;l++){var u=c[l];if(u.bottom>u.top&&("up"==n?u.bottom<s.top+1:u.top>s.bottom-1))return!1}}return!0}))}var rn=/[\u0590-\u08ac]/;function on(t,e,n){var r=e.selection,o=r.$head;if(!o.parent.isTextblock)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size,c=getSelection();return rn.test(o.parent.textContent)&&c.modify?en(t,e,(function(){var e=c.getRangeAt(0),r=c.focusNode,i=c.focusOffset,s=c.caretBidiLevel;c.modify("move",n,"character");var a=o.depth?t.docView.domAfterPos(o.before()):t.dom,l=!a.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||r==c.focusNode&&i==c.focusOffset;return c.removeAllRanges(),c.addRange(e),null!=s&&(c.caretBidiLevel=s),l})):"left"==n||"backward"==n?s:a}var sn=null,an=null,cn=!1;function ln(t,e,n){return sn==e&&an==n?cn:(sn=e,an=n,cn="up"==n||"down"==n?nn(t,e,n):on(t,e,n))}var un=0,pn=1,fn=2,hn=3,dn=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=un},mn={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};dn.prototype.matchesWidget=function(){return!1},dn.prototype.matchesMark=function(){return!1},dn.prototype.matchesNode=function(){return!1},dn.prototype.matchesHack=function(){return!1},mn.beforePosition.get=function(){return!1},dn.prototype.parseRule=function(){return null},dn.prototype.stopEvent=function(){return!1},mn.size.get=function(){for(var t=0,e=0;e<this.children.length;e++)t+=this.children[e].size;return t},mn.border.get=function(){return 0},dn.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var t=0;t<this.children.length;t++)this.children[t].destroy()},dn.prototype.posBeforeChild=function(t){for(var e=0,n=this.posAtStart;e<this.children.length;e++){var r=this.children[e];if(r==t)return n;n+=r.size}},mn.posBefore.get=function(){return this.parent.posBeforeChild(this)},mn.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},mn.posAfter.get=function(){return this.posBefore+this.size},mn.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},dn.prototype.localPosFromDOM=function(t,e,n){if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var r,o;if(t==this.contentDOM)r=t.childNodes[e-1];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;r=t.previousSibling}while(r&&(!(o=r.pmViewDesc)||o.parent!=this))r=r.previousSibling;return r?this.posBeforeChild(o)+o.size:this.posAtStart}var i,s;if(t==this.contentDOM)i=t.childNodes[e];else{while(t.parentNode!=this.contentDOM)t=t.parentNode;i=t.nextSibling}while(i&&(!(s=i.pmViewDesc)||s.parent!=this))i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var c=t;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&e==t.childNodes.length)for(var l=t;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?n>0:a)?this.posAtEnd:this.posAtStart},dn.prototype.nearestDesc=function(t,e){for(var n=!0,r=t;r;r=r.parentNode){var o=this.getDesc(r);if(o&&(!e||o.node)){if(!n||!o.nodeDOM||(1==o.nodeDOM.nodeType?o.nodeDOM.contains(1==t.nodeType?t:t.parentNode):o.nodeDOM==t))return o;n=!1}}},dn.prototype.getDesc=function(t){for(var e=t.pmViewDesc,n=e;n;n=n.parent)if(n==this)return e},dn.prototype.posFromDOM=function(t,e,n){for(var r=t;;r=r.parentNode){var o=this.getDesc(r);if(o)return o.localPosFromDOM(t,e,n)}},dn.prototype.descAt=function(t){for(var e=0,n=0;e<this.children.length;e++){var r=this.children[e],o=n+r.size;if(n==t&&o!=n){while(!r.border&&r.children.length)r=r.children[0];return r}if(t<o)return r.descAt(t-n-r.border);n=o}},dn.prototype.domFromPos=function(t){if(!this.contentDOM)return{node:this.dom,offset:0};for(var e=0,n=0;;n++){if(e==t){while(n<this.children.length&&(this.children[n].beforePosition||this.children[n].dom.parentNode!=this.contentDOM))n++;return{node:this.contentDOM,offset:n==this.children.length?this.contentDOM.childNodes.length:ke(this.children[n].dom)}}if(n==this.children.length)throw new Error("Invalid position "+t);var r=this.children[n],o=e+r.size;if(t<o)return r.domFromPos(t-e-r.border);e=o}},dn.prototype.parseRange=function(t,e,n){if(void 0===n&&(n=0),0==this.children.length)return{node:this.contentDOM,from:t,to:e,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var r=-1,o=-1,i=n,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==r&&t<=c){var l=i+a.border;if(t>=l&&e<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(t,e,l);t=i;for(var u=s;u>0;u--){var p=this.children[u-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){r=ke(p.dom)+1;break}t-=p.size}-1==r&&(r=0)}if(r>-1&&e<=c){e=c;for(var f=s+1;f<this.children.length;f++){var h=this.children[f];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(-1)){o=ke(h.dom);break}e+=h.size}-1==o&&(o=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:t,to:e,fromOffset:r,toOffset:o}},dn.prototype.emptyChildAt=function(t){if(this.border||!this.contentDOM||!this.children.length)return!1;var e=this.children[t<0?0:this.children.length-1];return 0==e.size||e.emptyChildAt(t)},dn.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},dn.prototype.setSelection=function(t,e,n,r){for(var o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(t-a-c.border,e-a-c.border,n,r);a=l}var u=this.domFromPos(t),p=this.domFromPos(e),f=n.getSelection();if(r||!_e(u.node,u.offset,f.anchorNode,f.anchorOffset)||!_e(p.node,p.offset,f.focusNode,f.focusOffset)){var h=!1;if(f.extend||t==e){f.collapse(u.node,u.offset);try{t!=e&&f.extend(p.node,p.offset),h=!0}catch(v){if(!(v instanceof DOMException))throw v}}if(!h){if(t>e){var d=u;u=p,p=d}var m=document.createRange();m.setEnd(p.node,p.offset),m.setStart(u.node,u.offset),f.removeAllRanges(),f.addRange(m)}}},dn.prototype.ignoreMutation=function(t){return!this.contentDOM&&"selection"!=t.type},mn.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},dn.prototype.markDirty=function(t,e){for(var n=0,r=0;r<this.children.length;r++){var o=this.children[r],i=n+o.size;if(n==i?t<=i&&e>=n:t<i&&e>n){var s=n+o.border,a=i-o.border;if(t>=s&&e<=a)return this.dirty=t==n||e==i?fn:pn,void(t!=s||e!=a||!o.contentLost&&o.dom.parentNode==this.contentDOM?o.markDirty(t-s,e-s):o.dirty=hn);o.dirty=hn}n=i}this.dirty=fn},dn.prototype.markParentsDirty=function(){for(var t=1,e=this.parent;e;e=e.parent,t++){var n=1==t?fn:pn;e.dirty<n&&(e.dirty=n)}},Object.defineProperties(dn.prototype,mn);var vn=[],gn=function(t){function e(e,n,r,o){var i,s=n.type.toDOM;if("function"==typeof s&&(s=s(r,(function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:o}))),!n.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}t.call(this,e,vn,s,null),this.widget=n,i=this}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={beforePosition:{configurable:!0}};return n.beforePosition.get=function(){return this.widget.type.side<0},e.prototype.matchesWidget=function(t){return this.dirty==un&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.spec.stopEvent;return!!e&&e(t)},e.prototype.ignoreMutation=function(t){return"selection"!=t.type||this.widget.spec.ignoreSelection},Object.defineProperties(e.prototype,n),e}(dn),yn=function(t){function e(e,n,r,o){t.call(this,e,vn,n,null),this.textDOM=r,this.text=o}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0}};return n.size.get=function(){return this.text.length},e.prototype.localPosFromDOM=function(t,e){return t!=this.textDOM?this.posAtStart+(e?this.size:0):this.posAtStart+e},e.prototype.domFromPos=function(t){return{node:this.textDOM,offset:t}},e.prototype.ignoreMutation=function(t){return"characterData"===t.type&&t.target.nodeValue==t.oldValue},Object.defineProperties(e.prototype,n),e}(dn),bn=function(t){function e(e,n,r,o){t.call(this,e,[],r,o),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o){var i=o.nodeViews[n.type.name],s=i&&i(n,o,r);return s&&s.dom||(s=Dt.renderSpec(document,n.type.spec.toDOM(n,r))),new e(t,n,s.dom,s.contentDOM||s.dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=hn&&this.mark.eq(t)},e.prototype.markDirty=function(e,n){if(t.prototype.markDirty.call(this,e,n),this.dirty!=un){var r=this.parent;while(!r.node)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=un}},e.prototype.slice=function(t,n,r){var o=e.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;n<s&&(i=Ln(i,n,s,r)),t>0&&(i=Ln(i,0,t,r));for(var a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o},e}(dn),wn=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n.isLeaf?vn:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c,l)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{configurable:!0},border:{configurable:!0}};return e.create=function(t,n,r,o,i,s){var a,c,l=i.nodeViews[n.type.name],u=l&&l(n,i,(function(){return c?c.parent?c.parent.posBeforeChild(c):void 0:s}),r),p=u&&u.dom,f=u&&u.contentDOM;if(n.isText)if(p){if(3!=p.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else p=document.createTextNode(n.text);else p||(a=Dt.renderSpec(document,n.type.spec.toDOM(n)),p=a.dom,f=a.contentDOM);f||n.isText||"BR"==p.nodeName||(p.hasAttribute("contenteditable")||(p.contentEditable=!1),n.type.spec.draggable&&(p.draggable=!0));var h=p;return p=An(p,r,n),u?c=new Cn(t,n,r,o,p,f,h,u,i,s+1):n.isText?new Sn(t,n,r,o,p,h,i):new e(t,n,r,o,p,f,h,i,s+1)},e.prototype.parseRule=function(){var t=this;if(this.node.type.spec.reparseInView)return null;var e={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(e.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?e.contentElement=this.contentDOM:e.getContent=function(){return t.contentDOM?p.empty:t.node.content},e},e.prototype.matchesNode=function(t,e,n){return this.dirty==un&&t.eq(this.node)&&Dn(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t,e){var n=this,r=this.node.inlineContent,o=e,i=r&&t.composing&&this.localCompositionNode(t,e),s=new zn(this,i&&i.node);jn(this.node,this.innerDeco,(function(e,i,a){e.spec.marks?s.syncToMarks(e.spec.marks,r,t):e.type.side>=0&&!a&&s.syncToMarks(i==n.node.childCount?v.none:n.node.child(i).marks,r,t),s.placeWidget(e,t,o)}),(function(e,n,i,a){s.syncToMarks(e.marks,r,t),s.findNodeMatch(e,n,i,a)||s.updateNextNode(e,n,i,t,a)||s.addNode(e,n,i,t,o),o+=e.nodeSize})),s.syncToMarks(vn,r,t),this.node.isTextblock&&s.addTextblockHacks(),s.destroyRest(),(s.changed||this.dirty==fn)&&(i&&this.protectLocalComposition(t,i),this.renderChildren())},e.prototype.renderChildren=function(){On(this.contentDOM,this.children),ge.ios&&Fn(this.dom)},e.prototype.localCompositionNode=function(t,e){var n=t.state.selection,r=n.from,o=n.to;if(!(!(t.state.selection instanceof a["TextSelection"])||r<e||o>e+this.node.content.size)){var i=t.root.getSelection(),s=Bn(i.focusNode,i.focusOffset);if(s&&this.dom.contains(s.parentNode)){var c=s.nodeValue,l=$n(this.node.content,c,r-e,o-e);return l<0?null:{node:s,pos:l,text:c}}}},e.prototype.protectLocalComposition=function(t,e){var n=e.node,r=e.pos,o=e.text;if(!this.getDesc(n)){for(var i=n;;i=i.parentNode){if(i.parentNode==this.contentDOM)break;while(i.previousSibling)i.parentNode.removeChild(i.previousSibling);while(i.nextSibling)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new yn(this,i,n,o);t.compositionNodes.push(s),this.children=Ln(this.children,r,r+o.length,t,s)}},e.prototype.update=function(t,e,n,r){return!(this.dirty==hn||!t.sameMarkup(this.node))&&(this.updateInner(t,e,n,r),!0)},e.prototype.updateInner=function(t,e,n,r){this.updateOuterDeco(e),this.node=t,this.innerDeco=n,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=un},e.prototype.updateOuterDeco=function(t){if(!Dn(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType,n=this.dom;this.dom=Tn(this.dom,this.nodeDOM,En(this.outerDeco,this.node,e),En(t,this.node,e)),this.dom!=n&&(n.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(e.prototype,n),e}(dn);function xn(t,e,n,r,o){return An(r,e,t),new wn(null,t,e,n,r,r,r,o,0)}var Sn=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},e.prototype.update=function(t,e){return!(this.dirty==hn||this.dirty!=un&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==un&&t.text==this.node.text||t.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=t.text),this.node=t,this.dirty=un,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.nodeDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t){return{node:this.nodeDOM,offset:t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type&&"selection"!=t.type},e.prototype.slice=function(t,n,r){var o=this.node.cut(t,n),i=document.createTextNode(o.text);return new e(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)},e}(wn),kn=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return this.dirty==un},e}(dn),Cn=function(t){function e(e,n,r,o,i,s,a,c,l,u){t.call(this,e,n,r,o,i,s,a,l,u),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(this.dirty==hn)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&this.updateInner(e,n,r,o),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r,o)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(wn);function On(t,e){for(var n=t.firstChild,r=0;r<e.length;r++){var o=e[r],i=o.dom;if(i.parentNode==t){while(i!=n)n=Pn(n);n=n.nextSibling}else t.insertBefore(i,n);if(o instanceof bn){var s=n?n.previousSibling:t.lastChild;On(o.contentDOM,o.children),n=s?s.nextSibling:t.firstChild}}while(n)n=Pn(n)}function _n(t){t&&(this.nodeName=t)}_n.prototype=Object.create(null);var Mn=[new _n];function En(t,e,n){if(0==t.length)return Mn;for(var r=n?Mn[0]:new _n,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s)for(var c in s.nodeName&&o.push(a=new _n(s.nodeName)),s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new _n(e.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return o}function Tn(t,e,n,r){if(n==Mn&&r==Mn)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],a=n[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&o!=t&&(c=o.parentNode)&&c.tagName.toLowerCase()==s.nodeName||(c=document.createElement(s.nodeName),c.appendChild(o),a=Mn[0]),o=c}Nn(o,a||Mn[0],s)}return o}function Nn(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e.class!=n.class){for(var i=e.class?e.class.split(" "):vn,s=n.class?n.class.split(" "):vn,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){if(e.style){var l,u=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;while(l=u.exec(e.style))t.style.removeProperty(l[1])}n.style&&(t.style.cssText+=n.style)}}function An(t,e,n){return Tn(t,t,Mn,En(e,n,1!=t.nodeType))}function Dn(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function Pn(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}var zn=function(t,e){this.top=t,this.lock=e,this.index=0,this.stack=[],this.changed=!1;var n=Rn(t.node.content,t.children);this.preMatched=n.nodes,this.preMatchOffset=n.offset};function Rn(t,e){for(var n=[],r=t.childCount,o=e.length-1;r>0&&o>=0;o--){var i=e[o],s=i.node;if(s){if(s!=t.child(r-1))break;n.push(i),--r}}return{nodes:n.reverse(),offset:r}}function In(t,e){return t.type.side-e.type.side}function jn(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){if(s<o.length&&o[s].to==i){var u=o[s++],p=void 0;while(s<o.length&&o[s].to==i)(p||(p=[u])).push(o[s++]);if(p){p.sort(In);for(var f=0;f<p.length;f++)n(p[f],l,!!c)}else n(u,l,!!c)}var h=void 0,d=void 0;if(c)d=-1,h=c,c=null;else{if(!(l<t.childCount))break;d=l,h=t.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);while(s<o.length&&o[s].from==i)a.push(o[s++]);var v=i+h.nodeSize;if(h.isText){var g=v;s<o.length&&o[s].from<g&&(g=o[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=h.cut(g-i),h=h.cut(0,g-i),v=g,d=-1)}r(h,a.length?a.slice():vn,e.forChild(i,h),d),i=v}else for(var b=0;b<t.childCount;b++){var w=t.child(b);r(w,o,e.forChild(i,w),b),i+=w.nodeSize}}function Fn(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function Bn(t,e){for(;;){if(3==t.nodeType)return t;if(1==t.nodeType&&e>0){if(t.childNodes.length>e&&3==t.childNodes[e].nodeType)return t.childNodes[e];t=t.childNodes[e-1],e=Te(t)}else{if(!(1==t.nodeType&&e<t.childNodes.length))return null;t=t.childNodes[e],e=0}}}function $n(t,e,n,r){for(var o=0,i=0;o<t.childCount&&i<=r;){var s=t.child(o++),a=i;if(i+=s.nodeSize,s.isText){var c=s.text;while(o<t.childCount){var l=t.child(o++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=n){var u=c.lastIndexOf(e,r-a);if(u>=0&&u+e.length+a>=n)return a+u}}}return-1}function Ln(t,e,n,r,o){for(var i=[],s=0,a=0;s<t.length;s++){var c=t[s],l=a,u=a+=c.size;l>=n||u<=e?i.push(c):(l<e&&i.push(c.slice(0,e-l,r)),o&&(i.push(o),o=null),u>n&&i.push(c.slice(n-l,c.size,r)))}return i}function Vn(t,e){var n=t.selection,r=n.$anchor,o=n.$head,i=e>0?r.max(o):r.min(o),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&a["Selection"].findFrom(s,e)}function qn(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Wn(t,e,n){var r=t.state.selection;if(r instanceof a["TextSelection"]){if(!r.empty||n.indexOf("s")>-1)return!1;if(t.endOfTextblock(e>0?"right":"left")){var o=Vn(t.state,e);return!!(o&&o instanceof a["NodeSelection"])&&qn(t,o)}var i,s=r.$head,c=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!c||c.isText)return!1;var l=e<0?s.pos-c.nodeSize:s.pos;return!!(c.isAtom||(i=t.docView.descAt(l))&&!i.contentDOM)&&(a["NodeSelection"].isSelectable(c)?qn(t,new a["NodeSelection"](e<0?t.state.doc.resolve(s.pos-c.nodeSize):s)):!!ge.webkit&&qn(t,new a["TextSelection"](t.state.doc.resolve(e<0?l:l+c.nodeSize))))}if(r instanceof a["NodeSelection"]&&r.node.isInline)return qn(t,new a["TextSelection"](e>0?r.$to:r.$from));var u=Vn(t.state,e);return!!u&&qn(t,u)}function Jn(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function Hn(t){var e=t.pmViewDesc;return e&&0==e.size&&(t.nextSibling||"BR"!=t.nodeName)}function Un(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){var o,i,s=!1;for(ge.gecko&&1==n.nodeType&&r<Jn(n)&&Hn(n.childNodes[r])&&(s=!0);;)if(r>0){if(1!=n.nodeType)break;var a=n.childNodes[r-1];if(Hn(a))o=n,i=--r;else{if(3!=a.nodeType)break;n=a,r=n.nodeValue.length}}else{if(Gn(n))break;var c=n.previousSibling;while(c&&Hn(c))o=n.parentNode,i=ke(c),c=c.previousSibling;if(c)n=c,r=Jn(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}s?Xn(t,e,n,r):o&&Xn(t,e,o,i)}}function Kn(t){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n){for(var o,i,s=Jn(n);;)if(r<s){if(1!=n.nodeType)break;var a=n.childNodes[r];if(!Hn(a))break;o=n,i=++r}else{if(Gn(n))break;var c=n.nextSibling;while(c&&Hn(c))o=c.parentNode,i=ke(c)+1,c=c.nextSibling;if(c)n=c,r=0,s=Jn(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}o&&Xn(t,e,o,i)}}function Gn(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function Xn(t,e,n,r){if(De(e)){var o=document.createRange();o.setEnd(n,r),o.setStart(n,r),e.removeAllRanges(),e.addRange(o)}else e.extend&&e.extend(n,r);t.domObserver.setCurSelection()}function Zn(t,e,n){var r=t.state.selection;if(r instanceof a["TextSelection"]&&!r.empty||n.indexOf("s")>-1)return!1;var o=r.$from,i=r.$to;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){var s=Vn(t.state,e);if(s&&s instanceof a["NodeSelection"])return qn(t,s)}if(!o.parent.inlineContent){var c=a["Selection"].findFrom(e<0?o:i,e);return!c||qn(t,c)}return!1}function Yn(t,e){if(!(t.state.selection instanceof a["TextSelection"]))return!0;var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r.sameParent(o))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var c=t.state.tr;return e<0?c.delete(r.pos-s.nodeSize,r.pos):c.delete(r.pos,r.pos+s.nodeSize),t.dispatch(c),!0}return!1}function Qn(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function tr(t){if(ge.chrome&&!(t.state.selection.$head.parentOffset>0)){var e=t.root.getSelection(),n=e.focusNode,r=e.focusOffset;if(n&&1==n.nodeType&&0==r&&n.firstChild&&"false"==n.firstChild.contentEditable){var o=n.firstChild;Qn(t,o,!0),setTimeout((function(){return Qn(t,o,!1)}),20)}}}function er(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function nr(t,e){var n=e.keyCode,r=er(e);return 8==n||ge.mac&&72==n&&"c"==r?Yn(t,-1)||Un(t):46==n||ge.mac&&68==n&&"c"==r?Yn(t,1)||Kn(t):13==n||27==n||(37==n?Wn(t,-1,r)||Un(t):39==n?Wn(t,1,r)||Kn(t):38==n?Zn(t,-1,r)||Un(t):40==n?tr(t)||Zn(t,1,r)||Kn(t):r==(ge.mac?"m":"c")&&(66==n||73==n||89==n||90==n))}function rr(t,e){var n,r,o=t.root.getSelection(),i=t.state.doc,s=t.docView.nearestDesc(o.focusNode),c=s&&0==s.size,l=t.docView.posFromDOM(o.focusNode,o.focusOffset),u=i.resolve(l);if(De(o)){n=u;while(s&&!s.node)s=s.parent;if(s&&s.node.isAtom&&a["NodeSelection"].isSelectable(s.node)&&s.parent&&(!s.node.isInline||!Ne(o.focusNode,o.focusOffset,s.dom))){var p=s.posBefore;r=new a["NodeSelection"](l==p?u:i.resolve(p))}}else n=i.resolve(t.docView.posFromDOM(o.anchorNode,o.anchorOffset));if(!r){var f="pointer"==e||t.state.selection.head<u.pos&&!c?1:-1;r=hr(t,n,u,f)}return r}function or(t,e){var n=t.state.selection;if(pr(t,n),t.editable?t.hasFocus():mr(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)ur(t);else{var r,o,i=n.anchor,s=n.head;!ir||n instanceof a["TextSelection"]||(n.$from.parent.inlineContent||(r=sr(t,n.from)),n.empty||n.$from.parent.inlineContent||(o=sr(t,n.to))),t.docView.setSelection(i,s,t.root,e),ir&&(r&&cr(r),o&&cr(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&lr(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}zn.prototype.getPreMatch=function(t){return t>=this.preMatchOffset?this.preMatched[t-this.preMatchOffset]:null},zn.prototype.destroyBetween=function(t,e){if(t!=e){for(var n=t;n<e;n++)this.top.children[n].destroy();this.top.children.splice(t,e-t),this.changed=!0}},zn.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},zn.prototype.syncToMarks=function(t,e,n){var r=0,o=this.stack.length>>1,i=Math.min(o,t.length);while(r<i&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(t[r])&&!1!==t[r].type.spec.spanning)r++;while(r<o)this.destroyRest(),this.top.dirty=un,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;while(o<t.length){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(t[o])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=bn.create(this.top,t[o],e,n);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,o++}},zn.prototype.findNodeMatch=function(t,e,n,r){var o=-1,i=r<0?void 0:this.getPreMatch(r),s=this.top.children;if(i&&i.matchesNode(t,e,n))o=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(t,e,n)&&this.preMatched.indexOf(l)<0){o=a;break}}return!(o<0)&&(this.destroyBetween(this.index,o),this.index++,!0)},zn.prototype.updateNextNode=function(t,e,n,r,o){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof wn){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=o)return!1;var c=s.dom,l=this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(t.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==t.text&&s.dirty!=hn&&Dn(e,s.outerDeco));if(!l&&s.update(t,e,n,r))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},zn.prototype.addNode=function(t,e,n,r,o){this.top.children.splice(this.index++,0,wn.create(this.top,t,e,n,r,o)),this.changed=!0},zn.prototype.placeWidget=function(t,e,n){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t))this.index++;else{var r=new gn(this.top,t,e,n);this.top.children.splice(this.index++,0,r),this.changed=!0}},zn.prototype.addTextblockHacks=function(){var t=this.top.children[this.index-1];while(t instanceof bn)t=t.children[t.children.length-1];if(!t||!(t instanceof Sn)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new kn(this.top,vn,e,null)),this.changed=!0}};var ir=ge.safari||ge.chrome&&ge.chrome_version<63;function sr(t,e){var n=t.docView.domFromPos(e),r=n.node,o=n.offset,i=o<r.childNodes.length?r.childNodes[o]:null,s=o?r.childNodes[o-1]:null;if(ge.safari&&i&&"false"==i.contentEditable)return ar(i);if((!i||"false"==i.contentEditable)&&(!s||"false"==s.contentEditable)){if(i)return ar(i);if(s)return ar(s)}}function ar(t){return t.contentEditable="true",ge.safari&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function cr(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function lr(t){var e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.hideSelectionGuard);var n=t.root.getSelection(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.hideSelectionGuard=function(){n.anchorNode==r&&n.anchorOffset==o||(e.removeEventListener("selectionchange",t.hideSelectionGuard),t.dom.classList.remove("ProseMirror-hideselection"))})}function ur(t){var e=t.root.getSelection(),n=document.createRange(),r=t.cursorWrapper.dom,o="IMG"==r.nodeName;o?n.setEnd(r.parentNode,ke(r)+1):n.setEnd(r,0),n.collapse(!1),e.removeAllRanges(),e.addRange(n),!o&&!t.state.selection.visible&&ge.ie&&ge.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function pr(t,e){if(e instanceof a["NodeSelection"]){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(fr(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else fr(t)}function fr(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}function hr(t,e,n,r){return t.someProp("createSelectionBetween",(function(r){return r(t,e,n)}))||a["TextSelection"].between(e,n,r)}function dr(t){return(!t.editable||t.root.activeElement==t.dom)&&mr(t)}function mr(t){var e=t.root.getSelection();if(!e.anchorNode)return!1;try{return t.dom.contains(3==e.anchorNode.nodeType?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(3==e.focusNode.nodeType?e.focusNode.parentNode:e.focusNode))}catch(n){return!1}}function vr(t){var e=t.docView.domFromPos(t.state.selection.anchor),n=t.root.getSelection();return _e(e.node,e.offset,n.anchorNode,n.anchorOffset)}function gr(t,e,n){var r=t.docView.parseRange(e,n),o=r.node,i=r.fromOffset,s=r.toOffset,a=r.from,c=r.to,l=t.root.getSelection(),u=null,p=l.anchorNode;if(p&&t.dom.contains(1==p.nodeType?p:p.parentNode)&&(u=[{node:p,offset:l.anchorOffset}],De(l)||u.push({node:l.focusNode,offset:l.focusOffset})),ge.chrome&&8===t.lastKeyCode)for(var f=s;f>i;f--){var h=o.childNodes[f-1],d=h.pmViewDesc;if("BR"==h.nodeType&&!d){s=f;break}if(!d||d.size)break}var m=t.state.doc,v=t.someProp("domParser")||vt.fromSchema(t.state.schema),g=m.resolve(a),y=null,b=v.parse(o,{topNode:g.parent,topMatch:g.parent.contentMatchAt(g.index()),topOpen:!0,from:i,to:s,preserveWhitespace:!g.parent.type.spec.code||"full",editableContent:!0,findPositions:u,ruleFromNode:yr,context:g});if(u&&null!=u[0].pos){var w=u[0].pos,x=u[1]&&u[1].pos;null==x&&(x=w),y={anchor:w+a,head:x+a}}return{doc:b,sel:y,from:a,to:c}}function yr(t){var e=t.pmViewDesc;if(e)return e.parseRule();if("BR"==t.nodeName&&t.parentNode){if(ge.safari&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){var n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}if(t.parentNode.lastChild==t||ge.safari&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if("IMG"==t.nodeName&&t.getAttribute("mark-placeholder"))return{ignore:!0}}function br(t,e,n,r,o){if(e<0){var i=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,s=rr(t,i);if(!t.state.selection.eq(s)){var c=t.state.tr.setSelection(s);"pointer"==i?c.setMeta("pointer",!0):"key"==i&&c.scrollIntoView(),t.dispatch(c)}}else{var l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);var p,f,h=t.state.selection,d=gr(t,e,n),m=t.state.doc,v=m.slice(d.from,d.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(p=t.state.selection.to,f="end"):(p=t.state.selection.from,f="start"),t.lastKeyCode=null;var g=Cr(v.content,d.doc.content,d.from,p,f);if(!g){if(!(r&&h instanceof a["TextSelection"]&&!h.empty&&h.$head.sameParent(h.$anchor))||t.composing||d.sel&&d.sel.anchor!=d.sel.head){if(d.sel){var y=wr(t,t.state.doc,d.sel);y&&!y.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(y))}return}g={start:h.from,endA:h.to,endB:h.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof a["TextSelection"]&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),ge.ie&&ge.ie_version<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>d.from&&"  "==d.doc.textBetween(g.start-d.from-1,g.start-d.from+1)&&(g.start--,g.endA--,g.endB--);var b,w=d.doc.resolveNoCache(g.start-d.from),x=d.doc.resolveNoCache(g.endB-d.from);if((ge.ios&&t.lastIOSEnter>Date.now()-100&&(!w.sameParent(x)||o.some((function(t){return"DIV"==t.nodeName})))||!w.sameParent(x)&&w.pos<d.doc.content.size&&(b=a["Selection"].findFrom(d.doc.resolve(w.pos+1),1,!0))&&b.head==x.pos)&&t.someProp("handleKeyDown",(function(e){return e(t,Pe(13,"Enter"))})))t.lastIOSEnter=0;else if(t.state.selection.anchor>g.start&&Sr(m,g.start,g.endA,w,x)&&t.someProp("handleKeyDown",(function(e){return e(t,Pe(8,"Backspace"))})))ge.android&&ge.chrome&&t.domObserver.suppressSelectionUpdates();else{var S,k,C,O,_=g.start,M=g.endA;if(w.sameParent(x)&&w.parent.inlineContent)if(w.pos==x.pos)ge.ie&&ge.ie_version<=11&&0==w.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout((function(){return or(t)}),20)),S=t.state.tr.delete(_,M),k=m.resolve(g.start).marksAcross(m.resolve(g.endA));else if(g.endA==g.endB&&(O=m.resolve(g.start))&&(C=xr(w.parent.content.cut(w.parentOffset,x.parentOffset),O.parent.content.cut(O.parentOffset,g.endA-O.start()))))S=t.state.tr,"add"==C.type?S.addMark(_,M,C.mark):S.removeMark(_,M,C.mark);else if(w.parent.child(w.index()).isText&&w.index()==x.index()-(x.textOffset?0:1)){var E=w.parent.textBetween(w.parentOffset,x.parentOffset);if(t.someProp("handleTextInput",(function(e){return e(t,_,M,E)})))return;S=t.state.tr.insertText(E,_,M)}if(S||(S=t.state.tr.replace(_,M,d.doc.slice(g.start-d.from,g.endB-d.from))),d.sel){var T=wr(t,S.doc,d.sel);T&&!(ge.chrome&&ge.android&&t.composing&&T.empty&&(T.head==_||T.head==S.mapping.map(M)-1)||ge.ie&&T.empty&&T.head==_)&&S.setSelection(T)}k&&S.ensureMarks(k),t.dispatch(S.scrollIntoView())}}}function wr(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:hr(t,e.resolve(n.anchor),e.resolve(n.head))}function xr(t,e){for(var n,r,o,i=t.firstChild.marks,s=e.firstChild.marks,a=i,c=s,l=0;l<s.length;l++)a=s[l].removeFromSet(a);for(var u=0;u<i.length;u++)c=i[u].removeFromSet(c);if(1==a.length&&0==c.length)r=a[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=c.length)return null;r=c[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var f=[],h=0;h<e.childCount;h++)f.push(o(e.child(h)));if(p.from(f).eq(t))return{mark:r,type:n}}function Sr(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||kr(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(kr(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||kr(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function kr(t,e,n){var r=t.depth,o=e?t.end():t.pos;while(r>0&&(e||t.indexAfter(r)==t.node(r).childCount))r--,o++,e=!1;if(n){var i=t.node(r).maybeChild(t.indexAfter(r));while(i&&!i.isLeaf)i=i.firstChild,o++}return o}function Cr(t,e,n,r,o){var i=t.findDiffStart(e,n);if(null==i)return null;var s=t.findDiffEnd(e,n+t.size,n+e.size),a=s.a,c=s.b;if("end"==o){var l=Math.max(0,i-Math.min(a,c));r-=a+l-i}if(a<i&&t.size<e.size){var u=r<=i&&r>=a?i-r:0;i-=u,c=i+(c-a),a=i}else if(c<i){var p=r<=i&&r>=c?i-r:0;i-=p,a=i+(a-c),c=i}return{start:i,endA:a,endB:c}}function Or(t,e){var n=[],r=e.content,o=e.openStart,i=e.openEnd;while(o>1&&i>1&&1==r.childCount&&1==r.firstChild.childCount){o--,i--;var s=r.firstChild;n.push(s.type.name,s.type.hasRequiredAttrs()?s.attrs:null),r=s.content}var a=t.someProp("clipboardSerializer")||Dt.fromSchema(t.state.schema),c=Rr(),l=c.createElement("div");l.appendChild(a.serializeFragment(r,{document:c}));var u,p=l.firstChild;while(p&&1==p.nodeType&&(u=Pr[p.nodeName.toLowerCase()])){for(var f=u.length-1;f>=0;f--){var h=c.createElement(u[f]);while(l.firstChild)h.appendChild(l.firstChild);l.appendChild(h)}p=l.firstChild}p&&1==p.nodeType&&p.setAttribute("data-pm-slice",o+" "+i+" "+JSON.stringify(n));var d=t.someProp("clipboardTextSerializer",(function(t){return t(e)}))||e.content.textBetween(0,e.content.size,"\n\n");return{dom:l,text:d}}function _r(t,e,n,r,o){var i,s,a=o.parent.type.spec.code;if(!n&&!e)return null;var c=e&&(r||a||!n);if(c){if(t.someProp("transformPastedText",(function(t){e=t(e)})),a)return new y(p.from(t.state.schema.text(e)),0,0);var l=t.someProp("clipboardTextParser",(function(t){return t(e,o)}));l?s=l:(i=document.createElement("div"),e.trim().split(/(?:\r\n?|\n)+/).forEach((function(t){i.appendChild(document.createElement("p")).textContent=t})))}else t.someProp("transformPastedHTML",(function(t){n=t(n)})),i=Ir(n);var u=i&&i.querySelector("[data-pm-slice]"),f=u&&/^(\d+) (\d+) (.*)/.exec(u.getAttribute("data-pm-slice"));if(!s){var h=t.someProp("clipboardParser")||t.someProp("domParser")||vt.fromSchema(t.state.schema);s=h.parseSlice(i,{preserveWhitespace:!(!c&&!f),context:o})}return s=f?jr(Dr(s,+f[1],+f[2]),f[3]):y.maxOpen(Mr(s.content,o),!1),t.someProp("transformPasted",(function(t){s=t(s)})),s}function Mr(t,e){if(t.childCount<2)return t;for(var n=function(n){var r=e.node(n),o=r.contentMatchAt(e.index(n)),i=void 0,s=[];if(t.forEach((function(t){if(s){var e,n=o.findWrapping(t.type);if(!n)return s=null;if(e=s.length&&i.length&&Tr(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=Nr(s[s.length-1],i.length));var r=Er(t,n);s.push(r),o=o.matchType(r.type,r.attrs),i=n}}})),s)return{v:p.from(s)}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}function Er(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].create(null,p.from(t));return t}function Tr(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){var i=Tr(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var s=r.contentMatchAt(r.childCount);if(s.matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(p.from(Er(n,t,o+1))))}}function Nr(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,Nr(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(p.empty,!0);return t.copy(n.append(r))}function Ar(t,e,n,r,o,i){var s=e<0?t.firstChild:t.lastChild,a=s.content;return o<r-1&&(a=Ar(a,e,n,r,o+1,i)),o>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,t.childCount>1||i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(p.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,s.copy(a))}function Dr(t,e,n){return e<t.openStart&&(t=new y(Ar(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new y(Ar(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}var Pr={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},zr=null;function Rr(){return zr||(zr=document.implementation.createHTMLDocument("title"))}function Ir(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=Rr().createElement("div"),o=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),i=0;(n=o&&Pr[o[1].toLowerCase()])&&(t=n.map((function(t){return"<"+t+">"})).join("")+t+n.map((function(t){return"</"+t+">"})).reverse().join(""),i=n.length),r.innerHTML=t;for(var s=0;s<i;s++)r=r.firstChild;return r}function jr(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(l){return t}for(var o=t.content,i=t.openStart,s=t.openEnd,a=n.length-2;a>=0;a-=2){var c=r.nodes[n[a]];if(!c||c.hasRequiredAttrs())break;o=p.from(c.create(n[a+1],o)),i++,s++}return new y(o,i,s)}var Fr={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Br=ge.ie&&ge.ie_version<=11,$r=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};$r.prototype.set=function(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset},$r.prototype.eq=function(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset};var Lr=function(t,e){var n=this;this.view=t,this.handleDOMChange=e,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver((function(t){for(var e=0;e<t.length;e++)n.queue.push(t[e]);ge.ie&&ge.ie_version<=11&&t.some((function(t){return"childList"==t.type&&t.removedNodes.length||"characterData"==t.type&&t.oldValue.length>t.target.nodeValue.length}))?n.flushSoon():n.flush()})),this.currentSelection=new $r,Br&&(this.onCharData=function(t){n.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),n.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Lr.prototype.flushSoon=function(){var t=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout((function(){t.flushingSoon=-1,t.flush()}),20))},Lr.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},Lr.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Fr),Br&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Lr.prototype.stop=function(){var t=this;if(this.observer){var e=this.observer.takeRecords();if(e.length){for(var n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout((function(){return t.flush()}),20)}this.observer.disconnect()}Br&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Lr.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Lr.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Lr.prototype.suppressSelectionUpdates=function(){var t=this;this.suppressingSelectionUpdates=!0,setTimeout((function(){return t.suppressingSelectionUpdates=!1}),50)},Lr.prototype.onSelectionChange=function(){if(dr(this.view)){if(this.suppressingSelectionUpdates)return or(this.view);if(ge.ie&&ge.ie_version<=11&&!this.view.state.selection.empty){var t=this.view.root.getSelection();if(t.focusNode&&_e(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}},Lr.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Lr.prototype.ignoreSelectionChange=function(t){if(0==t.rangeCount)return!0;var e=t.getRangeAt(0).commonAncestorContainer,n=this.view.docView.nearestDesc(e);return n&&n.ignoreMutation({type:"selection",target:3==e.nodeType?e.parentNode:e})?(this.setCurSelection(),!0):void 0},Lr.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var t=this.observer?this.observer.takeRecords():[];this.queue.length&&(t=this.queue.concat(t),this.queue.length=0);var e=this.view.root.getSelection(),n=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(e)&&mr(this.view)&&!this.ignoreSelectionChange(e),r=-1,o=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<t.length;a++){var c=this.registerMutation(t[a],s);c&&(r=r<0?c.from:Math.min(c.from,r),o=o<0?c.to:Math.max(c.to,o),c.typeOver&&(i=!0))}if(ge.gecko&&s.length>1){var l=s.filter((function(t){return"BR"==t.nodeName}));if(2==l.length){var u=l[0],p=l[1];u.parentNode&&u.parentNode.parentNode==p.parentNode?p.remove():u.remove()}}(r>-1||n)&&(r>-1&&(this.view.docView.markDirty(r,o),qr(this.view)),this.handleDOMChange(r,o,i,s),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(e)||or(this.view))}},Lr.prototype.registerMutation=function(t,e){if(e.indexOf(t.target)>-1)return null;var n=this.view.docView.nearestDesc(t.target);if("attributes"==t.type&&(n==this.view.docView||"contenteditable"==t.attributeName||"style"==t.attributeName&&!t.oldValue&&!t.target.getAttribute("style")))return null;if(!n||n.ignoreMutation(t))return null;if("childList"==t.type){var r=t.previousSibling,o=t.nextSibling;if(ge.ie&&ge.ie_version<=11&&t.addedNodes.length)for(var i=0;i<t.addedNodes.length;i++){var s=t.addedNodes[i],a=s.previousSibling,c=s.nextSibling;(!a||Array.prototype.indexOf.call(t.addedNodes,a)<0)&&(r=a),(!c||Array.prototype.indexOf.call(t.addedNodes,c)<0)&&(o=c)}for(var l=r&&r.parentNode==t.target?ke(r)+1:0,u=n.localPosFromDOM(t.target,l,-1),p=o&&o.parentNode==t.target?ke(o):t.target.childNodes.length,f=0;f<t.addedNodes.length;f++)e.push(t.addedNodes[f]);var h=n.localPosFromDOM(t.target,p,1);return{from:u,to:h}}return"attributes"==t.type?{from:n.posAtStart-n.border,to:n.posAtEnd+n.border}:{from:n.posAtStart,to:n.posAtEnd,typeOver:t.target.nodeValue==t.oldValue}};var Vr=!1;function qr(t){Vr||(Vr=!0,"normal"==getComputedStyle(t.dom).whiteSpace&&console["warn"]("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Wr={},Jr={};function Hr(t){t.shiftKey=!1,t.mouseDown=null,t.lastKeyCode=null,t.lastKeyCodeTime=0,t.lastClick={time:0,x:0,y:0,type:""},t.lastSelectionOrigin=null,t.lastSelectionTime=0,t.lastIOSEnter=0,t.composing=!1,t.composingTimeout=null,t.compositionNodes=[],t.compositionEndedAt=-2e8,t.domObserver=new Lr(t,(function(e,n,r,o){return br(t,e,n,r,o)})),t.domObserver.start(),t.domChangeCount=0,t.eventHandlers=Object.create(null);var e=function(e){var n=Wr[e];t.dom.addEventListener(e,t.eventHandlers[e]=function(e){!Zr(t,e)||Xr(t,e)||!t.editable&&e.type in Jr||n(t,e)})};for(var n in Wr)e(n);ge.safari&&t.dom.addEventListener("input",(function(){return null})),Gr(t)}function Ur(t,e){t.lastSelectionOrigin=e,t.lastSelectionTime=Date.now()}function Kr(t){for(var e in t.domObserver.stop(),t.eventHandlers)t.dom.removeEventListener(e,t.eventHandlers[e]);clearTimeout(t.composingTimeout)}function Gr(t){t.someProp("handleDOMEvents",(function(e){for(var n in e)t.eventHandlers[n]||t.dom.addEventListener(n,t.eventHandlers[n]=function(e){return Xr(t,e)})}))}function Xr(t,e){return t.someProp("handleDOMEvents",(function(n){var r=n[e.type];return!!r&&(r(t,e)||e.defaultPrevented)}))}function Zr(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.dom;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Yr(t,e){Xr(t,e)||!Wr[e.type]||!t.editable&&e.type in Jr||Wr[e.type](t,e)}function Qr(t){return{left:t.clientX,top:t.clientY}}function to(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function eo(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,(function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)})))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function no(t,e,n){t.focused||t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function ro(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isAtom&&a["NodeSelection"].isSelectable(r))&&(no(t,new a["NodeSelection"](n),"pointer"),!0)}function oo(t,e){if(-1==e)return!1;var n,r,o=t.state.selection;o instanceof a["NodeSelection"]&&(n=o.node);for(var i=t.state.doc.resolve(e),s=i.depth+1;s>0;s--){var c=s>i.depth?i.nodeAfter:i.node(s);if(a["NodeSelection"].isSelectable(c)){r=n&&o.$from.depth>0&&s>=o.$from.depth&&i.before(o.$from.depth+1)==o.$from.pos?i.before(o.$from.depth):i.before(s);break}}return null!=r&&(no(t,a["NodeSelection"].create(t.state.doc,r),"pointer"),!0)}function io(t,e,n,r,o){return eo(t,"handleClickOn",e,n,r)||t.someProp("handleClick",(function(n){return n(t,e,r)}))||(o?oo(t,n):ro(t,n))}function so(t,e,n,r){return eo(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",(function(n){return n(t,e,r)}))}function ao(t,e,n,r){return eo(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",(function(n){return n(t,e,r)}))||co(t,n)}function co(t,e){var n=t.state.doc;if(-1==e)return!!n.inlineContent&&(no(t,a["TextSelection"].create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(e),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.inlineContent)no(t,a["TextSelection"].create(n,s+1,s+1+i.content.size),"pointer");else{if(!a["NodeSelection"].isSelectable(i))continue;no(t,a["NodeSelection"].create(n,s),"pointer")}return!0}}function lo(t){return vo(t)}Jr.keydown=function(t,e){if(t.shiftKey=16==e.keyCode||e.shiftKey,!fo(t,e))if(t.domObserver.forceFlush(),t.lastKeyCode=e.keyCode,t.lastKeyCodeTime=Date.now(),!ge.ios||13!=e.keyCode||e.ctrlKey||e.altKey||e.metaKey)t.someProp("handleKeyDown",(function(n){return n(t,e)}))||nr(t,e)?e.preventDefault():Ur(t,"key");else{var n=Date.now();t.lastIOSEnter=n,setTimeout((function(){t.lastIOSEnter==n&&(t.someProp("handleKeyDown",(function(e){return e(t,Pe(13,"Enter"))})),t.lastIOSEnter=0)}),50)}},Jr.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},Jr.keypress=function(t,e){if(!(fo(t,e)||!e.charCode||e.ctrlKey&&!e.altKey||ge.mac&&e.metaKey))if(t.someProp("handleKeyPress",(function(n){return n(t,e)})))e.preventDefault();else{var n=t.state.selection;if(!(n instanceof a["TextSelection"])||!n.$from.sameParent(n.$to)){var r=String.fromCharCode(e.charCode);t.someProp("handleTextInput",(function(e){return e(t,n.$from.pos,n.$to.pos,r)}))||t.dispatch(t.state.tr.insertText(r).scrollIntoView()),e.preventDefault()}}};var uo=ge.mac?"metaKey":"ctrlKey";Wr.mousedown=function(t,e){t.shiftKey=e.shiftKey;var n=lo(t),r=Date.now(),o="singleClick";r-t.lastClick.time<500&&to(e,t.lastClick)&&!e[uo]&&("singleClick"==t.lastClick.type?o="doubleClick":"doubleClick"==t.lastClick.type&&(o="tripleClick")),t.lastClick={time:r,x:e.clientX,y:e.clientY,type:o};var i=t.posAtCoords(Qr(e));i&&("singleClick"==o?t.mouseDown=new po(t,i,e,n):("doubleClick"==o?so:ao)(t,i.pos,i.inside,e)?e.preventDefault():Ur(t,"pointer"))};var po=function(t,e,n,r){var o,i,s=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=e,this.event=n,this.flushed=r,this.selectNode=n[uo],this.allowDefault=n.shiftKey,e.inside>-1)o=t.state.doc.nodeAt(e.inside),i=e.inside;else{var c=t.state.doc.resolve(e.pos);o=c.parent,i=c.depth?c.before():0}this.mightDrag=null;var l=r?null:n.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u?u.dom:null,(o.type.spec.draggable&&!1!==o.type.spec.selectable||t.state.selection instanceof a["NodeSelection"]&&i==t.state.selection.from)&&(this.mightDrag={node:o,pos:i,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&ge.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout((function(){return s.target.setAttribute("contentEditable","false")}),20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ur(t,"pointer")};function fo(t,e){return!!t.composing||!!(ge.safari&&Math.abs(e.timeStamp-t.compositionEndedAt)<500)&&(t.compositionEndedAt=-2e8,!0)}po.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},po.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var e=this.pos;this.view.state.doc!=this.startDoc&&(e=this.view.posAtCoords(Qr(t))),this.allowDefault||!e?Ur(this.view,"pointer"):io(this.view,e.pos,e.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!ge.chrome||this.view.state.selection instanceof a["TextSelection"]||e.pos!=this.view.state.selection.from&&e.pos!=this.view.state.selection.to)?Ur(this.view,"pointer"):(no(this.view,a["Selection"].near(this.view.state.doc.resolve(e.pos)),"pointer"),t.preventDefault())}},po.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0),Ur(this.view,"pointer")},Wr.touchdown=function(t){lo(t),Ur(t,"pointer")},Wr.contextmenu=function(t){return lo(t)};var ho=ge.android?5e3:-1;function mo(t,e){clearTimeout(t.composingTimeout),e>-1&&(t.composingTimeout=setTimeout((function(){return vo(t)}),e))}function vo(t,e){t.domObserver.forceFlush(),t.composing=!1;while(t.compositionNodes.length>0)t.compositionNodes.pop().markParentsDirty();if(e||t.docView.dirty){var n=rr(t);return n.eq(t.state.selection)?t.updateState(t.state):t.dispatch(t.state.tr.setSelection(n)),!0}return!1}function go(t,e){var n=t.dom.ownerDocument,r=n.body.appendChild(n.createElement("div"));r.appendChild(e),r.style.cssText="position: fixed; left: -10000px; top: 10px";var o=getSelection(),i=n.createRange();i.selectNodeContents(e),t.dom.blur(),o.removeAllRanges(),o.addRange(i),setTimeout((function(){n.body.removeChild(r),t.focus()}),50)}Jr.compositionstart=Jr.compositionupdate=function(t){if(!t.composing){t.domObserver.flush();var e=t.state,n=e.selection.$from;if(e.selection.empty&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some((function(t){return!1===t.type.spec.inclusive}))))t.markCursor=t.state.storedMarks||n.marks(),vo(t,!0),t.markCursor=null;else if(vo(t),ge.gecko&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length)for(var r=t.root.getSelection(),o=r.focusNode,i=r.focusOffset;o&&1==o.nodeType&&0!=i;){var s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(3==s.nodeType){r.collapse(s,s.nodeValue.length);break}o=s,i=-1}t.composing=!0}mo(t,ho)},Jr.compositionend=function(t,e){t.composing&&(t.composing=!1,t.compositionEndedAt=e.timeStamp,mo(t,20))};var yo=ge.ie&&ge.ie_version<15||ge.ios&&ge.webkit_version<604;function bo(t){return 0==t.openStart&&0==t.openEnd&&1==t.content.childCount?t.content.firstChild:null}function wo(t,e){var n=t.dom.ownerDocument,r=t.shiftKey||t.state.selection.$from.parent.type.spec.code,o=n.body.appendChild(n.createElement(r?"textarea":"div"));r||(o.contentEditable="true"),o.style.cssText="position: fixed; left: -10000px; top: 10px",o.focus(),setTimeout((function(){t.focus(),n.body.removeChild(o),r?xo(t,o.value,null,e):xo(t,o.textContent,o.innerHTML,e)}),50)}function xo(t,e,n,r){var o=_r(t,e,n,t.shiftKey,t.state.selection.$from);if(!t.someProp("handlePaste",(function(e){return e(t,r,o||y.empty)}))&&o){var i=bo(o),s=i?t.state.tr.replaceSelectionWith(i,t.shiftKey):t.state.tr.replaceSelection(o);t.dispatch(s.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Wr.copy=Jr.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){var o=yo?null:e.clipboardData,i=n.content(),s=Or(t,i),a=s.dom,c=s.text;o?(e.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",c)):go(t,a),r&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Jr.paste=function(t,e){var n=yo?null:e.clipboardData,r=n&&n.getData("text/html"),o=n&&n.getData("text/plain");n&&(r||o||n.files.length)?(xo(t,o,r,e),e.preventDefault()):wo(t,e)};var So=function(t,e){this.slice=t,this.move=e},ko=ge.mac?"altKey":"ctrlKey";for(var Co in Wr.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r=t.state.selection,o=r.empty?null:t.posAtCoords(Qr(e));if(o&&o.pos>=r.from&&o.pos<=(r instanceof a["NodeSelection"]?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(a["NodeSelection"].create(t.state.doc,n.mightDrag.pos)));else if(e.target&&1==e.target.nodeType){var i=t.docView.nearestDesc(e.target,!0);if(!i||!i.node.type.spec.draggable||i==t.docView)return;t.dispatch(t.state.tr.setSelection(a["NodeSelection"].create(t.state.doc,i.posBefore)))}var s=t.state.selection.content(),c=Or(t,s),l=c.dom,u=c.text;e.dataTransfer.clearData(),e.dataTransfer.setData(yo?"Text":"text/html",l.innerHTML),yo||e.dataTransfer.setData("text/plain",u),t.dragging=new So(s,!e[ko])}},Wr.dragend=function(t){window.setTimeout((function(){return t.dragging=null}),50)},Jr.dragover=Jr.dragenter=function(t,e){return e.preventDefault()},Jr.drop=function(t,e){var n=t.dragging;if(t.dragging=null,e.dataTransfer){var r=t.posAtCoords(Qr(e));if(r){var o=t.state.doc.resolve(r.pos);if(o){var i=n&&n.slice||_r(t,e.dataTransfer.getData(yo?"Text":"text/plain"),yo?null:e.dataTransfer.getData("text/html"),!1,o);if(t.someProp("handleDrop",(function(r){return r(t,e,i||y.empty,n&&n.move)})))e.preventDefault();else if(i){e.preventDefault();var s=i?ee(t.state.doc,o.pos,i):o.pos;null==s&&(s=o.pos);var c=t.state.tr;n&&n.move&&c.deleteSelection();var l=c.mapping.map(s),u=0==i.openStart&&0==i.openEnd&&1==i.content.childCount,p=c.doc;if(u?c.replaceRangeWith(l,l,i.content.firstChild):c.replaceRange(l,l,i),!c.doc.eq(p)){var f=c.doc.resolve(l);u&&a["NodeSelection"].isSelectable(i.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(i.content.firstChild)?c.setSelection(new a["NodeSelection"](f)):c.setSelection(hr(t,f,c.doc.resolve(c.mapping.map(s)))),t.focus(),t.dispatch(c.setMeta("uiEvent","drop"))}}}}}},Wr.focus=function(t){t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout((function(){t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.root.getSelection())&&or(t)}),20))},Wr.blur=function(t){t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),t.domObserver.currentSelection.set({}),t.focused=!1)},Wr.beforeinput=function(t,e){if(ge.chrome&&ge.android&&"deleteContentBackward"==e.inputType){var n=t.domChangeCount;setTimeout((function(){if(t.domChangeCount==n&&(t.dom.blur(),t.focus(),!t.someProp("handleKeyDown",(function(e){return e(t,Pe(8,"Backspace"))})))){var e=t.state.selection,r=e.$cursor;r&&r.pos>0&&t.dispatch(t.state.tr.delete(r.pos-1,r.pos).scrollIntoView())}}),50)}},Jr)Wr[Co]=Jr[Co];function Oo(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}var _o=function(t,e){this.spec=e||Do,this.side=this.spec.side||0,this.toDOM=t};_o.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,this.side<0?-1:1),i=o.pos,s=o.deleted;return s?null:new To(i-n,i-n,this)},_o.prototype.valid=function(){return!0},_o.prototype.eq=function(t){return this==t||t instanceof _o&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Oo(this.spec,t.spec))};var Mo=function(t,e){this.spec=e||Do,this.attrs=t};Mo.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.spec.inclusiveStart?-1:1)-n,i=t.map(e.to+r,this.spec.inclusiveEnd?1:-1)-n;return o>=i?null:new To(o,i,this)},Mo.prototype.valid=function(t,e){return e.from<e.to},Mo.prototype.eq=function(t){return this==t||t instanceof Mo&&Oo(this.attrs,t.attrs)&&Oo(this.spec,t.spec)},Mo.is=function(t){return t.type instanceof Mo};var Eo=function(t,e){this.spec=e||Do,this.attrs=t};Eo.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new To(o.pos-n,i.pos-n,this)},Eo.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},Eo.prototype.eq=function(t){return this==t||t instanceof Eo&&Oo(this.attrs,t.attrs)&&Oo(this.spec,t.spec)};var To=function(t,e,n){this.from=t,this.to=e,this.type=n},No={spec:{configurable:!0}};To.prototype.copy=function(t,e){return new To(t,e,this.type)},To.prototype.eq=function(t,e){return void 0===e&&(e=0),this.type.eq(t.type)&&this.from+e==t.from&&this.to+e==t.to},To.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},To.widget=function(t,e,n){return new To(t,t,new _o(e,n))},To.inline=function(t,e,n,r){return new To(t,e,new Mo(n,r))},To.node=function(t,e,n,r){return new To(t,e,new Eo(n,r))},No.spec.get=function(){return this.type.spec},Object.defineProperties(To.prototype,No);var Ao=[],Do={},Po=function(t,e){this.local=t&&t.length?t:Ao,this.children=e&&e.length?e:Ao};Po.create=function(t,e){return e.length?Lo(e,t,0,Do):zo},Po.prototype.find=function(t,e,n){var r=[];return this.findInner(null==t?0:t,null==e?1e9:e,r,0,n),r},Po.prototype.findInner=function(t,e,n,r,o){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=e&&s.to>=t&&(!o||o(s.spec))&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<e&&this.children[a+1]>t){var c=this.children[a]+1;this.children[a+2].findInner(t-c,e-c,n,r+c,o)}},Po.prototype.map=function(t,e,n){return this==zo||0==t.maps.length?this:this.mapInner(t,e,0,0,n||Do)},Po.prototype.mapInner=function(t,e,n,r,o){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(t,n,r);a&&a.type.valid(e,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[s].spec)}return this.children.length?Io(this.children,i,t,e,n,r,o):i?new Po(i.sort(Vo)):zo},Po.prototype.add=function(t,e){return e.length?this==zo?Po.create(t,e):this.addInner(t,e,0):this},Po.prototype.addInner=function(t,e,n){var r,o=this,i=0;t.forEach((function(t,s){var a,c=s+n;if(a=Bo(e,t,c)){r||(r=o.children.slice());while(i<r.length&&r[i]<s)i+=3;r[i]==s?r[i+2]=r[i+2].addInner(t,a,c+1):r.splice(i,0,s,s+t.nodeSize,Lo(a,t,c+1,Do)),i+=3}}));var s=jo(i?$o(e):e,-n);return new Po(s.length?this.local.concat(s).sort(Vo):this.local,r||this.children)},Po.prototype.remove=function(t){return 0==t.length||this==zo?this:this.removeInner(t,0)},Po.prototype.removeInner=function(t,e){for(var n=this.children,r=this.local,o=0;o<n.length;o+=3){for(var i=void 0,s=n[o]+e,a=n[o+1]+e,c=0,l=void 0;c<t.length;c++)(l=t[c])&&l.from>s&&l.to<a&&(t[c]=null,(i||(i=[])).push(l));if(i){n==this.children&&(n=this.children.slice());var u=n[o+2].removeInner(i,s+1);u!=zo?n[o+2]=u:(n.splice(o,3),o-=3)}}if(r.length)for(var p=0,f=void 0;p<t.length;p++)if(f=t[p])for(var h=0;h<r.length;h++)r[h].eq(f,e)&&(r==this.local&&(r=this.local.slice()),r.splice(h--,1));return n==this.children&&r==this.local?this:r.length||n.length?new Po(r,n):zo},Po.prototype.forChild=function(t,e){if(this==zo)return this;if(e.isLeaf)return Po.empty;for(var n,r,o=0;o<this.children.length;o+=3)if(this.children[o]>=t){this.children[o]==t&&(n=this.children[o+2]);break}for(var i=t+1,s=i+e.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof Mo){var l=Math.max(i,c.from)-i,u=Math.min(s,c.to)-i;l<u&&(r||(r=[])).push(c.copy(l,u))}}if(r){var p=new Po(r.sort(Vo));return n?new Ro([p,n]):p}return n||zo},Po.prototype.eq=function(t){if(this==t)return!0;if(!(t instanceof Po)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var e=0;e<this.local.length;e++)if(!this.local[e].eq(t.local[e]))return!1;for(var n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0},Po.prototype.locals=function(t){return qo(this.localsInner(t))},Po.prototype.localsInner=function(t){if(this==zo)return Ao;if(t.inlineContent||!this.local.some(Mo.is))return this.local;for(var e=[],n=0;n<this.local.length;n++)this.local[n].type instanceof Mo||e.push(this.local[n]);return e};var zo=new Po;Po.empty=zo,Po.removeOverlap=qo;var Ro=function(t){this.members=t};function Io(t,e,n,r,o,i,s){for(var a=t.slice(),c=function(t,e,n,r){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||t>c+i||(e>=a[s]+i?a[s+1]=-1:n>=o&&(l=r-n-(e-t))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<n.maps.length;l++)n.maps[l].forEach(c);for(var u=!1,p=0;p<a.length;p+=3)if(-1==a[p+1]){var f=n.map(a[p]+i),h=f-o;if(h<0||h>=r.content.size){u=!0;continue}var d=n.map(t[p+1]+i,-1),m=d-o,v=r.content.findIndex(h),g=v.index,y=v.offset,b=r.maybeChild(g);if(b&&y==h&&y+b.nodeSize==m){var w=a[p+2].mapInner(n,b,f+1,a[p]+i+1,s);w!=zo?(a[p]=h,a[p+1]=m,a[p+2]=w):(a[p+1]=-2,u=!0)}else u=!0}if(u){var x=Fo(a,t,e||[],n,o,i,s),S=Lo(x,r,0,s);e=S.local;for(var k=0;k<a.length;k+=3)a[k+1]<0&&(a.splice(k,3),k-=3);for(var C=0,O=0;C<S.children.length;C+=3){var _=S.children[C];while(O<a.length&&a[O]<_)O+=3;a.splice(O,0,S.children[C],S.children[C+1],S.children[C+2])}}return new Po(e&&e.sort(Vo),a)}function jo(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new To(o.from+e,o.to+e,o.type))}return n}function Fo(t,e,n,r,o,i,s){function a(t,e){for(var i=0;i<t.local.length;i++){var c=t.local[i].map(r,o,e);c?n.push(c):s.onRemove&&s.onRemove(t.local[i].spec)}for(var l=0;l<t.children.length;l+=3)a(t.children[l+2],t.children[l]+e+1)}for(var c=0;c<t.length;c+=3)-1==t[c+1]&&a(t[c+2],e[c]+i+1);return n}function Bo(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function $o(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function Lo(t,e,n,r){var o=[],i=!1;e.forEach((function(e,s){var a=Bo(t,e,s+n);if(a){i=!0;var c=Lo(a,e,n+s+1,r);c!=zo&&o.push(s,s+e.nodeSize,c)}}));for(var s=jo(i?$o(t):t,-n).sort(Vo),a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new Po(s,o):zo}function Vo(t,e){return t.from-e.from||t.to-e.to}function qo(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),Wo(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),Wo(e,o+1,i.copy(r.to,i.to)))}}return e}function Wo(t,e,n){while(e<t.length&&Vo(n,t[e])>0)e++;t.splice(e,0,n)}function Jo(t){var e=[];return t.someProp("decorations",(function(n){var r=n(t.state);r&&r!=zo&&e.push(r)})),t.cursorWrapper&&e.push(Po.create(t.state.doc,[t.cursorWrapper.deco])),Ro.from(e)}Ro.prototype.forChild=function(t,e){if(e.isLeaf)return Po.empty;for(var n=[],r=0;r<this.members.length;r++){var o=this.members[r].forChild(t,e);o!=zo&&(o instanceof Ro?n=n.concat(o.members):n.push(o))}return Ro.from(n)},Ro.prototype.eq=function(t){if(!(t instanceof Ro)||t.members.length!=this.members.length)return!1;for(var e=0;e<this.members.length;e++)if(!this.members[e].eq(t.members[e]))return!1;return!0},Ro.prototype.locals=function(t){for(var e,n=!0,r=0;r<this.members.length;r++){var o=this.members[r].localsInner(t);if(o.length)if(e){n&&(e=e.slice(),n=!1);for(var i=0;i<o.length;i++)e.push(o[i])}else e=o}return e?qo(n?e:e.sort(Vo)):Ao},Ro.from=function(t){switch(t.length){case 0:return zo;case 1:return t[0];default:return new Ro(t)}};var Ho=function(t,e){this._props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):t.apply?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Xo(this),this.markCursor=null,this.cursorWrapper=null,Go(this),this.nodeViews=Yo(this),this.docView=xn(this.state.doc,Ko(this),Jo(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Hr(this),this.pluginViews=[],this.updatePluginViews()},Uo={props:{configurable:!0},root:{configurable:!0}};function Ko(t){var e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",(function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e.class+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))})),[To.node(0,t.state.doc.content.size,e)]}function Go(t){if(t.markCursor){var e=document.createElement("img");e.setAttribute("mark-placeholder","true"),t.cursorWrapper={dom:e,deco:To.widget(t.state.selection.head,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Xo(t){return!t.someProp("editable",(function(e){return!1===e(t.state)}))}function Zo(t,e){var n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Yo(t){var e={};return t.someProp("nodeViews",(function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])})),e}function Qo(t,e){var n=0,r=0;for(var o in t){if(t[o]!=e[o])return!0;n++}for(var i in e)r++;return n!=r}function ti(t){var e=t.getSelection(),n=e.focusOffset,r=e.focusNode;return r&&1==r.nodeType?[r,n,r.childNodes[n-1],r.childNodes[n]]:null}function ei(t,e){var n=ti(e);if(!n||3==n[0].nodeType)return!1;for(var r=0;r<t.length;r++)if(n[r]!=t[r])return!0;return!1}Uo.props.get=function(){if(this._props.state!=this.state){var t=this._props;for(var e in this._props={},t)this._props[e]=t[e];this._props.state=this.state}return this._props},Ho.prototype.update=function(t){t.handleDOMEvents!=this._props.handleDOMEvents&&Gr(this),this._props=t,this.updateStateInner(t.state,!0)},Ho.prototype.setProps=function(t){var e={};for(var n in this._props)e[n]=this._props[n];for(var r in e.state=this.state,t)e[r]=t[r];this.update(e)},Ho.prototype.updateState=function(t){this.updateStateInner(t,this.state.plugins!=t.plugins)},Ho.prototype.updateStateInner=function(t,e){var n=this,r=this.state,o=!1;if(this.state=t,e){var i=Yo(this);Qo(i,this.nodeViews)&&(this.nodeViews=i,o=!0),Gr(this)}this.editable=Xo(this),Go(this);var s=Jo(this),c=Ko(this),l=e?"reset":t.scrollToSelection>r.scrollToSelection?"to selection":"preserve",u=o||!this.docView.matchesNode(t.doc,c,s),p=u||!t.selection.eq(r.selection),f="preserve"==l&&p&&null==this.dom.style.overflowAnchor&&je(this);if(p){this.domObserver.stop();var h=u&&(ge.ie||ge.chrome)&&!this.composing&&!r.selection.empty&&!t.selection.empty&&Zo(r.selection,t.selection);if(u){var d=ge.chrome&&ti(this.root);!o&&this.docView.update(t.doc,c,s,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=xn(t.doc,c,s,this.dom,this)),d&&ei(d,this.root)&&(h=!0)}h||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&vr(this))?or(this,h):(pr(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(r),"reset"==l)this.dom.scrollTop=0;else if("to selection"==l){var m=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",(function(t){return t(n)}))||(t.selection instanceof a["NodeSelection"]?Ie(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),m):Ie(this,this.coordsAtPos(t.selection.head),m))}else f&&Be(f)},Ho.prototype.destroyPluginViews=function(){var t;while(t=this.pluginViews.pop())t.destroy&&t.destroy()},Ho.prototype.updatePluginViews=function(t){if(t&&t.plugins==this.state.plugins)for(var e=0;e<this.pluginViews.length;e++){var n=this.pluginViews[e];n.update&&n.update(this,t)}else{this.destroyPluginViews();for(var r=0;r<this.state.plugins.length;r++){var o=this.state.plugins[r];o.spec.view&&this.pluginViews.push(o.spec.view(this))}}},Ho.prototype.someProp=function(t,e){var n,r=this._props&&this._props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},Ho.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Ho.prototype.focus=function(){this.domObserver.stop(),this.editable&&Ve(this.dom),or(this),this.domObserver.start()},Uo.root.get=function(){var t=this._root;if(null==t)for(var e=this.dom.parentNode;e;e=e.parentNode)if(9==e.nodeType||11==e.nodeType&&e.host)return e.getSelection||(Object.getPrototypeOf(e).getSelection=function(){return document.getSelection()}),this._root=e;return t||document},Ho.prototype.posAtCoords=function(t){return Xe(this,t)},Ho.prototype.coordsAtPos=function(t){return Ye(this,t)},Ho.prototype.domAtPos=function(t){return this.docView.domFromPos(t)},Ho.prototype.nodeDOM=function(t){var e=this.docView.descAt(t);return e?e.nodeDOM:null},Ho.prototype.posAtDOM=function(t,e,n){void 0===n&&(n=-1);var r=this.docView.posFromDOM(t,e,n);if(null==r)throw new RangeError("DOM position not inside the editor");return r},Ho.prototype.endOfTextblock=function(t,e){return ln(this,e||this.state,t)},Ho.prototype.destroy=function(){this.docView&&(Kr(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Jo(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Ho.prototype.dispatchEvent=function(t){return Yr(this,t)},Ho.prototype.dispatch=function(t){var e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))},Object.defineProperties(Ho.prototype,Uo);var ni=n("986d"),ri=n("55be"),oi=n("a15f");function ii(t,e,n){for(var r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;var o=t.child(r),i=e.child(r);if(o!=i){if(!o.sameMarkup(i))return n;if(o.isText&&o.text!=i.text){for(var s=0;o.text[s]==i.text[s];s++)n++;return n}if(o.content.size||i.content.size){var a=ii(o.content,i.content,n+1);if(null!=a)return a}n+=o.nodeSize}else n+=o.nodeSize}}function si(t,e,n,r){for(var o=t.childCount,i=e.childCount;;){if(0==o||0==i)return o==i?null:{a:n,b:r};var s=t.child(--o),a=e.child(--i),c=s.nodeSize;if(s!=a){if(!s.sameMarkup(a))return{a:n,b:r};if(s.isText&&s.text!=a.text){var l=0,u=Math.min(s.text.length,a.text.length);while(l<u&&s.text[s.text.length-l-1]==a.text[a.text.length-l-1])l++,n--,r--;return{a:n,b:r}}if(s.content.size||a.content.size){var p=si(s.content,a.content,n-1,r-1);if(p)return p}n-=c,r-=c}else n-=c,r-=c}}var ai=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize},ci={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};ai.prototype.nodesBetween=function(t,e,n,r,o){void 0===r&&(r=0);for(var i=0,s=0;s<e;i++){var a=this.content[i],c=s+a.nodeSize;if(c>t&&!1!==n(a,r+s,o,i)&&a.content.size){var l=s+1;a.nodesBetween(Math.max(0,t-l),Math.min(a.content.size,e-l),n,r+l)}s=c}},ai.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},ai.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,(function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)}),0),o},ai.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new ai(r,this.size+t.size)},ai.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,i=0;i<e;o++){var s=this.content[o],a=i+s.nodeSize;a>t&&((i<t||a>e)&&(s=s.isText?s.cut(Math.max(0,t-i),Math.min(s.text.length,e-i)):s.cut(Math.max(0,t-i-1),Math.min(s.content.size,e-i-1))),n.push(s),r+=s.nodeSize),i=a}return new ai(n,r)},ai.prototype.cutByIndex=function(t,e){return t==e?ai.empty:0==t&&e==this.content.length?this:new ai(this.content.slice(t,e))},ai.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new ai(r,o)},ai.prototype.addToStart=function(t){return new ai([t].concat(this.content),this.size+t.nodeSize)},ai.prototype.addToEnd=function(t){return new ai(this.content.concat(t),this.size+t.nodeSize)},ai.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},ci.firstChild.get=function(){return this.content.length?this.content[0]:null},ci.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},ci.childCount.get=function(){return this.content.length},ai.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},ai.prototype.maybeChild=function(t){return this.content[t]},ai.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},ai.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),ii(this,t,e)},ai.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),si(this,t,e,n)},ai.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return ui(0,t);if(t==this.size)return ui(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var o=this.child(n),i=r+o.nodeSize;if(i>=t)return i==t||e>0?ui(n+1,i):ui(n,r);r=i}},ai.prototype.toString=function(){return"<"+this.toStringInner()+">"},ai.prototype.toStringInner=function(){return this.content.join(", ")},ai.prototype.toJSON=function(){return this.content.length?this.content.map((function(t){return t.toJSON()})):null},ai.fromJSON=function(t,e){if(!e)return ai.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new ai(e.map(t.nodeFromJSON))},ai.fromArray=function(t){if(!t.length)return ai.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new ai(e||t,n)},ai.from=function(t){if(!t)return ai.empty;if(t instanceof ai)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ai([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(ai.prototype,ci);var li={index:0,offset:0};function ui(t,e){return li.index=t,li.offset=e,li}function pi(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!pi(t[r],e[r]))return!1}else{for(var o in t)if(!(o in e)||!pi(t[o],e[o]))return!1;for(var i in e)if(!(i in t))return!1}return!0}ai.empty=new ai([],0);var fi=function(t,e){this.type=t,this.attrs=e};function hi(t){var e=Error.call(this,t);return e.__proto__=hi.prototype,e}fi.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var o=t[r];if(this.eq(o))return t;if(this.type.excludes(o.type))e||(e=t.slice(0,r));else{if(o.type.excludes(this.type))return t;!n&&o.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(o)}}return e||(e=t.slice()),n||e.push(this),e},fi.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},fi.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},fi.prototype.eq=function(t){return this==t||this.type==t.type&&pi(this.attrs,t.attrs)},fi.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},fi.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},fi.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},fi.setFrom=function(t){if(!t||0==t.length)return fi.none;if(t instanceof fi)return[t];var e=t.slice();return e.sort((function(t,e){return t.type.rank-e.type.rank})),e},fi.none=[],hi.prototype=Object.create(Error.prototype),hi.prototype.constructor=hi,hi.prototype.name="ReplaceError";var di=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n},mi={size:{configurable:!0}};function vi(t,e,n){var r=t.findIndex(e),o=r.index,i=r.offset,s=t.maybeChild(o),a=t.findIndex(n),c=a.index,l=a.offset;if(i==e||s.isText){if(l!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(o!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(o,s.copy(vi(s.content,e-i-1,n-i-1)))}function gi(t,e,n,r){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i);if(s==e||a.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));var c=gi(a.content,e-s-1,n);return c&&t.replaceChild(i,a.copy(c))}function yi(t,e,n){if(n.openStart>t.depth)throw new hi("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new hi("Inconsistent open depths");return bi(t,e,n,0)}function bi(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){var s=bi(t,e,n,r+1);return i.copy(i.content.replaceChild(o,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=Mi(n,t),c=a.start,l=a.end;return Ci(i,Oi(t,c,l,e,r))}var u=t.parent,p=u.content;return Ci(u,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return Ci(i,_i(t,e,r))}function wi(t,e){if(!e.type.compatibleContent(t.type))throw new hi("Cannot join "+e.type.name+" onto "+t.type.name)}function xi(t,e,n){var r=t.node(n);return wi(r,e.node(n)),r}function Si(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ki(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(Si(t.nodeAfter,r),i++));for(var a=i;a<s;a++)Si(o.child(a),r);e&&e.depth==n&&e.textOffset&&Si(e.nodeBefore,r)}function Ci(t,e){if(!t.type.validContent(e))throw new hi("Invalid content for node "+t.type.name);return t.copy(e)}function Oi(t,e,n,r,o){var i=t.depth>o&&xi(t,e,o+1),s=r.depth>o&&xi(n,r,o+1),a=[];return ki(null,t,o,a),i&&s&&e.index(o)==n.index(o)?(wi(i,s),Si(Ci(i,Oi(t,e,n,r,o+1)),a)):(i&&Si(Ci(i,_i(t,e,o+1)),a),ki(e,n,o,a),s&&Si(Ci(s,_i(n,r,o+1)),a)),ki(r,null,o,a),new ai(a)}function _i(t,e,n){var r=[];if(ki(null,t,n,r),t.depth>n){var o=xi(t,e,n+1);Si(Ci(o,_i(t,e,n+1)),r)}return ki(e,null,n,r),new ai(r)}function Mi(t,e){for(var n=e.depth-t.openStart,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(ai.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}mi.size.get=function(){return this.content.size-this.openStart-this.openEnd},di.prototype.insertAt=function(t,e){var n=gi(this.content,t+this.openStart,e,null);return n&&new di(n,this.openStart,this.openEnd)},di.prototype.removeBetween=function(t,e){return new di(vi(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},di.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},di.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},di.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},di.fromJSON=function(t,e){if(!e)return di.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new di(ai.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},di.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,o=t.firstChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.firstChild)n++;for(var i=t.lastChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.lastChild)r++;return new di(t,n,r)},Object.defineProperties(di.prototype,mi),di.empty=new di(ai.empty,0,0);var Ei=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},Ti={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};Ei.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},Ti.parent.get=function(){return this.node(this.depth)},Ti.doc.get=function(){return this.node(0)},Ei.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},Ei.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},Ei.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},Ei.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},Ei.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},Ei.prototype.before=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},Ei.prototype.after=function(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},Ti.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},Ti.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},Ti.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},Ei.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return fi.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var o=n;n=r,r=o}for(var i=n.marks,s=0;s<i.length;s++)!1!==i[s].type.spec.inclusive||r&&i[s].isInSet(r.marks)||(i=i[s--].removeFromSet(i));return i},Ei.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),o=0;o<n.length;o++)!1!==n[o].type.spec.inclusive||r&&n[o].isInSet(r.marks)||(n=n[o--].removeFromSet(n));return n},Ei.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},Ei.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new Pi(this,t,n)},Ei.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},Ei.prototype.max=function(t){return t.pos>this.pos?t:this},Ei.prototype.min=function(t){return t.pos<this.pos?t:this},Ei.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},Ei.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,i=t;;){var s=i.content.findIndex(o),a=s.index,c=s.offset,l=o-c;if(n.push(i,a,r+c),!l)break;if(i=i.child(a),i.isText)break;o=l-1,r+=c+1}return new Ei(e,n,o)},Ei.resolveCached=function(t,e){for(var n=0;n<Ni.length;n++){var r=Ni[n];if(r.pos==e&&r.doc==t)return r}var o=Ni[Ai]=Ei.resolve(t,e);return Ai=(Ai+1)%Di,o},Object.defineProperties(Ei.prototype,Ti);var Ni=[],Ai=0,Di=12,Pi=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},zi={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};zi.start.get=function(){return this.$from.before(this.depth+1)},zi.end.get=function(){return this.$to.after(this.depth+1)},zi.parent.get=function(){return this.$from.node(this.depth)},zi.startIndex.get=function(){return this.$from.index(this.depth)},zi.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(Pi.prototype,zi);var Ri=Object.create(null),Ii=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||ai.empty,this.marks=r||fi.none},ji={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ji.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},ji.childCount.get=function(){return this.content.childCount},Ii.prototype.child=function(t){return this.content.child(t)},Ii.prototype.maybeChild=function(t){return this.content.maybeChild(t)},Ii.prototype.forEach=function(t){this.content.forEach(t)},Ii.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},Ii.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},ji.textContent.get=function(){return this.textBetween(0,this.content.size,"")},Ii.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},ji.firstChild.get=function(){return this.content.firstChild},ji.lastChild.get=function(){return this.content.lastChild},Ii.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},Ii.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},Ii.prototype.hasMarkup=function(t,e,n){return this.type==t&&pi(this.attrs,e||t.defaultAttrs||Ri)&&fi.sameSet(this.marks,n||fi.none)},Ii.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},Ii.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},Ii.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},Ii.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return di.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new di(c,r.depth-i,o.depth-i)},Ii.prototype.replace=function(t,e,n){return yi(this.resolve(t),this.resolve(e),n)},Ii.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(e=e.maybeChild(r),!e)return null;if(o==t||e.isText)return e;t-=o+1}},Ii.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},Ii.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},Ii.prototype.resolve=function(t){return Ei.resolveCached(this,t)},Ii.prototype.resolveNoCache=function(t){return Ei.resolve(this,t)},Ii.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,(function(t){return n.isInSet(t.marks)&&(r=!0),!r})),r},ji.isBlock.get=function(){return this.type.isBlock},ji.isTextblock.get=function(){return this.type.isTextblock},ji.inlineContent.get=function(){return this.type.inlineContent},ji.isInline.get=function(){return this.type.isInline},ji.isText.get=function(){return this.type.isText},ji.isLeaf.get=function(){return this.type.isLeaf},ji.isAtom.get=function(){return this.type.isAtom},Ii.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),Bi(this.marks,t)},Ii.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},Ii.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=ai.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var i=this.contentMatchAt(t).matchFragment(n,r,o),s=i&&i.matchFragment(this.content,e);if(!s||!s.validEnd)return!1;for(var a=r;a<o;a++)if(!this.type.allowsMarks(n.child(a).marks))return!1;return!0},Ii.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var o=this.contentMatchAt(t).matchType(n),i=o&&o.matchFragment(this.content,e);return!!i&&i.validEnd},Ii.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},Ii.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach((function(t){return t.check()}))},Ii.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map((function(t){return t.toJSON()}))),t},Ii.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=ai.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(Ii.prototype,ji);var Fi=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Bi(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(Ii);function Bi(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var $i=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]},Li={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};$i.parse=function(t,e){var n=new Vi(t,e);if(null==n.next)return $i.empty;var r=Wi(n);n.next&&n.err("Unexpected trailing text");var o=ts(Zi(r));return es(o,n),o},$i.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},$i.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,o=e;r&&o<n;o++)r=r.matchType(t.child(o).type);return r},Li.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},Li.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},$i.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},$i.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];function o(i,s){var a=i.matchFragment(t,n);if(a&&(!e||a.validEnd))return ai.from(s.map((function(t){return t.createAndFill()})));for(var c=0;c<i.next.length;c+=2){var l=i.next[c],u=i.next[c+1];if(!l.isText&&!l.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var p=o(u,s.concat(l));if(p)return p}}}return o(this,[])},$i.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},$i.prototype.computeWrapping=function(t){var e=Object.create(null),n=[{match:this,type:null,via:null}];while(n.length){var r=n.shift(),o=r.match;if(o.matchType(t)){for(var i=[],s=r;s.type;s=s.via)i.push(s.type);return i.reverse()}for(var a=0;a<o.next.length;a+=2){var c=o.next[a];c.isLeaf||c.hasRequiredAttrs()||c.name in e||r.type&&!o.next[a+1].validEnd||(n.push({match:c.contentMatch,type:c,via:r}),e[c.name]=!0)}}},Li.edgeCount.get=function(){return this.next.length>>1},$i.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},$i.prototype.toString=function(){var t=[];function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}return e(this),t.map((function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",o=0;o<e.next.length;o+=2)r+=(o?", ":"")+e.next[o].name+"->"+t.indexOf(e.next[o+1]);return r})).join("\n")},Object.defineProperties($i.prototype,Li),$i.empty=new $i(!0);var Vi=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},qi={next:{configurable:!0}};function Wi(t){var e=[];do{e.push(Ji(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function Ji(t){var e=[];do{e.push(Hi(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function Hi(t){for(var e=Xi(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=Ki(t,e)}return e}function Ui(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function Ki(t,e){var n=Ui(t),r=n;return t.eat(",")&&(r="}"!=t.next?Ui(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function Gi(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var o=[];for(var i in n){var s=n[i];s.groups.indexOf(e)>-1&&o.push(s)}return 0==o.length&&t.err("No node type or group '"+e+"' found"),o}function Xi(t){if(t.eat("(")){var e=Wi(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=Gi(t,t.next).map((function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}}));return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function Zi(t){var e=[[]];return o(i(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var o={term:r,to:n};return e[t].push(o),o}function o(t,e){t.forEach((function(t){return t.to=e}))}function i(t,e){if("choice"==t.type)return t.exprs.reduce((function(t,n){return t.concat(i(n,e))}),[]);if("seq"==t.type)for(var s=0;;s++){var a=i(t.exprs[s],e);if(s==t.exprs.length-1)return a;o(a,e=n())}else{if("star"==t.type){var c=n();return r(e,c),o(i(t.expr,c),c),[r(c)]}if("plus"==t.type){var l=n();return o(i(t.expr,e),l),o(i(t.expr,l),l),[r(l)]}if("opt"==t.type)return[r(e)].concat(i(t.expr,e));if("range"==t.type){for(var u=e,p=0;p<t.min;p++){var f=n();o(i(t.expr,u),f),u=f}if(-1==t.max)o(i(t.expr,u),u);else for(var h=t.min;h<t.max;h++){var d=n();r(u,d),o(i(t.expr,u),d),u=d}return[r(u)]}if("name"==t.type)return[r(e,null,t.value)]}}}function Yi(t,e){return e-t}function Qi(t,e){var n=[];return r(e),n.sort(Yi);function r(e){var o=t[e];if(1==o.length&&!o[0].term)return r(o[0].to);n.push(e);for(var i=0;i<o.length;i++){var s=o[i],a=s.term,c=s.to;a||-1!=n.indexOf(c)||r(c)}}}function ts(t){var e=Object.create(null);return n(Qi(t,0));function n(r){var o=[];r.forEach((function(e){t[e].forEach((function(e){var n=e.term,r=e.to;if(n){var i=o.indexOf(n),s=i>-1&&o[i+1];Qi(t,r).forEach((function(t){s||o.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)}))}}))}));for(var i=e[r.join(",")]=new $i(r.indexOf(t.length-1)>-1),s=0;s<o.length;s+=2){var a=o[s+1].sort(Yi);i.next.push(o[s],e[a.join(",")]||n(a))}return i}}function es(t,e){for(var n=0,r=[t];n<r.length;n++){for(var o=r[n],i=!o.validEnd,s=[],a=0;a<o.next.length;a+=2){var c=o.next[a],l=o.next[a+1];s.push(c.name),!i||c.isText||c.hasRequiredAttrs()||(i=!1),-1==r.indexOf(l)&&r.push(l)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function ns(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rs(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(void 0===o){var i=t[r];if(!i.hasDefault)throw new RangeError("No value supplied for attribute "+r);o=i.default}n[r]=o}return n}function os(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new as(t[n]);return e}qi.next.get=function(){return this.tokens[this.pos]},Vi.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},Vi.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(Vi.prototype,qi);var is=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=os(n.attrs),this.defaultAttrs=ns(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},ss={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};ss.isInline.get=function(){return!this.isBlock},ss.isTextblock.get=function(){return this.isBlock&&this.inlineContent},ss.isLeaf.get=function(){return this.contentMatch==$i.empty},ss.isAtom.get=function(){return this.isLeaf||this.spec.atom},is.prototype.hasRequiredAttrs=function(){for(var t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1},is.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},is.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:rs(this.attrs,t)},is.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ii(this,this.computeAttrs(t),ai.from(e),fi.setFrom(n))},is.prototype.createChecked=function(t,e,n){if(e=ai.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new Ii(this,this.computeAttrs(t),e,fi.setFrom(n))},is.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=ai.from(e),e.size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(ai.empty,!0);return o?new Ii(this,t,e.append(o),fi.setFrom(n)):null},is.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},is.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},is.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},is.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:fi.empty:t},is.compile=function(t,e){var n=Object.create(null);t.forEach((function(t,r){return n[t]=new is(t,e,r)}));var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var o in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(is.prototype,ss);var as=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},cs={isRequired:{configurable:!0}};cs.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(as.prototype,cs);var ls=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=os(r.attrs),this.rank=e,this.excluded=null;var o=ns(this.attrs);this.instance=o&&new fi(this,o)};ls.prototype.create=function(t){return!t&&this.instance?this.instance:new fi(this,rs(this.attrs,t))},ls.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach((function(t,o){return n[t]=new ls(t,r++,e,o)})),n},ls.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},ls.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},ls.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var us=function(t){for(var e in this.spec={},t)this.spec[e]=t[e];this.spec.nodes=c["a"].from(t.nodes),this.spec.marks=c["a"].from(t.marks),this.nodes=is.compile(this.spec.nodes,this),this.marks=ls.compile(this.spec.marks,this);var n=Object.create(null);for(var r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");var o=this.nodes[r],i=o.spec.content||"",s=o.spec.marks;o.contentMatch=n[i]||(n[i]=$i.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==s?null:s?ps(this,s.split(" ")):""!=s&&o.inlineContent?null:[]}for(var a in this.marks){var l=this.marks[a],u=l.spec.excludes;l.excluded=null==u?[l]:""==u?[]:ps(this,u.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ps(t,e){for(var n=[],r=0;r<e.length;r++){var o=e[r],i=t.marks[o],s=i;if(i)n.push(i);else for(var a in t.marks){var c=t.marks[a];("_"==o||c.spec.group&&c.spec.group.split(" ").indexOf(o)>-1)&&n.push(s=c)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}us.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof is))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},us.prototype.text=function(t,e){var n=this.nodes.text;return new Fi(n,n.defaultAttrs,t,fi.setFrom(e))},us.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},us.prototype.nodeFromJSON=function(t){return Ii.fromJSON(this,t)},us.prototype.markFromJSON=function(t){return fi.fromJSON(this,t)},us.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var fs=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach((function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})),this.normalizeLists=!this.tags.some((function(e){if(!/^(ul|ol)\b/.test(e.tag)||!e.node)return!1;var n=t.nodes[e.node];return n.contentMatch.matchType(n)}))};fs.prototype.parse=function(t,e){void 0===e&&(e={});var n=new xs(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},fs.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new xs(this,e,!0);return n.addAll(t,null,e.from,e.to),di.maxOpen(n.finish())},fs.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(Cs(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var o=r.getAttrs(t);if(!1===o)continue;r.attrs=o}return r}}},fs.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var o=this.styles[r];if(!(0!=o.style.indexOf(t)||o.context&&!n.matchesContext(o.context)||o.style.length>t.length&&(61!=o.style.charCodeAt(t.length)||o.style.slice(t.length+1)!=e))){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},fs.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var o=e[r],i=null==o.priority?50:o.priority;if(i<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach((function(t){n(t=_s(t)),t.mark=e}))};for(var o in t.marks)r(o);var i=function(e){var r=t.nodes[s].spec.parseDOM;r&&r.forEach((function(t){n(t=_s(t)),t.node=s}))};for(var s in t.nodes)i();return e},fs.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new fs(t,fs.schemaRules(t)))};var hs={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ds={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ms={ol:!0,ul:!0},vs=1,gs=2,ys=4;function bs(t){return(t?vs:0)|("full"===t?gs:0)}var ws=function(t,e,n,r,o,i,s){this.type=t,this.attrs=e,this.solid=o,this.match=i||(s&ys?null:t.contentMatch),this.options=s,this.content=[],this.marks=n,this.activeMarks=fi.none,this.pendingMarks=r};ws.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(ai.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},ws.prototype.finish=function(t){if(!(this.options&vs)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=ai.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(ai.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r},ws.prototype.applyPending=function(t){for(var e=0,n=this.pendingMarks;e<n.length;e++){var r=n[e];(this.type?this.type.allowsMarkType(r.type):Ms(r.type,t))&&!r.isInSet(this.activeMarks)&&(this.activeMarks=r.addToSet(this.activeMarks),this.pendingMarks=r.removeFromSet(this.pendingMarks))}};var xs=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=bs(e.preserveWhitespace)|(n?ys:0);r=o?new ws(o.type,o.attrs,fi.none,fi.none,!0,e.topMatch||o.type.contentMatch,i):new ws(n?null:t.schema.topNodeType,null,fi.none,fi.none,!0,null,i),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},Ss={top:{configurable:!0},currentPos:{configurable:!0}};function ks(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ms.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function Cs(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Os(t){var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];while(e=n.exec(t))r.push(e[1],e[2].trim());return r}function _s(t){var e={};for(var n in t)e[n]=t[n];return e}function Ms(t,e){var n=e.schema.nodes,r=function(r){var o=n[r];if(o.allowsMarkType(t)){var i=[],s=function(t){i.push(t);for(var n=0;n<t.edgeCount;n++){var r=t.edge(n),o=r.type,a=r.next;if(o==e)return!0;if(i.indexOf(a)<0&&s(a))return!0}};return s(o.contentMatch)?{v:!0}:void 0}};for(var o in n){var i=r(o);if(i)return i.v}}Ss.top.get=function(){return this.nodes[this.open]},xs.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(Os(e)):null,r=this.top;if(null!=n)for(var o=0;o<n.length;o++)this.addPendingMark(n[o]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i],r)}},xs.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&vs)n.options&gs||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],o=t.previousSibling;(!r||o&&"BR"==o.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},xs.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();ms.hasOwnProperty(e)&&this.normalizeLists&&ks(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ds.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip||n.closeParent){n&&n.closeParent?this.open=Math.max(0,this.open-1):n&&n.skip.nodeType&&(t=n.skip);var r,o=this.top,i=this.needsBlock;if(hs.hasOwnProperty(e))r=!0,o.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(o),this.needsBlock=i}else this.addElementByRule(t,n)},xs.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},xs.prototype.readStyles=function(t){for(var e=fi.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},xs.prototype.addElementByRule=function(t,e){var n,r,o,i,s=this;e.node?(r=this.parser.schema.nodes[e.node],r.isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace)):(o=this.parser.schema.marks[e.mark],i=o.create(e.attrs),this.addPendingMark(i));var a=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach((function(t){return s.insertNode(t)}));else{var c=e.contentElement;"string"==typeof c?c=t.querySelector(c):"function"==typeof c&&(c=c(t)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n)}n&&(this.sync(a),this.open--),i&&this.removePendingMark(i,a)},xs.prototype.addAll=function(t,e,n,r){for(var o=n||0,i=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];i!=s;i=i.nextSibling,++o)this.findAtPoint(t,o),this.addDOM(i),e&&hs.hasOwnProperty(i.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,o)},xs.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var o=this.nodes[r],i=o.findWrapping(t);if(i&&(!e||e.length>i.length)&&(e=i,n=o,!i.length))break;if(o.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},xs.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;n.applyPending(t.type),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,o=0;o<t.marks.length;o++)n.type&&!n.type.allowsMarkType(t.marks[o].type)||(r=t.marks[o].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},xs.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&this.enterInner(t,e,!0,n),r},xs.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.applyPending(t),o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&~ys:bs(r);o.options&ys&&0==o.content.length&&(i|=ys),this.nodes.push(new ws(t,e,o.activeMarks,o.pendingMarks,n,null,i)),this.open++},xs.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},xs.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},xs.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},Ss.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},xs.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},xs.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},xs.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++)if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node)){var o=e.compareDocumentPosition(this.find[r].node);o&(n?2:4)&&(this.find[r].pos=this.currentPos)}},xs.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},xs.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=function(t,a){for(;t>=0;t--){var c=n[t];if(""==c){if(t==n.length-1||0==t)continue;for(;a>=i;a--)if(s(t-1,a))return!0;return!1}var l=a>0||0==a&&o?e.nodes[a].type:r&&a>=i?r.node(a-i).type:null;if(!l||l.name!=c&&-1==l.groups.indexOf(c))return!1;a--}return!0};return s(n.length-1,this.open)},xs.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var o=this.parser.schema.nodes[r];if(o.isTextblock&&o.defaultAttrs)return o}},xs.prototype.addPendingMark=function(t){this.top.pendingMarks=t.addToSet(this.top.pendingMarks)},xs.prototype.removePendingMark=function(t,e){for(var n=this.open;n>=0;n--){var r=this.nodes[n],o=r.pendingMarks.lastIndexOf(t);if(o>-1?r.pendingMarks=t.removeFromSet(r.pendingMarks):r.activeMarks=t.removeFromSet(r.activeMarks),r==e)break}},Object.defineProperties(xs.prototype,Ss);var Es=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ts(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Ns(t){return t.document||window.document}Es.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Ns(e).createDocumentFragment());var o=n,i=null;return t.forEach((function(t){if(i||t.marks.length){i||(i=[]);var n=0,s=0;while(n<i.length&&s<t.marks.length){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(i[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}while(n<i.length)o=i.pop(),i.pop();while(s<t.marks.length){var c=t.marks[s++],l=r.serializeMark(c,t.isInline,e);l&&(i.push(c,o),o.appendChild(l.dom),o=l.contentDOM||l.dom)}}o.appendChild(r.serializeNode(t,e))})),n},Es.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Es.renderSpec(Ns(e),this.nodes[t.type.name](t)),r=n.dom,o=n.contentDOM;if(o){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,o,e):this.serializeFragment(t.content,e,o)}return r},Es.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var o=this.serializeMark(t.marks[r],t.isInline,e);o&&((o.contentDOM||o.dom).appendChild(n),n=o.dom)}return n},Es.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Es.renderSpec(Ns(n),r(t,e))},Es.renderSpec=function(t,e,n){if(void 0===n&&(n=null),"string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var r=e[0],o=r.indexOf(" ");o>0&&(n=r.slice(0,o),r=r.slice(o+1));var i=null,s=n?t.createElementNS(n,r):t.createElement(r),a=e[1],c=1;if(a&&"object"==typeof a&&null==a.nodeType&&!Array.isArray(a))for(var l in c=2,a)if(null!=a[l]){var u=l.indexOf(" ");u>0?s.setAttributeNS(l.slice(0,u),l.slice(u+1),a[l]):s.setAttribute(l,a[l])}for(var p=c;p<e.length;p++){var f=e[p];if(0===f){if(p<e.length-1||p>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:s,contentDOM:s}}var h=Es.renderSpec(t,f,n),d=h.dom,m=h.contentDOM;if(s.appendChild(d),m){if(i)throw new RangeError("Multiple content holes");i=m}}return{dom:s,contentDOM:i}},Es.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Es(this.nodesFromSchema(t),this.marksFromSchema(t)))},Es.nodesFromSchema=function(t){var e=Ts(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Es.marksFromSchema=function(t){return Ts(t.marks)};var As=65535,Ds=Math.pow(2,16);function Ps(t,e){return t+e*Ds}function zs(t){return t&As}function Rs(t){return(t-(t&As))/Ds}var Is=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n},js=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};js.prototype.recover=function(t){var e=0,n=zs(t);if(!this.inverted)for(var r=0;r<n;r++)e+=this.ranges[3*r+2]-this.ranges[3*r+1];return this.ranges[3*n]+e+Rs(t)},js.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},js.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},js.prototype._map=function(t,e,n){for(var r=0,o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?r:0);if(a>t)break;var c=this.ranges[s+o],l=this.ranges[s+i],u=a+c;if(t<=u){var p=c?t==a?-1:t==u?1:e:e,f=a+r+(p<0?0:l);if(n)return f;var h=Ps(s/3,t-a);return new Is(f,e<0?t!=a:t!=u,h)}r+=l-c}return n?t+r:new Is(t+r)},js.prototype.touches=function(t,e){for(var n=0,r=zs(e),o=this.inverted?2:1,i=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var a=this.ranges[s]-(this.inverted?n:0);if(a>t)break;var c=this.ranges[s+o],l=a+c;if(t<=l&&s==3*r)return!0;n+=this.ranges[s+i]-c}return!1},js.prototype.forEach=function(t){for(var e=this.inverted?2:1,n=this.inverted?1:2,r=0,o=0;r<this.ranges.length;r+=3){var i=this.ranges[r],s=i-(this.inverted?o:0),a=i+(this.inverted?0:o),c=this.ranges[r+e],l=this.ranges[r+n];t(s,s+c,a,a+l),o+=l-c}},js.prototype.invert=function(){return new js(this.ranges,!this.inverted)},js.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},js.offset=function(t){return 0==t?js.empty:new js(t<0?[0,-t,0]:[0,0,t])},js.empty=new js([]);var Fs=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};function Bs(t){var e=Error.call(this,t);return e.__proto__=Bs.prototype,e}Fs.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new Fs(this.maps,this.mirror,t,e)},Fs.prototype.copy=function(){return new Fs(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},Fs.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},Fs.prototype.appendMapping=function(t){for(var e=0,n=this.maps.length;e<t.maps.length;e++){var r=t.getMirror(e);this.appendMap(t.maps[e],null!=r&&r<e?n+r:null)}},Fs.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},Fs.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},Fs.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,n=this.maps.length+t.maps.length;e>=0;e--){var r=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=r&&r>e?n-r-1:null)}},Fs.prototype.invert=function(){var t=new Fs;return t.appendMappingInverted(this),t},Fs.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var n=this.from;n<this.to;n++)t=this.maps[n].map(t,e);return t},Fs.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},Fs.prototype._map=function(t,e,n){for(var r=!1,o=null,i=this.from;i<this.to;i++){var s=this.maps[i],a=o&&o[i];if(null!=a&&s.touches(t,a))t=s.recover(a);else{var c=s.mapResult(t,e);if(null!=c.recover){var l=this.getMirror(i);if(null!=l&&l>i&&l<this.to){if(c.deleted){i=l,t=this.maps[l].recover(c.recover);continue}(o||(o=Object.create(null)))[l]=c.recover}}c.deleted&&(r=!0),t=c.pos}}return n?t:new Is(t,r)},Bs.prototype=Object.create(Error.prototype),Bs.prototype.constructor=Bs,Bs.prototype.name="TransformError";var $s=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Fs},Ls={before:{configurable:!0},docChanged:{configurable:!0}};function Vs(){throw new Error("Override me")}Ls.before.get=function(){return this.docs.length?this.docs[0]:this.doc},$s.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new Bs(e.failed);return this},$s.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},Ls.docChanged.get=function(){return this.steps.length>0},$s.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties($s.prototype,Ls);var qs=Object.create(null),Ws=function(){};Ws.prototype.apply=function(t){return Vs()},Ws.prototype.getMap=function(){return js.empty},Ws.prototype.invert=function(t){return Vs()},Ws.prototype.map=function(t){return Vs()},Ws.prototype.merge=function(t){return null},Ws.prototype.toJSON=function(){return Vs()},Ws.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var n=qs[e.stepType];if(!n)throw new RangeError("No step type "+e.stepType+" defined");return n.fromJSON(t,e)},Ws.jsonID=function(t,e){if(t in qs)throw new RangeError("Duplicate use of step JSON ID "+t);return qs[t]=e,e.prototype.jsonID=t,e};var Js=function(t,e){this.doc=t,this.failed=e};Js.ok=function(t){return new Js(t,null)},Js.fail=function(t){return new Js(null,t)},Js.fromReplace=function(t,e,n,r){try{return Js.ok(t.replace(e,n,r))}catch(o){if(o instanceof hi)return Js.fail(o.message);throw o}};var Hs=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&Ks(t,this.from,this.to)?Js.fail("Structure replace would overwrite content"):Js.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new js([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openEnd||t.slice.openStart){if(t.to!=this.from||this.slice.openStart||t.slice.openEnd)return null;var n=this.slice.size+t.slice.size==0?di.empty:new di(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?di.empty:new di(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new e(n.from,n.to,di.fromJSON(t,n.slice),!!n.structure)},e}(Ws);Ws.jsonID("replace",Hs);var Us=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(Ks(t,this.from,this.gapFrom)||Ks(t,this.gapTo,this.to)))return Js.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return Js.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?Js.fromReplace(t,this.from,this.to,n):Js.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new js([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new e(n.from,n.to,n.gapFrom,n.gapTo,di.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(Ws);function Ks(t,e,n){var r=t.resolve(e),o=n-e,i=r.depth;while(o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount)i--,o--;if(o>0){var s=r.node(i).maybeChild(r.indexAfter(i));while(o>0){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function Gs(t,e,n){var r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function Xs(t,e,n){var r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(0==r.parentOffset)for(var o=r.depth-1;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,n))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(var s=r.depth-1;s>=0;s--){var a=r.indexAfter(s);if(r.node(s).canReplaceWith(a,a,n))return r.after(s+1);if(a<r.node(s).childCount)return null}}function Zs(t,e,n){for(var r=[],o=0;o<t.childCount;o++){var i=t.child(o);i.content.size&&(i=i.copy(Zs(i.content,e,i))),i.isInline&&(i=e(i,n,o)),r.push(i)}return ai.fromArray(r)}Ws.jsonID("replaceAround",Us),$s.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,l=ai.empty,u=0,p=o,f=!1;p>e;p--)f||n.index(p)>0?(f=!0,l=ai.from(n.node(p).copy(l)),u++):a--;for(var h=ai.empty,d=0,m=o,v=!1;m>e;m--)v||r.after(m+1)<r.end(m)?(v=!0,h=ai.from(r.node(m).copy(h)),d++):c++;return this.step(new Us(a,c,i,s,new di(l.append(h),u,d),l.size-u,!0))},$s.prototype.wrap=function(t,e){for(var n=ai.empty,r=e.length-1;r>=0;r--)n=ai.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new Us(o,i,o,i,new di(n,0,0),e.length,!0))},$s.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,(function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)&&Gs(o.doc,o.mapping.slice(i).map(e),n)){o.clearIncompatible(o.mapping.slice(i).map(e,1),n);var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new Us(a,c,a+1,c-1,new di(ai.from(n.create(r,null,t.marks)),0,0),1,!0)),!1}})),this},$s.prototype.setNodeMarkup=function(t,e,n,r){var o=this.doc.nodeAt(t);if(!o)throw new RangeError("No node at given position");e||(e=o.type);var i=e.create(n,null,r||o.marks);if(o.isLeaf)return this.replaceWith(t,t+o.nodeSize,i);if(!e.validContent(o.content))throw new RangeError("Invalid content for node type "+e.name);return this.step(new Us(t,t+o.nodeSize,t+1,t+o.nodeSize-1,new di(ai.from(i),0,0),1,!0))},$s.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=ai.empty,i=ai.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=ai.from(r.node(s).copy(o));var l=n&&n[c];i=ai.from(l?l.type.create(l.attrs,i):r.node(s).copy(i))}return this.step(new Hs(t,t,new di(o.append(i),e,e),!0))},$s.prototype.join=function(t,e){void 0===e&&(e=1);var n=new Hs(t-e,t+e,di.empty,!0);return this.step(n)};var Ys=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=t.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new di(Zs(n.content,(function(t,n){return n.type.allowsMarkType(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t}),o),n.openStart,n.openEnd);return Js.fromReplace(t,this.from,this.to,i)},e.prototype.invert=function(){return new Qs(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Ws);Ws.jsonID("addMark",Ys);var Qs=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),r=new di(Zs(n.content,(function(t){return t.mark(e.mark.removeFromSet(t.marks))})),n.openStart,n.openEnd);return Js.fromReplace(t,this.from,this.to,r)},e.prototype.invert=function(){return new Ys(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},e.fromJSON=function(t,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(Ws);function ta(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=di.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);return ea(o,i,r)?new Hs(e,n,r):new na(o,i,r).fit()}function ea(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}Ws.jsonID("removeMark",Qs),$s.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,(function(r,c,l){if(r.isInline){var u=r.marks;if(!n.isInSet(u)&&l.type.allowsMarkType(n.type)){for(var p=Math.max(c,t),f=Math.min(c+r.nodeSize,e),h=n.addToSet(u),d=0;d<u.length;d++)u[d].isInSet(h)||(s&&s.to==p&&s.mark.eq(u[d])?s.to=f:o.push(s=new Qs(p,f,u[d])));a&&a.to==p?a.to=f:i.push(a=new Ys(p,f,n))}}})),o.forEach((function(t){return r.step(t)})),i.forEach((function(t){return r.step(t)})),this},$s.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var o=[],i=0;return this.doc.nodesBetween(t,e,(function(r,s){if(r.isInline){i++;var a=null;if(n instanceof ls){var c=n.isInSet(r.marks);c&&(a=[c])}else n?n.isInSet(r.marks)&&(a=[n]):a=r.marks;if(a&&a.length)for(var l=Math.min(s+r.nodeSize,e),u=0;u<a.length;u++){for(var p=a[u],f=void 0,h=0;h<o.length;h++){var d=o[h];d.step==i-1&&p.eq(o[h].style)&&(f=d)}f?(f.to=l,f.step=i):o.push({style:p,from:Math.max(s,t),to:l,step:i})}}})),o.forEach((function(t){return r.step(new Qs(t.from,t.to,t.style))})),this},$s.prototype.clearIncompatible=function(t,e,n){void 0===n&&(n=e.contentMatch);for(var r=this.doc.nodeAt(t),o=[],i=t+1,s=0;s<r.childCount;s++){var a=r.child(s),c=i+a.nodeSize,l=n.matchType(a.type,a.attrs);if(l){n=l;for(var u=0;u<a.marks.length;u++)e.allowsMarkType(a.marks[u].type)||this.step(new Qs(i,c,a.marks[u]))}else o.push(new Hs(i,c,di.empty));i=c}if(!n.validEnd){var p=n.fillBefore(ai.empty,!0);this.replace(i,i,new di(p,0,0))}for(var f=o.length-1;f>=0;f--)this.step(o[f]);return this},$s.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=di.empty);var r=ta(this.doc,t,e,n);return r&&this.step(r),this},$s.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new di(ai.from(n),0,0))},$s.prototype.delete=function(t,e){return this.replace(t,e,di.empty)},$s.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var na=function(t,e,n){this.$to=e,this.$from=t,this.unplaced=n,this.frontier=[];for(var r=0;r<=t.depth;r++){var o=t.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(t.indexAfter(r))})}this.placed=ai.empty;for(var i=t.depth;i>0;i--)this.placed=ai.from(t.node(i).copy(this.placed))},ra={depth:{configurable:!0}};function oa(t,e,n){return 0==e?t.cutByIndex(n):t.replaceChild(0,t.firstChild.copy(oa(t.firstChild.content,e-1,n)))}function ia(t,e,n){return 0==e?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(ia(t.lastChild.content,e-1,n)))}function sa(t,e){for(var n=0;n<e;n++)t=t.firstChild.content;return t}function aa(t,e,n){if(e<=0)return t;var r=t.content;return e>1&&(r=r.replaceChild(0,aa(r.firstChild,e-1,1==r.childCount?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ai.empty,!0)))),t.copy(r)}function ca(t,e,n,r,o){var i=t.node(e),s=o?t.indexAfter(e):t.index(e);if(s==i.childCount&&!n.compatibleContent(i.type))return null;var a=r.fillBefore(i.content,!0,s);return a&&!la(n,i.content,s)?a:null}function la(t,e,n){for(var r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function ua(t,e,n,r,o){if(e<n){var i=t.firstChild;t=t.replaceChild(0,i.copy(ua(i.content,e+1,n,r,i)))}if(e>r){var s=o.contentMatchAt(0),a=s.fillBefore(t).append(t);t=a.append(s.matchFragment(a).fillBefore(ai.empty,!0))}return t}function pa(t,e){for(var n=[],r=Math.min(t.depth,e.depth),o=r;o>=0;o--){var i=t.start(o);if(i<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;i==e.start(o)&&n.push(o)}return n}ra.depth.get=function(){return this.frontier.length-1},na.prototype.fit=function(){while(this.unplaced.size){var t=this.findFittable();t?this.placeNodes(t):this.openMore()||this.dropNode()}var e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=e<0?this.$to:r.doc.resolve(e);if(this.close(o)){var i=this.placed,s=r.depth,a=o.depth;while(s&&a&&1==i.childCount)i=i.firstChild.content,s--,a--;var c=new di(i,s,a);if(e>-1)return new Us(r.pos,e,this.$to.pos,this.$to.end(),c,n);if(c.size||r.pos!=this.$to.pos)return new Hs(r.pos,o.pos,c)}return null},na.prototype.findFittable=function(){for(var t=1;t<=2;t++)for(var e=this.unplaced.openStart;e>=0;e--){var n=void 0,r=void 0;e?(r=sa(this.unplaced.content,e-1).firstChild,n=r.content):n=this.unplaced.content;for(var o=n.firstChild,i=this.depth;i>=0;i--){var s=this.frontier[i],a=s.type,c=s.match,l=void 0,u=void 0;if(1==t&&(o?c.matchType(o.type)||(u=c.fillBefore(ai.from(o),!1)):a.compatibleContent(r.type)))return{sliceDepth:e,frontierDepth:i,parent:r,inject:u};if(2==t&&o&&(l=c.findWrapping(o.type)))return{sliceDepth:e,frontierDepth:i,parent:r,wrap:l};if(r&&c.matchType(r.type))break}}},na.prototype.openMore=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=sa(e,n);return!(!o.childCount||o.firstChild.isLeaf)&&(this.unplaced=new di(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)},na.prototype.dropNode=function(){var t=this.unplaced,e=t.content,n=t.openStart,r=t.openEnd,o=sa(e,n);if(o.childCount<=1&&n>0){var i=e.size-n<=n+o.size;this.unplaced=new di(oa(e,n-1,1),n-1,i?n-1:r)}else this.unplaced=new di(oa(e,n,1),n,r)},na.prototype.placeNodes=function(t){var e=t.sliceDepth,n=t.frontierDepth,r=t.parent,o=t.inject,i=t.wrap;while(this.depth>n)this.closeFrontierNode();if(i)for(var s=0;s<i.length;s++)this.openFrontierNode(i[s]);var a=this.unplaced,c=r?r.content:a.content,l=a.openStart-e,u=0,p=[],f=this.frontier[n],h=f.match,d=f.type;if(o){for(var m=0;m<o.childCount;m++)p.push(o.child(m));h=h.matchFragment(o)}var v=c.size+e-(a.content.size-a.openEnd);while(u<c.childCount){var g=c.child(u),y=h.matchType(g.type);if(!y)break;u++,(u>1||0==l||g.content.size)&&(h=y,p.push(aa(g.mark(d.allowedMarks(g.marks)),1==u?l:0,u==c.childCount?v:-1)))}var b=u==c.childCount;b||(v=-1),b&&v<0&&r&&r.type==this.frontier[this.depth].type?this.closeFrontierNode():this.frontier[n].match=h;for(var w=0,x=c;w<v;w++){var S=x.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),x=S.content}this.unplaced=b?0==e?di.empty:new di(oa(a.content,e-1,1),e-1,v<0?a.openEnd:e-1):new di(oa(a.content,e,u),a.openStart,a.openEnd),this.placed=ia(this.placed,n,ai.from(p))},na.prototype.mustMoveInline=function(){if(!this.$to.parent.isTextblock)return-1;var t,e=this.frontier[this.depth];if(!e.type.isTextblock||!ca(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;var n=this.$to,r=n.depth,o=this.$to.after(r);while(r>1&&o==this.$to.end(--r))++o;return o},na.prototype.findCloseLevel=function(t){t:for(var e=Math.min(this.depth,t.depth);e>=0;e--){var n=this.frontier[e],r=n.match,o=n.type,i=ca(t,e,o,r,!1);if(i){for(var s=e-1;s>=0;s--){var a=this.frontier[s],c=a.match,l=a.type,u=ca(t,s,l,c,!0);if(!u||u.childCount)continue t}return{depth:e,fit:i}}}},na.prototype.close=function(t){var e=this.findCloseLevel(t);if(!e)return!1;while(this.depth>e.depth)this.closeFrontierNode();e.fit.childCount&&(this.placed=ia(this.placed,e.depth,e.fit));for(var n=e.depth+1;n<=t.depth;n++){var r=t.node(n),o=r.type.contentMatch.fillBefore(r.content,!0,t.index(n));this.openFrontierNode(r.type,r.attrs,o)}return!0},na.prototype.openFrontierNode=function(t,e,n){var r=this.frontier[this.depth];r.match=r.match.matchType(t),this.placed=ia(this.placed,this.depth,ai.from(t.create(e,n))),this.frontier.push({type:t,match:t.contentMatch})},na.prototype.closeFrontierNode=function(){var t=this.frontier.pop(),e=t.match.fillBefore(ai.empty,!0);e.childCount&&(this.placed=ia(this.placed,this.frontier.length,e))},Object.defineProperties(na.prototype,ra),$s.prototype.replaceRange=function(t,e,n){if(!n.size)return this.deleteRange(t,e);var r=this.doc.resolve(t),o=this.doc.resolve(e);if(ea(r,o,n))return this.step(new Hs(t,e,n));var i=pa(r,this.doc.resolve(e));0==i[i.length-1]&&i.pop();var s=-(r.depth+1);i.unshift(s);for(var a=r.depth,c=r.pos-1;a>0;a--,c--){var l=r.node(a).type.spec;if(l.defining||l.isolating)break;i.indexOf(a)>-1?s=a:r.before(a)==c&&i.splice(1,0,-a)}for(var u=i.indexOf(s),p=[],f=n.openStart,h=n.content,d=0;;d++){var m=h.firstChild;if(p.push(m),d==n.openStart)break;h=m.content}f>0&&p[f-1].type.spec.defining&&r.node(u).type!=p[f-1].type?f-=1:f>=2&&p[f-1].isTextblock&&p[f-2].type.spec.defining&&r.node(u).type!=p[f-2].type&&(f-=2);for(var v=n.openStart;v>=0;v--){var g=(v+f+1)%(n.openStart+1),y=p[g];if(y)for(var b=0;b<i.length;b++){var w=i[(b+u)%i.length],x=!0;w<0&&(x=!1,w=-w);var S=r.node(w-1),k=r.index(w-1);if(S.canReplaceWith(k,k,y.type,y.marks))return this.replace(r.before(w),x?o.after(w):e,new di(ua(n.content,0,n.openStart,g),g,n.openEnd))}}for(var C=this.steps.length,O=i.length-1;O>=0;O--){if(this.replace(t,e,n),this.steps.length>C)break;var _=i[O];O<0||(t=r.before(_),e=o.after(_))}return this},$s.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=Xs(this.doc,t,n.type);null!=r&&(t=e=r)}return this.replaceRange(t,e,new di(ai.from(n),0,0))},$s.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=this.doc.resolve(e),o=pa(n,r),i=0;i<o.length;i++){var s=o[i],a=i==o.length-1;if(a&&0==s||n.node(s).type.contentMatch.validEnd)return this.delete(n.start(s),r.end(s));if(s>0&&(a||n.node(s-1).canReplace(n.index(s-1),r.indexAfter(s-1))))return this.delete(n.before(s),r.after(s))}for(var c=1;c<=n.depth&&c<=r.depth;c++)if(t-n.start(c)==n.depth-c&&e>n.end(c)&&r.end(c)-e!=r.depth-c)return this.delete(n.before(c),e);return this.delete(t,e)};var fa=function(t,e,n){this.step=t,this.inverted=e,this.origin=n};function ha(t,e,n){for(var r=t.length-1;r>=0;r--)n.step(t[r].inverted);for(var o=0;o<e.length;o++)n.step(e[o]);for(var i=[],s=0,a=t.length;s<t.length;s++){var c=t[s].step.map(n.mapping.slice(a));a--,c&&!n.maybeStep(c).failed&&(n.mapping.setMirror(a,n.steps.length-1),i.push(new fa(c,c.invert(n.docs[n.docs.length-1]),t[s].origin)))}return i}var da=function(t,e){this.version=t,this.unconfirmed=e};function ma(t){for(var e=[],n=0;n<t.steps.length;n++)e.push(new fa(t.steps[n],t.steps[n].invert(t.docs[n]),t));return e}var va=new a["PluginKey"]("collab");function ga(t){return void 0===t&&(t={}),t={version:t.version||0,clientID:null==t.clientID?Math.floor(4294967295*Math.random()):t.clientID},new a["Plugin"]({key:va,state:{init:function(){return new da(t.version,[])},apply:function(t,e){var n=t.getMeta(va);return n||(t.docChanged?new da(e.version,e.unconfirmed.concat(ma(t))):e)}},config:t,historyPreserveItems:!0})}function ya(t,e,n,r){var o=va.getState(t),i=o.version+e.length,s=va.get(t).spec.config.clientID,c=0;while(c<n.length&&n[c]==s)++c;var l=o.unconfirmed.slice(c);if(e=c?e.slice(c):e,!e.length)return t.tr.setMeta(va,new da(i,l));var u=l.length,p=t.tr;if(u)l=ha(l,e,p);else{for(var f=0;f<e.length;f++)p.step(e[f]);l=[]}var h=new da(i,l);return r&&r.mapSelectionBackward&&t.selection instanceof a["TextSelection"]&&(p.setSelection(a["TextSelection"].between(p.doc.resolve(p.mapping.map(t.selection.anchor,-1)),p.doc.resolve(p.mapping.map(t.selection.head,-1)),-1)),p.updated&=-2),p.setMeta("rebased",u).setMeta("addToHistory",!1).setMeta(va,h)}function ba(t){var e=va.getState(t);return 0==e.unconfirmed.length?null:{version:e.version,steps:e.unconfirmed.map((function(t){return t.step})),clientID:va.get(t).spec.config.clientID,get origins(){return this._origins||(this._origins=e.unconfirmed.map((function(t){return t.origin})))}}}function wa(t){return va.getState(t).version}var xa=200,Sa=function(){};Sa.prototype.append=function(t){return t.length?(t=Sa.from(t),!this.length&&t||t.length<xa&&this.leafAppend(t)||this.length<xa&&t.leafPrepend(this)||this.appendInner(t)):this},Sa.prototype.prepend=function(t){return t.length?Sa.from(t).append(this):this},Sa.prototype.appendInner=function(t){return new Ca(this,t)},Sa.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?Sa.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},Sa.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)},Sa.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},Sa.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach((function(e,n){return r.push(t(e,n))}),e,n),r},Sa.from=function(t){return t instanceof Sa?t:t&&t.length?new ka(t):Sa.empty};var ka=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=e;o<n;o++)if(!1===t(this.values[o],r+o))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=e-1;o>=n;o--)if(!1===t(this.values[o],r+o))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=xa)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=xa)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Sa);Sa.empty=new ka([]);var Ca=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(Sa),Oa=Sa,_a=Oa,Ma=n("0ac0"),Ea=500,Ta=function(t,e){this.items=t,this.eventCount=e};function Na(t,e){var n;return t.forEach((function(t,r){if(t.selection&&0==e--)return n=r,!1})),t.slice(n)}Ta.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r,o,i=this.items.length;;i--){var s=this.items.get(i-1);if(s.selection){--i;break}}e&&(r=this.remapping(i,this.items.length),o=r.maps.length);var a,c,l=t.tr,u=[],p=[];return this.items.forEach((function(t,e){if(!t.step)return r||(r=n.remapping(i,e+1),o=r.maps.length),o--,void p.push(t);if(r){p.push(new Aa(t.map));var s,f=t.step.map(r.slice(o));f&&l.maybeStep(f).doc&&(s=l.mapping.maps[l.mapping.maps.length-1],u.push(new Aa(s,null,null,u.length+p.length))),o--,s&&r.appendMap(s,o)}else l.maybeStep(t.step);return t.selection?(a=r?t.selection.map(r.slice(o)):t.selection,c=new Ta(n.items.slice(0,i).append(p.reverse().concat(u)),n.eventCount-1),!1):void 0}),this.items.length,0),{remaining:c,transform:l,selection:a}},Ta.prototype.addTransform=function(t,e,n,r){for(var o=[],i=this.eventCount,s=this.items,a=!r&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var l=t.steps[c].invert(t.docs[c]),u=new Aa(t.mapping.maps[c],l,e),p=void 0;(p=a&&a.merge(u))&&(u=p,c?o.pop():s=s.slice(0,s.length-1)),o.push(u),e&&(i++,e=null),r||(a=u)}var f=i-n.depth;return f>Pa&&(s=Na(s,f),i-=f),new Ta(s.append(o),i)},Ta.prototype.remapping=function(t,e){var n=new Ma["a"];return this.items.forEach((function(e,r){var o=null!=e.mirrorOffset&&r-e.mirrorOffset>=t?n.maps.length-e.mirrorOffset:null;n.appendMap(e.map,o)}),t,e),n},Ta.prototype.addMaps=function(t){return 0==this.eventCount?this:new Ta(this.items.append(t.map((function(t){return new Aa(t)}))),this.eventCount)},Ta.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=Math.max(0,this.items.length-e),o=t.mapping,i=t.steps.length,s=this.eventCount;this.items.forEach((function(t){t.selection&&s--}),r);var a=e;this.items.forEach((function(e){var r=o.getMirror(--a);if(null!=r){i=Math.min(i,r);var c=o.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),u=e.selection&&e.selection.map(o.slice(a+1,r));u&&s++,n.push(new Aa(c,l,u))}else n.push(new Aa(c))}}),r);for(var c=[],l=e;l<i;l++)c.push(new Aa(o.maps[l]));var u=this.items.slice(0,r).append(c).append(n),p=new Ta(u,s);return p.emptyItemCount()>Ea&&(p=p.compress(this.items.length-n.length)),p},Ta.prototype.emptyItemCount=function(){var t=0;return this.items.forEach((function(e){e.step||t++})),t},Ta.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach((function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var l=i.selection&&i.selection.map(e.slice(n));l&&o++;var u,p=new Aa(c.invert(),a,l),f=r.length-1;(u=r.length&&r[f].merge(p))?r[f]=u:r.push(p)}}else i.map&&n--}),this.items.length,0),new Ta(_a.from(r.reverse()),o)},Ta.empty=new Ta(_a.empty,0);var Aa=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};Aa.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new Aa(e.getMap().invert(),e,this.selection)}};var Da=function(t,e,n,r){this.done=t,this.undone=e,this.prevRanges=n,this.prevTime=r},Pa=20;function za(t,e,n,r){var o,i=n.getMeta(Va);if(i)return i.historyState;n.getMeta(qa)&&(t=new Da(t.done,t.undone,null,0));var s=n.getMeta("appendedTransaction");if(0==n.steps.length)return t;if(s&&s.getMeta(Va))return s.getMeta(Va).redo?new Da(t.done.addTransform(n,null,r,La(e)),t.undone,Ia(n.mapping.maps[n.steps.length-1]),t.prevTime):new Da(t.done,t.undone.addTransform(n,null,r,La(e)),null,t.prevTime);if(!1===n.getMeta("addToHistory")||s&&!1===s.getMeta("addToHistory"))return(o=n.getMeta("rebased"))?new Da(t.done.rebased(n,o),t.undone.rebased(n,o),ja(t.prevRanges,n.mapping),t.prevTime):new Da(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ja(t.prevRanges,n.mapping),t.prevTime);var a=0==t.prevTime||!s&&(t.prevTime<(n.time||0)-r.newGroupDelay||!Ra(n,t.prevRanges)),c=s?ja(t.prevRanges,n.mapping):Ia(n.mapping.maps[n.steps.length-1]);return new Da(t.done.addTransform(n,a?e.selection.getBookmark():null,r,La(e)),Ta.empty,c,n.time)}function Ra(t,e){if(!e)return!1;if(!t.docChanged)return!0;var n=!1;return t.mapping.maps[0].forEach((function(t,r){for(var o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)})),n}function Ia(t){var e=[];return t.forEach((function(t,n,r,o){return e.push(r,o)})),e}function ja(t,e){if(!t)return null;for(var n=[],r=0;r<t.length;r+=2){var o=e.map(t[r],1),i=e.map(t[r+1],-1);o<=i&&n.push(o,i)}return n}function Fa(t,e,n,r){var o=La(e),i=Va.get(e).spec.config,s=(r?t.undone:t.done).popEvent(e,o);if(s){var a=s.selection.resolve(s.transform.doc),c=(r?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,o),l=new Da(r?c:s.remaining,r?s.remaining:c,null,0);n(s.transform.setSelection(a).setMeta(Va,{redo:r,historyState:l}).scrollIntoView())}}var Ba=!1,$a=null;function La(t){var e=t.plugins;if($a!=e){Ba=!1,$a=e;for(var n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){Ba=!0;break}}return Ba}var Va=new a["PluginKey"]("history"),qa=new a["PluginKey"]("closeHistory");function Wa(t){return t={depth:t&&t.depth||100,newGroupDelay:t&&t.newGroupDelay||500},new a["Plugin"]({key:Va,state:{init:function(){return new Da(Ta.empty,Ta.empty,null,0)},apply:function(e,n,r){return za(n,r,e,t)}},config:t})}function Ja(t,e){var n=Va.getState(t);return!(!n||0==n.done.eventCount)&&(e&&Fa(n,t,e,!1),!0)}function Ha(t,e){var n=Va.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&Fa(n,t,e,!0),!0)}function Ua(t){var e=Va.getState(t);return e?e.done.eventCount:0}function Ka(t){var e=Va.getState(t);return e?e.undone.eventCount:0}
/*!
    * tiptap-extensions v1.29.0
    * (c) 2020 Scrumpy UG (limited liability)
    * @license MIT
    */function Ga(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Za(t,e,n){return e&&Xa(t.prototype,e),n&&Xa(t,n),t}function Ya(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qa(Object(n),!0).forEach((function(e){Ya(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ec(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&rc(t,e)}function nc(t){return nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},nc(t)}function rc(t,e){return rc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},rc(t,e)}function oc(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function ic(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sc(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?ic(t):e}function ac(t){return function(){var e,n=nc(t);if(oc()){var r=nc(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return sc(this,e)}}function cc(t,e){return pc(t)||hc(t,e)||dc(t,e)||gc()}function lc(t){return uc(t)||fc(t)||dc(t)||vc()}function uc(t){if(Array.isArray(t))return mc(t)}function pc(t){if(Array.isArray(t))return t}function fc(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function hc(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done);r=!0)if(n.push(s.value),e&&n.length===e)break}catch(c){o=!0,i=c}finally{try{r||null==a["return"]||a["return"]()}finally{if(o)throw i}}return n}}function dc(t,e){if(t){if("string"===typeof t)return mc(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mc(t,e):void 0}}function mc(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function vc(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function gc(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var yc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(o["s"])(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Ctrl->":Object(o["s"])(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["u"])(/^\s*>\s$/,e)]}},{key:"name",get:function(){return"blockquote"}},{key:"schema",get:function(){return{content:"block*",group:"block",defining:!0,draggable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}}}}]),n}(r["h"]),bc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(o["q"])(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-8":Object(o["q"])(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["u"])(/^\s*([-+*])\s$/,e)]}},{key:"name",get:function(){return"bullet_list"}},{key:"schema",get:function(){return{content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}}}}]),n}(r["h"]),wc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(o["p"])(e,n.nodes.paragraph)}}},{key:"keys",value:function(t){var e=t.type;return{"Shift-Ctrl-\\":Object(o["k"])(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["o"])(/^```$/,e)]}},{key:"name",get:function(){return"code_block"}},{key:"schema",get:function(){return{content:"text*",marks:"",group:"block",code:!0,defining:!0,draggable:!1,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM:function(){return["pre",["code",0]]}}}}]),n}(r["h"]);function xc(t){var e=t.doc,n=t.name,r=[],o=Object(ni["findBlockNodes"])(e).filter((function(t){return t.node.type.name===n})),i=function t(e){return e.reduce((function(e,n){return e.concat(Array.isArray(n)?t(n):n)}),[])};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.map((function(t){var n=[].concat(lc(e),lc(t.properties?t.properties.className:[]));return t.children?a(t.children,n):{text:t.value,classes:n}}))}return o.forEach((function(t){var e=t.pos+1,n=s.a.highlightAuto(t.node.textContent).value;i(a(n)).map((function(t){var n=e,r=n+t.text.length;return e=r,tc({},t,{from:n,to:r})})).forEach((function(t){var e=To.inline(t.from,t.to,{class:t.classes.join(" ")});r.push(e)}))})),Po.create(e,r)}function Sc(t){var e=t.name;return new r["j"]({name:new r["k"]("highlight"),state:{init:function(t,n){var r=n.doc;return xc({doc:r,name:e})},apply:function(t,n,r,o){var i=r.selection.$head.parent.type.name,s=o.selection.$head.parent.type.name,a=Object(ni["findBlockNodes"])(r.doc).filter((function(t){return t.node.type.name===e})),c=Object(ni["findBlockNodes"])(o.doc).filter((function(t){return t.node.type.name===e}));return t.docChanged&&([i,s].includes(e)||c.length!==a.length)?xc({doc:t.doc,name:e}):n.map(t.mapping,t.doc)}},props:{decorations:function(t){return this.getState(t)}}})}r["h"];var kc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type,n=Object(o["a"])(o["b"],(function(t,n){return n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0}));return{"Mod-Enter":n,"Shift-Enter":n}}},{key:"name",get:function(){return"hard_break"}},{key:"schema",get:function(){return{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}}}]),n}(r["h"]),Cc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(t){return Object(o["p"])(e,n.nodes.paragraph,t)}}},{key:"keys",value:function(t){var e=t.type;return this.options.levels.reduce((function(t,n){return tc({},t,{},Ya({},"Shift-Ctrl-".concat(n),Object(o["k"])(e,{level:n})))}),{})}},{key:"inputRules",value:function(t){var e=t.type;return this.options.levels.map((function(t){return Object(o["o"])(new RegExp("^(#{1,".concat(t,"})\\s$")),e,(function(){return{level:t}}))}))}},{key:"name",get:function(){return"heading"}},{key:"defaultOptions",get:function(){return{levels:[1,2,3,4,5,6]}}},{key:"schema",get:function(){return{attrs:{level:{default:1}},content:"inline*",group:"block",defining:!0,draggable:!1,parseDOM:this.options.levels.map((function(t){return{tag:"h".concat(t),attrs:{level:t}}})),toDOM:function(t){return["h".concat(t.attrs.level),0]}}}}]),n}(r["h"]),Oc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type;return function(){return function(t,n){return n(t.tr.replaceSelectionWith(e.create()))}}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["g"])(/^(?:---|___\s|\*\*\*\s)$/,e)]}},{key:"name",get:function(){return"horizontal_rule"}},{key:"schema",get:function(){return{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}}}}]),n}(r["h"]),_c=/!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\)/,Mc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type;return function(t){return function(n,r){var o=n.selection,i=o.$cursor?o.$cursor.pos:o.$to.pos,s=e.create(t),a=n.tr.insert(i,s);r(a)}}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["g"])(_c,e,(function(t){var e=cc(t,4),n=e[1],r=e[2],o=e[3];return{src:r,alt:n,title:o}}))]}},{key:"name",get:function(){return"image"}},{key:"schema",get:function(){return{inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}}}},{key:"plugins",get:function(){return[new r["j"]({props:{handleDOMEvents:{drop:function(t,e){var n=e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length;if(n){var r=Array.from(e.dataTransfer.files).filter((function(t){return/image/i.test(t.type)}));if(0!==r.length){e.preventDefault();var o=t.state.schema,i=t.posAtCoords({left:e.clientX,top:e.clientY});r.forEach((function(e){var n=new FileReader;n.onload=function(e){var n=o.nodes.image.create({src:e.target.result}),r=t.state.tr.insert(i.pos,n);t.dispatch(r)},n.readAsDataURL(e)}))}}}}}})]}}]),n}(r["h"]),Ec=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{Enter:Object(o["m"])(e),Tab:Object(o["l"])(e),"Shift-Tab":Object(o["d"])(e)}}},{key:"name",get:function(){return"list_item"}},{key:"schema",get:function(){return{content:"paragraph block*",defining:!0,draggable:!1,parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]}}}}]),n}(r["h"]);function Tc(t){var e=t.char,n=void 0===e?"@":e,r=t.allowSpaces,o=void 0!==r&&r,i=t.startOfLine,s=void 0!==i&&i;return function(t){if(t.depth<=0)return!1;var e,r="\\".concat(n),i=new RegExp("\\s".concat(r,"$")),a=s?"^":"",c=o?new RegExp("".concat(a).concat(r,".*?(?=\\s").concat(r,"|$)"),"gm"):new RegExp("".concat(a,"(?:^)?").concat(r,"[^\\s").concat(r,"]*"),"gm"),l=t.before(),u=t.end(),p=t.doc.textBetween(l,u,"\0","\0"),f=c.exec(p);while(null!==f){var h=f.input.slice(Math.max(0,f.index-1),f.index);if(/^[\s\0]?$/.test(h)){var d=f.index+t.start(),m=d+f[0].length;o&&i.test(p.slice(m-1,m+1))&&(f[0]+=" ",m+=1),d<t.pos&&m>=t.pos&&(e={range:{from:d,to:m},query:f[0].slice(n.length),text:f[0]})}f=c.exec(p)}return e}}function Nc(t){var e=t.matcher,n=void 0===e?{char:"@",allowSpaces:!1,startOfLine:!1}:e,r=t.appendText,i=void 0===r?null:r,s=t.suggestionClass,c=void 0===s?"suggestion":s,l=t.command,u=void 0===l?function(){return!1}:l,p=t.items,f=void 0===p?[]:p,h=t.onEnter,d=void 0===h?function(){return!1}:h,m=t.onChange,v=void 0===m?function(){return!1}:m,g=t.onExit,y=void 0===g?function(){return!1}:g,b=t.onKeyDown,w=void 0===b?function(){return!1}:b,x=t.onFilter,S=void 0===x?function(t,e){return e?t.filter((function(t){return JSON.stringify(t).toLowerCase().includes(e.toLowerCase())})):t}:x;return new a["Plugin"]({key:new a["PluginKey"]("suggestions"),view:function(){var t=this;return{update:function(e,n){var r=t.key.getState(n),s=t.key.getState(e.state),a=r.active&&s.active&&r.range.from!==s.range.from,c=!r.active&&s.active,l=r.active&&!s.active,p=!c&&!l&&r.query!==s.query,h=c||a,m=p&&!a,g=l||a;if(h||m||g){var b=g?r:s,w=document.querySelector('[data-decoration-id="'.concat(b.decorationId,'"]')),x=w?{getBoundingClientRect:function(){return w.getBoundingClientRect()},clientWidth:w.clientWidth,clientHeight:w.clientHeight}:null,k={view:e,range:b.range,query:b.query,text:b.text,decorationNode:w,virtualNode:x,items:S(Array.isArray(f)?f:f(),b.query),command:function(t){var n=t.range,r=t.attrs;u({range:n,attrs:r,schema:e.state.schema})(e.state,e.dispatch,e),i&&Object(o["c"])(i)(e.state,e.dispatch,e)}};g&&y(k),m&&v(k),h&&d(k)}}}},state:{init:function(){return{active:!1,range:{},query:null,text:null}},apply:function(t,e){var r=t.selection,o=tc({},e);if(r.from===r.to){(r.from<e.range.from||r.from>e.range.to)&&(o.active=!1);var i=r.$from,s=Tc(n)(i),a=(Math.random()+1).toString(36).substr(2,5);s?(o.active=!0,o.decorationId=e.decorationId?e.decorationId:a,o.range=s.range,o.query=s.query,o.text=s.text):o.active=!1}else o.active=!1;return o.active||(o.decorationId=null,o.range={},o.query=null,o.text=null),o}},props:{handleKeyDown:function(t,e){var n=this.getState(t.state),r=n.active,o=n.range;return!!r&&w({view:t,event:e,range:o})},decorations:function(t){var e=this.getState(t),n=e.active,r=e.range,o=e.decorationId;return n?Po.create(t.doc,[To.inline(r.from,r.to,{nodeName:"span",class:c,"data-decoration-id":o})]):null}}})}r["h"];var Ac=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(o["q"])(e,n.nodes.list_item)}}},{key:"keys",value:function(t){var e=t.type,n=t.schema;return{"Shift-Ctrl-9":Object(o["q"])(e,n.nodes.list_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["u"])(/^(\d+)\.\s$/,e,(function(t){return{order:+t[1]}}),(function(t,e){return e.childCount+e.attrs.order===+t[1]}))]}},{key:"name",get:function(){return"ordered_list"}},{key:"schema",get:function(){return{attrs:{order:{default:1}},content:"list_item+",group:"block",parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return 1===t.attrs.order?["ol",0]:["ol",{start:t.attrs.order},0]}}}}]),n}(r["h"]),Dc=Object(ri["tableNodes"])({tableGroup:"block",cellContent:"block+",cellAttributes:{background:{default:null,getFromDOM:function(t){return t.style.backgroundColor||null},setDOMAttr:function(t,e){if(t){var n={style:"".concat(e.style||"","background-color: ").concat(t,";")};Object.assign(e,n)}}}}}),Pc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.schema;return{createTable:function(t){var n=t.rowsCount,r=t.colsCount,o=t.withHeaderRow;return function(t,i){var s=t.tr.selection.anchor+1,c=Object(ni["createTable"])(e,n,r,o),l=t.tr.replaceSelectionWith(c).scrollIntoView(),u=l.doc.resolve(s);l.setSelection(a["TextSelection"].near(u)),i(l)}},addColumnBefore:function(){return ri["addColumnBefore"]},addColumnAfter:function(){return ri["addColumnAfter"]},deleteColumn:function(){return ri["deleteColumn"]},addRowBefore:function(){return ri["addRowBefore"]},addRowAfter:function(){return ri["addRowAfter"]},deleteRow:function(){return ri["deleteRow"]},deleteTable:function(){return ri["deleteTable"]},toggleCellMerge:function(){return function(t,e){Object(ri["mergeCells"])(t,e)||Object(ri["splitCell"])(t,e)}},mergeCells:function(){return ri["mergeCells"]},splitCell:function(){return ri["splitCell"]},toggleHeaderColumn:function(){return ri["toggleHeaderColumn"]},toggleHeaderRow:function(){return ri["toggleHeaderRow"]},toggleHeaderCell:function(){return ri["toggleHeaderCell"]},setCellAttr:function(){return ri["setCellAttr"]},fixTables:function(){return ri["fixTables"]}}}},{key:"keys",value:function(){return{Tab:Object(ri["goToNextCell"])(1),"Shift-Tab":Object(ri["goToNextCell"])(-1)}}},{key:"name",get:function(){return"table"}},{key:"defaultOptions",get:function(){return{resizable:!1}}},{key:"schema",get:function(){return Dc.table}},{key:"plugins",get:function(){return[].concat(lc(this.options.resizable?[Object(ri["columnResizing"])()]:[]),[Object(ri["tableEditing"])()])}}]),n}(r["h"]),zc=(r["h"],r["h"],r["h"],function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{Enter:Object(o["n"])(e),Tab:this.options.nested?Object(o["l"])(e):function(){},"Shift-Tab":Object(o["d"])(e)}}},{key:"name",get:function(){return"todo_item"}},{key:"defaultOptions",get:function(){return{nested:!1}}},{key:"view",get:function(){return{props:["node","updateAttrs","view"],methods:{onChange:function(){this.updateAttrs({done:!this.node.attrs.done})}},template:'\n        <li :data-type="node.type.name" :data-done="node.attrs.done.toString()" data-drag-handle>\n          <span class="todo-checkbox" contenteditable="false" @click="onChange"></span>\n          <div class="todo-content" ref="content" :contenteditable="view.editable.toString()"></div>\n        </li>\n      '}}},{key:"schema",get:function(){var t=this;return{attrs:{done:{default:!1}},draggable:!0,content:this.options.nested?"(paragraph|todo_list)+":"paragraph+",toDOM:function(e){var n=e.attrs.done;return["li",{"data-type":t.name,"data-done":n.toString()},["span",{class:"todo-checkbox",contenteditable:"false"}],["div",{class:"todo-content"},0]]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]'),getAttrs:function(t){return{done:"true"===t.getAttribute("data-done")}}}]}}}]),n}(r["h"])),Rc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type,n=t.schema;return function(){return Object(o["q"])(e,n.nodes.todo_item)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["u"])(/^\s*(\[ \])\s$/,e)]}},{key:"name",get:function(){return"todo_list"}},{key:"schema",get:function(){var t=this;return{group:"block",content:"todo_item+",toDOM:function(){return["ul",{"data-type":t.name},0]},parseDOM:[{priority:51,tag:'[data-type="'.concat(this.name,'"]')}]}}}]),n}(r["h"]),Ic=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-b":Object(o["r"])(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o["r"])(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["e"])(/(?:\*\*|__)([^*_]+)(?:\*\*|__)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o["f"])(/(?:\*\*|__)([^*_]+)(?:\*\*|__)/g,e)]}},{key:"name",get:function(){return"bold"}},{key:"schema",get:function(){return{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!==t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong",0]}}}}]),n}(r["g"]),jc=(r["g"],function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-i":Object(o["r"])(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o["r"])(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["e"])(/(?:^|[^_])(_([^_]+)_)$/,e),Object(o["e"])(/(?:^|[^*])(\*([^*]+)\*)$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o["f"])(/_([^_]+)_/g,e),Object(o["f"])(/\*([^*]+)\*/g,e)]}},{key:"name",get:function(){return"italic"}},{key:"schema",get:function(){return{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}}}}]),n}(r["g"])),Fc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"commands",value:function(t){var e=t.type;return function(t){return t.href?Object(o["t"])(e,t):Object(o["i"])(e)}}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o["h"])(/https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{2,256}\.[a-zA-Z]{2,}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/g,e,(function(t){return{href:t}}))]}},{key:"name",get:function(){return"link"}},{key:"defaultOptions",get:function(){return{openOnClick:!0}}},{key:"schema",get:function(){return{attrs:{href:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href")}}}],toDOM:function(t){return["a",tc({},t.attrs,{rel:"noopener noreferrer nofollow"}),0]}}}},{key:"plugins",get:function(){return this.options.openOnClick?[new r["j"]({props:{handleClick:function(t,e,n){var r=t.state.schema,o=Object(oi["a"])(t.state,r.marks.link);o.href&&n.target instanceof HTMLAnchorElement&&(n.stopPropagation(),window.open(o.href))}}})]:[]}}]),n}(r["g"]),Bc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-d":Object(o["r"])(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o["r"])(e)}}},{key:"inputRules",value:function(t){var e=t.type;return[Object(o["e"])(/~([^~]+)~$/,e)]}},{key:"pasteRules",value:function(t){var e=t.type;return[Object(o["f"])(/~([^~]+)~/g,e)]}},{key:"name",get:function(){return"strike"}},{key:"schema",get:function(){return{parseDOM:[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",getAttrs:function(t){return"line-through"===t}}],toDOM:function(){return["s",0]}}}}]),n}(r["g"]),$c=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(t){var e=t.type;return{"Mod-u":Object(o["r"])(e)}}},{key:"commands",value:function(t){var e=t.type;return function(){return Object(o["r"])(e)}}},{key:"name",get:function(){return"underline"}},{key:"schema",get:function(){return{parseDOM:[{tag:"u"},{style:"text-decoration",getAttrs:function(t){return"underline"===t}}],toDOM:function(){return["u",0]}}}}]),n}(r["g"]),Lc=(r["f"],r["f"],function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"keys",value:function(){var t={"Mod-z":Ja,"Mod-y":Ha,"Shift-Mod-z":Ha};return t}},{key:"commands",value:function(){return{undo:function(){return Ja},redo:function(){return Ha},undoDepth:function(){return Ua},redoDepth:function(){return Ka}}}},{key:"name",get:function(){return"history"}},{key:"defaultOptions",get:function(){return{depth:"",newGroupDelay:""}}},{key:"plugins",get:function(){return[Wa({depth:this.options.depth,newGroupDelay:this.options.newGroupDelay})]}}]),n}(r["f"])),Vc=function(t){ec(n,t);var e=ac(n);function n(){return Ga(this,n),e.apply(this,arguments)}return Za(n,[{key:"name",get:function(){return"placeholder"}},{key:"defaultOptions",get:function(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",emptyNodeText:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0}}},{key:"plugins",get:function(){var t=this;return[new r["j"]({props:{decorations:function(e){var n=e.doc,r=e.plugins,o=e.selection,i=r.find((function(t){return t.key.startsWith("editable$")})),s=i.props.editable(),a=s||!t.options.showOnlyWhenEditable,c=o.anchor,l=[],u=0===n.textContent.length;return!!a&&(n.descendants((function(e,n){var r=c>=n&&c<=n+e.nodeSize,o=0===e.content.size;if((r||!t.options.showOnlyCurrent)&&o){var i=[t.options.emptyNodeClass];u&&i.push(t.options.emptyEditorClass);var s=To.node(n,n+e.nodeSize,{class:i.join(" "),"data-empty-text":"function"===typeof t.options.emptyNodeText?t.options.emptyNodeText(e):t.options.emptyNodeText});l.push(s)}return!1})),Po.create(n,l))}}})]}}]),n}(r["f"]);r["f"],r["f"]},f3ad:function(t,e,n){t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=76)}({0:function(t,e,n){"use strict";function r(t,e,n,r,o,i,s,a){var c,l="function"===typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=n,l._compiled=!0),r&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,e){return c.call(e),u(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:t,options:l}}n.d(e,"a",(function(){return r}))},11:function(t,e){t.exports=n("2bb5")},21:function(t,e){t.exports=n("d397")},4:function(t,e){t.exports=n("d010")},76:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.inputSize?"el-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"is-exceed":t.inputExceed,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend,"el-input--prefix":t.$slots.prefix||t.prefixIcon,"el-input--suffix":t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),"textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:t.tabindex,type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$attrs,!1)):t._e(),t.$slots.prefix||t.prefixIcon?n("span",{staticClass:"el-input__prefix"},[t._t("prefix"),t.prefixIcon?n("i",{staticClass:"el-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[t.showClear&&t.showPwdVisible&&t.isWordLimitVisible?t._e():[t._t("suffix"),t.suffixIcon?n("i",{staticClass:"el-input__icon",class:t.suffixIcon}):t._e()],t.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(t){t.preventDefault()},click:t.clear}}):t._e(),t.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:t.handlePasswordVisible}}):t._e(),t.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[t._v("\n            "+t._s(t.textLength)+"/"+t._s(t.upperLimit)+"\n          ")])]):t._e()],2),t.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t.$slots.append?n("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:n("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"textarea",t.$attrs,!1)),t.isWordLimitVisible&&"textarea"===t.type?n("span",{staticClass:"el-input__count"},[t._v(t._s(t.textLength)+"/"+t._s(t.upperLimit))]):t._e()],2)},o=[];r._withStripped=!0;var i=n(4),s=n.n(i),a=n(11),c=n.n(a),l=void 0,u="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",p=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function f(t){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),r=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),o=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),i=p.map((function(t){return t+":"+e.getPropertyValue(t)})).join(";");return{contextStyle:i,paddingSize:r,borderSize:o,boxSizing:n}}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l||(l=document.createElement("textarea"),document.body.appendChild(l));var r=f(t),o=r.paddingSize,i=r.borderSize,s=r.boxSizing,a=r.contextStyle;l.setAttribute("style",a+";"+u),l.value=t.value||t.placeholder||"";var c=l.scrollHeight,p={};"border-box"===s?c+=i:"content-box"===s&&(c-=o),l.value="";var h=l.scrollHeight-o;if(null!==e){var d=h*e;"border-box"===s&&(d=d+o+i),c=Math.max(d,c),p.minHeight=d+"px"}if(null!==n){var m=h*n;"border-box"===s&&(m=m+o+i),c=Math.min(m,c)}return p.height=c+"px",l.parentNode&&l.parentNode.removeChild(l),l=null,p}var d=n(9),m=n.n(d),v=n(21),g={name:"ElInput",componentName:"ElInput",mixins:[s.a,c.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return m()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var t=this;this.$nextTick((function(){t.setNativeInputValue(),t.resizeTextarea(),t.updateIconOffset()}))}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize,e=this.type;if("textarea"===e)if(t){var n=t.minRows,r=t.maxRows;this.textareaCalcStyle=h(this.$refs.textarea,n,r)}else this.textareaCalcStyle={minHeight:h(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var t=this.getInput();t&&t.value!==this.nativeInputValue&&(t.value=this.nativeInputValue)},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(t){var e=t.target.value,n=e[e.length-1]||"";this.isComposing=!Object(v["isKorean"])(n)},handleCompositionEnd:function(t){this.isComposing&&(this.isComposing=!1,this.handleInput(t))},handleInput:function(t){this.isComposing||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var n=null,r=0;r<e.length;r++)if(e[r].parentNode===this.$el){n=e[r];break}if(n){var o={suffix:"append",prefix:"prepend"},i=o[t];this.$slots[i]?n.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+i).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},y=g,b=n(0),w=Object(b["a"])(y,r,o,!1,null,null,null);w.options.__file="packages/input/src/input.vue";var x=w.exports;x.install=function(t){t.component(x.name,x)};e["default"]=x},9:function(t,e){t.exports=n("7f4d")}})},f891:function(t,e,n){},f95e:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return c})),n.d(e,"c",(function(){return f})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return p}));var r=n("5313"),o=n("0ac0"),i=function(t,e){this.match=t,this.handler="string"==typeof e?s(e):e};function s(t){return function(e,n,r,o){var i=t;if(n[1]){var s=n[0].lastIndexOf(n[1]);i+=n[0].slice(s+n[1].length),r+=s;var a=r-o;a>0&&(i=n[0].slice(s-a,s)+i,r=o)}return e.tr.insertText(i,r,o)}}var a=500;function c(t){var e=t.rules,n=new r["Plugin"]({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(this);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,r,o,i){return l(t,r,o,i,e,n)},handleDOMEvents:{compositionend:function(t){setTimeout((function(){var r=t.state.selection,o=r.$cursor;o&&l(t,o.pos,o.pos,"",e,n)}))}}},isInputRules:!0});return n}function l(t,e,n,r,o,i){if(t.composing)return!1;var s=t.state,c=s.doc.resolve(e);if(c.parent.type.spec.code)return!1;for(var l=c.parent.textBetween(Math.max(0,c.parentOffset-a),c.parentOffset,null,"￼")+r,u=0;u<o.length;u++){var p=o[u].match.exec(l),f=p&&o[u].handler(s,p,e-(p[0].length-r.length),n);if(f)return t.dispatch(f.setMeta(i,{transform:f,from:e,to:n,text:r})),!0}return!1}function u(t,e){for(var n=t.plugins,r=0;r<n.length;r++){var o=n[r],i=void 0;if(o.spec.isInputRules&&(i=o.getState(t))){if(e){for(var s=t.tr,a=i.transform,c=a.steps.length-1;c>=0;c--)s.step(a.steps[c].invert(a.docs[c]));var l=s.doc.resolve(i.from).marks();e(s.replaceWith(i.from,i.to,t.schema.text(i.text,l)))}return!0}}return!1}new i(/--$/,"—"),new i(/\.\.\.$/,"…"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“"),new i(/"$/,"”"),new i(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘"),new i(/'$/,"’");function p(t,e,n,r){return new i(t,(function(t,i,s,a){var c=n instanceof Function?n(i):n,l=t.tr.delete(s,a),u=l.doc.resolve(s),p=u.blockRange(),f=p&&Object(o["h"])(p,e,c);if(!f)return null;l.wrap(p,f);var h=l.doc.resolve(s-1).nodeBefore;return h&&h.type==e&&Object(o["e"])(l.doc,s-1)&&(!r||r(i,h))&&l.join(s-1),l}))}function f(t,e,n){return new i(t,(function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e)?t.tr.delete(o,i).setBlockType(o,o,e,a):null}))}}}]);
//# sourceMappingURL=chunk-df63a5bc.de746109.js.map